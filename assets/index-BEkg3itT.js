(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ph(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ft={},Jr=[],Ei=()=>{},ib=()=>!1,Zc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Rh=e=>e.startsWith("onUpdate:"),zt=Object.assign,Mh=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},RA=Object.prototype.hasOwnProperty,rt=(e,t)=>RA.call(e,t),Le=Array.isArray,ea=e=>Gc(e)==="[object Map]",sb=e=>Gc(e)==="[object Set]",Ue=e=>typeof e=="function",St=e=>typeof e=="string",Rs=e=>typeof e=="symbol",yt=e=>e!==null&&typeof e=="object",rb=e=>(yt(e)||Ue(e))&&Ue(e.then)&&Ue(e.catch),ab=Object.prototype.toString,Gc=e=>ab.call(e),MA=e=>Gc(e).slice(8,-1),ob=e=>Gc(e)==="[object Object]",Oh=e=>St(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,to=Ph(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qc=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},OA=/-\w/g,Tn=Qc(e=>e.replace(OA,t=>t.slice(1).toUpperCase())),DA=/\B([A-Z])/g,mr=Qc(e=>e.replace(DA,"-$1").toLowerCase()),Di=Qc(e=>e.charAt(0).toUpperCase()+e.slice(1)),ju=Qc(e=>e?`on${Di(e)}`:""),ws=(e,t)=>!Object.is(e,t),zl=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},lb=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},Qd=e=>{const t=parseFloat(e);return isNaN(t)?e:t},NA=e=>{const t=St(e)?Number(e):NaN;return isNaN(t)?e:t};let Xm;const Jc=()=>Xm||(Xm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function pe(e){if(Le(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=St(i)?LA(i):pe(i);if(s)for(const r in s)t[r]=s[r]}return t}else if(St(e)||yt(e))return e}const BA=/;(?![^(]*\))/g,FA=/:([^]+)/,VA=/\/\*[^]*?\*\//g;function LA(e){const t={};return e.replace(VA,"").split(BA).forEach(n=>{if(n){const i=n.split(FA);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function se(e){let t="";if(St(e))t=e;else if(Le(e))for(let n=0;n<e.length;n++){const i=se(e[n]);i&&(t+=i+" ")}else if(yt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function UA(e){if(!e)return null;let{class:t,style:n}=e;return t&&!St(t)&&(e.class=se(t)),n&&(e.style=pe(n)),e}const $A="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zA=Ph($A);function cb(e){return!!e||e===""}const ub=e=>!!(e&&e.__v_isRef===!0),cn=e=>St(e)?e:e==null?"":Le(e)||yt(e)&&(e.toString===ab||!Ue(e.toString))?ub(e)?cn(e.value):JSON.stringify(e,db,2):String(e),db=(e,t)=>ub(t)?db(e,t.value):ea(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,s],r)=>(n[Xu(i,r)+" =>"]=s,n),{})}:sb(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Xu(n))}:Rs(t)?Xu(t):yt(t)&&!Le(t)&&!ob(t)?String(t):t,Xu=(e,t="")=>{var n;return Rs(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ln;class fb{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ln,!t&&ln&&(this.index=(ln.scopes||(ln.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ln;try{return ln=this,t()}finally{ln=n}}}on(){++this._on===1&&(this.prevScope=ln,ln=this)}off(){this._on>0&&--this._on===0&&(ln=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function oa(e){return new fb(e)}function hb(){return ln}function Ft(e,t=!1){ln&&ln.cleanups.push(e)}let vt;const Yu=new WeakSet;class gb{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ln&&ln.active&&ln.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yu.has(this)&&(Yu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ym(this),pb(this);const t=vt,n=ci;vt=this,ci=!0;try{return this.fn()}finally{yb(this),vt=t,ci=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Bh(t);this.deps=this.depsTail=void 0,Ym(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Jd(this)&&this.run()}get dirty(){return Jd(this)}}let mb=0,no,io;function vb(e,t=!1){if(e.flags|=8,t){e.next=io,io=e;return}e.next=no,no=e}function Dh(){mb++}function Nh(){if(--mb>0)return;if(io){let t=io;for(io=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;no;){let t=no;for(no=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function pb(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function yb(e){let t,n=e.depsTail,i=n;for(;i;){const s=i.prevDep;i.version===-1?(i===n&&(n=s),Bh(i),WA(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}e.deps=t,e.depsTail=n}function Jd(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(_b(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function _b(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===yo)||(e.globalVersion=yo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Jd(e))))return;e.flags|=2;const t=e.dep,n=vt,i=ci;vt=e,ci=!0;try{pb(e);const s=e.fn(e._value);(t.version===0||ws(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{vt=n,ci=i,yb(e),e.flags&=-3}}function Bh(e,t=!1){const{dep:n,prevSub:i,nextSub:s}=e;if(i&&(i.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Bh(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function WA(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ci=!0;const bb=[];function Yi(){bb.push(ci),ci=!1}function Ki(){const e=bb.pop();ci=e===void 0?!0:e}function Ym(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=vt;vt=void 0;try{t()}finally{vt=n}}}let yo=0;class HA{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Fh{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!vt||!ci||vt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==vt)n=this.activeLink=new HA(vt,this),vt.deps?(n.prevDep=vt.depsTail,vt.depsTail.nextDep=n,vt.depsTail=n):vt.deps=vt.depsTail=n,wb(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=vt.depsTail,n.nextDep=void 0,vt.depsTail.nextDep=n,vt.depsTail=n,vt.deps===n&&(vt.deps=i)}return n}trigger(t){this.version++,yo++,this.notify(t)}notify(t){Dh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Nh()}}}function wb(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)wb(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const tc=new WeakMap,qs=Symbol(""),ef=Symbol(""),_o=Symbol("");function dn(e,t,n){if(ci&&vt){let i=tc.get(e);i||tc.set(e,i=new Map);let s=i.get(n);s||(i.set(n,s=new Fh),s.map=i,s.key=n),s.track()}}function Hi(e,t,n,i,s,r){const a=tc.get(e);if(!a){yo++;return}const o=l=>{l&&l.trigger()};if(Dh(),t==="clear")a.forEach(o);else{const l=Le(e),u=l&&Oh(n);if(l&&n==="length"){const c=Number(i);a.forEach((d,f)=>{(f==="length"||f===_o||!Rs(f)&&f>=c)&&o(d)})}else switch((n!==void 0||a.has(void 0))&&o(a.get(n)),u&&o(a.get(_o)),t){case"add":l?u&&o(a.get("length")):(o(a.get(qs)),ea(e)&&o(a.get(ef)));break;case"delete":l||(o(a.get(qs)),ea(e)&&o(a.get(ef)));break;case"set":ea(e)&&o(a.get(qs));break}}Nh()}function jA(e,t){const n=tc.get(e);return n&&n.get(t)}function Pr(e){const t=Oe(e);return t===e?t:(dn(t,"iterate",_o),Kn(e)?t:t.map(Jt))}function eu(e){return dn(e=Oe(e),"iterate",_o),e}const XA={__proto__:null,[Symbol.iterator](){return Ku(this,Symbol.iterator,Jt)},concat(...e){return Pr(this).concat(...e.map(t=>Le(t)?Pr(t):t))},entries(){return Ku(this,"entries",e=>(e[1]=Jt(e[1]),e))},every(e,t){return Fi(this,"every",e,t,void 0,arguments)},filter(e,t){return Fi(this,"filter",e,t,n=>n.map(Jt),arguments)},find(e,t){return Fi(this,"find",e,t,Jt,arguments)},findIndex(e,t){return Fi(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Fi(this,"findLast",e,t,Jt,arguments)},findLastIndex(e,t){return Fi(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Fi(this,"forEach",e,t,void 0,arguments)},includes(...e){return qu(this,"includes",e)},indexOf(...e){return qu(this,"indexOf",e)},join(e){return Pr(this).join(e)},lastIndexOf(...e){return qu(this,"lastIndexOf",e)},map(e,t){return Fi(this,"map",e,t,void 0,arguments)},pop(){return La(this,"pop")},push(...e){return La(this,"push",e)},reduce(e,...t){return Km(this,"reduce",e,t)},reduceRight(e,...t){return Km(this,"reduceRight",e,t)},shift(){return La(this,"shift")},some(e,t){return Fi(this,"some",e,t,void 0,arguments)},splice(...e){return La(this,"splice",e)},toReversed(){return Pr(this).toReversed()},toSorted(e){return Pr(this).toSorted(e)},toSpliced(...e){return Pr(this).toSpliced(...e)},unshift(...e){return La(this,"unshift",e)},values(){return Ku(this,"values",Jt)}};function Ku(e,t,n){const i=eu(e),s=i[t]();return i!==e&&!Kn(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=n(r.value)),r}),s}const YA=Array.prototype;function Fi(e,t,n,i,s,r){const a=eu(e),o=a!==e&&!Kn(e),l=a[t];if(l!==YA[t]){const d=l.apply(e,r);return o?Jt(d):d}let u=n;a!==e&&(o?u=function(d,f){return n.call(this,Jt(d),f,e)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,e)}));const c=l.call(a,u,i);return o&&s?s(c):c}function Km(e,t,n,i){const s=eu(e);let r=n;return s!==e&&(Kn(e)?n.length>3&&(r=function(a,o,l){return n.call(this,a,o,l,e)}):r=function(a,o,l){return n.call(this,a,Jt(o),l,e)}),s[t](r,...i)}function qu(e,t,n){const i=Oe(e);dn(i,"iterate",_o);const s=i[t](...n);return(s===-1||s===!1)&&Uh(n[0])?(n[0]=Oe(n[0]),i[t](...n)):s}function La(e,t,n=[]){Yi(),Dh();const i=Oe(e)[t].apply(e,n);return Nh(),Ki(),i}const KA=Ph("__proto__,__v_isRef,__isVue"),xb=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Rs));function qA(e){Rs(e)||(e=String(e));const t=Oe(this);return dn(t,"has",e),t.hasOwnProperty(e)}class Sb{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?rC:kb:r?Cb:Ab).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const a=Le(t);if(!s){let l;if(a&&(l=XA[n]))return l;if(n==="hasOwnProperty")return qA}const o=Reflect.get(t,n,Rt(t)?t:i);return(Rs(n)?xb.has(n):KA(n))||(s||dn(t,"get",n),r)?o:Rt(o)?a&&Oh(n)?o:o.value:yt(o)?s?Aa(o):qt(o):o}}class Tb extends Sb{constructor(t=!1){super(!1,t)}set(t,n,i,s){let r=t[n];if(!this._isShallow){const l=As(r);if(!Kn(i)&&!As(i)&&(r=Oe(r),i=Oe(i)),!Le(t)&&Rt(r)&&!Rt(i))return l||(r.value=i),!0}const a=Le(t)&&Oh(n)?Number(n)<t.length:rt(t,n),o=Reflect.set(t,n,i,Rt(t)?t:s);return t===Oe(s)&&(a?ws(i,r)&&Hi(t,"set",n,i):Hi(t,"add",n,i)),o}deleteProperty(t,n){const i=rt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&i&&Hi(t,"delete",n,void 0),s}has(t,n){const i=Reflect.has(t,n);return(!Rs(n)||!xb.has(n))&&dn(t,"has",n),i}ownKeys(t){return dn(t,"iterate",Le(t)?"length":qs),Reflect.ownKeys(t)}}class ZA extends Sb{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const GA=new Tb,QA=new ZA,JA=new Tb(!0);const tf=e=>e,vl=e=>Reflect.getPrototypeOf(e);function eC(e,t,n){return function(...i){const s=this.__v_raw,r=Oe(s),a=ea(r),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=s[e](...i),c=n?tf:t?nc:Jt;return!t&&dn(r,"iterate",l?ef:qs),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:o?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function pl(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function tC(e,t){const n={get(s){const r=this.__v_raw,a=Oe(r),o=Oe(s);e||(ws(s,o)&&dn(a,"get",s),dn(a,"get",o));const{has:l}=vl(a),u=t?tf:e?nc:Jt;if(l.call(a,s))return u(r.get(s));if(l.call(a,o))return u(r.get(o));r!==a&&r.get(s)},get size(){const s=this.__v_raw;return!e&&dn(Oe(s),"iterate",qs),s.size},has(s){const r=this.__v_raw,a=Oe(r),o=Oe(s);return e||(ws(s,o)&&dn(a,"has",s),dn(a,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const a=this,o=a.__v_raw,l=Oe(o),u=t?tf:e?nc:Jt;return!e&&dn(l,"iterate",qs),o.forEach((c,d)=>s.call(r,u(c),u(d),a))}};return zt(n,e?{add:pl("add"),set:pl("set"),delete:pl("delete"),clear:pl("clear")}:{add(s){!t&&!Kn(s)&&!As(s)&&(s=Oe(s));const r=Oe(this);return vl(r).has.call(r,s)||(r.add(s),Hi(r,"add",s,s)),this},set(s,r){!t&&!Kn(r)&&!As(r)&&(r=Oe(r));const a=Oe(this),{has:o,get:l}=vl(a);let u=o.call(a,s);u||(s=Oe(s),u=o.call(a,s));const c=l.call(a,s);return a.set(s,r),u?ws(r,c)&&Hi(a,"set",s,r):Hi(a,"add",s,r),this},delete(s){const r=Oe(this),{has:a,get:o}=vl(r);let l=a.call(r,s);l||(s=Oe(s),l=a.call(r,s)),o&&o.call(r,s);const u=r.delete(s);return l&&Hi(r,"delete",s,void 0),u},clear(){const s=Oe(this),r=s.size!==0,a=s.clear();return r&&Hi(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=eC(s,e,t)}),n}function Vh(e,t){const n=tC(e,t);return(i,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(rt(n,s)&&s in i?n:i,s,r)}const nC={get:Vh(!1,!1)},iC={get:Vh(!1,!0)},sC={get:Vh(!0,!1)};const Ab=new WeakMap,Cb=new WeakMap,kb=new WeakMap,rC=new WeakMap;function aC(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oC(e){return e.__v_skip||!Object.isExtensible(e)?0:aC(MA(e))}function qt(e){return As(e)?e:Lh(e,!1,GA,nC,Ab)}function lC(e){return Lh(e,!1,JA,iC,Cb)}function Aa(e){return Lh(e,!0,QA,sC,kb)}function Lh(e,t,n,i,s){if(!yt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=oC(e);if(r===0)return e;const a=s.get(e);if(a)return a;const o=new Proxy(e,r===2?i:n);return s.set(e,o),o}function ta(e){return As(e)?ta(e.__v_raw):!!(e&&e.__v_isReactive)}function As(e){return!!(e&&e.__v_isReadonly)}function Kn(e){return!!(e&&e.__v_isShallow)}function Uh(e){return e?!!e.__v_raw:!1}function Oe(e){const t=e&&e.__v_raw;return t?Oe(t):e}function Eb(e){return!rt(e,"__v_skip")&&Object.isExtensible(e)&&lb(e,"__v_skip",!0),e}const Jt=e=>yt(e)?qt(e):e,nc=e=>yt(e)?Aa(e):e;function Rt(e){return e?e.__v_isRef===!0:!1}function le(e){return Ib(e,!1)}function he(e){return Ib(e,!0)}function Ib(e,t){return Rt(e)?e:new cC(e,t)}class cC{constructor(t,n){this.dep=new Fh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Oe(t),this._value=n?t:Jt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||Kn(t)||As(t);t=i?t:Oe(t),ws(t,n)&&(this._rawValue=t,this._value=i?t:Jt(t),this.dep.trigger())}}function En(e){return Rt(e)?e.value:e}function zn(e){return Ue(e)?e():En(e)}const uC={get:(e,t,n)=>t==="__v_raw"?e:En(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const s=e[t];return Rt(s)&&!Rt(n)?(s.value=n,!0):Reflect.set(e,t,n,i)}};function Pb(e){return ta(e)?e:new Proxy(e,uC)}function Ca(e){const t=Le(e)?new Array(e.length):{};for(const n in e)t[n]=Rb(e,n);return t}class dC{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return jA(Oe(this._object),this._key)}}class fC{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function U(e,t,n){return Rt(e)?e:Ue(e)?new fC(e):yt(e)&&arguments.length>1?Rb(e,t,n):le(e)}function Rb(e,t,n){const i=e[t];return Rt(i)?i:new dC(e,t,n)}class hC{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Fh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=yo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&vt!==this)return vb(this,!0),!0}get value(){const t=this.dep.track();return _b(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gC(e,t,n=!1){let i,s;return Ue(e)?i=e:(i=e.get,s=e.set),new hC(i,s,n)}const yl={},ic=new WeakMap;let zs;function mC(e,t=!1,n=zs){if(n){let i=ic.get(n);i||ic.set(n,i=[]),i.push(e)}}function vC(e,t,n=ft){const{immediate:i,deep:s,once:r,scheduler:a,augmentJob:o,call:l}=n,u=b=>s?b:Kn(b)||s===!1||s===0?ji(b,1):ji(b);let c,d,f,h,g=!1,v=!1;if(Rt(e)?(d=()=>e.value,g=Kn(e)):ta(e)?(d=()=>u(e),g=!0):Le(e)?(v=!0,g=e.some(b=>ta(b)||Kn(b)),d=()=>e.map(b=>{if(Rt(b))return b.value;if(ta(b))return u(b);if(Ue(b))return l?l(b,2):b()})):Ue(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){Yi();try{f()}finally{Ki()}}const b=zs;zs=c;try{return l?l(e,3,[h]):e(h)}finally{zs=b}}:d=Ei,t&&s){const b=d,S=s===!0?1/0:s;d=()=>ji(b(),S)}const m=hb(),p=()=>{c.stop(),m&&m.active&&Mh(m.effects,c)};if(r&&t){const b=t;t=(...S)=>{b(...S),p()}}let y=v?new Array(e.length).fill(yl):yl;const _=b=>{if(!(!(c.flags&1)||!c.dirty&&!b))if(t){const S=c.run();if(s||g||(v?S.some((x,I)=>ws(x,y[I])):ws(S,y))){f&&f();const x=zs;zs=c;try{const I=[S,y===yl?void 0:v&&y[0]===yl?[]:y,h];y=S,l?l(t,3,I):t(...I)}finally{zs=x}}}else c.run()};return o&&o(_),c=new gb(d),c.scheduler=a?()=>a(_,!1):_,h=b=>mC(b,!1,c),f=c.onStop=()=>{const b=ic.get(c);if(b){if(l)l(b,4);else for(const S of b)S();ic.delete(c)}},t?i?_(!0):y=c.run():a?a(_.bind(null,!0),!0):c.run(),p.pause=c.pause.bind(c),p.resume=c.resume.bind(c),p.stop=p,p}function ji(e,t=1/0,n){if(t<=0||!yt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Rt(e))ji(e.value,t,n);else if(Le(e))for(let i=0;i<e.length;i++)ji(e[i],t,n);else if(sb(e)||ea(e))e.forEach(i=>{ji(i,t,n)});else if(ob(e)){for(const i in e)ji(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&ji(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ko(e,t,n,i){try{return i?e(...i):e()}catch(s){tu(s,t,n)}}function ui(e,t,n,i){if(Ue(e)){const s=Ko(e,t,n,i);return s&&rb(s)&&s.catch(r=>{tu(r,t,n)}),s}if(Le(e)){const s=[];for(let r=0;r<e.length;r++)s.push(ui(e[r],t,n,i));return s}}function tu(e,t,n,i=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||ft;if(t){let o=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const c=o.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,l,u)===!1)return}o=o.parent}if(r){Yi(),Ko(r,null,10,[e,l,u]),Ki();return}}pC(e,n,s,i,a)}function pC(e,t,n,i=!0,s=!1){if(s)throw e;console.error(e)}const Sn=[];let Si=-1;const na=[];let ms=null,$r=0;const Mb=Promise.resolve();let sc=null;function je(e){const t=sc||Mb;return e?t.then(this?e.bind(this):e):t}function yC(e){let t=Si+1,n=Sn.length;for(;t<n;){const i=t+n>>>1,s=Sn[i],r=bo(s);r<e||r===e&&s.flags&2?t=i+1:n=i}return t}function $h(e){if(!(e.flags&1)){const t=bo(e),n=Sn[Sn.length-1];!n||!(e.flags&2)&&t>=bo(n)?Sn.push(e):Sn.splice(yC(t),0,e),e.flags|=1,Ob()}}function Ob(){sc||(sc=Mb.then(Nb))}function _C(e){Le(e)?na.push(...e):ms&&e.id===-1?ms.splice($r+1,0,e):e.flags&1||(na.push(e),e.flags|=1),Ob()}function qm(e,t,n=Si+1){for(;n<Sn.length;n++){const i=Sn[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;Sn.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Db(e){if(na.length){const t=[...new Set(na)].sort((n,i)=>bo(n)-bo(i));if(na.length=0,ms){ms.push(...t);return}for(ms=t,$r=0;$r<ms.length;$r++){const n=ms[$r];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ms=null,$r=0}}const bo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Nb(e){try{for(Si=0;Si<Sn.length;Si++){const t=Sn[Si];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ko(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Si<Sn.length;Si++){const t=Sn[Si];t&&(t.flags&=-2)}Si=-1,Sn.length=0,Db(),sc=null,(Sn.length||na.length)&&Nb()}}let Fn=null,Bb=null;function rc(e){const t=Fn;return Fn=e,Bb=e&&e.type.__scopeId||null,t}function st(e,t=Fn,n){if(!t||e._n)return e;const i=(...s)=>{i._d&&lc(-1);const r=rc(t);let a;try{a=e(...s)}finally{rc(r),i._d&&lc(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function _t(e,t){if(Fn===null)return e;const n=ru(Fn),i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[r,a,o,l=ft]=t[s];r&&(Ue(r)&&(r={mounted:r,updated:r}),r.deep&&ji(a),i.push({dir:r,instance:n,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function Ns(e,t,n,i){const s=e.dirs,r=t&&t.dirs;for(let a=0;a<s.length;a++){const o=s[a];r&&(o.oldValue=r[a].value);let l=o.dir[i];l&&(Yi(),ui(l,n,8,[e.el,o,e,t]),Ki())}}const Fb=Symbol("_vte"),Vb=e=>e.__isTeleport,so=e=>e&&(e.disabled||e.disabled===""),Zm=e=>e&&(e.defer||e.defer===""),Gm=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Qm=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,nf=(e,t)=>{const n=e&&e.to;return St(n)?t?t(n):null:n},Lb={name:"Teleport",__isTeleport:!0,process(e,t,n,i,s,r,a,o,l,u){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:g,createText:v,createComment:m}}=u,p=so(t.props);let{shapeFlag:y,children:_,dynamicChildren:b}=t;if(e==null){const S=t.el=v(""),x=t.anchor=v("");h(S,n,i),h(x,n,i);const I=(k,P)=>{y&16&&(s&&s.isCE&&(s.ce._teleportTarget=k),c(_,k,P,s,r,a,o,l))},T=()=>{const k=t.target=nf(t.props,g),P=Ub(k,t,v,h);k&&(a!=="svg"&&Gm(k)?a="svg":a!=="mathml"&&Qm(k)&&(a="mathml"),p||(I(k,P),Wl(t,!1)))};p&&(I(n,x),Wl(t,!0)),Zm(t.props)?(t.el.__isMounted=!1,xn(()=>{T(),delete t.el.__isMounted},r)):T()}else{if(Zm(t.props)&&e.el.__isMounted===!1){xn(()=>{Lb.process(e,t,n,i,s,r,a,o,l,u)},r);return}t.el=e.el,t.targetStart=e.targetStart;const S=t.anchor=e.anchor,x=t.target=e.target,I=t.targetAnchor=e.targetAnchor,T=so(e.props),k=T?n:x,P=T?S:I;if(a==="svg"||Gm(x)?a="svg":(a==="mathml"||Qm(x))&&(a="mathml"),b?(f(e.dynamicChildren,b,k,s,r,a,o),Kh(e,t,!0)):l||d(e,t,k,P,s,r,a,o,!1),p)T?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):_l(t,n,S,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const D=t.target=nf(t.props,g);D&&_l(t,D,null,u,0)}else T&&_l(t,x,I,u,1);Wl(t,p)}},remove(e,t,n,{um:i,o:{remove:s}},r){const{shapeFlag:a,children:o,anchor:l,targetStart:u,targetAnchor:c,target:d,props:f}=e;if(d&&(s(u),s(c)),r&&s(l),a&16){const h=r||!so(f);for(let g=0;g<o.length;g++){const v=o[g];i(v,t,n,h,!!v.dynamicChildren)}}},move:_l,hydrate:bC};function _l(e,t,n,{o:{insert:i},m:s},r=2){r===0&&i(e.targetAnchor,t,n);const{el:a,anchor:o,shapeFlag:l,children:u,props:c}=e,d=r===2;if(d&&i(a,t,n),(!d||so(c))&&l&16)for(let f=0;f<u.length;f++)s(u[f],t,n,2);d&&i(o,t,n)}function bC(e,t,n,i,s,r,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:u,createText:c}},d){function f(v,m,p,y){m.anchor=d(a(v),m,o(v),n,i,s,r),m.targetStart=p,m.targetAnchor=y}const h=t.target=nf(t.props,l),g=so(t.props);if(h){const v=h._lpa||h.firstChild;if(t.shapeFlag&16)if(g)f(e,t,v,v&&a(v));else{t.anchor=a(e);let m=v;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")t.targetStart=m;else if(m.data==="teleport anchor"){t.targetAnchor=m,h._lpa=t.targetAnchor&&a(t.targetAnchor);break}}m=a(m)}t.targetAnchor||Ub(h,t,c,u),d(v&&a(v),t,h,n,i,s,r)}Wl(t,g)}else g&&t.shapeFlag&16&&f(e,t,e,a(e));return t.anchor&&a(t.anchor)}const wC=Lb;function Wl(e,t){const n=e.ctx;if(n&&n.ut){let i,s;for(t?(i=e.el,s=e.anchor):(i=e.targetStart,s=e.targetAnchor);i&&i!==s;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function Ub(e,t,n,i){const s=t.targetStart=n(""),r=t.targetAnchor=n("");return s[Fb]=r,e&&(i(s,e),i(r,e)),r}const Ui=Symbol("_leaveCb"),bl=Symbol("_enterCb");function $b(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Wt(()=>{e.isMounted=!0}),Ht(()=>{e.isUnmounting=!0}),e}const Xn=[Function,Array],zb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xn,onEnter:Xn,onAfterEnter:Xn,onEnterCancelled:Xn,onBeforeLeave:Xn,onLeave:Xn,onAfterLeave:Xn,onLeaveCancelled:Xn,onBeforeAppear:Xn,onAppear:Xn,onAfterAppear:Xn,onAppearCancelled:Xn},Wb=e=>{const t=e.subTree;return t.component?Wb(t.component):t},xC={name:"BaseTransition",props:zb,setup(e,{slots:t}){const n=Zo(),i=$b();return()=>{const s=t.default&&zh(t.default(),!0);if(!s||!s.length)return;const r=Hb(s),a=Oe(e),{mode:o}=a;if(i.isLeaving)return Zu(r);const l=Jm(r);if(!l)return Zu(r);let u=wo(l,a,i,n,d=>u=d);l.type!==hn&&sr(l,u);let c=n.subTree&&Jm(n.subTree);if(c&&c.type!==hn&&!Ws(c,l)&&Wb(n).type!==hn){let d=wo(c,a,i,n);if(sr(c,d),o==="out-in"&&l.type!==hn)return i.isLeaving=!0,d.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,c=void 0},Zu(r);o==="in-out"&&l.type!==hn?d.delayLeave=(f,h,g)=>{const v=jb(i,c);v[String(c.key)]=c,f[Ui]=()=>{h(),f[Ui]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{g(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return r}}};function Hb(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==hn){t=n;break}}return t}const SC=xC;function jb(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function wo(e,t,n,i,s){const{appear:r,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:g,onLeaveCancelled:v,onBeforeAppear:m,onAppear:p,onAfterAppear:y,onAppearCancelled:_}=t,b=String(e.key),S=jb(n,e),x=(k,P)=>{k&&ui(k,i,9,P)},I=(k,P)=>{const D=P[1];x(k,P),Le(k)?k.every(E=>E.length<=1)&&D():k.length<=1&&D()},T={mode:a,persisted:o,beforeEnter(k){let P=l;if(!n.isMounted)if(r)P=m||l;else return;k[Ui]&&k[Ui](!0);const D=S[b];D&&Ws(e,D)&&D.el[Ui]&&D.el[Ui](),x(P,[k])},enter(k){let P=u,D=c,E=d;if(!n.isMounted)if(r)P=p||u,D=y||c,E=_||d;else return;let O=!1;const N=k[bl]=L=>{O||(O=!0,L?x(E,[k]):x(D,[k]),T.delayedLeave&&T.delayedLeave(),k[bl]=void 0)};P?I(P,[k,N]):N()},leave(k,P){const D=String(e.key);if(k[bl]&&k[bl](!0),n.isUnmounting)return P();x(f,[k]);let E=!1;const O=k[Ui]=N=>{E||(E=!0,P(),N?x(v,[k]):x(g,[k]),k[Ui]=void 0,S[D]===e&&delete S[D])};S[D]=e,h?I(h,[k,O]):O()},clone(k){const P=wo(k,t,n,i,s);return s&&s(P),P}};return T}function Zu(e){if(nu(e))return e=qi(e),e.children=null,e}function Jm(e){if(!nu(e))return Vb(e.type)&&e.children?Hb(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Ue(n.default))return n.default()}}function sr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,sr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function zh(e,t=!1,n){let i=[],s=0;for(let r=0;r<e.length;r++){let a=e[r];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:r);a.type===Ae?(a.patchFlag&128&&s++,i=i.concat(zh(a.children,t,o))):(t||a.type!==hn)&&i.push(o!=null?qi(a,{key:o}):a)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function TC(e,t){return Ue(e)?zt({name:e.name},t,{setup:e}):e}function yn(){const e=Zo();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Xb(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ac=new WeakMap;function ro(e,t,n,i,s=!1){if(Le(e)){e.forEach((g,v)=>ro(g,t&&(Le(t)?t[v]:t),n,i,s));return}if(ao(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&ro(e,t,n,i.component.subTree);return}const r=i.shapeFlag&4?ru(i.component):i.el,a=s?null:r,{i:o,r:l}=e,u=t&&t.r,c=o.refs===ft?o.refs={}:o.refs,d=o.setupState,f=Oe(d),h=d===ft?ib:g=>rt(f,g);if(u!=null&&u!==l){if(ev(t),St(u))c[u]=null,h(u)&&(d[u]=null);else if(Rt(u)){u.value=null;const g=t;g.k&&(c[g.k]=null)}}if(Ue(l))Ko(l,o,12,[a,c]);else{const g=St(l),v=Rt(l);if(g||v){const m=()=>{if(e.f){const p=g?h(l)?d[l]:c[l]:l.value;if(s)Le(p)&&Mh(p,r);else if(Le(p))p.includes(r)||p.push(r);else if(g)c[l]=[r],h(l)&&(d[l]=c[l]);else{const y=[r];l.value=y,e.k&&(c[e.k]=y)}}else g?(c[l]=a,h(l)&&(d[l]=a)):v&&(l.value=a,e.k&&(c[e.k]=a))};if(a){const p=()=>{m(),ac.delete(e)};p.id=-1,ac.set(e,p),xn(p,n)}else ev(e),m()}}}function ev(e){const t=ac.get(e);t&&(t.flags|=8,ac.delete(e))}Jc().requestIdleCallback;Jc().cancelIdleCallback;const ao=e=>!!e.type.__asyncLoader,nu=e=>e.type.__isKeepAlive;function Yb(e,t){Kb(e,"a",t)}function Wh(e,t){Kb(e,"da",t)}function Kb(e,t,n=gn){const i=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(iu(t,i,n),n){let s=n.parent;for(;s&&s.parent;)nu(s.parent.vnode)&&AC(i,t,n,s),s=s.parent}}function AC(e,t,n,i){const s=iu(t,e,i,!0);jh(()=>{Mh(i[t],s)},n)}function iu(e,t,n=gn,i=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...a)=>{Yi();const o=Go(n),l=ui(t,n,e,a);return o(),Ki(),l});return i?s.unshift(r):s.push(r),r}}const ts=e=>(t,n=gn)=>{(!To||e==="sp")&&iu(e,(...i)=>t(...i),n)},ka=ts("bm"),Wt=ts("m"),qb=ts("bu"),Hh=ts("u"),Ht=ts("bum"),jh=ts("um"),CC=ts("sp"),kC=ts("rtg"),EC=ts("rtc");function IC(e,t=gn){iu("ec",e,t)}const Zb="components";function rn(e,t){return Gb(Zb,e,!0,t)||e}const PC=Symbol.for("v-ndc");function RC(e){return St(e)&&Gb(Zb,e,!1)||e}function Gb(e,t,n=!0,i=!1){const s=Fn||gn;if(s){const r=s.type;{const o=v2(r,!1);if(o&&(o===t||o===Tn(t)||o===Di(Tn(t))))return r}const a=tv(s[e]||r[e],t)||tv(s.appContext[e],t);return!a&&i?r:a}}function tv(e,t){return e&&(e[t]||e[Tn(t)]||e[Di(Tn(t))])}function nv(e,t,n,i){let s;const r=n,a=Le(e);if(a||St(e)){const o=a&&ta(e);let l=!1,u=!1;o&&(l=!Kn(e),u=As(e),e=eu(e)),s=new Array(e.length);for(let c=0,d=e.length;c<d;c++)s[c]=t(l?u?nc(Jt(e[c])):Jt(e[c]):e[c],c,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,r)}else if(yt(e))if(e[Symbol.iterator])s=Array.from(e,(o,l)=>t(o,l,void 0,r));else{const o=Object.keys(e);s=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];s[l]=t(e[c],c,l,r)}}else s=[];return s}const sf=e=>e?v0(e)?ru(e):sf(e.parent):null,oo=zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>sf(e.parent),$root:e=>sf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Jb(e),$forceUpdate:e=>e.f||(e.f=()=>{$h(e.update)}),$nextTick:e=>e.n||(e.n=je.bind(e.proxy)),$watch:e=>QC.bind(e)}),Gu=(e,t)=>e!==ft&&!e.__isScriptSetup&&rt(e,t),MC={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:a,type:o,appContext:l}=e;let u;if(t[0]!=="$"){const h=a[t];if(h!==void 0)switch(h){case 1:return i[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(Gu(i,t))return a[t]=1,i[t];if(s!==ft&&rt(s,t))return a[t]=2,s[t];if((u=e.propsOptions[0])&&rt(u,t))return a[t]=3,r[t];if(n!==ft&&rt(n,t))return a[t]=4,n[t];rf&&(a[t]=0)}}const c=oo[t];let d,f;if(c)return t==="$attrs"&&dn(e.attrs,"get",""),c(e);if((d=o.__cssModules)&&(d=d[t]))return d;if(n!==ft&&rt(n,t))return a[t]=4,n[t];if(f=l.config.globalProperties,rt(f,t))return f[t]},set({_:e},t,n){const{data:i,setupState:s,ctx:r}=e;return Gu(s,t)?(s[t]=n,!0):i!==ft&&rt(i,t)?(i[t]=n,!0):rt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:r,type:a}},o){let l,u;return!!(n[o]||e!==ft&&o[0]!=="$"&&rt(e,o)||Gu(t,o)||(l=r[0])&&rt(l,o)||rt(i,o)||rt(oo,o)||rt(s.config.globalProperties,o)||(u=a.__cssModules)&&u[o])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:rt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function iv(e){return Le(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let rf=!0;function OC(e){const t=Jb(e),n=e.proxy,i=e.ctx;rf=!1,t.beforeCreate&&sv(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:g,activated:v,deactivated:m,beforeDestroy:p,beforeUnmount:y,destroyed:_,unmounted:b,render:S,renderTracked:x,renderTriggered:I,errorCaptured:T,serverPrefetch:k,expose:P,inheritAttrs:D,components:E,directives:O,filters:N}=t;if(u&&DC(u,i,null),a)for(const G in a){const z=a[G];Ue(z)&&(i[G]=z.bind(n))}if(s){const G=s.call(n,n);yt(G)&&(e.data=qt(G))}if(rf=!0,r)for(const G in r){const z=r[G],$=Ue(z)?z.bind(n,n):Ue(z.get)?z.get.bind(n,n):Ei,B=!Ue(z)&&Ue(z.set)?z.set.bind(n):Ei,W=C({get:$,set:B});Object.defineProperty(i,G,{enumerable:!0,configurable:!0,get:()=>W.value,set:X=>W.value=X})}if(o)for(const G in o)Qb(o[G],i,n,G);if(l){const G=Ue(l)?l.call(n):l;Reflect.ownKeys(G).forEach(z=>{dt(z,G[z])})}c&&sv(c,e,"c");function H(G,z){Le(z)?z.forEach($=>G($.bind(n))):z&&G(z.bind(n))}if(H(ka,d),H(Wt,f),H(qb,h),H(Hh,g),H(Yb,v),H(Wh,m),H(IC,T),H(EC,x),H(kC,I),H(Ht,y),H(jh,b),H(CC,k),Le(P))if(P.length){const G=e.exposed||(e.exposed={});P.forEach(z=>{Object.defineProperty(G,z,{get:()=>n[z],set:$=>n[z]=$,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===Ei&&(e.render=S),D!=null&&(e.inheritAttrs=D),E&&(e.components=E),O&&(e.directives=O),k&&Xb(e)}function DC(e,t,n=Ei){Le(e)&&(e=af(e));for(const i in e){const s=e[i];let r;yt(s)?"default"in s?r=He(s.from||i,s.default,!0):r=He(s.from||i):r=He(s),Rt(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[i]=r}}function sv(e,t,n){ui(Le(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Qb(e,t,n,i){let s=i.includes(".")?u0(n,i):()=>n[i];if(St(e)){const r=t[e];Ue(r)&&me(s,r)}else if(Ue(e))me(s,e.bind(n));else if(yt(e))if(Le(e))e.forEach(r=>Qb(r,t,n,i));else{const r=Ue(e.handler)?e.handler.bind(n):t[e.handler];Ue(r)&&me(s,r,e)}}function Jb(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,o=r.get(t);let l;return o?l=o:!s.length&&!n&&!i?l=t:(l={},s.length&&s.forEach(u=>oc(l,u,a,!0)),oc(l,t,a)),yt(t)&&r.set(t,l),l}function oc(e,t,n,i=!1){const{mixins:s,extends:r}=t;r&&oc(e,r,n,!0),s&&s.forEach(a=>oc(e,a,n,!0));for(const a in t)if(!(i&&a==="expose")){const o=NC[a]||n&&n[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const NC={data:rv,props:av,emits:av,methods:Ka,computed:Ka,beforeCreate:wn,created:wn,beforeMount:wn,mounted:wn,beforeUpdate:wn,updated:wn,beforeDestroy:wn,beforeUnmount:wn,destroyed:wn,unmounted:wn,activated:wn,deactivated:wn,errorCaptured:wn,serverPrefetch:wn,components:Ka,directives:Ka,watch:FC,provide:rv,inject:BC};function rv(e,t){return t?e?function(){return zt(Ue(e)?e.call(this,this):e,Ue(t)?t.call(this,this):t)}:t:e}function BC(e,t){return Ka(af(e),af(t))}function af(e){if(Le(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function wn(e,t){return e?[...new Set([].concat(e,t))]:t}function Ka(e,t){return e?zt(Object.create(null),e,t):t}function av(e,t){return e?Le(e)&&Le(t)?[...new Set([...e,...t])]:zt(Object.create(null),iv(e),iv(t??{})):t}function FC(e,t){if(!e)return t;if(!t)return e;const n=zt(Object.create(null),e);for(const i in t)n[i]=wn(e[i],t[i]);return n}function e0(){return{app:null,config:{isNativeTag:ib,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let VC=0;function LC(e,t){return function(i,s=null){Ue(i)||(i=zt({},i)),s!=null&&!yt(s)&&(s=null);const r=e0(),a=new WeakSet,o=[];let l=!1;const u=r.app={_uid:VC++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:y2,get config(){return r.config},set config(c){},use(c,...d){return a.has(c)||(c&&Ue(c.install)?(a.add(c),c.install(u,...d)):Ue(c)&&(a.add(c),c(u,...d))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,d){return d?(r.components[c]=d,u):r.components[c]},directive(c,d){return d?(r.directives[c]=d,u):r.directives[c]},mount(c,d,f){if(!l){const h=u._ceVNode||w(i,s);return h.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),e(h,c,f),l=!0,u._container=c,c.__vue_app__=u,ru(h.component)}},onUnmount(c){o.push(c)},unmount(){l&&(ui(o,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return r.provides[c]=d,u},runWithContext(c){const d=ia;ia=u;try{return c()}finally{ia=d}}};return u}}let ia=null;function dt(e,t){if(gn){let n=gn.provides;const i=gn.parent&&gn.parent.provides;i===n&&(n=gn.provides=Object.create(i)),n[e]=t}}function He(e,t,n=!1){const i=Zo();if(i||ia){let s=ia?ia._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Ue(t)?t.call(i&&i.proxy):t}}const t0={},n0=()=>Object.create(t0),i0=e=>Object.getPrototypeOf(e)===t0;function UC(e,t,n,i=!1){const s={},r=n0();e.propsDefaults=Object.create(null),s0(e,t,s,r);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=i?s:lC(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function $C(e,t,n,i){const{props:s,attrs:r,vnode:{patchFlag:a}}=e,o=Oe(s),[l]=e.propsOptions;let u=!1;if((i||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(su(e.emitsOptions,f))continue;const h=t[f];if(l)if(rt(r,f))h!==r[f]&&(r[f]=h,u=!0);else{const g=Tn(f);s[g]=of(l,o,g,h,e,!1)}else h!==r[f]&&(r[f]=h,u=!0)}}}else{s0(e,t,s,r)&&(u=!0);let c;for(const d in o)(!t||!rt(t,d)&&((c=mr(d))===d||!rt(t,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(s[d]=of(l,o,d,void 0,e,!0)):delete s[d]);if(r!==o)for(const d in r)(!t||!rt(t,d))&&(delete r[d],u=!0)}u&&Hi(e.attrs,"set","")}function s0(e,t,n,i){const[s,r]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(to(l))continue;const u=t[l];let c;s&&rt(s,c=Tn(l))?!r||!r.includes(c)?n[c]=u:(o||(o={}))[c]=u:su(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,a=!0)}if(r){const l=Oe(n),u=o||ft;for(let c=0;c<r.length;c++){const d=r[c];n[d]=of(s,l,d,u[d],e,!rt(u,d))}}return a}function of(e,t,n,i,s,r){const a=e[n];if(a!=null){const o=rt(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Ue(l)){const{propsDefaults:u}=s;if(n in u)i=u[n];else{const c=Go(s);i=u[n]=l.call(null,t),c()}}else i=l;s.ce&&s.ce._setProp(n,i)}a[0]&&(r&&!o?i=!1:a[1]&&(i===""||i===mr(n))&&(i=!0))}return i}const zC=new WeakMap;function r0(e,t,n=!1){const i=n?zC:t.propsCache,s=i.get(e);if(s)return s;const r=e.props,a={},o=[];let l=!1;if(!Ue(e)){const c=d=>{l=!0;const[f,h]=r0(d,t,!0);zt(a,f),h&&o.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!l)return yt(e)&&i.set(e,Jr),Jr;if(Le(r))for(let c=0;c<r.length;c++){const d=Tn(r[c]);ov(d)&&(a[d]=ft)}else if(r)for(const c in r){const d=Tn(c);if(ov(d)){const f=r[c],h=a[d]=Le(f)||Ue(f)?{type:f}:zt({},f),g=h.type;let v=!1,m=!0;if(Le(g))for(let p=0;p<g.length;++p){const y=g[p],_=Ue(y)&&y.name;if(_==="Boolean"){v=!0;break}else _==="String"&&(m=!1)}else v=Ue(g)&&g.name==="Boolean";h[0]=v,h[1]=m,(v||rt(h,"default"))&&o.push(d)}}const u=[a,o];return yt(e)&&i.set(e,u),u}function ov(e){return e[0]!=="$"&&!to(e)}const Xh=e=>e==="_"||e==="_ctx"||e==="$stable",Yh=e=>Le(e)?e.map(Ai):[Ai(e)],WC=(e,t,n)=>{if(t._n)return t;const i=st((...s)=>Yh(t(...s)),n);return i._c=!1,i},a0=(e,t,n)=>{const i=e._ctx;for(const s in e){if(Xh(s))continue;const r=e[s];if(Ue(r))t[s]=WC(s,r,i);else if(r!=null){const a=Yh(r);t[s]=()=>a}}},o0=(e,t)=>{const n=Yh(t);e.slots.default=()=>n},l0=(e,t,n)=>{for(const i in t)(n||!Xh(i))&&(e[i]=t[i])},HC=(e,t,n)=>{const i=e.slots=n0();if(e.vnode.shapeFlag&32){const s=t._;s?(l0(i,t,n),n&&lb(i,"_",s,!0)):a0(t,i)}else t&&o0(e,t)},jC=(e,t,n)=>{const{vnode:i,slots:s}=e;let r=!0,a=ft;if(i.shapeFlag&32){const o=t._;o?n&&o===1?r=!1:l0(s,t,n):(r=!t.$stable,a0(t,s)),a=t}else t&&(o0(e,t),a={default:1});if(r)for(const o in s)!Xh(o)&&a[o]==null&&delete s[o]},xn=a2;function XC(e){return YC(e)}function YC(e,t){const n=Jc();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=Ei,insertStaticContent:g}=e,v=(R,F,Y,te=null,ae=null,ue=null,Se=void 0,be=null,Te=!!F.dynamicChildren)=>{if(R===F)return;R&&!Ws(R,F)&&(te=ee(R),X(R,ae,ue,!0),R=null),F.patchFlag===-2&&(Te=!1,F.dynamicChildren=null);const{type:ve,ref:Fe,shapeFlag:Me}=F;switch(ve){case qo:m(R,F,Y,te);break;case hn:p(R,F,Y,te);break;case Ju:R==null&&y(F,Y,te,Se);break;case Ae:E(R,F,Y,te,ae,ue,Se,be,Te);break;default:Me&1?S(R,F,Y,te,ae,ue,Se,be,Te):Me&6?O(R,F,Y,te,ae,ue,Se,be,Te):(Me&64||Me&128)&&ve.process(R,F,Y,te,ae,ue,Se,be,Te,ce)}Fe!=null&&ae?ro(Fe,R&&R.ref,ue,F||R,!F):Fe==null&&R&&R.ref!=null&&ro(R.ref,null,ue,R,!0)},m=(R,F,Y,te)=>{if(R==null)i(F.el=o(F.children),Y,te);else{const ae=F.el=R.el;F.children!==R.children&&u(ae,F.children)}},p=(R,F,Y,te)=>{R==null?i(F.el=l(F.children||""),Y,te):F.el=R.el},y=(R,F,Y,te)=>{[R.el,R.anchor]=g(R.children,F,Y,te,R.el,R.anchor)},_=({el:R,anchor:F},Y,te)=>{let ae;for(;R&&R!==F;)ae=f(R),i(R,Y,te),R=ae;i(F,Y,te)},b=({el:R,anchor:F})=>{let Y;for(;R&&R!==F;)Y=f(R),s(R),R=Y;s(F)},S=(R,F,Y,te,ae,ue,Se,be,Te)=>{F.type==="svg"?Se="svg":F.type==="math"&&(Se="mathml"),R==null?x(F,Y,te,ae,ue,Se,be,Te):k(R,F,ae,ue,Se,be,Te)},x=(R,F,Y,te,ae,ue,Se,be)=>{let Te,ve;const{props:Fe,shapeFlag:Me,transition:De,dirs:$e}=R;if(Te=R.el=a(R.type,ue,Fe&&Fe.is,Fe),Me&8?c(Te,R.children):Me&16&&T(R.children,Te,null,te,ae,Qu(R,ue),Se,be),$e&&Ns(R,null,te,"created"),I(Te,R,R.scopeId,Se,te),Fe){for(const mt in Fe)mt!=="value"&&!to(mt)&&r(Te,mt,null,Fe[mt],ue,te);"value"in Fe&&r(Te,"value",null,Fe.value,ue),(ve=Fe.onVnodeBeforeMount)&&_i(ve,te,R)}$e&&Ns(R,null,te,"beforeMount");const Ke=KC(ae,De);Ke&&De.beforeEnter(Te),i(Te,F,Y),((ve=Fe&&Fe.onVnodeMounted)||Ke||$e)&&xn(()=>{ve&&_i(ve,te,R),Ke&&De.enter(Te),$e&&Ns(R,null,te,"mounted")},ae)},I=(R,F,Y,te,ae)=>{if(Y&&h(R,Y),te)for(let ue=0;ue<te.length;ue++)h(R,te[ue]);if(ae){let ue=ae.subTree;if(F===ue||f0(ue.type)&&(ue.ssContent===F||ue.ssFallback===F)){const Se=ae.vnode;I(R,Se,Se.scopeId,Se.slotScopeIds,ae.parent)}}},T=(R,F,Y,te,ae,ue,Se,be,Te=0)=>{for(let ve=Te;ve<R.length;ve++){const Fe=R[ve]=be?vs(R[ve]):Ai(R[ve]);v(null,Fe,F,Y,te,ae,ue,Se,be)}},k=(R,F,Y,te,ae,ue,Se)=>{const be=F.el=R.el;let{patchFlag:Te,dynamicChildren:ve,dirs:Fe}=F;Te|=R.patchFlag&16;const Me=R.props||ft,De=F.props||ft;let $e;if(Y&&Bs(Y,!1),($e=De.onVnodeBeforeUpdate)&&_i($e,Y,F,R),Fe&&Ns(F,R,Y,"beforeUpdate"),Y&&Bs(Y,!0),(Me.innerHTML&&De.innerHTML==null||Me.textContent&&De.textContent==null)&&c(be,""),ve?P(R.dynamicChildren,ve,be,Y,te,Qu(F,ae),ue):Se||z(R,F,be,null,Y,te,Qu(F,ae),ue,!1),Te>0){if(Te&16)D(be,Me,De,Y,ae);else if(Te&2&&Me.class!==De.class&&r(be,"class",null,De.class,ae),Te&4&&r(be,"style",Me.style,De.style,ae),Te&8){const Ke=F.dynamicProps;for(let mt=0;mt<Ke.length;mt++){const ot=Ke[mt],Cn=Me[ot],kn=De[ot];(kn!==Cn||ot==="value")&&r(be,ot,Cn,kn,ae,Y)}}Te&1&&R.children!==F.children&&c(be,F.children)}else!Se&&ve==null&&D(be,Me,De,Y,ae);(($e=De.onVnodeUpdated)||Fe)&&xn(()=>{$e&&_i($e,Y,F,R),Fe&&Ns(F,R,Y,"updated")},te)},P=(R,F,Y,te,ae,ue,Se)=>{for(let be=0;be<F.length;be++){const Te=R[be],ve=F[be],Fe=Te.el&&(Te.type===Ae||!Ws(Te,ve)||Te.shapeFlag&198)?d(Te.el):Y;v(Te,ve,Fe,null,te,ae,ue,Se,!0)}},D=(R,F,Y,te,ae)=>{if(F!==Y){if(F!==ft)for(const ue in F)!to(ue)&&!(ue in Y)&&r(R,ue,F[ue],null,ae,te);for(const ue in Y){if(to(ue))continue;const Se=Y[ue],be=F[ue];Se!==be&&ue!=="value"&&r(R,ue,be,Se,ae,te)}"value"in Y&&r(R,"value",F.value,Y.value,ae)}},E=(R,F,Y,te,ae,ue,Se,be,Te)=>{const ve=F.el=R?R.el:o(""),Fe=F.anchor=R?R.anchor:o("");let{patchFlag:Me,dynamicChildren:De,slotScopeIds:$e}=F;$e&&(be=be?be.concat($e):$e),R==null?(i(ve,Y,te),i(Fe,Y,te),T(F.children||[],Y,Fe,ae,ue,Se,be,Te)):Me>0&&Me&64&&De&&R.dynamicChildren?(P(R.dynamicChildren,De,Y,ae,ue,Se,be),(F.key!=null||ae&&F===ae.subTree)&&Kh(R,F,!0)):z(R,F,Y,Fe,ae,ue,Se,be,Te)},O=(R,F,Y,te,ae,ue,Se,be,Te)=>{F.slotScopeIds=be,R==null?F.shapeFlag&512?ae.ctx.activate(F,Y,te,Se,Te):N(F,Y,te,ae,ue,Se,Te):L(R,F,Te)},N=(R,F,Y,te,ae,ue,Se)=>{const be=R.component=d2(R,te,ae);if(nu(R)&&(be.ctx.renderer=ce),f2(be,!1,Se),be.asyncDep){if(ae&&ae.registerDep(be,H,Se),!R.el){const Te=be.subTree=w(hn);p(null,Te,F,Y),R.placeholder=Te.el}}else H(be,R,F,Y,ae,ue,Se)},L=(R,F,Y)=>{const te=F.component=R.component;if(s2(R,F,Y))if(te.asyncDep&&!te.asyncResolved){G(te,F,Y);return}else te.next=F,te.update();else F.el=R.el,te.vnode=F},H=(R,F,Y,te,ae,ue,Se)=>{const be=()=>{if(R.isMounted){let{next:Me,bu:De,u:$e,parent:Ke,vnode:mt}=R;{const pi=c0(R);if(pi){Me&&(Me.el=mt.el,G(R,Me,Se)),pi.asyncDep.then(()=>{R.isUnmounted||be()});return}}let ot=Me,Cn;Bs(R,!1),Me?(Me.el=mt.el,G(R,Me,Se)):Me=mt,De&&zl(De),(Cn=Me.props&&Me.props.onVnodeBeforeUpdate)&&_i(Cn,Ke,Me,mt),Bs(R,!0);const kn=cv(R),vi=R.subTree;R.subTree=kn,v(vi,kn,d(vi.el),ee(vi),R,ae,ue),Me.el=kn.el,ot===null&&r2(R,kn.el),$e&&xn($e,ae),(Cn=Me.props&&Me.props.onVnodeUpdated)&&xn(()=>_i(Cn,Ke,Me,mt),ae)}else{let Me;const{el:De,props:$e}=F,{bm:Ke,m:mt,parent:ot,root:Cn,type:kn}=R,vi=ao(F);Bs(R,!1),Ke&&zl(Ke),!vi&&(Me=$e&&$e.onVnodeBeforeMount)&&_i(Me,ot,F),Bs(R,!0);{Cn.ce&&Cn.ce._def.shadowRoot!==!1&&Cn.ce._injectChildStyle(kn);const pi=R.subTree=cv(R);v(null,pi,Y,te,R,ae,ue),F.el=pi.el}if(mt&&xn(mt,ae),!vi&&(Me=$e&&$e.onVnodeMounted)){const pi=F;xn(()=>_i(Me,ot,pi),ae)}(F.shapeFlag&256||ot&&ao(ot.vnode)&&ot.vnode.shapeFlag&256)&&R.a&&xn(R.a,ae),R.isMounted=!0,F=Y=te=null}};R.scope.on();const Te=R.effect=new gb(be);R.scope.off();const ve=R.update=Te.run.bind(Te),Fe=R.job=Te.runIfDirty.bind(Te);Fe.i=R,Fe.id=R.uid,Te.scheduler=()=>$h(Fe),Bs(R,!0),ve()},G=(R,F,Y)=>{F.component=R;const te=R.vnode.props;R.vnode=F,R.next=null,$C(R,F.props,te,Y),jC(R,F.children,Y),Yi(),qm(R),Ki()},z=(R,F,Y,te,ae,ue,Se,be,Te=!1)=>{const ve=R&&R.children,Fe=R?R.shapeFlag:0,Me=F.children,{patchFlag:De,shapeFlag:$e}=F;if(De>0){if(De&128){B(ve,Me,Y,te,ae,ue,Se,be,Te);return}else if(De&256){$(ve,Me,Y,te,ae,ue,Se,be,Te);return}}$e&8?(Fe&16&&ye(ve,ae,ue),Me!==ve&&c(Y,Me)):Fe&16?$e&16?B(ve,Me,Y,te,ae,ue,Se,be,Te):ye(ve,ae,ue,!0):(Fe&8&&c(Y,""),$e&16&&T(Me,Y,te,ae,ue,Se,be,Te))},$=(R,F,Y,te,ae,ue,Se,be,Te)=>{R=R||Jr,F=F||Jr;const ve=R.length,Fe=F.length,Me=Math.min(ve,Fe);let De;for(De=0;De<Me;De++){const $e=F[De]=Te?vs(F[De]):Ai(F[De]);v(R[De],$e,Y,null,ae,ue,Se,be,Te)}ve>Fe?ye(R,ae,ue,!0,!1,Me):T(F,Y,te,ae,ue,Se,be,Te,Me)},B=(R,F,Y,te,ae,ue,Se,be,Te)=>{let ve=0;const Fe=F.length;let Me=R.length-1,De=Fe-1;for(;ve<=Me&&ve<=De;){const $e=R[ve],Ke=F[ve]=Te?vs(F[ve]):Ai(F[ve]);if(Ws($e,Ke))v($e,Ke,Y,null,ae,ue,Se,be,Te);else break;ve++}for(;ve<=Me&&ve<=De;){const $e=R[Me],Ke=F[De]=Te?vs(F[De]):Ai(F[De]);if(Ws($e,Ke))v($e,Ke,Y,null,ae,ue,Se,be,Te);else break;Me--,De--}if(ve>Me){if(ve<=De){const $e=De+1,Ke=$e<Fe?F[$e].el:te;for(;ve<=De;)v(null,F[ve]=Te?vs(F[ve]):Ai(F[ve]),Y,Ke,ae,ue,Se,be,Te),ve++}}else if(ve>De)for(;ve<=Me;)X(R[ve],ae,ue,!0),ve++;else{const $e=ve,Ke=ve,mt=new Map;for(ve=Ke;ve<=De;ve++){const Rn=F[ve]=Te?vs(F[ve]):Ai(F[ve]);Rn.key!=null&&mt.set(Rn.key,ve)}let ot,Cn=0;const kn=De-Ke+1;let vi=!1,pi=0;const Va=new Array(kn);for(ve=0;ve<kn;ve++)Va[ve]=0;for(ve=$e;ve<=Me;ve++){const Rn=R[ve];if(Cn>=kn){X(Rn,ae,ue,!0);continue}let yi;if(Rn.key!=null)yi=mt.get(Rn.key);else for(ot=Ke;ot<=De;ot++)if(Va[ot-Ke]===0&&Ws(Rn,F[ot])){yi=ot;break}yi===void 0?X(Rn,ae,ue,!0):(Va[yi-Ke]=ve+1,yi>=pi?pi=yi:vi=!0,v(Rn,F[yi],Y,null,ae,ue,Se,be,Te),Cn++)}const Wm=vi?qC(Va):Jr;for(ot=Wm.length-1,ve=kn-1;ve>=0;ve--){const Rn=Ke+ve,yi=F[Rn],Hm=F[Rn+1],jm=Rn+1<Fe?Hm.el||Hm.placeholder:te;Va[ve]===0?v(null,yi,Y,jm,ae,ue,Se,be,Te):vi&&(ot<0||ve!==Wm[ot]?W(yi,Y,jm,2):ot--)}}},W=(R,F,Y,te,ae=null)=>{const{el:ue,type:Se,transition:be,children:Te,shapeFlag:ve}=R;if(ve&6){W(R.component.subTree,F,Y,te);return}if(ve&128){R.suspense.move(F,Y,te);return}if(ve&64){Se.move(R,F,Y,ce);return}if(Se===Ae){i(ue,F,Y);for(let Me=0;Me<Te.length;Me++)W(Te[Me],F,Y,te);i(R.anchor,F,Y);return}if(Se===Ju){_(R,F,Y);return}if(te!==2&&ve&1&&be)if(te===0)be.beforeEnter(ue),i(ue,F,Y),xn(()=>be.enter(ue),ae);else{const{leave:Me,delayLeave:De,afterLeave:$e}=be,Ke=()=>{R.ctx.isUnmounted?s(ue):i(ue,F,Y)},mt=()=>{ue._isLeaving&&ue[Ui](!0),Me(ue,()=>{Ke(),$e&&$e()})};De?De(ue,Ke,mt):mt()}else i(ue,F,Y)},X=(R,F,Y,te=!1,ae=!1)=>{const{type:ue,props:Se,ref:be,children:Te,dynamicChildren:ve,shapeFlag:Fe,patchFlag:Me,dirs:De,cacheIndex:$e}=R;if(Me===-2&&(ae=!1),be!=null&&(Yi(),ro(be,null,Y,R,!0),Ki()),$e!=null&&(F.renderCache[$e]=void 0),Fe&256){F.ctx.deactivate(R);return}const Ke=Fe&1&&De,mt=!ao(R);let ot;if(mt&&(ot=Se&&Se.onVnodeBeforeUnmount)&&_i(ot,F,R),Fe&6)de(R.component,Y,te);else{if(Fe&128){R.suspense.unmount(Y,te);return}Ke&&Ns(R,null,F,"beforeUnmount"),Fe&64?R.type.remove(R,F,Y,ce,te):ve&&!ve.hasOnce&&(ue!==Ae||Me>0&&Me&64)?ye(ve,F,Y,!1,!0):(ue===Ae&&Me&384||!ae&&Fe&16)&&ye(Te,F,Y),te&&re(R)}(mt&&(ot=Se&&Se.onVnodeUnmounted)||Ke)&&xn(()=>{ot&&_i(ot,F,R),Ke&&Ns(R,null,F,"unmounted")},Y)},re=R=>{const{type:F,el:Y,anchor:te,transition:ae}=R;if(F===Ae){ge(Y,te);return}if(F===Ju){b(R);return}const ue=()=>{s(Y),ae&&!ae.persisted&&ae.afterLeave&&ae.afterLeave()};if(R.shapeFlag&1&&ae&&!ae.persisted){const{leave:Se,delayLeave:be}=ae,Te=()=>Se(Y,ue);be?be(R.el,ue,Te):Te()}else ue()},ge=(R,F)=>{let Y;for(;R!==F;)Y=f(R),s(R),R=Y;s(F)},de=(R,F,Y)=>{const{bum:te,scope:ae,job:ue,subTree:Se,um:be,m:Te,a:ve}=R;lv(Te),lv(ve),te&&zl(te),ae.stop(),ue&&(ue.flags|=8,X(Se,R,F,Y)),be&&xn(be,F),xn(()=>{R.isUnmounted=!0},F)},ye=(R,F,Y,te=!1,ae=!1,ue=0)=>{for(let Se=ue;Se<R.length;Se++)X(R[Se],F,Y,te,ae)},ee=R=>{if(R.shapeFlag&6)return ee(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const F=f(R.anchor||R.el),Y=F&&F[Fb];return Y?f(Y):F};let _e=!1;const ke=(R,F,Y)=>{R==null?F._vnode&&X(F._vnode,null,null,!0):v(F._vnode||null,R,F,null,null,null,Y),F._vnode=R,_e||(_e=!0,qm(),Db(),_e=!1)},ce={p:v,um:X,m:W,r:re,mt:N,mc:T,pc:z,pbc:P,n:ee,o:e};return{render:ke,hydrate:void 0,createApp:LC(ke)}}function Qu({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Bs({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function KC(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Kh(e,t,n=!1){const i=e.children,s=t.children;if(Le(i)&&Le(s))for(let r=0;r<i.length;r++){const a=i[r];let o=s[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[r]=vs(s[r]),o.el=a.el),!n&&o.patchFlag!==-2&&Kh(a,o)),o.type===qo&&o.patchFlag!==-1&&(o.el=a.el),o.type===hn&&!o.el&&(o.el=a.el)}}function qC(e){const t=e.slice(),n=[0];let i,s,r,a,o;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(s=n[n.length-1],e[s]<u){t[i]=s,n.push(i);continue}for(r=0,a=n.length-1;r<a;)o=r+a>>1,e[n[o]]<u?r=o+1:a=o;u<e[n[r]]&&(r>0&&(t[i]=n[r-1]),n[r]=i)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=t[a];return n}function c0(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:c0(t)}function lv(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ZC=Symbol.for("v-scx"),GC=()=>He(ZC);function ht(e,t){return qh(e,null,t)}function me(e,t,n){return qh(e,t,n)}function qh(e,t,n=ft){const{immediate:i,deep:s,flush:r,once:a}=n,o=zt({},n),l=t&&i||!t&&r!=="post";let u;if(To){if(r==="sync"){const h=GC();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Ei,h.resume=Ei,h.pause=Ei,h}}const c=gn;o.call=(h,g,v)=>ui(h,c,g,v);let d=!1;r==="post"?o.scheduler=h=>{xn(h,c&&c.suspense)}:r!=="sync"&&(d=!0,o.scheduler=(h,g)=>{g?h():$h(h)}),o.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const f=vC(e,t,o);return To&&(u?u.push(f):l&&f()),f}function QC(e,t,n){const i=this.proxy,s=St(e)?e.includes(".")?u0(i,e):()=>i[e]:e.bind(i,i);let r;Ue(t)?r=t:(r=t.handler,n=t);const a=Go(this),o=qh(s,r.bind(i),n);return a(),o}function u0(e,t){const n=t.split(".");return()=>{let i=e;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}const JC=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Tn(t)}Modifiers`]||e[`${mr(t)}Modifiers`];function e2(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||ft;let s=n;const r=t.startsWith("update:"),a=r&&JC(i,t.slice(7));a&&(a.trim&&(s=n.map(c=>St(c)?c.trim():c)),a.number&&(s=n.map(Qd)));let o,l=i[o=ju(t)]||i[o=ju(Tn(t))];!l&&r&&(l=i[o=ju(mr(t))]),l&&ui(l,e,6,s);const u=i[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,ui(u,e,6,s)}}const t2=new WeakMap;function d0(e,t,n=!1){const i=n?t2:t.emitsCache,s=i.get(e);if(s!==void 0)return s;const r=e.emits;let a={},o=!1;if(!Ue(e)){const l=u=>{const c=d0(u,t,!0);c&&(o=!0,zt(a,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!o?(yt(e)&&i.set(e,null),null):(Le(r)?r.forEach(l=>a[l]=null):zt(a,r),yt(e)&&i.set(e,a),a)}function su(e,t){return!e||!Zc(t)?!1:(t=t.slice(2).replace(/Once$/,""),rt(e,t[0].toLowerCase()+t.slice(1))||rt(e,mr(t))||rt(e,t))}function cv(e){const{type:t,vnode:n,proxy:i,withProxy:s,propsOptions:[r],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:d,data:f,setupState:h,ctx:g,inheritAttrs:v}=e,m=rc(e);let p,y;try{if(n.shapeFlag&4){const b=s||i,S=b;p=Ai(u.call(S,b,c,d,h,f,g)),y=o}else{const b=t;p=Ai(b.length>1?b(d,{attrs:o,slots:a,emit:l}):b(d,null)),y=t.props?o:n2(o)}}catch(b){lo.length=0,tu(b,e,1),p=w(hn)}let _=p;if(y&&v!==!1){const b=Object.keys(y),{shapeFlag:S}=_;b.length&&S&7&&(r&&b.some(Rh)&&(y=i2(y,r)),_=qi(_,y,!1,!0))}return n.dirs&&(_=qi(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&sr(_,n.transition),p=_,rc(m),p}const n2=e=>{let t;for(const n in e)(n==="class"||n==="style"||Zc(n))&&((t||(t={}))[n]=e[n]);return t},i2=(e,t)=>{const n={};for(const i in e)(!Rh(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function s2(e,t,n){const{props:i,children:s,component:r}=e,{props:a,children:o,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?uv(i,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(a[f]!==i[f]&&!su(u,f))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?uv(i,a,u):!0:!!a;return!1}function uv(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==e[r]&&!su(n,r))return!0}return!1}function r2({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const f0=e=>e.__isSuspense;function a2(e,t){t&&t.pendingBranch?Le(e)?t.effects.push(...e):t.effects.push(e):_C(e)}const Ae=Symbol.for("v-fgt"),qo=Symbol.for("v-txt"),hn=Symbol.for("v-cmt"),Ju=Symbol.for("v-stc"),lo=[];let Vn=null;function an(e=!1){lo.push(Vn=e?null:[])}function o2(){lo.pop(),Vn=lo[lo.length-1]||null}let xo=1;function lc(e,t=!1){xo+=e,e<0&&Vn&&t&&(Vn.hasOnce=!0)}function h0(e){return e.dynamicChildren=xo>0?Vn||Jr:null,o2(),xo>0&&Vn&&Vn.push(e),e}function fs(e,t,n,i,s,r){return h0(A(e,t,n,i,s,r,!0))}function hs(e,t,n,i,s){return h0(w(e,t,n,i,s,!0))}function So(e){return e?e.__v_isVNode===!0:!1}function Ws(e,t){return e.type===t.type&&e.key===t.key}const g0=({key:e})=>e??null,Hl=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?St(e)||Rt(e)||Ue(e)?{i:Fn,r:e,k:t,f:!!n}:e:null);function A(e,t=null,n=null,i=0,s=null,r=e===Ae?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&g0(t),ref:t&&Hl(t),scopeId:Bb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Fn};return o?(Zh(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=St(n)?8:16),xo>0&&!a&&Vn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Vn.push(l),l}const w=l2;function l2(e,t=null,n=null,i=0,s=null,r=!1){if((!e||e===PC)&&(e=hn),So(e)){const o=qi(e,t,!0);return n&&Zh(o,n),xo>0&&!r&&Vn&&(o.shapeFlag&6?Vn[Vn.indexOf(e)]=o:Vn.push(o)),o.patchFlag=-2,o}if(p2(e)&&(e=e.__vccOpts),t){t=m0(t);let{class:o,style:l}=t;o&&!St(o)&&(t.class=se(o)),yt(l)&&(Uh(l)&&!Le(l)&&(l=zt({},l)),t.style=pe(l))}const a=St(e)?1:f0(e)?128:Vb(e)?64:yt(e)?4:Ue(e)?2:0;return A(e,t,n,i,s,a,r,!0)}function m0(e){return e?Uh(e)||i0(e)?zt({},e):e:null}function qi(e,t,n=!1,i=!1){const{props:s,ref:r,patchFlag:a,children:o,transition:l}=e,u=t?ne(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&g0(u),ref:t&&t.ref?n&&r?Le(r)?r.concat(Hl(t)):[r,Hl(t)]:Hl(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ae?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&qi(e.ssContent),ssFallback:e.ssFallback&&qi(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&i&&sr(c,l.clone(c)),c}function Kt(e=" ",t=0){return w(qo,null,e,t)}function ed(e="",t=!1){return t?(an(),hs(hn,null,e)):w(hn,null,e)}function Ai(e){return e==null||typeof e=="boolean"?w(hn):Le(e)?w(Ae,null,e.slice()):So(e)?vs(e):w(qo,null,String(e))}function vs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:qi(e)}function Zh(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Le(t))n=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Zh(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!i0(t)?t._ctx=Fn:s===3&&Fn&&(Fn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ue(t)?(t={default:t,_ctx:Fn},n=32):(t=String(t),i&64?(n=16,t=[Kt(t)]):n=8);e.children=t,e.shapeFlag|=n}function ne(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=se([t.class,i.class]));else if(s==="style")t.style=pe([t.style,i.style]);else if(Zc(s)){const r=t[s],a=i[s];a&&r!==a&&!(Le(r)&&r.includes(a))&&(t[s]=r?[].concat(r,a):a)}else s!==""&&(t[s]=i[s])}return t}function _i(e,t,n,i=null){ui(e,t,7,[n,i])}const c2=e0();let u2=0;function d2(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||c2,r={uid:u2++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:r0(i,s),emitsOptions:d0(i,s),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:i.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=e2.bind(null,r),e.ce&&e.ce(r),r}let gn=null;const Zo=()=>gn||Fn;let cc,lf;{const e=Jc(),t=(n,i)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(i),r=>{s.length>1?s.forEach(a=>a(r)):s[0](r)}};cc=t("__VUE_INSTANCE_SETTERS__",n=>gn=n),lf=t("__VUE_SSR_SETTERS__",n=>To=n)}const Go=e=>{const t=gn;return cc(e),e.scope.on(),()=>{e.scope.off(),cc(t)}},dv=()=>{gn&&gn.scope.off(),cc(null)};function v0(e){return e.vnode.shapeFlag&4}let To=!1;function f2(e,t=!1,n=!1){t&&lf(t);const{props:i,children:s}=e.vnode,r=v0(e);UC(e,i,r,t),HC(e,s,n||t);const a=r?h2(e,t):void 0;return t&&lf(!1),a}function h2(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,MC);const{setup:i}=n;if(i){Yi();const s=e.setupContext=i.length>1?m2(e):null,r=Go(e),a=Ko(i,e,0,[e.props,s]),o=rb(a);if(Ki(),r(),(o||e.sp)&&!ao(e)&&Xb(e),o){if(a.then(dv,dv),t)return a.then(l=>{fv(e,l)}).catch(l=>{tu(l,e,0)});e.asyncDep=a}else fv(e,a)}else p0(e)}function fv(e,t,n){Ue(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:yt(t)&&(e.setupState=Pb(t)),p0(e)}function p0(e,t,n){const i=e.type;e.render||(e.render=i.render||Ei);{const s=Go(e);Yi();try{OC(e)}finally{Ki(),s()}}}const g2={get(e,t){return dn(e,"get",""),e[t]}};function m2(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,g2),slots:e.slots,emit:e.emit,expose:t}}function ru(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Pb(Eb(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in oo)return oo[n](e)},has(t,n){return n in t||n in oo}})):e.proxy}function v2(e,t=!0){return Ue(e)?e.displayName||e.name:e.name||t&&e.__name}function p2(e){return Ue(e)&&"__vccOpts"in e}const C=(e,t)=>gC(e,t,To);function ns(e,t,n){const i=(r,a,o)=>{lc(-1);try{return w(r,a,o)}finally{lc(1)}},s=arguments.length;return s===2?yt(t)&&!Le(t)?So(t)?i(e,null,[t]):i(e,t):i(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&So(n)&&(n=[n]),i(e,t,n))}const y2="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cf;const hv=typeof window<"u"&&window.trustedTypes;if(hv)try{cf=hv.createPolicy("vue",{createHTML:e=>e})}catch{}const y0=cf?e=>cf.createHTML(e):e=>e,_2="http://www.w3.org/2000/svg",b2="http://www.w3.org/1998/Math/MathML",Li=typeof document<"u"?document:null,gv=Li&&Li.createElement("template"),w2={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const s=t==="svg"?Li.createElementNS(_2,e):t==="mathml"?Li.createElementNS(b2,e):n?Li.createElement(e,{is:n}):Li.createElement(e);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>Li.createTextNode(e),createComment:e=>Li.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Li.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,s,r){const a=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{gv.innerHTML=y0(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const o=gv.content;if(i==="svg"||i==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},os="transition",Ua="animation",la=Symbol("_vtc"),_0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},b0=zt({},zb,_0),x2=e=>(e.displayName="Transition",e.props=b0,e),Cs=x2((e,{slots:t})=>ns(SC,w0(e),t)),Fs=(e,t=[])=>{Le(e)?e.forEach(n=>n(...t)):e&&e(...t)},mv=e=>e?Le(e)?e.some(t=>t.length>1):e.length>1:!1;function w0(e){const t={};for(const E in e)E in _0||(t[E]=e[E]);if(e.css===!1)return t;const{name:n="v",type:i,duration:s,enterFromClass:r=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:u=a,appearToClass:c=o,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,g=S2(s),v=g&&g[0],m=g&&g[1],{onBeforeEnter:p,onEnter:y,onEnterCancelled:_,onLeave:b,onLeaveCancelled:S,onBeforeAppear:x=p,onAppear:I=y,onAppearCancelled:T=_}=t,k=(E,O,N,L)=>{E._enterCancelled=L,gs(E,O?c:o),gs(E,O?u:a),N&&N()},P=(E,O)=>{E._isLeaving=!1,gs(E,d),gs(E,h),gs(E,f),O&&O()},D=E=>(O,N)=>{const L=E?I:y,H=()=>k(O,E,N);Fs(L,[O,H]),vv(()=>{gs(O,E?l:r),xi(O,E?c:o),mv(L)||pv(O,i,v,H)})};return zt(t,{onBeforeEnter(E){Fs(p,[E]),xi(E,r),xi(E,a)},onBeforeAppear(E){Fs(x,[E]),xi(E,l),xi(E,u)},onEnter:D(!1),onAppear:D(!0),onLeave(E,O){E._isLeaving=!0;const N=()=>P(E,O);xi(E,d),E._enterCancelled?(xi(E,f),uf()):(uf(),xi(E,f)),vv(()=>{E._isLeaving&&(gs(E,d),xi(E,h),mv(b)||pv(E,i,m,N))}),Fs(b,[E,N])},onEnterCancelled(E){k(E,!1,void 0,!0),Fs(_,[E])},onAppearCancelled(E){k(E,!0,void 0,!0),Fs(T,[E])},onLeaveCancelled(E){P(E),Fs(S,[E])}})}function S2(e){if(e==null)return null;if(yt(e))return[td(e.enter),td(e.leave)];{const t=td(e);return[t,t]}}function td(e){return NA(e)}function xi(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[la]||(e[la]=new Set)).add(t)}function gs(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[la];n&&(n.delete(t),n.size||(e[la]=void 0))}function vv(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let T2=0;function pv(e,t,n,i){const s=e._endId=++T2,r=()=>{s===e._endId&&i()};if(n!=null)return setTimeout(r,n);const{type:a,timeout:o,propCount:l}=x0(e,t);if(!a)return i();const u=a+"end";let c=0;const d=()=>{e.removeEventListener(u,f),r()},f=h=>{h.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},o+1),e.addEventListener(u,f)}function x0(e,t){const n=window.getComputedStyle(e),i=g=>(n[g]||"").split(", "),s=i(`${os}Delay`),r=i(`${os}Duration`),a=yv(s,r),o=i(`${Ua}Delay`),l=i(`${Ua}Duration`),u=yv(o,l);let c=null,d=0,f=0;t===os?a>0&&(c=os,d=a,f=r.length):t===Ua?u>0&&(c=Ua,d=u,f=l.length):(d=Math.max(a,u),c=d>0?a>u?os:Ua:null,f=c?c===os?r.length:l.length:0);const h=c===os&&/\b(?:transform|all)(?:,|$)/.test(i(`${os}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:h}}function yv(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>_v(n)+_v(e[i])))}function _v(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function uf(){return document.body.offsetHeight}function A2(e,t,n){const i=e[la];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const uc=Symbol("_vod"),S0=Symbol("_vsh"),hi={name:"show",beforeMount(e,{value:t},{transition:n}){e[uc]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):$a(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),$a(e,!0),i.enter(e)):i.leave(e,()=>{$a(e,!1)}):$a(e,t))},beforeUnmount(e,{value:t}){$a(e,t)}};function $a(e,t){e.style.display=t?e[uc]:"none",e[S0]=!t}const C2=Symbol(""),k2=/(?:^|;)\s*display\s*:/;function E2(e,t,n){const i=e.style,s=St(n);let r=!1;if(n&&!s){if(t)if(St(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&jl(i,o,"")}else for(const a in t)n[a]==null&&jl(i,a,"");for(const a in n)a==="display"&&(r=!0),jl(i,a,n[a])}else if(s){if(t!==n){const a=i[C2];a&&(n+=";"+a),i.cssText=n,r=k2.test(n)}}else t&&e.removeAttribute("style");uc in e&&(e[uc]=r?i.display:"",e[S0]&&(i.display="none"))}const bv=/\s*!important$/;function jl(e,t,n){if(Le(n))n.forEach(i=>jl(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=I2(e,t);bv.test(n)?e.setProperty(mr(i),n.replace(bv,""),"important"):e[i]=n}}const wv=["Webkit","Moz","ms"],nd={};function I2(e,t){const n=nd[t];if(n)return n;let i=Tn(t);if(i!=="filter"&&i in e)return nd[t]=i;i=Di(i);for(let s=0;s<wv.length;s++){const r=wv[s]+i;if(r in e)return nd[t]=r}return t}const xv="http://www.w3.org/1999/xlink";function Sv(e,t,n,i,s,r=zA(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(xv,t.slice(6,t.length)):e.setAttributeNS(xv,t,n):n==null||r&&!cb(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Rs(n)?String(n):n)}function Tv(e,t,n,i,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?y0(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(o!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const o=typeof e[t];o==="boolean"?n=cb(n):n==null&&o==="string"?(n="",a=!0):o==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function zr(e,t,n,i){e.addEventListener(t,n,i)}function P2(e,t,n,i){e.removeEventListener(t,n,i)}const Av=Symbol("_vei");function R2(e,t,n,i,s=null){const r=e[Av]||(e[Av]={}),a=r[t];if(i&&a)a.value=i;else{const[o,l]=M2(t);if(i){const u=r[t]=N2(i,s);zr(e,o,u,l)}else a&&(P2(e,o,a,l),r[t]=void 0)}}const Cv=/(?:Once|Passive|Capture)$/;function M2(e){let t;if(Cv.test(e)){t={};let i;for(;i=e.match(Cv);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):mr(e.slice(2)),t]}let id=0;const O2=Promise.resolve(),D2=()=>id||(O2.then(()=>id=0),id=Date.now());function N2(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;ui(B2(i,n.value),t,5,[i])};return n.value=e,n.attached=D2(),n}function B2(e,t){if(Le(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const kv=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,F2=(e,t,n,i,s,r)=>{const a=s==="svg";t==="class"?A2(e,i,a):t==="style"?E2(e,n,i):Zc(t)?Rh(t)||R2(e,t,n,i,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):V2(e,t,i,a))?(Tv(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Sv(e,t,i,a,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!St(i))?Tv(e,Tn(t),i,r,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Sv(e,t,i,a))};function V2(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&kv(t)&&Ue(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return kv(t)&&St(n)?!1:t in e}const T0=new WeakMap,A0=new WeakMap,dc=Symbol("_moveCb"),Ev=Symbol("_enterCb"),L2=e=>(delete e.props.mode,e),U2=L2({name:"TransitionGroup",props:zt({},b0,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Zo(),i=$b();let s,r;return Hh(()=>{if(!s.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!H2(s[0].el,n.vnode.el,a)){s=[];return}s.forEach($2),s.forEach(z2);const o=s.filter(W2);uf(),o.forEach(l=>{const u=l.el,c=u.style;xi(u,a),c.transform=c.webkitTransform=c.transitionDuration="";const d=u[dc]=f=>{f&&f.target!==u||(!f||f.propertyName.endsWith("transform"))&&(u.removeEventListener("transitionend",d),u[dc]=null,gs(u,a))};u.addEventListener("transitionend",d)}),s=[]}),()=>{const a=Oe(e),o=w0(a);let l=a.tag||Ae;if(s=[],r)for(let u=0;u<r.length;u++){const c=r[u];c.el&&c.el instanceof Element&&(s.push(c),sr(c,wo(c,o,i,n)),T0.set(c,c.el.getBoundingClientRect()))}r=t.default?zh(t.default()):[];for(let u=0;u<r.length;u++){const c=r[u];c.key!=null&&sr(c,wo(c,o,i,n))}return w(l,null,r)}}}),Gh=U2;function $2(e){const t=e.el;t[dc]&&t[dc](),t[Ev]&&t[Ev]()}function z2(e){A0.set(e,e.el.getBoundingClientRect())}function W2(e){const t=T0.get(e),n=A0.get(e),i=t.left-n.left,s=t.top-n.top;if(i||s){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${i}px,${s}px)`,r.transitionDuration="0s",e}}function H2(e,t,n){const i=e.cloneNode(),s=e[la];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),n.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(i);const{hasTransform:a}=x0(i);return r.removeChild(i),a}const Iv=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Le(t)?n=>zl(t,n):t};function j2(e){e.target.composing=!0}function Pv(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const sd=Symbol("_assign"),X2={created(e,{modifiers:{lazy:t,trim:n,number:i}},s){e[sd]=Iv(s);const r=i||s.props&&s.props.type==="number";zr(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;n&&(o=o.trim()),r&&(o=Qd(o)),e[sd](o)}),n&&zr(e,"change",()=>{e.value=e.value.trim()}),t||(zr(e,"compositionstart",j2),zr(e,"compositionend",Pv),zr(e,"change",Pv))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:s,number:r}},a){if(e[sd]=Iv(a),e.composing)return;const o=(r||e.type==="number")&&!/^0\d/.test(e.value)?Qd(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||s&&e.value.trim()===l)||(e.value=l))}},Y2=["ctrl","shift","alt","meta"],K2={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Y2.some(n=>e[`${n}Key`]&&!t.includes(n))},wl=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=((s,...r)=>{for(let a=0;a<t.length;a++){const o=K2[t[a]];if(o&&o(s,t))return}return e(s,...r)}))},q2=zt({patchProp:F2},w2);let Rv;function C0(){return Rv||(Rv=XC(q2))}const k0=((...e)=>{C0().render(...e)}),Z2=((...e)=>{const t=C0().createApp(...e),{mount:n}=t;return t.mount=i=>{const s=Q2(i);if(!s)return;const r=t._component;!Ue(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,G2(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function G2(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Q2(e){return St(e)?document.querySelector(e):e}function fc(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const Qh=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),Mv=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Mv&&parseFloat(Mv[1]);const Ov=globalThis,Dv=globalThis.process||{},J2=globalThis.navigator||{};function E0(e){if(typeof window<"u"&&window.process?.type==="renderer"||typeof process<"u"&&process.versions?.electron)return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function vr(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process?.browser)||E0()}function e3(e){return vr()?E0()?"Electron":(J2.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const I0="4.1.0";function t3(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch{return null}}class n3{constructor(t,n,i="sessionStorage"){this.storage=t3(i),this.id=t,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let t={};if(this.storage){const n=this.storage.getItem(this.id);t=n?JSON.parse(n):{}}return Object.assign(this.config,t),this}}function i3(e){let t;return e<10?t=`${e.toFixed(2)}ms`:e<100?t=`${e.toFixed(1)}ms`:e<1e3?t=`${e.toFixed(0)}ms`:t=`${(e/1e3).toFixed(2)}s`,t}function s3(e,t=8){const n=Math.max(t-e.length,0);return`${" ".repeat(n)}${e}`}var hc;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(hc||(hc={}));const r3=10;function Nv(e){return typeof e!="string"?e:(e=e.toUpperCase(),hc[e]||hc.WHITE)}function a3(e,t,n){return!vr&&typeof e=="string"&&(t&&(e=`\x1B[${Nv(t)}m${e}\x1B[39m`),n&&(e=`\x1B[${Nv(n)+r3}m${e}\x1B[49m`)),e}function o3(e,t=["constructor"]){const n=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(n),s=e;for(const r of i){const a=s[r];typeof a=="function"&&(t.find(o=>r===o)||(s[r]=a.bind(e)))}}function Jh(e,t){if(!e)throw new Error("Assertion failed")}function Rr(){let e;if(vr()&&Ov.performance)e=Ov?.performance?.now?.();else if("hrtime"in Dv){const t=Dv?.hrtime?.();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}const Mr={debug:vr()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},l3={enabled:!0,level:0};function Or(){}const Bv={},Fv={once:!0};class Qo{constructor({id:t}={id:""}){this.VERSION=I0,this._startTs=Rr(),this._deltaTs=Rr(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new n3(`__probe-${this.id}__`,l3),this.timeStamp(`${this.id} started`),o3(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Rr()-this._startTs).toPrecision(10))}getDelta(){return Number((Rr()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,n){this._storage.setConfiguration({[t]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,n){if(!t)throw new Error(n||"Assertion failed")}warn(t){return this._getLogFunction(0,t,Mr.warn,arguments,Fv)}error(t){return this._getLogFunction(0,t,Mr.error,arguments)}deprecated(t,n){return this.warn(`\`${t}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(t,n){return this.error(`\`${t}\` has been removed. Use \`${n}\` instead`)}probe(t,n){return this._getLogFunction(t,n,Mr.log,arguments,{time:!0,once:!0})}log(t,n){return this._getLogFunction(t,n,Mr.debug,arguments)}info(t,n){return this._getLogFunction(t,n,console.info,arguments)}once(t,n){return this._getLogFunction(t,n,Mr.debug||Mr.info,arguments,Fv)}table(t,n,i){return n?this._getLogFunction(t,n,console.table||Or,i&&[i],{tag:u3(n)}):Or}time(t,n){return this._getLogFunction(t,n,console.time?console.time:console.info)}timeEnd(t,n){return this._getLogFunction(t,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,n){return this._getLogFunction(t,n,console.timeStamp||Or)}group(t,n,i={collapsed:!1}){const s=Vv({logLevel:t,message:n,opts:i}),{collapsed:r}=i;return s.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(s)}groupCollapsed(t,n,i={}){return this.group(t,n,Object.assign({},i,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Or)}withGroup(t,n,i){this.group(t,n)();try{i()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=P0(t)}_getLogFunction(t,n,i,s,r){if(this._shouldLog(t)){r=Vv({logLevel:t,message:n,args:s,opts:r}),i=i||r.method,Jh(i),r.total=this.getTotal(),r.delta=this.getDelta(),this._deltaTs=Rr();const a=r.tag||r.message;if(r.once&&a)if(!Bv[a])Bv[a]=Rr();else return Or;return n=c3(this.id,r.message,r),i.bind(console,n,...r.args)}return Or}}Qo.VERSION=I0;function P0(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return Jh(Number.isFinite(t)&&t>=0),t}function Vv(e){const{logLevel:t,message:n}=e;e.logLevel=P0(t);const i=e.args?Array.from(e.args):[];for(;i.length&&i.shift()!==n;);switch(typeof t){case"string":case"function":n!==void 0&&i.unshift(n),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const s=typeof e.message;return Jh(s==="string"||s==="object"),Object.assign(e,{args:i},e.opts)}function c3(e,t,n){if(typeof t=="string"){const i=n.time?s3(i3(n.total)):"";t=n.time?`${e}: ${i}  ${t}`:`${e}: ${t}`,t=a3(t,n.color,n.background)}return t}function u3(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}const rd="4.3.3",d3=rd[0]>="0"&&rd[0]<="9"?`v${rd}`:"";function f3(){const e=new Qo({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=e,globalThis.loaders.version=d3,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=e,e}const h3=f3();function g3(e,t){return R0(e||{},t)}function R0(e,t,n=0){if(n>3)return t;const i={...e};for(const[s,r]of Object.entries(t))r&&typeof r=="object"&&!Array.isArray(r)?i[s]=R0(i[s]||{},t[s],n+1):i[s]=t[s];return i}const m3="latest";function v3(){return globalThis._loadersgl_?.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.3"),globalThis._loadersgl_.version}const p3=v3();function ks(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const Zs=typeof process!="object"||String(process)!=="[object process]"||process.browser,y3=typeof window<"u"&&typeof window.orientation<"u",Lv=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Lv&&parseFloat(Lv[1]);class _3{name;workerThread;isRunning=!0;result;_resolve=()=>{};_reject=()=>{};constructor(t,n){this.name=t,this.workerThread=n,this.result=new Promise((i,s)=>{this._resolve=i,this._reject=s})}postMessage(t,n){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:n})}done(t){ks(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){ks(this.isRunning),this.isRunning=!1,this._reject(t)}}class ad{terminate(){}}const od=new Map;function b3(e){ks(e.source&&!e.url||!e.source&&e.url);let t=od.get(e.source||e.url);return t||(e.url&&(t=w3(e.url),od.set(e.url,t)),e.source&&(t=M0(e.source),od.set(e.source,t))),ks(t),t}function w3(e){if(!e.startsWith("http"))return e;const t=x3(e);return M0(t)}function M0(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function x3(e){return`try {
  importScripts('${e}');
} catch (error) {
  console.error(error);
  throw error;
}`}function O0(e,t=!0,n){const i=n||new Set;if(e){if(Uv(e))i.add(e);else if(Uv(e.buffer))i.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const s in e)O0(e[s],t,i)}}return n===void 0?Array.from(i):[]}function Uv(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const ld=()=>{};class df{name;source;url;terminated=!1;worker;onMessage;onError;_loadableURL="";static isSupported(){return typeof Worker<"u"&&Zs||typeof ad<"u"&&!Zs}constructor(t){const{name:n,source:i,url:s}=t;ks(i||s),this.name=n,this.source=i,this.url=s,this.onMessage=ld,this.onError=r=>console.log(r),this.worker=Zs?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=ld,this.onError=ld,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,n){n=n||O0(t),this.worker.postMessage(t,n)}_getErrorFromErrorEvent(t){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,t.message&&(n+=`${t.message} in `),t.lineno&&(n+=`:${t.lineno}:${t.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=b3({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},t.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},t.onmessageerror=n=>console.error(n),t}_createNodeWorker(){let t;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new ad(i,{eval:!1})}else if(this.source)t=new ad(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",n=>{this.onMessage(n)}),t.on("error",n=>{this.onError(n)}),t.on("exit",n=>{}),t}}class S3{name="unnamed";source;url;maxConcurrency=1;maxMobileConcurrency=1;onDebug=()=>{};reuseWorkers=!0;props={};jobQueue=[];idleQueue=[];count=0;isDestroyed=!1;static isSupported(){return df.isSupported()}constructor(t){this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,n=(s,r,a)=>s.done(a),i=(s,r)=>s.error(r)){const s=new Promise(r=>(this.jobQueue.push({name:t,onMessage:n,onError:i,onStart:r}),this));return this._startQueuedJob(),await s}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:t,backlog:this.jobQueue.length});const i=new _3(n.name,t);t.onMessage=s=>n.onMessage(i,s.type,s.payload),t.onError=s=>n.onError(i,s),n.onStart(i);try{await i.result}catch(s){console.error(`Worker exception: ${s}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!Zs||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new df({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return y3?this.maxMobileConcurrency:this.maxConcurrency}}const T3={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class ys{props;workerPools=new Map;static _workerFarm;static isSupported(){return df.isSupported()}static getWorkerFarm(t={}){return ys._workerFarm=ys._workerFarm||new ys({}),ys._workerFarm.setProps(t),ys._workerFarm}constructor(t){this.props={...T3},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:n,source:i,url:s}=t;let r=this.workerPools.get(n);return r||(r=new S3({name:n,source:i,url:s}),r.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,r)),r}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}function A3(e,t={}){const n=t[e.id]||{},i=Zs?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let s=n.workerUrl;if(!s&&e.id==="compression"&&(s=t.workerUrl),t._workerType==="test"&&(Zs?s=`modules/${e.module}/dist/${i}`:s=`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!s){let r=e.version;r==="latest"&&(r=m3);const a=r?`@${r}`:"";s=`https://unpkg.com/@loaders.gl/${e.module}${a}/dist/${i}`}return ks(s),s}function C3(e,t=p3){ks(e,"no worker provided");const n=e.version;return!(!t||!n)}function k3(e,t){return!ys.isSupported()||!Zs&&!t?._nodeWorkers?!1:e.worker&&t?.worker}async function E3(e,t,n,i,s){const r=e.id,a=A3(e,n),l=ys.getWorkerFarm(n).getWorkerPool({name:r,url:a});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const u=await l.startJob("process-on-worker",I3.bind(null,s));return u.postMessage("process",{input:t,options:n,context:i}),await(await u.result).result}async function I3(e,t,n,i){switch(n){case"done":t.done(i);break;case"error":t.error(new Error(i.error));break;case"process":const{id:s,input:r,options:a}=i;try{const o=await e(r,a);t.postMessage("done",{id:s,result:o})}catch(o){const l=o instanceof Error?o.message:"unknown error";t.postMessage("error",{id:s,error:l})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function P3(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const i=new Uint8Array(e),s=new Uint8Array(t);for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}function R3(...e){return M3(e)}function M3(e){const t=e.map(r=>r instanceof ArrayBuffer?new Uint8Array(r):r),n=t.reduce((r,a)=>r+a.byteLength,0),i=new Uint8Array(n);let s=0;for(const r of t)i.set(r,s),s+=r.byteLength;return i.buffer}async function O3(e){const t=[];for await(const n of e)t.push(n);return R3(...t)}function $v(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class zv{constructor(t,n){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=t,this.type=n,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=$v(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime($v()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class au{constructor(t){this.stats={},this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t,n="count"){return this._getOrCreate({name:t,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const t of Object.values(this.stats))t.reset();return this}forEach(t){for(const n of Object.values(this.stats))t(n)}getTable(){const t={};return this.forEach(n=>{t[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),t}_initializeStats(t=[]){t.forEach(n=>this._getOrCreate(n))}_getOrCreate(t){const{name:n,type:i}=t;let s=this.stats[n];return s||(t instanceof zv?s=t:s=new zv(n,i),this.stats[n]=s),s}}let D3="";const Wv={};function N3(e){for(const t in Wv)if(e.startsWith(t)){const n=Wv[t];e=e.replace(t,n)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e=`${D3}${e}`),e}function B3(e){return e&&typeof e=="object"&&e.isBuffer}function D0(e){if(B3(e))return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function N0(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function F3(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}const V3=e=>typeof e=="boolean",co=e=>typeof e=="function",Jo=e=>e!==null&&typeof e=="object",Hv=e=>Jo(e)&&e.constructor==={}.constructor,L3=e=>!!e&&typeof e[Symbol.iterator]=="function",U3=e=>e&&typeof e[Symbol.asyncIterator]=="function",pr=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,yr=e=>typeof Blob<"u"&&e instanceof Blob,$3=e=>e&&typeof e=="object"&&e.isBuffer,z3=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||Jo(e)&&co(e.tee)&&co(e.cancel)&&co(e.getReader),W3=e=>Jo(e)&&co(e.read)&&co(e.pipe)&&V3(e.readable),B0=e=>z3(e)||W3(e);class H3 extends Error{constructor(t,n){super(t),this.reason=n.reason,this.url=n.url,this.response=n.response}reason;url;response}const j3=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,X3=/^([-\w.]+\/[-\w.+]+)/;function jv(e,t){return e.toLowerCase()===t.toLowerCase()}function Y3(e){const t=X3.exec(e);return t?t[1]:e}function Xv(e){const t=j3.exec(e);return t?t[1]:""}const F0=/\?.*/;function K3(e){const t=e.match(F0);return t&&t[0]}function eg(e){return e.replace(F0,"")}function q3(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}function ou(e){return pr(e)?e.url:yr(e)?e.name||"":typeof e=="string"?e:""}function tg(e){if(pr(e)){const t=e,n=t.headers.get("content-type")||"",i=eg(t.url);return Y3(n)||Xv(i)}return yr(e)?e.type||"":typeof e=="string"?Xv(e):""}function Z3(e){return pr(e)?e.headers["content-length"]||-1:yr(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}async function V0(e){if(pr(e))return e;const t={},n=Z3(e);n>=0&&(t["content-length"]=String(n));const i=ou(e),s=tg(e);s&&(t["content-type"]=s);const r=await J3(e);r&&(t["x-first-bytes"]=r),typeof e=="string"&&(e=new TextEncoder().encode(e));const a=new Response(e,{headers:t});return Object.defineProperty(a,"url",{value:i}),a}async function G3(e){if(!e.ok)throw await Q3(e)}async function Q3(e){const t=q3(e.url);let n=`Failed to fetch resource (${e.status}) ${e.statusText}: ${t}`;n=n.length>100?`${n.slice(0,100)}...`:n;const i={reason:e.statusText,url:e.url,response:e};try{const s=e.headers.get("Content-Type");i.reason=!e.bodyUsed&&s?.includes("application/json")?await e.json():await e.text()}catch{}return new H3(n,i)}async function J3(e){if(typeof e=="string")return`data:,${e.slice(0,5)}`;if(e instanceof Blob){const n=e.slice(0,5);return await new Promise(i=>{const s=new FileReader;s.onload=r=>i(r?.target?.result),s.readAsDataURL(n)})}if(e instanceof ArrayBuffer){const n=e.slice(0,5);return`data:base64,${ek(n)}`}return null}function ek(e){let t="";const n=new Uint8Array(e);for(let i=0;i<n.byteLength;i++)t+=String.fromCharCode(n[i]);return btoa(t)}function tk(e){return!nk(e)&&!ik(e)}function nk(e){return e.startsWith("http:")||e.startsWith("https:")}function ik(e){return e.startsWith("data:")}async function Yv(e,t){if(typeof e=="string"){const n=N3(e);return tk(n)&&globalThis.loaders?.fetchNode?globalThis.loaders?.fetchNode(n,t):await fetch(n,t)}return await V0(e)}const Kv=new Qo({id:"loaders.gl"});class sk{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class rk{console;constructor(){this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const L0={fetch:null,mimeType:void 0,nothrow:!1,log:new rk,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Qh,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},ak={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function U0(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function $0(){const e=U0();return e.globalOptions=e.globalOptions||{...L0},e.globalOptions}function ok(e,t,n,i){return n=n||[],n=Array.isArray(n)?n:[n],lk(e,n),uk(t,e,i)}function lk(e,t){qv(e,null,L0,ak,t);for(const n of t){const i=e&&e[n.id]||{},s=n.options&&n.options[n.id]||{},r=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};qv(i,n.id,s,r,t)}}function qv(e,t,n,i,s){const r=t||"Top level",a=t?`${t}.`:"";for(const o in e){const l=!t&&Jo(e[o]),u=o==="baseUri"&&!t,c=o==="workerUrl"&&t;if(!(o in n)&&!u&&!c){if(o in i)Kv.warn(`${r} loader option '${a}${o}' no longer supported, use '${i[o]}'`)();else if(!l){const d=ck(o,s);Kv.warn(`${r} loader option '${a}${o}' not recognized. ${d}`)()}}}}function ck(e,t){const n=e.toLowerCase();let i="";for(const s of t)for(const r in s.options){if(e===r)return`Did you mean '${s.id}.${r}'?`;const a=r.toLowerCase();(n.startsWith(a)||a.startsWith(n))&&(i=i||`Did you mean '${s.id}.${r}'?`)}return i}function uk(e,t,n){const s={...e.options||{}};return dk(s,n),s.log===null&&(s.log=new sk),Zv(s,$0()),Zv(s,t),s}function Zv(e,t){for(const n in t)if(n in t){const i=t[n];Hv(i)&&Hv(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function dk(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function ng(e){return e?(Array.isArray(e)&&(e=e[0]),Array.isArray(e?.extensions)):!1}function ig(e){fc(e,"null loader"),fc(ng(e),"invalid loader");let t;return Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e?.parseTextSync||e?.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const z0=()=>{const e=U0();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function fk(e){const t=z0();e=Array.isArray(e)?e:[e];for(const n of e){const i=ig(n);t.find(s=>i===s)||t.unshift(i)}}function hk(){return z0()}const gk=/\.([^.]+)$/;async function mk(e,t=[],n,i){if(!W0(e))return null;let s=Gv(e,t,{...n,nothrow:!0},i);if(s)return s;if(yr(e)&&(e=await e.slice(0,10).arrayBuffer(),s=Gv(e,t,n,i)),!s&&!n?.nothrow)throw new Error(H0(e));return s}function Gv(e,t=[],n,i){if(!W0(e))return null;if(t&&!Array.isArray(t))return ig(t);let s=[];t&&(s=s.concat(t)),n?.ignoreRegisteredLoaders||s.push(...hk()),pk(s);const r=vk(e,s,n,i);if(!r&&!n?.nothrow)throw new Error(H0(e));return r}function vk(e,t,n,i){const s=ou(e),r=tg(e),a=eg(s)||i?.url;let o=null,l="";return n?.mimeType&&(o=cd(t,n?.mimeType),l=`match forced by supplied MIME type ${n?.mimeType}`),o=o||yk(t,a),l=l||(o?`matched url ${a}`:""),o=o||cd(t,r),l=l||(o?`matched MIME type ${r}`:""),o=o||bk(t,e),l=l||(o?`matched initial data ${j0(e)}`:""),n?.fallbackMimeType&&(o=o||cd(t,n?.fallbackMimeType),l=l||(o?`matched fallback MIME type ${r}`:"")),l&&h3.log(1,`selectLoader selected ${o?.name}: ${l}.`),o}function W0(e){return!(e instanceof Response&&e.status===204)}function H0(e){const t=ou(e),n=tg(e);let i="No valid loader found (";i+=t?`${N0(t)}, `:"no url provided, ",i+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const s=e?j0(e):"";return i+=s?` first bytes: "${s}"`:"first bytes: not available",i+=")",i}function pk(e){for(const t of e)ig(t)}function yk(e,t){const n=t&&gk.exec(t),i=n&&n[1];return i?_k(e,i):null}function _k(e,t){t=t.toLowerCase();for(const n of e)for(const i of n.extensions)if(i.toLowerCase()===t)return n;return null}function cd(e,t){for(const n of e)if(n.mimeTypes?.some(i=>jv(t,i))||jv(t,`application/x.${n.id}`))return n;return null}function bk(e,t){if(!t)return null;for(const n of e)if(typeof t=="string"){if(wk(t,n))return n}else if(ArrayBuffer.isView(t)){if(Qv(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer&&Qv(t,0,n))return n;return null}function wk(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(i=>e.startsWith(i))}function Qv(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(s=>xk(e,t,n,s))}function xk(e,t,n,i){if(i instanceof ArrayBuffer)return P3(i,e,i.byteLength);switch(typeof i){case"function":return i(e);case"string":const s=ff(e,t,i.length);return i===s;default:return!1}}function j0(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?ff(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?ff(e,0,t):""}function ff(e,t,n){if(e.byteLength<t+n)return"";const i=new DataView(e);let s="";for(let r=0;r<n;r++)s+=String.fromCharCode(i.getUint8(t+r));return s}const Sk=256*1024;function*Tk(e,t){const n=t?.chunkSize||Sk;let i=0;const s=new TextEncoder;for(;i<e.length;){const r=Math.min(e.length-i,n),a=e.slice(i,i+r);i+=r,yield s.encode(a)}}const Ak=256*1024;function*Ck(e,t={}){const{chunkSize:n=Ak}=t;let i=0;for(;i<e.byteLength;){const s=Math.min(e.byteLength-i,n),r=new ArrayBuffer(s),a=new Uint8Array(e,i,s);new Uint8Array(r).set(a),i+=s,yield r}}const kk=1024*1024;async function*Ek(e,t){const n=t?.chunkSize||kk;let i=0;for(;i<e.size;){const s=i+n,r=await e.slice(i,s).arrayBuffer();i=s,yield r}}function Jv(e,t){return Qh?Ik(e,t):Pk(e)}async function*Ik(e,t){const n=e.getReader();let i;try{for(;;){const s=i||n.read();t?._streamReadAhead&&(i=n.read());const{done:r,value:a}=await s;if(r)return;yield D0(a)}}catch{n.releaseLock()}}async function*Pk(e,t){for await(const n of e)yield D0(n)}function Rk(e,t){if(typeof e=="string")return Tk(e,t);if(e instanceof ArrayBuffer)return Ck(e,t);if(yr(e))return Ek(e,t);if(B0(e))return Jv(e,t);if(pr(e))return Jv(e.body,t);throw new Error("makeIterator")}const X0="Cannot convert supplied data type";function Mk(e,t,n){if(t.text&&typeof e=="string")return e;if($3(e)&&(e=e.buffer),e instanceof ArrayBuffer){const i=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let i=e.buffer;const s=e.byteLength||e.length;return(e.byteOffset!==0||s!==i.byteLength)&&(i=i.slice(e.byteOffset,e.byteOffset+s)),i}throw new Error(X0)}async function Ok(e,t,n){const i=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||i)return Mk(e,t);if(yr(e)&&(e=await V0(e)),pr(e)){const s=e;return await G3(s),t.binary?await s.arrayBuffer():await s.text()}if(B0(e)&&(e=Rk(e,n)),L3(e)||U3(e))return O3(e);throw new Error(X0)}function Y0(e,t){const n=$0(),i=e||n;return typeof i.fetch=="function"?i.fetch:Jo(i.fetch)?s=>Yv(s,i.fetch):t?.fetch?t?.fetch:Yv}function Dk(e,t,n){if(n)return n;const i={fetch:Y0(t,e),...e};if(i.url){const s=eg(i.url);i.baseUrl=s,i.queryString=K3(i.url),i.filename=N0(s),i.baseUrl=F3(s)}return Array.isArray(i.loaders)||(i.loaders=null),i}function Nk(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const i=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...i]:i}return n&&n.length?n:void 0}async function gc(e,t,n,i){t&&!Array.isArray(t)&&!ng(t)&&(i=void 0,n=t,t=void 0),e=await e,n=n||{};const s=ou(e),a=Nk(t,i),o=await mk(e,a,n);return o?(n=ok(n,o,a,s),i=Dk({url:s,_parse:gc,loaders:a},n,i||null),await Bk(o,e,n,i)):null}async function Bk(e,t,n,i){if(C3(e),n=g3(e.options,n),pr(t)){const r=t,{ok:a,redirected:o,status:l,statusText:u,type:c,url:d}=r,f=Object.fromEntries(r.headers.entries());i.response={headers:f,ok:a,redirected:o,status:l,statusText:u,type:c,url:d}}t=await Ok(t,e,n);const s=e;if(s.parseTextSync&&typeof t=="string")return s.parseTextSync(t,n,i);if(k3(e,n))return await E3(e,t,n,i,gc);if(s.parseText&&typeof t=="string")return await s.parseText(t,n,i);if(s.parse)return await s.parse(t,n,i);throw ks(!s.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}async function mc(e,t,n,i){let s,r;!Array.isArray(t)&&!ng(t)?(s=[],r=t):(s=t,r=n);const a=Y0(r);let o=e;return typeof e=="string"&&(o=await a(e)),yr(e)&&(o=await a(e)),Array.isArray(s)?await gc(o,s,r):await gc(o,s,r)}const Fk="4.3.3",Vk=globalThis.loaders?.parseImageNode,hf=typeof Image<"u",gf=typeof ImageBitmap<"u",Lk=!!Vk,mf=Qh?!0:Lk;function Uk(e){switch(e){case"auto":return gf||hf||mf;case"imagebitmap":return gf;case"image":return hf;case"data":return mf;default:throw new Error(`@loaders.gl/images: image ${e} not supported in this environment`)}}function $k(){if(gf)return"imagebitmap";if(hf)return"image";if(mf)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function zk(e){const t=Hk(e);if(!t)throw new Error("Not an image");return t}function Wk(e){switch(zk(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("getImageData");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function Hk(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const jk=/^data:image\/svg\+xml/,Xk=/\.svg((\?|#).*)?$/;function sg(e){return e&&(jk.test(e)||Xk.test(e))}function Yk(e,t){if(sg(t)){let i=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(i=unescape(encodeURIComponent(i)))}catch(r){throw new Error(r.message)}return`data:image/svg+xml;base64,${btoa(i)}`}return K0(e,t)}function K0(e,t){if(sg(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function q0(e,t,n){const i=Yk(e,n),s=self.URL||self.webkitURL,r=typeof i!="string"&&s.createObjectURL(i);try{return await Kk(r||i,t)}finally{r&&s.revokeObjectURL(r)}}async function Kk(e,t){const n=new Image;return n.src=e,t.image&&t.image.decode&&n.decode?(await n.decode(),n):await new Promise((i,s)=>{try{n.onload=()=>i(n),n.onerror=r=>{const a=r instanceof Error?r.message:"error";s(new Error(a))}}catch(r){s(r)}})}const qk={};let ep=!0;async function Zk(e,t,n){let i;sg(n)?i=await q0(e,t,n):i=K0(e,n);const s=t&&t.imagebitmap;return await Gk(i,s)}async function Gk(e,t=null){if((Qk(t)||!ep)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(n){console.warn(n),ep=!1}return await createImageBitmap(e)}function Qk(e){for(const t in e||qk)return!1;return!0}function Jk(e){return!iE(e,"ftyp",4)||(e[8]&96)===0?null:eE(e)}function eE(e){switch(tE(e,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function tE(e,t,n){return String.fromCharCode(...e.slice(t,n))}function nE(e){return[...e].map(t=>t.charCodeAt(0))}function iE(e,t,n=0){const i=nE(t);for(let s=0;s<i.length;++s)if(i[s]!==e[s+n])return!1;return!0}const Ci=!1,uo=!0;function Z0(e){const t=el(e);return rE(t)||lE(t)||aE(t)||oE(t)||sE(t)}function sE(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),n=Jk(t);return n?{mimeType:n.mimeType,width:0,height:0}:null}function rE(e){const t=el(e);return t.byteLength>=24&&t.getUint32(0,Ci)===2303741511?{mimeType:"image/png",width:t.getUint32(16,Ci),height:t.getUint32(20,Ci)}:null}function aE(e){const t=el(e);return t.byteLength>=10&&t.getUint32(0,Ci)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,uo),height:t.getUint16(8,uo)}:null}function oE(e){const t=el(e);return t.byteLength>=14&&t.getUint16(0,Ci)===16973&&t.getUint32(2,uo)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,uo),height:t.getUint32(22,uo)}:null}function lE(e){const t=el(e);if(!(t.byteLength>=3&&t.getUint16(0,Ci)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:i,sofMarkers:s}=cE();let r=2;for(;r+9<t.byteLength;){const a=t.getUint16(r,Ci);if(s.has(a))return{mimeType:"image/jpeg",height:t.getUint16(r+5,Ci),width:t.getUint16(r+7,Ci)};if(!i.has(a))return null;r+=2,r+=t.getUint16(r,Ci)}return null}function cE(){const e=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)e.add(n);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function el(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function uE(e,t){const{mimeType:n}=Z0(e)||{},i=globalThis.loaders?.parseImageNode;return fc(i),await i(e,n)}async function dE(e,t,n){t=t||{};const s=(t.image||{}).type||"auto",{url:r}=n||{},a=fE(s);let o;switch(a){case"imagebitmap":o=await Zk(e,t,r);break;case"image":o=await q0(e,t,r);break;case"data":o=await uE(e);break;default:fc(!1)}return s==="data"&&(o=Wk(o)),o}function fE(e){switch(e){case"auto":case"data":return $k();default:return Uk(e),e}}const hE=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],gE=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],mE={image:{type:"auto",decode:!0}},vE={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:Fk,mimeTypes:gE,extensions:hE,parse:dE,tests:[e=>!!Z0(new DataView(e))],options:mE},tt=new Qo({id:"deck"});let vf={};function pE(e){vf=e}function un(e,t,n,i){tt.level>0&&vf[e]&&vf[e].call(null,t,n,i)}function yE(e){const t=e[0],n=e[e.length-1];return t==="{"&&n==="}"||t==="["&&n==="]"}const _E={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:yE,parseTextSync:JSON.parse};function bE(){const e="9.1.14",t=globalThis.deck&&globalThis.deck.VERSION;if(t&&t!==e)throw new Error(`deck.gl - multiple versions detected: ${t} vs ${e}`);return t||(tt.log(1,`deck.gl ${e}`)(),globalThis.deck={...globalThis.deck,VERSION:e,version:e,log:tt,_registerLoggers:pE},fk([_E,[vE,{imagebitmap:{premultiplyAlpha:"none"}}]])),e}const wE=bE();function rg(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const ud={number:{type:"number",validate(e,t){return Number.isFinite(e)&&typeof t=="object"&&(t.max===void 0||e<=t.max)&&(t.min===void 0||e>=t.min)}},array:{type:"array",validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function xE(e){const t={};for(const[n,i]of Object.entries(e))t[n]=SE(i);return t}function SE(e){let t=tp(e);if(t!=="object")return{value:e,...ud[t],type:t};if(typeof e=="object")return e?e.type!==void 0?{...e,...ud[e.type],type:e.type}:e.value===void 0?{type:"object",value:e}:(t=tp(e.value),{...e,...ud[t],type:t}):{type:"object",value:null};throw new Error("props")}function tp(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const TE=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,AE=`#ifdef MODULE_MATERIAL
  fragColor = material_filterColor(fragColor);
#endif

#ifdef MODULE_LIGHTING
  fragColor = lighting_filterColor(fragColor);
#endif

#ifdef MODULE_FOG
  fragColor = fog_filterColor(fragColor);
#endif

#ifdef MODULE_PICKING
  fragColor = picking_filterHighlightColor(fragColor);
  fragColor = picking_filterPickingColor(fragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,CE={vertex:TE,fragment:AE},np=/void\s+main\s*\([^)]*\)\s*\{\n?/,ip=/}\n?[^{}]*$/,dd=[],Xl="__LUMA_INJECT_DECLARATIONS__";function kE(e){const t={vertex:{},fragment:{}};for(const n in e){let i=e[n];const s=EE(n);typeof i=="string"&&(i={order:0,injection:i}),t[s][n]=i}return t}function EE(e){const t=e.slice(0,2);switch(t){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(t)}}function vc(e,t,n,i=!1){const s=t==="vertex";for(const r in n){const a=n[r];a.sort((l,u)=>l.order-u.order),dd.length=a.length;for(let l=0,u=a.length;l<u;++l)dd[l]=a[l].injection;const o=`${dd.join(`
`)}
`;switch(r){case"vs:#decl":s&&(e=e.replace(Xl,o));break;case"vs:#main-start":s&&(e=e.replace(np,l=>l+o));break;case"vs:#main-end":s&&(e=e.replace(ip,l=>o+l));break;case"fs:#decl":s||(e=e.replace(Xl,o));break;case"fs:#main-start":s||(e=e.replace(np,l=>l+o));break;case"fs:#main-end":s||(e=e.replace(ip,l=>o+l));break;default:e=e.replace(r,l=>l+o)}}return e=e.replace(Xl,""),i&&(e=e.replace(/\}\s*$/,r=>r+CE[t])),e}function pc(e){e.map(t=>IE(t))}function IE(e){if(e.instance)return;pc(e.dependencies||[]);const{propTypes:t={},deprecations:n=[],inject:i={}}=e,s={normalizedInjections:kE(i),parsedDeprecations:PE(n)};t&&(s.propValidators=xE(t)),e.instance=s;let r={};t&&(r=Object.entries(t).reduce((a,[o,l])=>{const u=l?.value;return u&&(a[o]=u),a},{})),e.defaultUniforms={...e.defaultUniforms,...r}}function G0(e,t,n){e.deprecations?.forEach(i=>{i.regex?.test(t)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}function PE(e){return e.forEach(t=>{switch(t.type){case"function":t.regex=new RegExp(`\\b${t.old}\\(`);break;default:t.regex=new RegExp(`${t.type} ${t.old};`)}}),e}function ag(e){pc(e);const t={},n={};Q0({modules:e,level:0,moduleMap:t,moduleDepth:n});const i=Object.keys(n).sort((s,r)=>n[r]-n[s]).map(s=>t[s]);return pc(i),i}function Q0(e){const{modules:t,level:n,moduleMap:i,moduleDepth:s}=e;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const r of t)i[r.name]=r,(s[r.name]===void 0||s[r.name]<n)&&(s[r.name]=n);for(const r of t)r.dependencies&&Q0({modules:r.dependencies,level:n+1,moduleMap:i,moduleDepth:s})}function RE(e){switch(e?.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
// Apple optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Headless Chrome's software shader 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// If the GPU doesn't have full 32 bits precision, will causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function ME(e,t){if(Number(e.match(/^#version[ \t]+(\d+)/m)?.[1]||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(t){case"vertex":return e=sp(e,OE),e;case"fragment":return e=sp(e,DE),e;default:throw new Error(t)}}const J0=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],OE=[...J0,[pf("attribute"),"in $1"],[pf("varying"),"out $1"]],DE=[...J0,[pf("varying"),"in $1"]];function sp(e,t){for(const[n,i]of t)e=e.replace(n,i);return e}function pf(e){return new RegExp(`\\b${e}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function ew(e,t){let n="";for(const i in e){const s=e[i];if(n+=`void ${s.signature} {
`,s.header&&(n+=`  ${s.header}`),t[i]){const r=t[i];r.sort((a,o)=>a.order-o.order);for(const a of r)n+=`  ${a.injection}
`}s.footer&&(n+=`  ${s.footer}`),n+=`}
`}return n}function tw(e){const t={vertex:{},fragment:{}};for(const n of e){let i,s;typeof n!="string"?(i=n,s=i.hook):(i={},s=n),s=s.trim();const[r,a]=s.split(":"),o=s.replace(/\(.+/,""),l=Object.assign(i,{signature:a});switch(r){case"vs":t.vertex[o]=l;break;case"fs":t.fragment[o]=l;break;default:throw new Error(r)}}return t}function NE(e,t){return{name:BE(e,t),language:"glsl",version:FE(e)}}function BE(e,t="unnamed"){const i=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(e);return i?i[1]:t}function FE(e){let t=100;const n=e.match(/[^\s]+/g);if(n&&n.length>=2&&n[0]==="#version"){const i=parseInt(n[1],10);Number.isFinite(i)&&(t=i)}if(t!==100&&t!==300)throw new Error(`Invalid GLSL version ${t}`);return t}const nw=`

${Xl}
`,VE=`precision highp float;
`;function LE(e){const t=ag(e.modules||[]);return{source:$E(e.platformInfo,{...e,source:e.source,stage:"vertex",modules:t}),getUniforms:iw(t)}}function UE(e){const{vs:t,fs:n}=e,i=ag(e.modules||[]);return{vs:rp(e.platformInfo,{...e,source:t,stage:"vertex",modules:i}),fs:rp(e.platformInfo,{...e,source:n,stage:"fragment",modules:i}),getUniforms:iw(i)}}function $E(e,t){const{source:n,stage:i,modules:s,hookFunctions:r=[],inject:a={},log:o}=t;rg(typeof n=="string","shader source must be a string");const l=n;let u="";const c=tw(r),d={},f={},h={};for(const v in a){const m=typeof a[v]=="string"?{injection:a[v],order:0}:a[v],p=/^(v|f)s:(#)?([\w-]+)$/.exec(v);if(p){const y=p[2],_=p[3];y?_==="decl"?f[v]=[m]:h[v]=[m]:d[v]=[m]}else h[v]=[m]}const g=s;for(const v of g){o&&G0(v,l,o);const m=sw(v,"wgsl");u+=m;const p=v.injections?.[i]||{};for(const y in p){const _=/^(v|f)s:#([\w-]+)$/.exec(y);if(_){const S=_[2]==="decl"?f:h;S[y]=S[y]||[],S[y].push(p[y])}else d[y]=d[y]||[],d[y].push(p[y])}}return u+=nw,u=vc(u,i,f),u+=ew(c[i],d),u+=l,u=vc(u,i,h),u}function rp(e,t){const{id:n,source:i,stage:s,language:r="glsl",modules:a,defines:o={},hookFunctions:l=[],inject:u={},prologue:c=!0,log:d}=t;rg(typeof i=="string","shader source must be a string");const f=r==="glsl"?NE(i).version:-1,h=e.shaderLanguageVersion,g=f===100?"#version 100":"#version 300 es",m=i.split(`
`).slice(1).join(`
`),p={};a.forEach(I=>{Object.assign(p,I.defines)}),Object.assign(p,o);let y="";switch(r){case"wgsl":break;case"glsl":y=c?`${g}

// ----- PROLOGUE -------------------------
${zE({id:n,source:i,stage:s})}
${`#define SHADER_TYPE_${s.toUpperCase()}`}

${RE(e)}
${s==="fragment"?VE:""}

// ----- APPLICATION DEFINES -------------------------

${WE(p)}

`:`${g}
`;break}const _=tw(l),b={},S={},x={};for(const I in u){const T=typeof u[I]=="string"?{injection:u[I],order:0}:u[I],k=/^(v|f)s:(#)?([\w-]+)$/.exec(I);if(k){const P=k[2],D=k[3];P?D==="decl"?S[I]=[T]:x[I]=[T]:b[I]=[T]}else x[I]=[T]}for(const I of a){d&&G0(I,m,d);const T=sw(I,s);y+=T;const k=I.instance?.normalizedInjections[s]||{};for(const P in k){const D=/^(v|f)s:#([\w-]+)$/.exec(P);if(D){const O=D[2]==="decl"?S:x;O[P]=O[P]||[],O[P].push(k[P])}else b[P]=b[P]||[],b[P].push(k[P])}}return y+="// ----- MAIN SHADER SOURCE -------------------------",y+=nw,y=vc(y,s,S),y+=ew(_[s],b),y+=m,y=vc(y,s,x),r==="glsl"&&f!==h&&(y=ME(y,s)),y.trim()}function iw(e){return function(n){const i={};for(const s of e){const r=s.getUniforms?.(n,i);Object.assign(i,r)}return i}}function zE(e){const{id:t,source:n,stage:i}=e;return t&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${t}_${i}`:""}function WE(e={}){let t="";for(const n in e){const i=e[n];(i||Number.isFinite(i))&&(t+=`#define ${n.toUpperCase()} ${e[n]}
`)}return t}function sw(e,t){let n;switch(t){case"vertex":n=e.vs||"";break;case"fragment":n=e.fs||"";break;case"wgsl":n=e.source||"";break;default:rg(!1)}if(!e.name)throw new Error("Shader module must have a name");const i=e.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");let s=`// ----- MODULE ${e.name} ---------------

`;return t!=="wgsl"&&(s+=`#define MODULE_${i}
`),s+=`${n}
`,s}const HE=/^\s*\#\s*ifdef\s*([a-zA-Z_]+)\s*$/,jE=/^\s*\#\s*endif\s*$/;function XE(e,t){const n=e.split(`
`),i=[];let s=!0,r=null;for(const a of n){const o=a.match(HE),l=a.match(jE);o?(r=o[1],s=!!t?.defines?.[r]):l?s=!0:s&&i.push(a)}return i.join(`
`)}class js{static defaultShaderAssembler;_hookFunctions=[];_defaultModules=[];static getDefaultShaderAssembler(){return js.defaultShaderAssembler=js.defaultShaderAssembler||new js,js.defaultShaderAssembler}addDefaultModule(t){this._defaultModules.find(n=>n.name===(typeof t=="string"?t:t.name))||this._defaultModules.push(t)}removeDefaultModule(t){const n=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n)}addShaderHook(t,n){n&&(t=Object.assign(n,{hook:t})),this._hookFunctions.push(t)}assembleWGSLShader(t){const n=this._getModuleList(t.modules),i=this._hookFunctions,{source:s,getUniforms:r}=LE({...t,source:t.source,modules:n,hookFunctions:i});return{source:t.platformInfo.shaderLanguage==="wgsl"?XE(s):s,getUniforms:r,modules:n}}assembleGLSLShaderPair(t){const n=this._getModuleList(t.modules),i=this._hookFunctions;return{...UE({...t,vs:t.vs,fs:t.fs,modules:n,hookFunctions:i}),modules:n}}_getModuleList(t=[]){const n=new Array(this._defaultModules.length+t.length),i={};let s=0;for(let r=0,a=this._defaultModules.length;r<a;++r){const o=this._defaultModules[r],l=o.name;n[s++]=o,i[l]=!0}for(let r=0,a=t.length;r<a;++r){const o=t[r],l=o.name;i[l]||(n[s++]=o,i[l]=!0)}return n.length=s,pc(n),n}}const YE=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,KE=`#version 300 es
${YE}`;function qE(e){const{input:t,inputChannels:n,output:i}={};if(!t)return KE;if(!n)throw new Error("inputChannels");const s=ZE(n),r=GE(t,n);return`#version 300 es
in ${s} ${t};
out vec4 ${i};
void main() {
  ${i} = ${r};
}`}function ZE(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${e}`)}}function GE(e,t){switch(t){case 1:return`vec4(${e}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${e}, 0.0, 1.0)`;case 3:return`vec4(${e}, 1.0)`;case 4:return e;default:throw new Error(`invalid channels: ${t}`)}}class QE{stats=new Map;getStats(t){return this.get(t)}get(t){return this.stats.has(t)||this.stats.set(t,new au({id:t})),this.stats.get(t)}}const rw=new QE,xe=new Qo({id:"luma.gl"}),fd={};function lu(e="id"){fd[e]=fd[e]||1;const t=fd[e]++;return`${e}-${t}`}let ut=class{static defaultProps={id:"undefined",handle:void 0,userData:void 0};toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}id;props;userData={};_device;destroyed=!1;allocatedBytes=0;_attachedResources=new Set;constructor(t,n,i){if(!t)throw new Error("no device");this._device=t,this.props=JE(n,i);const s=this.props.id!=="undefined"?this.props.id:lu(this[Symbol.toStringTag]);this.props.id=s,this.id=s,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(t){this._attachedResources.add(t)}detachResource(t){this._attachedResources.delete(t)}destroyAttachedResource(t){this._attachedResources.delete(t)&&t.destroy()}destroyAttachedResources(){for(const t of Object.values(this._attachedResources))t.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const t=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];t.get(`${n}s Active`).decrementCount()}trackAllocatedMemory(t,n=this[Symbol.toStringTag]){const i=this._device.statsManager.getStats("Resource Counts");i.get("GPU Memory").addCount(t),i.get(`${n} Memory`).addCount(t),this.allocatedBytes=t}trackDeallocatedMemory(t=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").subtractCount(this.allocatedBytes),n.get(`${t} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const t=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];t.get("Resources Created").incrementCount(),t.get(`${n}s Created`).incrementCount(),t.get(`${n}s Active`).incrementCount()}};function JE(e,t){const n={...t};for(const i in e)e[i]!==void 0&&(n[i]=e[i]);return n}class pt extends ut{static defaultProps={...ut.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1};static MAP_READ=1;static MAP_WRITE=2;static COPY_SRC=4;static COPY_DST=8;static INDEX=16;static VERTEX=32;static UNIFORM=64;static STORAGE=128;static INDIRECT=256;static QUERY_RESOLVE=512;get[Symbol.toStringTag](){return"Buffer"}usage;indexType;updateTimestamp;constructor(t,n){const i={...n};(n.usage||0)&pt.INDEX&&!n.indexType&&(n.data instanceof Uint32Array?i.indexType="uint32":n.data instanceof Uint16Array&&(i.indexType="uint16")),delete i.data,super(t,i,pt.defaultProps),this.usage=i.usage||0,this.indexType=i.indexType,this.updateTimestamp=t.incrementTimestamp()}clone(t){return this.device.createBuffer({...this.props,...t})}readSyncWebGL(t,n){throw new Error("not implemented")}static DEBUG_DATA_MAX_LENGTH=32;debugData=new ArrayBuffer(0);_setDebugData(t,n,i){const s=ArrayBuffer.isView(t)?t.buffer:t,r=Math.min(t?t.byteLength:i,pt.DEBUG_DATA_MAX_LENGTH);s===null?this.debugData=new ArrayBuffer(r):n===0&&i===s.byteLength?this.debugData=s.slice(0,r):this.debugData=s.slice(n,n+r)}}function aw(e){const t=ap[e],n=eI(t),i=e.includes("norm"),s=!i&&!e.startsWith("float"),r=e.startsWith("s");return{dataType:ap[e],byteLength:n,integer:s,signed:r,normalized:i}}function eI(e){return tI[e]}const ap={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},tI={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},nn="texture-compression-bc",lt="texture-compression-astc",bi="texture-compression-etc2",nI="texture-compression-etc1-webgl",xl="texture-compression-pvrtc-webgl",hd="texture-compression-atc-webgl",Sl="float32-renderable-webgl",gd="float16-renderable-webgl",iI="rgb9e5ufloat-renderable-webgl",md="snorm8-renderable-webgl",za="norm16-renderable-webgl",vd="snorm16-renderable-webgl",Tl="float32-filterable",op="float16-filterable-webgl";function ow(e){const t=sI[e];if(!t)throw new Error(`Unsupported texture format ${e}`);return t}const sI={r8unorm:{},r8snorm:{render:md},r8uint:{},r8sint:{},rg8unorm:{},rg8snorm:{render:md},rg8uint:{},rg8sint:{},r16uint:{},r16sint:{},r16float:{render:gd,filter:"float16-filterable-webgl"},"r16unorm-webgl":{f:za},"r16snorm-webgl":{f:vd},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},"rgb8unorm-webgl":{},"rgb8snorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},rgba8snorm:{render:md},rgba8uint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{},rg16sint:{},rg16float:{render:gd,filter:op},"rg16unorm-webgl":{render:za},"rg16snorm-webgl":{render:vd},r32uint:{},r32sint:{},r32float:{render:Sl,filter:Tl},rgb9e5ufloat:{channels:"rgb",packed:!0,render:iI},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:Sl},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},"rgb10a2uint-webgl":{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1,wgpu:!1},"rgb16unorm-webgl":{f:za},"rgb16snorm-webgl":{f:za},rg32uint:{},rg32sint:{},rg32float:{render:!1,filter:Tl},rgba16uint:{},rgba16sint:{},rgba16float:{render:gd,filter:op},"rgba16unorm-webgl":{render:za},"rgba16snorm-webgl":{render:vd},"rgb32float-webgl":{render:Sl,filter:Tl},rgba32uint:{},rgba32sint:{},rgba32float:{render:Sl,filter:Tl},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0},"bc1-rgb-unorm-webgl":{f:nn},"bc1-rgb-unorm-srgb-webgl":{f:nn},"bc1-rgba-unorm":{f:nn},"bc1-rgba-unorm-srgb":{f:nn},"bc2-rgba-unorm":{f:nn},"bc2-rgba-unorm-srgb":{f:nn},"bc3-rgba-unorm":{f:nn},"bc3-rgba-unorm-srgb":{f:nn},"bc4-r-unorm":{f:nn},"bc4-r-snorm":{f:nn},"bc5-rg-unorm":{f:nn},"bc5-rg-snorm":{f:nn},"bc6h-rgb-ufloat":{f:nn},"bc6h-rgb-float":{f:nn},"bc7-rgba-unorm":{f:nn},"bc7-rgba-unorm-srgb":{f:nn},"etc2-rgb8unorm":{f:bi},"etc2-rgb8unorm-srgb":{f:bi},"etc2-rgb8a1unorm":{f:bi},"etc2-rgb8a1unorm-srgb":{f:bi},"etc2-rgba8unorm":{f:bi},"etc2-rgba8unorm-srgb":{f:bi},"eac-r11unorm":{f:bi},"eac-r11snorm":{f:bi},"eac-rg11unorm":{f:bi},"eac-rg11snorm":{f:bi},"astc-4x4-unorm":{f:lt},"astc-4x4-unorm-srgb":{f:lt},"astc-5x4-unorm":{f:lt},"astc-5x4-unorm-srgb":{f:lt},"astc-5x5-unorm":{f:lt},"astc-5x5-unorm-srgb":{f:lt},"astc-6x5-unorm":{f:lt},"astc-6x5-unorm-srgb":{f:lt},"astc-6x6-unorm":{f:lt},"astc-6x6-unorm-srgb":{f:lt},"astc-8x5-unorm":{f:lt},"astc-8x5-unorm-srgb":{f:lt},"astc-8x6-unorm":{f:lt},"astc-8x6-unorm-srgb":{f:lt},"astc-8x8-unorm":{f:lt},"astc-8x8-unorm-srgb":{f:lt},"astc-10x5-unorm":{f:lt},"astc-10x5-unorm-srgb":{f:lt},"astc-10x6-unorm":{f:lt},"astc-10x6-unorm-srgb":{f:lt},"astc-10x8-unorm":{f:lt},"astc-10x8-unorm-srgb":{f:lt},"astc-10x10-unorm":{f:lt},"astc-10x10-unorm-srgb":{f:lt},"astc-12x10-unorm":{f:lt},"astc-12x10-unorm-srgb":{f:lt},"astc-12x12-unorm":{f:lt},"astc-12x12-unorm-srgb":{f:lt},"pvrtc-rgb4unorm-webgl":{f:xl},"pvrtc-rgba4unorm-webgl":{f:xl},"pvrtc-rbg2unorm-webgl":{f:xl},"pvrtc-rgba2unorm-webgl":{f:xl},"etc1-rbg-unorm-webgl":{f:nI},"atc-rgb-unorm-webgl":{f:hd},"atc-rgba-unorm-webgl":{f:hd},"atc-rgbai-unorm-webgl":{f:hd}},rI=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],aI=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/;function lw(e){return rI.some(t=>e.startsWith(t))}function og(e){let t=oI(e);if(lw(e)){t.channels="rgb",t.components=3,t.bytesPerPixel=1,t.srgb=!1,t.compressed=!0;const i=lI(e);i&&(t.blockWidth=i.blockWidth,t.blockHeight=i.blockHeight)}const n=aI.exec(e);if(n){const[,i,s,r,a,o]=n,l=`${r}${s}`,u=aw(l),c=u.byteLength*8,d=i.length,f=[c,d>=2?c:0,d>=3?c:0,d>=4?c:0];t={format:e,attachment:t.attachment,dataType:u.dataType,components:d,channels:i,integer:u.integer,signed:u.signed,normalized:u.normalized,bitsPerChannel:f,bytesPerPixel:u.byteLength*i.length,packed:t.packed,srgb:t.srgb},o==="-webgl"&&(t.webgl=!0),a==="-srgb"&&(t.srgb=!0)}return e.endsWith("-webgl")&&(t.webgl=!0),e.endsWith("-srgb")&&(t.srgb=!0),t}function oI(e){const t=ow(e),n=t.bytesPerPixel||1,i=t.bitsPerChannel||[8,8,8,8];return delete t.bitsPerChannel,delete t.bytesPerPixel,delete t.f,delete t.render,delete t.filter,delete t.blend,delete t.store,{...t,format:e,attachment:t.attachment||"color",channels:t.channels||"r",components:t.components||t.channels?.length||1,bytesPerPixel:n,bitsPerChannel:i,dataType:t.dataType||"uint8",srgb:t.srgb??!1,packed:t.packed??!1,webgl:t.webgl??!1,integer:t.integer??!1,signed:t.signed??!1,normalized:t.normalized??!1,compressed:t.compressed??!1}}function lI(e){const n=/.*-(\d+)x(\d+)-.*/.exec(e);if(n){const[,i,s]=n;return{blockWidth:Number(i),blockHeight:Number(s)}}return null}function cI(e){const t=ow(e),n={format:e,create:t.f??!0,render:t.render??!0,filter:t.filter??!0,blend:t.blend??!0,store:t.store??!0},i=og(e),s=e.startsWith("depth")||e.startsWith("stencil"),r=i?.signed,a=i?.integer,o=i?.webgl;return n.render&&=!r,n.filter&&=!s&&!r&&!a&&!o,n}class uI{}class dI{features;disabledFeatures;constructor(t=[],n){this.features=new Set(t),this.disabledFeatures=n||{}}*[Symbol.iterator](){yield*this.features}has(t){return!this.disabledFeatures?.[t]&&this.features.has(t)}}class xs{static defaultProps={id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,onError:t=>xe.error(t.message)(),_reuseDevices:!1,_requestMaxLimits:!0,_factoryDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_resourceDefaults:{},webgl:{},debug:xe.get("debug")||void 0,debugShaders:xe.get("debug-shaders")||void 0,debugFramebuffers:!!xe.get("debug-framebuffers"),debugWebGL:!!xe.get("debug-webgl"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_handle:void 0};get[Symbol.toStringTag](){return"Device"}constructor(t){this.props={...xs.defaultProps,...t},this.id=this.props.id||lu(this[Symbol.toStringTag].toLowerCase())}id;props;userData={};statsManager=rw;timestamp=0;_reused=!1;_lumaData={};getTextureFormatCapabilities(t){const n=cI(t),i=a=>(typeof a=="string"?this.features.has(a):a)??!0,s=i(n.create),r={format:t,create:s,render:s&&i(n.render),filter:s&&i(n.filter),blend:s&&i(n.blend),store:s&&i(n.store)};return this._getDeviceSpecificTextureFormatCapabilities(r)}isTextureFormatSupported(t,n){return this.getTextureFormatCapabilities(t).create}isTextureFormatFilterable(t){return this.getTextureFormatCapabilities(t).filter}isTextureFormatRenderable(t){return this.getTextureFormatCapabilities(t).render}isTextureFormatCompressed(t){return lw(t)}loseDevice(){return!1}reportError(t){this.props.onError(t)}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}createCommandEncoder(t={}){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(t){this.props.onError(t)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(t,n){throw new Error("not implemented")}readPixelsToBufferWebGL(t,n){throw new Error("not implemented")}setParametersWebGL(t){throw new Error("not implemented")}getParametersWebGL(t){throw new Error("not implemented")}withParametersWebGL(t,n){throw new Error("not implemented")}clearWebGL(t){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}static _getCanvasContextProps(t){return t.createCanvasContext===!0?{}:t.createCanvasContext}_normalizeBufferProps(t){(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const n={...t};return(t.usage||0)&pt.INDEX&&!t.indexType&&(t.data instanceof Uint32Array?n.indexType="uint32":t.data instanceof Uint16Array?n.indexType="uint16":xe.warn("indices buffer content must be of integer type")()),n}}const fI=vr()&&typeof document<"u",hI=()=>fI&&document.readyState==="complete",gI="set luma.log.level=1 (or higher) to trace rendering",lp="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.";class Hr{static defaultProps={...xs.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0};static pageLoaded=mI().then(()=>{xe.probe(2,"DOM is loaded")()});stats=rw;log=xe;VERSION="9.1.9";spector;preregisteredAdapters=new Map;constructor(){if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw xe.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),xe.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),new Error("luma.gl - multiple versions detected: see console log");xe.error("This version of luma.gl has already been initialized")()}xe.log(1,`${this.VERSION} - ${gI}`)(),globalThis.luma=this}registerAdapters(t){for(const n of t)this.preregisteredAdapters.set(n.type,n)}getSupportedAdapters(t=[]){const n=this.getAdapterMap(t);return Array.from(n).map(([,i])=>i).filter(i=>i.isSupported?.()).map(i=>i.type)}getBestAvailableAdapter(t=[]){const n=this.getAdapterMap(t);return n.get("webgpu")?.isSupported?.()?"webgpu":n.get("webgl")?.isSupported?.()?"webgl":null}setDefaultDeviceProps(t){Object.assign(Hr.defaultProps,t)}async createDevice(t={}){t={...Hr.defaultProps,...t},t.waitForPageLoad&&await Hr.pageLoaded;const n=this.getAdapterMap(t.adapters);let i=t.type||"";i==="best-available"&&(i=this.getBestAvailableAdapter(t.adapters)||i);const a=await(this.getAdapterMap(t.adapters)||n).get(i)?.create?.(t);if(a)return a;throw new Error(lp)}async attachDevice(t){const n=this.getAdapterMap(t.adapters);let i="";t.handle instanceof WebGL2RenderingContext&&(i="webgl"),t.createCanvasContext&&await Hr.pageLoaded,t.handle===null&&(i="unknown");const r=await n.get(i)?.attach?.(null);if(r)return r;throw new Error(lp)}enforceWebGL2(t=!0,n=[]){const s=this.getAdapterMap(n).get("webgl");s||xe.warn("enforceWebGL2: webgl adapter not found")(),s?.enforceWebGL2?.(t)}getAdapterMap(t=[]){const n=new Map(this.preregisteredAdapters);for(const i of t)n.set(i.type,i);return n}registerDevices(t){xe.warn("luma.registerDevices() is deprecated, use luma.registerAdapters() instead");for(const n of t){const i=n.adapter;i&&this.preregisteredAdapters.set(i.type,i)}}}const yf=new Hr;function mI(){return hI()||typeof window>"u"?Promise.resolve():new Promise(e=>{window.addEventListener("load",()=>e())})}class vI{}class lg{static defaultProps={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb"};id;props;canvas;htmlCanvas;offscreenCanvas;type;width=1;height=1;resizeObserver;_canvasSizeInfo={clientWidth:0,clientHeight:0,devicePixelRatio:1};toString(){return`${this[Symbol.toStringTag]}(${this.id})`}constructor(t){if(this.props={...lg.defaultProps,...t},t=this.props,!vr()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(t.canvas)typeof t.canvas=="string"?this.canvas=yI(t.canvas):this.canvas=t.canvas;else{const n=_I(t),i=pI(t?.container||null);i.insertBefore(n,i.firstChild),this.canvas=n,t?.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&t.autoResize&&(this.resizeObserver=new ResizeObserver(n=>{for(const i of n)i.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}getDevicePixelRatio(t){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(t=t===void 0?this.props.useDevicePixels:t,!t||t<=0)?1:t===!0?typeof window<"u"&&window.devicePixelRatio||1:t}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const t=this.getDevicePixelRatio(),n=this.canvas;return n.parentElement?[n.clientWidth*t,n.clientHeight*t]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[t,n]=this.getPixelSize();return t/n}cssToDeviceRatio(){try{const[t]=this.getDrawingBufferSize(),n=this._canvasSizeInfo.clientWidth||this.htmlCanvas?.clientWidth;return n?t/n:1}catch{return 1}}cssToDevicePixels(t,n=!0){const i=this.cssToDeviceRatio(),[s,r]=this.getDrawingBufferSize();return bI(t,i,s,r,n)}setDevicePixelRatio(t,n={}){if(!this.htmlCanvas)return;let i="width"in n?n.width:this.htmlCanvas.clientWidth,s="height"in n?n.height:this.htmlCanvas.clientHeight;(!i||!s)&&(xe.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,i=this.htmlCanvas.width||1,s=this.htmlCanvas.height||1);const r=this._canvasSizeInfo;if(r.clientWidth!==i||r.clientHeight!==s||r.devicePixelRatio!==t){let a=t;const o=Math.floor(i*a),l=Math.floor(s*a);if(this.htmlCanvas.width=o,this.htmlCanvas.height=l,this.device.gl){const[c,d]=this.getDrawingBufferSize();(c!==o||d!==l)&&(a=Math.min(c/i,d/s),this.htmlCanvas.width=Math.floor(i*a),this.htmlCanvas.height=Math.floor(s*a),xe.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=i,this._canvasSizeInfo.clientHeight=s,this._canvasSizeInfo.devicePixelRatio=t}}}getDrawingBufferSize(){const t=this.device.gl;return t?[t.drawingBufferWidth,t.drawingBufferHeight]:this.getPixelSize()}_setAutoCreatedCanvasId(t){this.htmlCanvas?.id==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=t)}}function pI(e){if(typeof e=="string"){const t=document.getElementById(e);if(!t)throw new Error(`${e} is not an HTML element`);return t}else if(e)return e;return document.body}function yI(e){const t=document.getElementById(e);if(!(t instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return t}function _I(e){const{width:t,height:n}=e,i=document.createElement("canvas");return i.id=lu("lumagl-auto-created-canvas"),i.width=t||1,i.height=n||1,i.style.width=Number.isFinite(t)?`${t}px`:"100%",i.style.height=Number.isFinite(n)?`${n}px`:"100%",i}function bI(e,t,n,i,s){const r=e,a=cp(r[0],t,n);let o=up(r[1],t,i,s),l=cp(r[0]+1,t,n);const u=l===n-1?l:l-1;l=up(r[1]+1,t,i,s);let c;return s?(l=l===0?l:l+1,c=o,o=l):c=l===i-1?l:l-1,{x:a,y:o,width:Math.max(u-a+1,1),height:Math.max(c-o+1,1)}}function cp(e,t,n){return Math.min(Math.round(e*t),n-1)}function up(e,t,n,i){return i?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}class ct extends ut{static COPY_SRC=1;static COPY_DST=2;static TEXTURE=4;static STORAGE=8;static RENDER_ATTACHMENT=16;static CubeFaces=["+X","-X","+Y","-Y","+Z","-Z"];static defaultProps={...ut.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!1,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,sampler:{},view:void 0,flipY:void 0};get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}dimension;format;width;height;depth;mipLevels;updateTimestamp;constructor(t,n){if(n=ct.normalizeProps(t,n),super(t,n,ct.defaultProps),this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.props.width===void 0||this.props.height===void 0){const i=ct.getTextureDataSize(this.props.data);this.width=i?.width||1,this.height=i?.height||1}this.props.mipmaps&&this.props.mipLevels===void 0&&(this.props.mipLevels="pyramid"),this.mipLevels=this.props.mipLevels==="pyramid"?ct.getMipLevelCount(this.width,this.height):this.props.mipLevels||1,this.updateTimestamp=t.incrementTimestamp()}clone(t){return this.device.createTexture({...this.props,...t})}static isExternalImage(t){return typeof ImageData<"u"&&t instanceof ImageData||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement||typeof VideoFrame<"u"&&t instanceof VideoFrame||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas}static getExternalImageSize(t){if(typeof ImageData<"u"&&t instanceof ImageData||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height};if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)return{width:t.naturalWidth,height:t.naturalHeight};if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)return{width:t.videoWidth,height:t.videoHeight};if(typeof VideoFrame<"u"&&t instanceof VideoFrame)return{width:t.displayWidth,height:t.displayHeight};throw new Error("Unknown image type")}static isTextureLevelData(t){const n=t?.data;return ArrayBuffer.isView(n)}static getTextureDataSize(t){if(!t||ArrayBuffer.isView(t))return null;if(Array.isArray(t))return ct.getTextureDataSize(t[0]);if(ct.isExternalImage(t))return ct.getExternalImageSize(t);if(t&&typeof t=="object"&&t.constructor===Object){const i=Object.values(t)[0];return{width:i.width,height:i.height}}throw new Error("texture size deduction failed")}static normalizeTextureData(t,n){let i;return ArrayBuffer.isView(t)?i=[{data:t,width:n.width,height:n.height}]:Array.isArray(t)?i=t:i=[t],i}static getMipLevelCount(t,n){return Math.floor(Math.log2(Math.max(t,n)))+1}static getCubeFaceDepth(t){switch(t){case"+X":return 0;case"-X":return 1;case"+Y":return 2;case"-Y":return 3;case"+Z":return 4;case"-Z":return 5;default:throw new Error(t)}}static defaultCopyExternalImageOptions={image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1};static normalizeProps(t,n){const i={...n},s=t?.props?._resourceDefaults?.texture||{};Object.assign(i,s);const{width:r,height:a}=i;return typeof r=="number"&&(i.width=Math.max(1,Math.ceil(r))),typeof a=="number"&&(i.height=Math.max(1,Math.ceil(a))),i}}class cu extends ut{static defaultProps={...ut.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0};get[Symbol.toStringTag](){return"TextureView"}constructor(t,n){super(t,n,cu.defaultProps)}}function wI(e,t,n){let i="";const s=t.split(/\r?\n/),r=e.slice().sort((a,o)=>a.lineNum-o.lineNum);switch(n?.showSourceCode||"no"){case"all":let a=0;for(let o=1;o<=s.length;o++)for(i+=cw(s[o-1],o,n);r.length>a&&r[a].lineNum===o;){const l=r[a++];i+=dp(l,s,l.lineNum,{...n,inlineSource:!1})}return i;case"issues":case"no":for(const o of e)i+=dp(o,s,o.lineNum,{inlineSource:n?.showSourceCode!=="no"});return i}}function dp(e,t,n,i){if(i?.inlineSource){const r=xI(t,n),a=e.linePos>0?`${" ".repeat(e.linePos+5)}^^^
`:"";return`
${r}${a}${e.type.toUpperCase()}: ${e.message}

`}const s=e.type==="error"?"red":"#8B4000";return i?.html?`<div class='luma-compiler-log-error' style="color:${s};"><b> ${e.type.toUpperCase()}: ${e.message}</b></div>`:`${e.type.toUpperCase()}: ${e.message}`}function xI(e,t,n){let i="";for(let s=t-2;s<=t;s++){const r=e[s-1];r!==void 0&&(i+=cw(r,t,n))}return i}function cw(e,t,n){const i=n?.html?TI(e):e;return`${SI(String(t),4)}: ${i}${n?.html?"<br/>":`
`}`}function SI(e,t){let n="";for(let i=e.length;i<t;++i)n+=" ";return n+e}function TI(e){return e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}class uu extends ut{static defaultProps={...ut.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0};get[Symbol.toStringTag](){return"Shader"}stage;source;compilationStatus="pending";constructor(t,n){n={...n,debugShaders:n.debugShaders||t.props.debugShaders||"errors"},super(t,{id:AI(n),...n},uu.defaultProps),this.stage=this.props.stage,this.source=this.props.source}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){const t=this.props.debugShaders;switch(t){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const n=await this.getCompilationInfo();t==="warnings"&&n?.length===0||this._displayShaderLog(n)}_displayShaderLog(t){if(typeof document>"u"||!document?.createElement)return;const n=uw(this.source),i=`${this.stage} ${n}`;let s=wI(t,this.source,{showSourceCode:"all",html:!0});const r=this.getTranslatedSource();r&&(s+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${r}</pre></code>`);const a=document.createElement("Button");a.innerHTML=`
<h1>Shader Compilation Error in ${i}</h1><br /><br />
<code style="user-select:text;"><pre>
${s}
</pre></code>`,a.style.top="10px",a.style.left="10px",a.style.position="absolute",a.style.zIndex="9999",a.style.width="100%",a.style.textAlign="left",document.body.appendChild(a),document.getElementsByClassName("luma-compiler-log-error")[0]?.scrollIntoView(),a.onclick=()=>{const l=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(l)}}}function AI(e){return uw(e.source)||e.id||lu(`unnamed ${e.stage}-shader`)}function uw(e,t="unnamed"){const i=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(e);return i?i[1]:t}class Ao extends ut{static defaultProps={...ut.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1};get[Symbol.toStringTag](){return"Sampler"}constructor(t,n){n=Ao.normalizeProps(t,n),super(t,n,Ao.defaultProps)}static normalizeProps(t,n){const i=t?.props?._resourceDefaults?.sampler||{};return{...n,...i}}}class du extends ut{static defaultProps={...ut.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null};get[Symbol.toStringTag](){return"Framebuffer"}width;height;constructor(t,n={}){super(t,n,du.defaultProps),this.width=this.props.width,this.height=this.props.height}clone(t){const n=this.colorAttachments.map(s=>s.texture.clone(t)),i=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(t);return this.device.createFramebuffer({...this.props,colorAttachments:n,depthStencilAttachment:i})}resize(t){let n=!t;if(t){const[i,s]=Array.isArray(t)?t:[t.width,t.height];n=n||s!==this.height||i!==this.width,this.width=i,this.height=s}n&&(xe.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((n,i)=>{if(typeof n=="string"){const s=this.createColorTexture(n,i);return this.attachResource(s),s.view}return n instanceof ct?n.view:n});const t=this.props.depthStencilAttachment;if(t)if(typeof t=="string"){const n=this.createDepthStencilTexture(t);this.attachResource(n),this.depthStencilAttachment=n.view}else t instanceof ct?this.depthStencilAttachment=t.view:this.depthStencilAttachment=t}createColorTexture(t,n){return this.device.createTexture({id:`${this.id}-color-attachment-${n}`,usage:ct.RENDER_ATTACHMENT,format:t,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})}createDepthStencilTexture(t){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:ct.RENDER_ATTACHMENT,format:t,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(t,n){for(let i=0;i<this.colorAttachments.length;++i)if(this.colorAttachments[i]){const s=this.colorAttachments[i].texture.clone({width:t,height:n});this.destroyAttachedResource(this.colorAttachments[i]),this.colorAttachments[i]=s.view,this.attachResource(s.view)}if(this.depthStencilAttachment){const i=this.depthStencilAttachment.texture.clone({width:t,height:n});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=i.view,this.attachResource(i)}this.updateAttachments()}}class ca extends ut{static defaultProps={...ut.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}};get[Symbol.toStringTag](){return"RenderPipeline"}shaderLayout;bufferLayout;linkStatus="pending";hash="";constructor(t,n){super(t,n,ca.defaultProps),this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}setUniformsWebGL(t){throw new Error("Use uniform blocks")}}class Hs extends ut{static defaultClearColor=[0,0,0,1];static defaultClearDepth=1;static defaultClearStencil=0;static defaultProps={...ut.defaultProps,framebuffer:null,parameters:void 0,clearColor:Hs.defaultClearColor,clearColors:void 0,clearDepth:Hs.defaultClearDepth,clearStencil:Hs.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0};get[Symbol.toStringTag](){return"RenderPass"}constructor(t,n){n=Hs.normalizeProps(t,n),super(t,n,Hs.defaultProps)}static normalizeProps(t,n){return{...t.props._resourceDefaults?.renderPass,...n}}}class yc extends ut{static defaultProps={...ut.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0};get[Symbol.toStringTag](){return"ComputePipeline"}hash="";shaderLayout;constructor(t,n){super(t,n,yc.defaultProps),this.shaderLayout=n.shaderLayout}}class cg extends ut{static defaultProps={...ut.defaultProps,measureExecutionTime:void 0};get[Symbol.toStringTag](){return"CommandEncoder"}constructor(t,n){super(t,n,cg.defaultProps)}}class ug extends ut{static defaultProps={...ut.defaultProps};get[Symbol.toStringTag](){return"CommandBuffer"}constructor(t,n){super(t,n,ug.defaultProps)}}function CI(e){const[t,n]=EI[e],i=t==="i32"||t==="u32",s=t!=="u32",r=II[t]*n,a=kI(t,n);return{dataType:t,components:n,defaultVertexFormat:a,byteLength:r,integer:i,signed:s}}function kI(e,t){let n;switch(e){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return t<=2?"float16x2":"float16x4"}return t===1?n:`${n}x${t}`}const EI={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},II={f32:4,f16:2,i32:4,u32:4};function dw(e){let t;e.endsWith("-webgl")&&(e.replace("-webgl",""),t=!0);const[n,i]=e.split("x"),s=n,r=i?parseInt(i):1,a=aw(s),o={type:s,components:r,byteLength:a.byteLength*r,integer:a.integer,signed:a.signed,normalized:a.normalized};return t&&(o.webglOnly=!0),o}function fw(e,t){const n={};for(const i of e.attributes){const s=RI(e,t,i.name);s&&(n[i.name]=s)}return n}function PI(e,t,n=16){const i=fw(e,t),s=new Array(n).fill(null);for(const r of Object.values(i))s[r.location]=r;return s}function RI(e,t,n){const i=MI(e,n),s=OI(t,n);if(!i)return null;const r=CI(i.type),a=s?.vertexFormat||r.defaultVertexFormat,o=dw(a);return{attributeName:s?.attributeName||i.name,bufferName:s?.bufferName||i.name,location:i.location,shaderType:i.type,shaderDataType:r.dataType,shaderComponents:r.components,vertexFormat:a,bufferDataType:o.type,bufferComponents:o.components,normalized:o.normalized,integer:r.integer,stepMode:s?.stepMode||i.stepMode||"vertex",byteOffset:s?.byteOffset||0,byteStride:s?.byteStride||0}}function MI(e,t){const n=e.attributes.find(i=>i.name===t);return n||xe.warn(`shader layout attribute "${t}" not present in shader`),n||null}function OI(e,t){DI(e);let n=NI(e,t);return n||(n=BI(e,t),n)?n:(xe.warn(`layout for attribute "${t}" not present in buffer layout`),null)}function DI(e){for(const t of e)(t.attributes&&t.format||!t.attributes&&!t.format)&&xe.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function NI(e,t){for(const n of e)if(n.format&&n.name===t)return{attributeName:n.name,bufferName:t,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}function BI(e,t){for(const n of e){let i=n.byteStride;if(typeof n.byteStride!="number")for(const r of n.attributes||[]){const a=dw(r.format);i+=a.byteLength}const s=n.attributes?.find(r=>r.attribute===t);if(s)return{attributeName:s.attribute,bufferName:n.name,stepMode:n.stepMode,vertexFormat:s.format,byteOffset:s.byteOffset,byteStride:i}}return null}class dg extends ut{static defaultProps={...ut.defaultProps,renderPipeline:null};get[Symbol.toStringTag](){return"VertexArray"}maxVertexAttributes;attributeInfos;indexBuffer=null;attributes;constructor(t,n){super(t,n,dg.defaultProps),this.maxVertexAttributes=t.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null);const{shaderLayout:i,bufferLayout:s}=n.renderPipeline||{};if(!i||!s)throw new Error("VertexArray");this.attributeInfos=PI(i,s,this.maxVertexAttributes)}setConstantWebGL(t,n){this.device.reportError(new Error("constant attributes not supported"))}}class fg extends ut{static defaultProps={...ut.defaultProps,layout:void 0,buffers:{}};get[Symbol.toStringTag](){return"TransformFeedback"}constructor(t,n){super(t,n,fg.defaultProps)}}class hg extends ut{static defaultProps={...ut.defaultProps,type:void 0,count:void 0};get[Symbol.toStringTag](){return"QuerySet"}constructor(t,n){super(t,n,hg.defaultProps)}}const FI={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function VI(e){return FI[e]}function LI(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}let Al;function hw(e){return(!Al||Al.byteLength<e)&&(Al=new ArrayBuffer(e)),Al}function UI(e,t){const n=hw(e.BYTES_PER_ELEMENT*t);return new e(n,0,t)}function $I(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _c(e){return Array.isArray(e)?e.length===0||typeof e[0]=="number":$I(e)}const fp=1024;class zI{layout={};byteLength;constructor(t){let n=0;for(const[s,r]of Object.entries(t)){const a=VI(r),{type:o,components:l}=a;n=LI(n,l);const u=n;n+=l,this.layout[s]={type:o,size:l,offset:u}}n+=(4-n%4)%4;const i=n*4;this.byteLength=Math.max(i,fp)}getData(t){const n=Math.max(this.byteLength,fp),i=hw(n),s={i32:new Int32Array(i),u32:new Uint32Array(i),f32:new Float32Array(i),f16:new Uint16Array(i)};for(const[r,a]of Object.entries(t)){const o=this.layout[r];if(!o){xe.warn(`Supplied uniform value ${r} not present in uniform block layout`)();continue}const{type:l,size:u,offset:c}=o,d=s[l];if(u===1){if(typeof a!="number"&&typeof a!="boolean"){xe.warn(`Supplied value for single component uniform ${r} is not a number: ${a}`)();continue}d[c]=Number(a)}else{if(!_c(a)){xe.warn(`Supplied value for multi component / array uniform ${r} is not a numeric array: ${a}`)();continue}d.set(a,c)}}return new Uint8Array(i)}has(t){return!!this.layout[t]}get(t){return this.layout[t]}}function WI(e,t,n=16){if(e!==t)return!1;const i=e,s=t;if(!_c(i))return!1;if(_c(s)&&i.length===s.length){for(let r=0;r<i.length;++r)if(s[r]!==i[r])return!1}return!0}function HI(e){return _c(e)?e.slice():e}class jI{name;uniforms={};modifiedUniforms={};modified=!0;bindingLayout={};needsRedraw="initialized";constructor(t){if(this.name=t?.name||"unnamed",t?.name&&t?.shaderLayout){const n=t?.shaderLayout.bindings?.find(s=>s.type==="uniform"&&s.name===t?.name);if(!n)throw new Error(t?.name);const i=n;for(const s of i.uniforms||[])this.bindingLayout[s.name]=s}}setUniforms(t){for(const[n,i]of Object.entries(t))this._setUniform(n,i),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${n}=${i}`)}setNeedsRedraw(t){this.needsRedraw=this.needsRedraw||t}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(t,n){WI(this.uniforms[t],n)||(this.uniforms[t]=HI(n),this.modifiedUniforms[t]=!0,this.modified=!0)}}class XI{uniformBlocks=new Map;uniformBufferLayouts=new Map;uniformBuffers=new Map;constructor(t){for(const[n,i]of Object.entries(t)){const s=n,r=new zI(i.uniformTypes||{});this.uniformBufferLayouts.set(s,r);const a=new jI({name:n});a.setUniforms(i.defaultUniforms||{}),this.uniformBlocks.set(s,a)}}destroy(){for(const t of this.uniformBuffers.values())t.destroy()}setUniforms(t){for(const[n,i]of Object.entries(t))this.uniformBlocks.get(n)?.setUniforms(i);this.updateUniformBuffers()}getUniformBufferByteLength(t){return this.uniformBufferLayouts.get(t)?.byteLength||0}getUniformBufferData(t){const n=this.uniformBlocks.get(t)?.getAllUniforms()||{};return this.uniformBufferLayouts.get(t)?.getData(n)}createUniformBuffer(t,n,i){i&&this.setUniforms(i);const s=this.getUniformBufferByteLength(n),r=t.createBuffer({usage:pt.UNIFORM|pt.COPY_DST,byteLength:s}),a=this.getUniformBufferData(n);return r.write(a),r}getManagedUniformBuffer(t,n){if(!this.uniformBuffers.get(n)){const i=this.getUniformBufferByteLength(n),s=t.createBuffer({usage:pt.UNIFORM|pt.COPY_DST,byteLength:i});this.uniformBuffers.set(n,s)}return this.uniformBuffers.get(n)}updateUniformBuffers(){let t=!1;for(const n of this.uniformBlocks.keys()){const i=this.updateUniformBuffer(n);t||=i}return t&&xe.log(3,`UniformStore.updateUniformBuffers(): ${t}`)(),t}updateUniformBuffer(t){const n=this.uniformBlocks.get(t);let i=this.uniformBuffers.get(t),s=!1;if(i&&n?.needsRedraw){s||=n.needsRedraw;const r=this.getUniformBufferData(t);i=this.uniformBuffers.get(t),i?.write(r);const a=this.uniformBlocks.get(t)?.getAllUniforms();xe.log(4,`Writing to uniform buffer ${String(t)}`,r,a)()}return s}}function gw(e){const t=ArrayBuffer.isView(e)?e.constructor:e;switch(t){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(t.constructor.name)}}function mw(e){switch(e){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(e)}}function YI(e,t,n){if(!t||t>4)throw new Error(`size ${t}`);const i=t;let s=gw(e);if(s==="uint8"&&n&&i===1)return"unorm8-webgl";if(s==="uint8"&&n&&i===3)return"unorm8x3-webgl";if(s==="uint8"||s==="sint8"){if(i===1||i===3)throw new Error(`size: ${t}`);return n&&(s=s.replace("int","norm")),`${s}x${i}`}if(s==="uint16"||s==="sint16"){if(i===1||i===3)throw new Error(`size: ${t}`);return n&&(s=s.replace("int","norm")),`${s}x${i}`}return i===1?s:`${s}x${i}`}class pd{bufferLayouts;constructor(t){this.bufferLayouts=t}getBufferLayout(t){return this.bufferLayouts.find(n=>n.name===t)||null}getAttributeNamesForBuffer(t){return t.attributes?t.attributes?.map(n=>n.attribute):[t.name]}mergeBufferLayouts(t,n){const i=[...t];for(const s of n){const r=i.findIndex(a=>a.name===s.name);r<0?i.push(s):i[r]=s}return i}getBufferIndex(t){const n=this.bufferLayouts.findIndex(i=>i.name===t);return n===-1&&xe.warn(`BufferLayout: Missing buffer for "${t}".`)(),n}}function KI(e,t){const n=Object.fromEntries(e.attributes.map(s=>[s.name,s.location])),i=t.slice();return i.sort((s,r)=>{const a=s.attributes?s.attributes.map(c=>c.attribute):[s.name],o=r.attributes?r.attributes.map(c=>c.attribute):[r.name],l=Math.min(...a.map(c=>n[c])),u=Math.min(...o.map(c=>n[c]));return l-u}),i}class qn{constructor(t,n){this.name=t,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}get isPointer(){return!1}getTypeName(){return this.name}}class hp{constructor(t,n,i){this.name=t,this.type=n,this.attributes=i,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class _s extends qn{constructor(t,n){super(t,n),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class Ss extends qn{constructor(t,n){super(t,n),this.count=0,this.stride=0}get isArray(){return!0}getTypeName(){return`array<${this.format.getTypeName()}, ${this.count}>`}}class _f extends qn{constructor(t,n,i){super(t,i),this.format=n}get isPointer(){return!0}getTypeName(){return`&${this.format.getTypeName()}`}}class rr extends qn{constructor(t,n,i,s){super(t,i),this.format=n,this.access=s}get isTemplate(){return!0}getTypeName(){let t=this.name;if(this.format!==null){if(t==="vec2"||t==="vec3"||t==="vec4"||t==="mat2x2"||t==="mat2x3"||t==="mat2x4"||t==="mat3x2"||t==="mat3x3"||t==="mat3x4"||t==="mat4x2"||t==="mat4x3"||t==="mat4x4"){if(this.format.name==="f32")return t+="f",t;if(this.format.name==="i32")return t+="i",t;if(this.format.name==="u32")return t+="u",t;if(this.format.name==="bool")return t+="b",t;if(this.format.name==="f16")return t+="h",t}t+=`<${this.format.name}>`}else if(t==="vec2"||t==="vec3"||t==="vec4")return t;return t}}var ps;(e=>{e[e.Uniform=0]="Uniform",e[e.Storage=1]="Storage",e[e.Texture=2]="Texture",e[e.Sampler=3]="Sampler",e[e.StorageTexture=4]="StorageTexture"})(ps||(ps={}));class Cl{constructor(t,n,i,s,r,a,o){this.name=t,this.type=n,this.group=i,this.binding=s,this.attributes=r,this.resourceType=a,this.access=o}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class qI{constructor(t,n){this.name=t,this.type=n}}class ZI{constructor(t,n,i,s){this.name=t,this.type=n,this.locationType=i,this.location=s,this.interpolation=null}}class gp{constructor(t,n,i,s){this.name=t,this.type=n,this.locationType=i,this.location=s}}class GI{constructor(t,n,i,s){this.name=t,this.type=n,this.attributes=i,this.id=s}}class QI{constructor(t,n,i){this.name=t,this.type=n,this.attributes=i}}class JI{constructor(t,n=null,i){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=t,this.stage=n,this.attributes=i}}class eP{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}function tP(e){var t=(32768&e)>>15,n=(31744&e)>>10,i=1023&e;return n==0?(t?-1:1)*Math.pow(2,-14)*(i/Math.pow(2,10)):n==31?i?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,n-15)*(1+i/Math.pow(2,10))}const vw=new Float32Array(1),nP=new Int32Array(vw.buffer),sn=new Uint16Array(1);function iP(e){vw[0]=e;const t=nP[0],n=t>>31&1;let i=t>>23&255,s=8388607&t;if(i===255)return sn[0]=n<<15|31744|(s!==0?512:0),sn[0];if(i===0){if(s===0)return sn[0]=n<<15,sn[0];s|=8388608;let r=113;for(;!(8388608&s);)s<<=1,r--;return i=127-r,s&=8388607,i>0?(s=(s>>126-i)+(s>>127-i&1),sn[0]=n<<15|i<<10|s>>13,sn[0]):(sn[0]=n<<15,sn[0])}return i=i-127+15,i>=31?(sn[0]=n<<15|31744,sn[0]):i<=0?i<-10?(sn[0]=n<<15,sn[0]):(s=(8388608|s)>>1-i,sn[0]=n<<15|s>>13,sn[0]):(s>>=13,sn[0]=n<<15|i<<10|s,sn[0])}const gg=new Uint32Array(1),pw=new Float32Array(gg.buffer,0,1);function mp(e){const t=112+(e>>6&31)<<23|(63&e)<<17;return gg[0]=t,pw[0]}function sP(e,t,n,i,s,r,a,o,l){const u=i*(a>>=s)*(r>>=s)+n*a+t*o;switch(l){case"r8unorm":return[Je(e,u,"8unorm",1)[0]];case"r8snorm":return[Je(e,u,"8snorm",1)[0]];case"r8uint":return[Je(e,u,"8uint",1)[0]];case"r8sint":return[Je(e,u,"8sint",1)[0]];case"rg8unorm":{const c=Je(e,u,"8unorm",2);return[c[0],c[1]]}case"rg8snorm":{const c=Je(e,u,"8snorm",2);return[c[0],c[1]]}case"rg8uint":{const c=Je(e,u,"8uint",2);return[c[0],c[1]]}case"rg8sint":{const c=Je(e,u,"8sint",2);return[c[0],c[1]]}case"rgba8unorm-srgb":case"rgba8unorm":{const c=Je(e,u,"8unorm",4);return[c[0],c[1],c[2],c[3]]}case"rgba8snorm":{const c=Je(e,u,"8snorm",4);return[c[0],c[1],c[2],c[3]]}case"rgba8uint":{const c=Je(e,u,"8uint",4);return[c[0],c[1],c[2],c[3]]}case"rgba8sint":{const c=Je(e,u,"8sint",4);return[c[0],c[1],c[2],c[3]]}case"bgra8unorm-srgb":case"bgra8unorm":{const c=Je(e,u,"8unorm",4);return[c[2],c[1],c[0],c[3]]}case"r16uint":return[Je(e,u,"16uint",1)[0]];case"r16sint":return[Je(e,u,"16sint",1)[0]];case"r16float":return[Je(e,u,"16float",1)[0]];case"rg16uint":{const c=Je(e,u,"16uint",2);return[c[0],c[1]]}case"rg16sint":{const c=Je(e,u,"16sint",2);return[c[0],c[1]]}case"rg16float":{const c=Je(e,u,"16float",2);return[c[0],c[1]]}case"rgba16uint":{const c=Je(e,u,"16uint",4);return[c[0],c[1],c[2],c[3]]}case"rgba16sint":{const c=Je(e,u,"16sint",4);return[c[0],c[1],c[2],c[3]]}case"rgba16float":{const c=Je(e,u,"16float",4);return[c[0],c[1],c[2],c[3]]}case"r32uint":return[Je(e,u,"32uint",1)[0]];case"r32sint":return[Je(e,u,"32sint",1)[0]];case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return[Je(e,u,"32float",1)[0]];case"rg32uint":{const c=Je(e,u,"32uint",2);return[c[0],c[1]]}case"rg32sint":{const c=Je(e,u,"32sint",2);return[c[0],c[1]]}case"rg32float":{const c=Je(e,u,"32float",2);return[c[0],c[1]]}case"rgba32uint":{const c=Je(e,u,"32uint",4);return[c[0],c[1],c[2],c[3]]}case"rgba32sint":{const c=Je(e,u,"32sint",4);return[c[0],c[1],c[2],c[3]]}case"rgba32float":{const c=Je(e,u,"32float",4);return[c[0],c[1],c[2],c[3]]}case"rg11b10ufloat":{const c=new Uint32Array(e.buffer,u,1)[0],d=(4192256&c)>>11,f=(4290772992&c)>>22;return[mp(2047&c),mp(d),(function(h){const g=112+(h>>5&31)<<23|(31&h)<<18;return gg[0]=g,pw[0]})(f),1]}}return null}function Je(e,t,n,i){const s=[0,0,0,0];for(let r=0;r<i;++r)switch(n){case"8unorm":s[r]=e[t]/255,t++;break;case"8snorm":s[r]=e[t]/255*2-1,t++;break;case"8uint":s[r]=e[t],t++;break;case"8sint":s[r]=e[t]-127,t++;break;case"16uint":s[r]=e[t]|e[t+1]<<8,t+=2;break;case"16sint":s[r]=(e[t]|e[t+1]<<8)-32768,t+=2;break;case"16float":s[r]=tP(e[t]|e[t+1]<<8),t+=2;break;case"32uint":case"32sint":s[r]=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,t+=4;break;case"32float":s[r]=new Float32Array(e.buffer,t,1)[0],t+=4}return s}function it(e,t,n,i,s){for(let r=0;r<i;++r)switch(n){case"8unorm":e[t]=255*s[r],t++;break;case"8snorm":e[t]=.5*(s[r]+1)*255,t++;break;case"8uint":e[t]=s[r],t++;break;case"8sint":e[t]=s[r]+127,t++;break;case"16uint":new Uint16Array(e.buffer,t,1)[0]=s[r],t+=2;break;case"16sint":new Int16Array(e.buffer,t,1)[0]=s[r],t+=2;break;case"16float":{const a=iP(s[r]);new Uint16Array(e.buffer,t,1)[0]=a,t+=2;break}case"32uint":new Uint32Array(e.buffer,t,1)[0]=s[r],t+=4;break;case"32sint":new Int32Array(e.buffer,t,1)[0]=s[r],t+=4;break;case"32float":new Float32Array(e.buffer,t,1)[0]=s[r],t+=4}return s}const yd={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"rgba8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bgra8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:"depth32float",channels:1},"depth24plus-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:"depth32float",channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},"depth32float-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:"depth32float",channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bc1-rgba-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc1-rgba-unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc4-r-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc4-r-snorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc5-rg-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc5-rg-snorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc6h-rgb-ufloat":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc6h-rgb-float":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"eac-r11unorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-r11snorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-rg11unorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"eac-rg11snorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"astc-4x4-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-4x4-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x5-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-5x5-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x6-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-6x6-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-8x5-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x5-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x6-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x6-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x8-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-8x8-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-10x5-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x5-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x6-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x6-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x8-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x8-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x10-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-10x10-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x12-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},"astc-12x12-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}};class ti{constructor(){this.id=ti._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return""}search(t){t(this)}searchBlock(t,n){if(t){n(bc.instance);for(const i of t)i instanceof Array?this.searchBlock(i,n):i.search(n);n(wc.instance)}}constEvaluate(t,n){throw new Error("Cannot evaluate node")}constEvaluateString(t){return this.constEvaluate(t).toString()}}ti._id=0;class bc extends ti{}bc.instance=new bc;class wc extends ti{}wc.instance=new wc;const yw=new Set(["all","all","any","select","arrayLength","abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","clamp","cos","cosh","countLeadingZeros","countOneBits","countTrailingZeros","cross","degrees","determinant","distance","dot","dot4U8Packed","dot4I8Packed","exp","exp2","extractBits","faceForward","firstLeadingBit","firstTrailingBit","floor","fma","fract","frexp","insertBits","inverseSqrt","ldexp","length","log","log2","max","min","mix","modf","normalize","pow","quantizeToF16","radians","reflect","refract","reverseBits","round","saturate","sign","sin","sinh","smoothStep","sqrt","step","tan","tanh","transpose","trunc","dpdx","dpdxCoarse","dpdxFine","dpdy","dpdyCoarse","dpdyFine","fwidth","fwidthCoarse","fwidthFine","textureDimensions","textureGather","textureGatherCompare","textureLoad","textureNumLayers","textureNumLevels","textureNumSamples","textureSample","textureSampleBias","textureSampleCompare","textureSampleCompareLevel","textureSampleGrad","textureSampleLevel","textureSampleBaseClampToEdge","textureStore","atomicLoad","atomicStore","atomicAdd","atomicSub","atomicMax","atomicMin","atomicAnd","atomicOr","atomicXor","atomicExchange","atomicCompareExchangeWeak","pack4x8snorm","pack4x8unorm","pack4xI8","pack4xU8","pack4x8Clamp","pack4xU8Clamp","pack2x16snorm","pack2x16unorm","pack2x16float","unpack4x8snorm","unpack4x8unorm","unpack4xI8","unpack4xU8","unpack2x16snorm","unpack2x16unorm","unpack2x16float","storageBarrier","textureBarrier","workgroupBarrier","workgroupUniformLoad","subgroupAdd","subgroupExclusiveAdd","subgroupInclusiveAdd","subgroupAll","subgroupAnd","subgroupAny","subgroupBallot","subgroupBroadcast","subgroupBroadcastFirst","subgroupElect","subgroupMax","subgroupMin","subgroupMul","subgroupExclusiveMul","subgroupInclusiveMul","subgroupOr","subgroupShuffle","subgroupShuffleDown","subgroupShuffleUp","subgroupShuffleXor","subgroupXor","quadBroadcast","quadSwapDiagonal","quadSwapX","quadSwapY"]);class Tt extends ti{constructor(){super()}}class Co extends Tt{constructor(t,n,i,s,r,a){super(),this.calls=new Set,this.name=t,this.args=n,this.returnType=i,this.body=s,this.startLine=r,this.endLine=a}get astNodeType(){return"function"}search(t){if(this.attributes)for(const n of this.attributes)t(n);t(this);for(const n of this.args)t(n);this.searchBlock(this.body,t)}}class rP extends Tt{constructor(t){super(),this.expression=t}get astNodeType(){return"staticAssert"}search(t){this.expression.search(t)}}class _w extends Tt{constructor(t,n){super(),this.condition=t,this.body=n}get astNodeType(){return"while"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class bf extends Tt{constructor(t,n){super(),this.body=t,this.loopId=n}get astNodeType(){return"continuing"}search(t){this.searchBlock(this.body,t)}}class bw extends Tt{constructor(t,n,i,s){super(),this.init=t,this.condition=n,this.increment=i,this.body=s}get astNodeType(){return"for"}search(t){var n,i,s;(n=this.init)===null||n===void 0||n.search(t),(i=this.condition)===null||i===void 0||i.search(t),(s=this.increment)===null||s===void 0||s.search(t),this.searchBlock(this.body,t)}}class Xi extends Tt{constructor(t,n,i,s,r){super(),this.attributes=null,this.name=t,this.type=n,this.storage=i,this.access=s,this.value=r}get astNodeType(){return"var"}search(t){var n;t(this),(n=this.value)===null||n===void 0||n.search(t)}}class mg extends Tt{constructor(t,n,i){super(),this.attributes=null,this.name=t,this.type=n,this.value=i}get astNodeType(){return"override"}search(t){var n;(n=this.value)===null||n===void 0||n.search(t)}}class fo extends Tt{constructor(t,n,i,s,r){super(),this.attributes=null,this.name=t,this.type=n,this.storage=i,this.access=s,this.value=r}get astNodeType(){return"let"}search(t){var n;t(this),(n=this.value)===null||n===void 0||n.search(t)}}class Yl extends Tt{constructor(t,n,i,s,r){super(),this.attributes=null,this.name=t,this.type=n,this.storage=i,this.access=s,this.value=r}get astNodeType(){return"const"}constEvaluate(t,n){return this.value.constEvaluate(t,n)}search(t){var n;t(this),(n=this.value)===null||n===void 0||n.search(t)}}var jr,qa,J,q;(e=>{e.increment="++",e.decrement="--"})(jr||(jr={})),(e=>{e.parse=function(t){const n=t;if(n=="parse")throw new Error("Invalid value for IncrementOperator");return e[n]}})(jr||(jr={}));class ww extends Tt{constructor(t,n){super(),this.operator=t,this.variable=n}get astNodeType(){return"increment"}search(t){this.variable.search(t)}}(e=>{e.assign="=",e.addAssign="+=",e.subtractAssin="-=",e.multiplyAssign="*=",e.divideAssign="/=",e.moduloAssign="%=",e.andAssign="&=",e.orAssign="|=",e.xorAssign="^=",e.shiftLeftAssign="<<=",e.shiftRightAssign=">>="})(qa||(qa={})),(e=>{e.parse=function(t){const n=t;if(n=="parse")throw new Error("Invalid value for AssignOperator");return n}})(qa||(qa={}));class xw extends Tt{constructor(t,n,i){super(),this.operator=t,this.variable=n,this.value=i}get astNodeType(){return"assign"}search(t){this.variable.search(t),this.value.search(t)}}class vg extends Tt{constructor(t,n){super(),this.name=t,this.args=n}get astNodeType(){return"call"}isBuiltin(){return yw.has(this.name)}search(t){for(const n of this.args)n.search(t);t(this)}}class Sw extends Tt{constructor(t,n){super(),this.body=t,this.continuing=n}get astNodeType(){return"loop"}search(t){var n;this.searchBlock(this.body,t),(n=this.continuing)===null||n===void 0||n.search(t)}}class Tw extends Tt{constructor(t,n){super(),this.condition=t,this.cases=n}get astNodeType(){return"switch"}search(t){t(this);for(const n of this.cases)n.search(t)}}class Aw extends Tt{constructor(t,n,i,s){super(),this.condition=t,this.body=n,this.elseif=i,this.else=s}get astNodeType(){return"if"}search(t){this.condition.search(t),this.searchBlock(this.body,t),this.searchBlock(this.elseif,t),this.searchBlock(this.else,t)}}class Cw extends Tt{constructor(t){super(),this.value=t}get astNodeType(){return"return"}search(t){var n;(n=this.value)===null||n===void 0||n.search(t)}}class aP extends Tt{constructor(t){super(),this.name=t}get astNodeType(){return"enable"}}class oP extends Tt{constructor(t){super(),this.extensions=t}get astNodeType(){return"requires"}}class kw extends Tt{constructor(t,n){super(),this.severity=t,this.rule=n}get astNodeType(){return"diagnostic"}}class pg extends Tt{constructor(t,n){super(),this.name=t,this.type=n}get astNodeType(){return"alias"}}class lP extends Tt{constructor(){super()}get astNodeType(){return"discard"}}class Ew extends Tt{constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return"break"}}class Iw extends Tt{constructor(){super(),this.loopId=-1}get astNodeType(){return"continue"}}class fe extends Tt{constructor(t){super(),this.attributes=null,this.name=t}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(t){let n=t[0];if(n.name==="f32")return n;for(let i=1;i<t.length;++i){const s=fe._priority.get(n.name);fe._priority.get(t[i].name)<s&&(n=t[i])}return n.name==="x32"?fe.i32:n}getTypeName(){return this.name}}fe.x32=new fe("x32"),fe.f32=new fe("f32"),fe.i32=new fe("i32"),fe.u32=new fe("u32"),fe.f16=new fe("f16"),fe.bool=new fe("bool"),fe.void=new fe("void"),fe._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class vp extends fe{constructor(t){super(t)}}class $i extends fe{constructor(t,n,i,s){super(t),this.members=n,this.startLine=i,this.endLine=s}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(t){for(let n=0;n<this.members.length;n++)if(this.members[n].name==t)return n;return-1}search(t){for(const n of this.members)t(n)}}class Q extends fe{constructor(t,n,i){super(t),this.format=n,this.access=i}get astNodeType(){return"template"}getTypeName(){let t=this.name;if(this.format!==null){if(t==="vec2"||t==="vec3"||t==="vec4"||t==="mat2x2"||t==="mat2x3"||t==="mat2x4"||t==="mat3x2"||t==="mat3x3"||t==="mat3x4"||t==="mat4x2"||t==="mat4x3"||t==="mat4x4"){if(this.format.name==="f32")return t+="f",t;if(this.format.name==="i32")return t+="i",t;if(this.format.name==="u32")return t+="u",t;if(this.format.name==="bool")return t+="b",t;if(this.format.name==="f16")return t+="h",t}t+=`<${this.format.name}>`}else if(t==="vec2"||t==="vec3"||t==="vec4")return t;return t}}Q.vec2f=new Q("vec2",fe.f32,null),Q.vec3f=new Q("vec3",fe.f32,null),Q.vec4f=new Q("vec4",fe.f32,null),Q.vec2i=new Q("vec2",fe.i32,null),Q.vec3i=new Q("vec3",fe.i32,null),Q.vec4i=new Q("vec4",fe.i32,null),Q.vec2u=new Q("vec2",fe.u32,null),Q.vec3u=new Q("vec3",fe.u32,null),Q.vec4u=new Q("vec4",fe.u32,null),Q.vec2h=new Q("vec2",fe.f16,null),Q.vec3h=new Q("vec3",fe.f16,null),Q.vec4h=new Q("vec4",fe.f16,null),Q.vec2b=new Q("vec2",fe.bool,null),Q.vec3b=new Q("vec3",fe.bool,null),Q.vec4b=new Q("vec4",fe.bool,null),Q.mat2x2f=new Q("mat2x2",fe.f32,null),Q.mat2x3f=new Q("mat2x3",fe.f32,null),Q.mat2x4f=new Q("mat2x4",fe.f32,null),Q.mat3x2f=new Q("mat3x2",fe.f32,null),Q.mat3x3f=new Q("mat3x3",fe.f32,null),Q.mat3x4f=new Q("mat3x4",fe.f32,null),Q.mat4x2f=new Q("mat4x2",fe.f32,null),Q.mat4x3f=new Q("mat4x3",fe.f32,null),Q.mat4x4f=new Q("mat4x4",fe.f32,null),Q.mat2x2h=new Q("mat2x2",fe.f16,null),Q.mat2x3h=new Q("mat2x3",fe.f16,null),Q.mat2x4h=new Q("mat2x4",fe.f16,null),Q.mat3x2h=new Q("mat3x2",fe.f16,null),Q.mat3x3h=new Q("mat3x3",fe.f16,null),Q.mat3x4h=new Q("mat3x4",fe.f16,null),Q.mat4x2h=new Q("mat4x2",fe.f16,null),Q.mat4x3h=new Q("mat4x3",fe.f16,null),Q.mat4x4h=new Q("mat4x4",fe.f16,null),Q.mat2x2i=new Q("mat2x2",fe.i32,null),Q.mat2x3i=new Q("mat2x3",fe.i32,null),Q.mat2x4i=new Q("mat2x4",fe.i32,null),Q.mat3x2i=new Q("mat3x2",fe.i32,null),Q.mat3x3i=new Q("mat3x3",fe.i32,null),Q.mat3x4i=new Q("mat3x4",fe.i32,null),Q.mat4x2i=new Q("mat4x2",fe.i32,null),Q.mat4x3i=new Q("mat4x3",fe.i32,null),Q.mat4x4i=new Q("mat4x4",fe.i32,null),Q.mat2x2u=new Q("mat2x2",fe.u32,null),Q.mat2x3u=new Q("mat2x3",fe.u32,null),Q.mat2x4u=new Q("mat2x4",fe.u32,null),Q.mat3x2u=new Q("mat3x2",fe.u32,null),Q.mat3x3u=new Q("mat3x3",fe.u32,null),Q.mat3x4u=new Q("mat3x4",fe.u32,null),Q.mat4x2u=new Q("mat4x2",fe.u32,null),Q.mat4x3u=new Q("mat4x3",fe.u32,null),Q.mat4x4u=new Q("mat4x4",fe.u32,null);class Kl extends fe{constructor(t,n,i,s){super(t),this.storage=n,this.type=i,this.access=s}get astNodeType(){return"pointer"}}class ho extends fe{constructor(t,n,i,s){super(t),this.attributes=n,this.format=i,this.count=s}get astNodeType(){return"array"}get isArray(){return!0}}class Za extends fe{constructor(t,n,i){super(t),this.format=n,this.access=i}get astNodeType(){return"sampler"}}class gi extends ti{constructor(){super(),this.postfix=null}}class ar extends gi{constructor(t){super(),this.value=t}get astNodeType(){return"stringExpr"}toString(){return this.value}constEvaluateString(){return this.value}}class Ti extends gi{constructor(t,n){super(),this.type=t,this.args=n}get astNodeType(){return"createExpr"}search(t){if(t(this),this.args)for(const n of this.args)n.search(t)}constEvaluate(t,n){return n&&(n[0]=this.type),t.evalExpression(this,t.context)}}class yg extends gi{constructor(t,n){super(),this.cachedReturnValue=null,this.name=t,this.args=n}get astNodeType(){return"callExpr"}setCachedReturnValue(t){this.cachedReturnValue=t}get isBuiltin(){return yw.has(this.name)}constEvaluate(t,n){return t.evalExpression(this,t.context)}search(t){for(const n of this.args)n.search(t);t(this)}}class Nn extends gi{constructor(t){super(),this.name=t}get astNodeType(){return"varExpr"}search(t){t(this),this.postfix&&this.postfix.search(t)}constEvaluate(t,n){return t.evalExpression(this,t.context)}}class Pw extends gi{constructor(t,n){super(),this.name=t,this.initializer=n}get astNodeType(){return"constExpr"}constEvaluate(t,n){if(this.initializer){const i=t.evalExpression(this.initializer,t.context);return i!==null&&this.postfix?i.getSubData(t,this.postfix,t.context):i}return null}search(t){this.initializer.search(t)}}class Lt extends gi{constructor(t,n){super(),this.value=t,this.type=n}get astNodeType(){return"literalExpr"}constEvaluate(t,n){return n!==void 0&&(n[0]=this.type),this.value}get isScalar(){return this.value instanceof K}get isVector(){return this.value instanceof V||this.value instanceof Ve}get scalarValue(){return this.value instanceof K?this.value.value:(console.error("Value is not scalar."),0)}get vectorValue(){return this.value instanceof V||this.value instanceof Ve?this.value.data:(console.error("Value is not a vector or matrix."),new Float32Array(0))}}class Rw extends gi{constructor(t,n){super(),this.type=t,this.value=n}get astNodeType(){return"bitcastExpr"}search(t){this.value.search(t)}}class ua extends gi{constructor(t){super(),this.index=t}search(t){this.index.search(t)}}class Mw extends gi{constructor(){super()}}class Nt extends Mw{constructor(t,n){super(),this.operator=t,this.right=n}get astNodeType(){return"unaryOp"}constEvaluate(t,n){return t.evalExpression(this,t.context)}search(t){this.right.search(t)}}class ri extends Mw{constructor(t,n,i){super(),this.operator=t,this.left=n,this.right=i}get astNodeType(){return"binaryOp"}_getPromotedType(t,n){return t.name===n.name?t:t.name==="f32"||n.name==="f32"?fe.f32:t.name==="u32"||n.name==="u32"?fe.u32:fe.i32}constEvaluate(t,n){return t.evalExpression(this,t.context)}search(t){this.left.search(t),this.right.search(t)}}class Ow extends ti{constructor(t){super(),this.body=t}search(t){t(this),this.searchBlock(this.body,t)}}class ql extends gi{constructor(){super()}get astNodeType(){return"default"}}class Dw extends Ow{constructor(t,n){super(n),this.selectors=t}get astNodeType(){return"case"}search(t){this.searchBlock(this.body,t)}}class Nw extends Ow{constructor(t){super(t)}get astNodeType(){return"default"}search(t){this.searchBlock(this.body,t)}}class pp extends ti{constructor(t,n,i){super(),this.name=t,this.type=n,this.attributes=i}get astNodeType(){return"argument"}}class cP extends ti{constructor(t,n){super(),this.condition=t,this.body=n}get astNodeType(){return"elseif"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class yp extends ti{constructor(t,n,i){super(),this.name=t,this.type=n,this.attributes=i}get astNodeType(){return"member"}}class Bw extends ti{constructor(t,n){super(),this.name=t,this.value=n}get astNodeType(){return"attribute"}}class Qn{constructor(t,n){this.parent=null,this.typeInfo=t,this.parent=n,this.id=Qn._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(t,n,i,s){console.error(`SetDataValue: Not implemented for ${this.constructor.name}`)}getSubData(t,n,i){return console.error(`GetDataValue: Not implemented for ${this.constructor.name}`),null}toString(){return`<${this.typeInfo.getTypeName()}>`}}Qn._id=0;class wf extends Qn{constructor(){super(new qn("void",null),null)}toString(){return"void"}}wf.void=new wf;class Dr extends Qn{constructor(t){super(new _f("pointer",t.typeInfo,null),null),this.reference=t}clone(){return this}setDataValue(t,n,i,s){this.reference.setDataValue(t,n,i,s)}getSubData(t,n,i){return n?this.reference.getSubData(t,n,i):this}toString(){return`&${this.reference.toString()}`}}class K extends Qn{constructor(t,n,i=null){super(n,i),t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array?this.data=t:this.typeInfo.name==="x32"?t-Math.floor(t)!==0?this.data=new Float32Array([t]):this.data=t>=0?new Uint32Array([t]):new Int32Array([t]):this.typeInfo.name==="i32"||this.typeInfo.name==="bool"?this.data=new Int32Array([t]):this.typeInfo.name==="u32"?this.data=new Uint32Array([t]):this.typeInfo.name==="f32"||this.typeInfo.name==="f16"?this.data=new Float32Array([t]):console.error("ScalarData2: Invalid type",n)}clone(){if(this.data instanceof Float32Array)return new K(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new K(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new K(new Uint32Array(this.data),this.typeInfo,null);throw"ScalarData: Invalid data type"}get value(){return this.data[0]}set value(t){this.data[0]=t}setDataValue(t,n,i,s){if(i)return void console.error("SetDataValue: Scalar data does not support postfix",i);if(!(n instanceof K))return void console.error("SetDataValue: Invalid value",n);let r=n.data[0];this.typeInfo.name==="i32"||this.typeInfo.name==="u32"?r=Math.floor(r):this.typeInfo.name==="bool"&&(r=r?1:0),this.data[0]=r}getSubData(t,n,i){return n?(console.error("getSubData: Scalar data does not support postfix",n),null):this}toString(){return`${this.value}`}}function uP(e,t,n){const i=t.length;return i===2?n==="f32"?new V(new Float32Array(t),e.getTypeInfo("vec2f")):n==="i32"||n==="bool"?new V(new Int32Array(t),e.getTypeInfo("vec2i")):n==="u32"?new V(new Uint32Array(t),e.getTypeInfo("vec2u")):n==="f16"?new V(new Float32Array(t),e.getTypeInfo("vec2h")):(console.error(`getSubData: Unknown format ${n}`),null):i===3?n==="f32"?new V(new Float32Array(t),e.getTypeInfo("vec3f")):n==="i32"||n==="bool"?new V(new Int32Array(t),e.getTypeInfo("vec3i")):n==="u32"?new V(new Uint32Array(t),e.getTypeInfo("vec3u")):n==="f16"?new V(new Float32Array(t),e.getTypeInfo("vec3h")):(console.error(`getSubData: Unknown format ${n}`),null):i===4?n==="f32"?new V(new Float32Array(t),e.getTypeInfo("vec4f")):n==="i32"||n==="bool"?new V(new Int32Array(t),e.getTypeInfo("vec4i")):n==="u32"?new V(new Uint32Array(t),e.getTypeInfo("vec4u")):n==="f16"?new V(new Float32Array(t),e.getTypeInfo("vec4h")):(console.error(`getSubData: Unknown format ${n}`),null):(console.error(`getSubData: Invalid vector size ${t.length}`),null)}class V extends Qn{constructor(t,n,i=null){if(super(n,i),t instanceof Float32Array||t instanceof Uint32Array||t instanceof Int32Array)this.data=t;else{const s=this.typeInfo.name;s==="vec2f"||s==="vec3f"||s==="vec4f"?this.data=new Float32Array(t):s==="vec2i"||s==="vec3i"||s==="vec4i"?this.data=new Int32Array(t):s==="vec2u"||s==="vec3u"||s==="vec4u"?this.data=new Uint32Array(t):s==="vec2h"||s==="vec3h"||s==="vec4h"?this.data=new Float32Array(t):s==="vec2b"||s==="vec3b"||s==="vec4b"?this.data=new Int32Array(t):s==="vec2"||s==="vec3"||s==="vec4"?this.data=new Float32Array(t):console.error(`VectorData: Invalid type ${s}`)}}clone(){if(this.data instanceof Float32Array)return new V(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new V(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new V(new Uint32Array(this.data),this.typeInfo,null);throw"VectorData: Invalid data type"}setDataValue(t,n,i,s){i instanceof ar?console.error("TODO: Set vector postfix"):n instanceof V?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(t,n,i){if(n===null)return this;let s=t.getTypeInfo("f32");if(this.typeInfo instanceof rr)s=this.typeInfo.format||s;else{const a=this.typeInfo.name;a==="vec2f"||a==="vec3f"||a==="vec4f"?s=t.getTypeInfo("f32"):a==="vec2i"||a==="vec3i"||a==="vec4i"?s=t.getTypeInfo("i32"):a==="vec2b"||a==="vec3b"||a==="vec4b"?s=t.getTypeInfo("bool"):a==="vec2u"||a==="vec3u"||a==="vec4u"?s=t.getTypeInfo("u32"):a==="vec2h"||a==="vec3h"||a==="vec4h"?s=t.getTypeInfo("f16"):console.error(`GetSubData: Unknown type ${a}`)}let r=this;for(;n!==null&&r!==null;){if(n instanceof ua){const a=n.index;let o=-1;if(a instanceof Lt){if(!(a.value instanceof K))return console.error(`GetSubData: Invalid array index ${a.value}`),null;o=a.value.value}else{const l=t.evalExpression(a,i);if(!(l instanceof K))return console.error("GetSubData: Unknown index type",a),null;o=l.value}if(o<0||o>=r.data.length)return console.error("GetSubData: Index out of range",o),null;if(r.data instanceof Float32Array){const l=new Float32Array(r.data.buffer,r.data.byteOffset+4*o,1);return new K(l,s)}if(r.data instanceof Int32Array){const l=new Int32Array(r.data.buffer,r.data.byteOffset+4*o,1);return new K(l,s)}if(r.data instanceof Uint32Array){const l=new Uint32Array(r.data.buffer,r.data.byteOffset+4*o,1);return new K(l,s)}throw"GetSubData: Invalid data type"}if(!(n instanceof ar))return console.error("GetSubData: Unknown postfix",n),null;{const a=n.value.toLowerCase();if(a.length===1){let l=0;if(a==="x"||a==="r")l=0;else if(a==="y"||a==="g")l=1;else if(a==="z"||a==="b")l=2;else{if(a!=="w"&&a!=="a")return console.error(`GetSubData: Unknown member ${a}`),null;l=3}if(this.data instanceof Float32Array){let u=new Float32Array(this.data.buffer,this.data.byteOffset+4*l,1);return new K(u,s,this)}if(this.data instanceof Int32Array){let u=new Int32Array(this.data.buffer,this.data.byteOffset+4*l,1);return new K(u,s,this)}if(this.data instanceof Uint32Array){let u=new Uint32Array(this.data.buffer,this.data.byteOffset+4*l,1);return new K(u,s,this)}}const o=[];for(const l of a)l==="x"||l==="r"?o.push(this.data[0]):l==="y"||l==="g"?o.push(this.data[1]):l==="z"||l==="b"?o.push(this.data[2]):l==="w"||l==="a"?o.push(this.data[3]):console.error(`GetDataValue: Unknown member ${l}`);r=uP(t,o,s.name)}n=n.postfix}return r}toString(){let t=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)t+=`, ${this.data[n]}`;return t}}class Ve extends Qn{constructor(t,n,i=null){super(n,i),t instanceof Float32Array?this.data=t:this.data=new Float32Array(t)}clone(){return new Ve(new Float32Array(this.data),this.typeInfo,null)}setDataValue(t,n,i,s){i instanceof ar?console.error("TODO: Set matrix postfix"):n instanceof Ve?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(t,n,i){if(n===null)return this;const s=this.typeInfo.name;if(t.getTypeInfo("f32"),this.typeInfo instanceof rr)this.typeInfo.format;else if(s.endsWith("f"))t.getTypeInfo("f32");else if(s.endsWith("i"))t.getTypeInfo("i32");else if(s.endsWith("u"))t.getTypeInfo("u32");else{if(!s.endsWith("h"))return console.error(`GetDataValue: Unknown type ${s}`),null;t.getTypeInfo("f16")}if(n instanceof ua){const r=n.index;let a=-1;if(r instanceof Lt){if(!(r.value instanceof K))return console.error(`GetDataValue: Invalid array index ${r.value}`),null;a=r.value.value}else{const u=t.evalExpression(r,i);if(!(u instanceof K))return console.error("GetDataValue: Unknown index type",r),null;a=u.value}if(a<0||a>=this.data.length)return console.error("GetDataValue: Index out of range",a),null;const o=s.endsWith("h")?"h":"f";let l;if(s==="mat2x2"||s==="mat2x2f"||s==="mat2x2h"||s==="mat3x2"||s==="mat3x2f"||s==="mat3x2h"||s==="mat4x2"||s==="mat4x2f"||s==="mat4x2h")l=new V(new Float32Array(this.data.buffer,this.data.byteOffset+2*a*4,2),t.getTypeInfo(`vec2${o}`));else if(s==="mat2x3"||s==="mat2x3f"||s==="mat2x3h"||s==="mat3x3"||s==="mat3x3f"||s==="mat3x3h"||s==="mat4x3"||s==="mat4x3f"||s==="mat4x3h")l=new V(new Float32Array(this.data.buffer,this.data.byteOffset+3*a*4,3),t.getTypeInfo(`vec3${o}`));else{if(s!=="mat2x4"&&s!=="mat2x4f"&&s!=="mat2x4h"&&s!=="mat3x4"&&s!=="mat3x4f"&&s!=="mat3x4h"&&s!=="mat4x4"&&s!=="mat4x4f"&&s!=="mat4x4h")return console.error(`GetDataValue: Unknown type ${s}`),null;l=new V(new Float32Array(this.data.buffer,this.data.byteOffset+4*a*4,4),t.getTypeInfo(`vec4${o}`))}return n.postfix?l.getSubData(t,n.postfix,i):l}return console.error("GetDataValue: Invalid postfix",n),null}toString(){let t=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)t+=`, ${this.data[n]}`;return t}}class kt extends Qn{constructor(t,n,i=0,s=null){super(n,s),this.buffer=t instanceof ArrayBuffer?t:t.buffer,this.offset=i}clone(){const t=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new kt(t.buffer,this.typeInfo,0,null)}setDataValue(t,n,i,s){if(n===null)return void console.log("setDataValue: NULL data.");let r=this.offset,a=this.typeInfo;for(;i;){if(i instanceof ua)if(a instanceof Ss){const o=i.index;if(o instanceof Lt){if(!(o.value instanceof K))return void console.error(`SetDataValue: Invalid index type ${o.value}`);r+=o.value.value*a.stride}else{const l=t.evalExpression(o,s);if(!(l instanceof K))return void console.error("SetDataValue: Unknown index type",o);r+=l.value*a.stride}a=a.format}else console.error(`SetDataValue: Type ${a.getTypeName()} is not an array`);else{if(!(i instanceof ar))return void console.error("SetDataValue: Unknown postfix type",i);{const o=i.value;if(a instanceof _s){let l=!1;for(const u of a.members)if(u.name===o){r+=u.offset,a=u.type,l=!0;break}if(!l)return void console.error(`SetDataValue: Member ${o} not found`)}else if(a instanceof qn){const l=a.getTypeName();let u=0;if(o==="x"||o==="r")u=0;else if(o==="y"||o==="g")u=1;else if(o==="z"||o==="b")u=2;else{if(o!=="w"&&o!=="a")return void console.error(`SetDataValue: Unknown member ${o}`);u=3}if(!(n instanceof K))return void console.error("SetDataValue: Invalid value",n);const c=n.value;return l==="vec2f"?void(new Float32Array(this.buffer,r,2)[u]=c):l==="vec3f"?void(new Float32Array(this.buffer,r,3)[u]=c):l==="vec4f"?void(new Float32Array(this.buffer,r,4)[u]=c):l==="vec2i"?void(new Int32Array(this.buffer,r,2)[u]=c):l==="vec3i"?void(new Int32Array(this.buffer,r,3)[u]=c):l==="vec4i"?void(new Int32Array(this.buffer,r,4)[u]=c):l==="vec2u"?void(new Uint32Array(this.buffer,r,2)[u]=c):l==="vec3u"?void(new Uint32Array(this.buffer,r,3)[u]=c):l==="vec4u"?void(new Uint32Array(this.buffer,r,4)[u]=c):void console.error(`SetDataValue: Type ${l} is not a struct`)}}}i=i.postfix}this.setData(t,n,a,r,s)}setData(t,n,i,s,r){const a=i.getTypeName();if(a!=="f32"&&a!=="f16")if(a!=="i32"&&a!=="atomic<i32>"&&a!=="x32")if(a!=="u32"&&a!=="atomic<u32>")if(a!=="bool"){if(a==="vec2f"||a==="vec2h"){const o=new Float32Array(this.buffer,s,2);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1]):(o[0]=n[0],o[1]=n[1]))}if(a==="vec3f"||a==="vec3h"){const o=new Float32Array(this.buffer,s,3);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2]):(o[0]=n[0],o[1]=n[1],o[2]=n[2]))}if(a==="vec4f"||a==="vec4h"){const o=new Float32Array(this.buffer,s,4);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3]))}if(a==="vec2i"){const o=new Int32Array(this.buffer,s,2);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1]):(o[0]=n[0],o[1]=n[1]))}if(a==="vec3i"){const o=new Int32Array(this.buffer,s,3);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2]):(o[0]=n[0],o[1]=n[1],o[2]=n[2]))}if(a==="vec4i"){const o=new Int32Array(this.buffer,s,4);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3]))}if(a==="vec2u"){const o=new Uint32Array(this.buffer,s,2);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1]):(o[0]=n[0],o[1]=n[1]))}if(a==="vec3u"){const o=new Uint32Array(this.buffer,s,3);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2]):(o[0]=n[0],o[1]=n[1],o[2]=n[2]))}if(a==="vec4u"){const o=new Uint32Array(this.buffer,s,4);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3]))}if(a==="vec2b"){const o=new Uint32Array(this.buffer,s,2);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1]):(o[0]=n[0],o[1]=n[1]))}if(a==="vec3b"){const o=new Uint32Array(this.buffer,s,3);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2]):(o[0]=n[0],o[1]=n[1],o[2]=n[2]))}if(a==="vec4b"){const o=new Uint32Array(this.buffer,s,4);return void(n instanceof V?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3]))}if(a==="mat2x2f"||a==="mat2x2h"){const o=new Float32Array(this.buffer,s,4);return void(n instanceof Ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3]))}if(a==="mat2x3f"||a==="mat2x3h"){const o=new Float32Array(this.buffer,s,6);return void(n instanceof Ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5]))}if(a==="mat2x4f"||a==="mat2x4h"){const o=new Float32Array(this.buffer,s,8);return void(n instanceof Ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7]))}if(a==="mat3x2f"||a==="mat3x2h"){const o=new Float32Array(this.buffer,s,6);return void(n instanceof Ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5]))}if(a==="mat3x3f"||a==="mat3x3h"){const o=new Float32Array(this.buffer,s,9);return void(n instanceof Ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7],o[8]=n.data[8]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8]))}if(a==="mat3x4f"||a==="mat3x4h"){const o=new Float32Array(this.buffer,s,12);return void(n instanceof Ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7],o[8]=n.data[8],o[9]=n.data[9],o[10]=n.data[10],o[11]=n.data[11]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11]))}if(a==="mat4x2f"||a==="mat4x2h"){const o=new Float32Array(this.buffer,s,8);return void(n instanceof Ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7]))}if(a==="mat4x3f"||a==="mat4x3h"){const o=new Float32Array(this.buffer,s,12);return void(n instanceof Ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7],o[8]=n.data[8],o[9]=n.data[9],o[10]=n.data[10],o[11]=n.data[11]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11]))}if(a==="mat4x4f"||a==="mat4x4h"){const o=new Float32Array(this.buffer,s,16);return void(n instanceof Ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7],o[8]=n.data[8],o[9]=n.data[9],o[10]=n.data[10],o[11]=n.data[11],o[12]=n.data[12],o[13]=n.data[13],o[14]=n.data[14],o[15]=n.data[15]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]))}if(n instanceof kt){if(i===n.typeInfo)return void new Uint8Array(this.buffer,s,n.buffer.byteLength).set(new Uint8Array(n.buffer));console.error("SetDataValue: Type mismatch",a,n.typeInfo.getTypeName())}else console.error(`SetData: Unknown type ${a}`)}else n instanceof K&&(new Int32Array(this.buffer,s,1)[0]=n.value);else n instanceof K&&(new Uint32Array(this.buffer,s,1)[0]=n.value);else n instanceof K&&(new Int32Array(this.buffer,s,1)[0]=n.value);else n instanceof K&&(new Float32Array(this.buffer,s,1)[0]=n.value)}getSubData(t,n,i){var s,r,a;if(n===null)return this;let o=this.offset,l=this.typeInfo;for(;n;){if(n instanceof ua){const c=n.index,d=c instanceof gi?t.evalExpression(c,i):c;let f=0;if(d instanceof K?f=d.value:typeof d=="number"?f=d:console.error("GetDataValue: Invalid index type",c),l instanceof Ss)o+=f*l.stride,l=l.format;else{const h=l.getTypeName();h==="mat4x4"||h==="mat4x4f"||h==="mat4x4h"?(o+=16*f,l=t.getTypeInfo("vec4f")):console.error(`getDataValue: Type ${l.getTypeName()} is not an array`)}}else{if(!(n instanceof ar))return console.error("GetDataValue: Unknown postfix type",n),null;{const c=n.value;if(l instanceof _s){let d=!1;for(const f of l.members)if(f.name===c){o+=f.offset,l=f.type,d=!0;break}if(!d)return console.error(`GetDataValue: Member ${c} not found`),null}else if(l instanceof qn){const d=l.getTypeName();if(d==="vec2f"||d==="vec3f"||d==="vec4f"||d==="vec2i"||d==="vec3i"||d==="vec4i"||d==="vec2u"||d==="vec3u"||d==="vec4u"||d==="vec2b"||d==="vec3b"||d==="vec4b"||d==="vec2h"||d==="vec3h"||d==="vec4h"||d==="vec2"||d==="vec3"||d==="vec4"){if(c.length>0&&c.length<5){let f="f";const h=[];for(let g=0;g<c.length;++g){const v=c[g].toLowerCase();let m=0;if(v==="x"||v==="r")m=0;else if(v==="y"||v==="g")m=1;else if(v==="z"||v==="b")m=2;else{if(v!=="w"&&v!=="a")return console.error(`Unknown member ${c}`),null;m=3}if(c.length===1){if(d.endsWith("f"))return this.buffer.byteLength<o+4*m+4?(console.log("Insufficient buffer data"),null):new K(new Float32Array(this.buffer,o+4*m,1),t.getTypeInfo("f32"),this);if(d.endsWith("h"))return new K(new Float32Array(this.buffer,o+4*m,1),t.getTypeInfo("f16"),this);if(d.endsWith("i"))return new K(new Int32Array(this.buffer,o+4*m,1),t.getTypeInfo("i32"),this);if(d.endsWith("b"))return new K(new Int32Array(this.buffer,o+4*m,1),t.getTypeInfo("bool"),this);if(d.endsWith("u"))return new K(new Uint32Array(this.buffer,o+4*m,1),t.getTypeInfo("i32"),this)}if(d==="vec2f")h.push(new Float32Array(this.buffer,o,2)[m]);else if(d==="vec3f"){if(o+12>=this.buffer.byteLength)return console.log("Insufficient buffer data"),null;const p=new Float32Array(this.buffer,o,3);h.push(p[m])}else if(d==="vec4f")h.push(new Float32Array(this.buffer,o,4)[m]);else if(d==="vec2i")f="i",h.push(new Int32Array(this.buffer,o,2)[m]);else if(d==="vec3i")f="i",h.push(new Int32Array(this.buffer,o,3)[m]);else if(d==="vec4i")f="i",h.push(new Int32Array(this.buffer,o,4)[m]);else if(d==="vec2u"){f="u";const p=new Uint32Array(this.buffer,o,2);h.push(p[m])}else d==="vec3u"?(f="u",h.push(new Uint32Array(this.buffer,o,3)[m])):d==="vec4u"&&(f="u",h.push(new Uint32Array(this.buffer,o,4)[m]))}return h.length===2?l=t.getTypeInfo(`vec2${f}`):h.length===3?l=t.getTypeInfo(`vec3${f}`):h.length===4?l=t.getTypeInfo(`vec4${f}`):console.error(`GetDataValue: Invalid vector length ${h.length}`),new V(h,l,null)}return console.error(`GetDataValue: Unknown member ${c}`),null}return console.error(`GetDataValue: Type ${d} is not a struct`),null}}}n=n.postfix}const u=l.getTypeName();return u==="f32"?new K(new Float32Array(this.buffer,o,1),l,this):u==="i32"?new K(new Int32Array(this.buffer,o,1),l,this):u==="u32"?new K(new Uint32Array(this.buffer,o,1),l,this):u==="vec2f"?new V(new Float32Array(this.buffer,o,2),l,this):u==="vec3f"?new V(new Float32Array(this.buffer,o,3),l,this):u==="vec4f"?new V(new Float32Array(this.buffer,o,4),l,this):u==="vec2i"?new V(new Int32Array(this.buffer,o,2),l,this):u==="vec3i"?new V(new Int32Array(this.buffer,o,3),l,this):u==="vec4i"?new V(new Int32Array(this.buffer,o,4),l,this):u==="vec2u"?new V(new Uint32Array(this.buffer,o,2),l,this):u==="vec3u"?new V(new Uint32Array(this.buffer,o,3),l,this):u==="vec4u"?new V(new Uint32Array(this.buffer,o,4),l,this):l instanceof rr&&l.name==="atomic"?((s=l.format)===null||s===void 0?void 0:s.name)==="u32"?new K(new Uint32Array(this.buffer,o,1)[0],l.format,this):((r=l.format)===null||r===void 0?void 0:r.name)==="i32"?new K(new Int32Array(this.buffer,o,1)[0],l.format,this):(console.error(`GetDataValue: Invalid atomic format ${(a=l.format)===null||a===void 0?void 0:a.name}`),null):new kt(this.buffer,l,o,this)}toString(){let t="";if(this.typeInfo instanceof Ss)if(this.typeInfo.format.name==="f32"){const n=new Float32Array(this.buffer,this.offset);t=`[${n[0]}`;for(let i=1;i<n.length;++i)t+=`, ${n[i]}`}else if(this.typeInfo.format.name==="i32"){const n=new Int32Array(this.buffer,this.offset);t=`[${n[0]}`;for(let i=1;i<n.length;++i)t+=`, ${n[i]}`}else if(this.typeInfo.format.name==="u32"){const n=new Uint32Array(this.buffer,this.offset);t=`[${n[0]}`;for(let i=1;i<n.length;++i)t+=`, ${n[i]}`}else if(this.typeInfo.format.name==="vec2f"){const n=new Float32Array(this.buffer,this.offset);t=`[${n[0]}, ${n[1]}]`;for(let i=1;i<n.length/2;++i)t+=`, [${n[2*i]}, ${n[2*i+1]}]`}else if(this.typeInfo.format.name==="vec3f"){const n=new Float32Array(this.buffer,this.offset);t=`[${n[0]}, ${n[1]}, ${n[2]}]`;for(let i=4;i<n.length;i+=4)t+=`, [${n[i]}, ${n[i+1]}, ${n[i+2]}]`}else if(this.typeInfo.format.name==="vec4f"){const n=new Float32Array(this.buffer,this.offset);t=`[${n[0]}, ${n[1]}, ${n[2]}, ${n[3]}]`;for(let i=4;i<n.length;i+=4)t+=`, [${n[i]}, ${n[i+1]}, ${n[i+2]}, ${n[i+3]}]`}else t="[...]";else this.typeInfo instanceof _s?t+="{...}":t="[...]";return t}}class zi extends Qn{constructor(t,n,i,s){super(n,null),this.data=t,this.descriptor=i,this.view=s}clone(){return new zi(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var t,n;const i=this.descriptor.size;return i instanceof Array&&i.length>0?(t=i[0])!==null&&t!==void 0?t:0:i instanceof Object&&(n=i.width)!==null&&n!==void 0?n:0}get height(){var t,n;const i=this.descriptor.size;return i instanceof Array&&i.length>1?(t=i[1])!==null&&t!==void 0?t:0:i instanceof Object&&(n=i.height)!==null&&n!==void 0?n:0}get depthOrArrayLayers(){var t,n;const i=this.descriptor.size;return i instanceof Array&&i.length>2?(t=i[2])!==null&&t!==void 0?t:0:i instanceof Object&&(n=i.depthOrArrayLayers)!==null&&n!==void 0?n:0}get format(){var t;return this.descriptor&&(t=this.descriptor.format)!==null&&t!==void 0?t:"rgba8unorm"}get sampleCount(){var t;return this.descriptor&&(t=this.descriptor.sampleCount)!==null&&t!==void 0?t:1}get mipLevelCount(){var t;return this.descriptor&&(t=this.descriptor.mipLevelCount)!==null&&t!==void 0?t:1}get dimension(){var t;return this.descriptor&&(t=this.descriptor.dimension)!==null&&t!==void 0?t:"2d"}getMipLevelSize(t){if(t>=this.mipLevelCount)return[0,0,0];const n=[this.width,this.height,this.depthOrArrayLayers];for(let i=0;i<n.length;++i)n[i]=Math.max(1,n[i]>>t);return n}get texelByteSize(){const t=this.format,n=yd[t];return n?n.isDepthStencil?4:n.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){const t=this.format,n=yd[t];return!!n&&n.isDepthStencil}getGpuSize(){const t=this.format,n=yd[t],i=this.width;if(!t||i<=0||!n)return-1;const s=this.height,r=this.depthOrArrayLayers,a=this.dimension;return i/n.blockWidth*(a==="1d"?1:s/n.blockHeight)*n.bytesPerBlock*r}getPixel(t,n,i=0,s=0){const r=this.texelByteSize,a=this.bytesPerRow,o=this.height,l=this.data[s];return sP(new Uint8Array(l),t,n,i,s,o,a,r,this.format)}setPixel(t,n,i,s,r){const a=this.texelByteSize,o=this.bytesPerRow,l=this.height,u=this.data[s];(function(c,d,f,h,g,v,m,p,y,_){const b=h*(m>>=g)*(v>>=g)+f*m+d*p;switch(y){case"r8unorm":return void it(c,b,"8unorm",1,_);case"r8snorm":return void it(c,b,"8snorm",1,_);case"r8uint":return void it(c,b,"8uint",1,_);case"r8sint":return void it(c,b,"8sint",1,_);case"rg8unorm":return void it(c,b,"8unorm",2,_);case"rg8snorm":return void it(c,b,"8snorm",2,_);case"rg8uint":return void it(c,b,"8uint",2,_);case"rg8sint":return void it(c,b,"8sint",2,_);case"rgba8unorm-srgb":case"rgba8unorm":case"bgra8unorm-srgb":case"bgra8unorm":return void it(c,b,"8unorm",4,_);case"rgba8snorm":return void it(c,b,"8snorm",4,_);case"rgba8uint":return void it(c,b,"8uint",4,_);case"rgba8sint":return void it(c,b,"8sint",4,_);case"r16uint":return void it(c,b,"16uint",1,_);case"r16sint":return void it(c,b,"16sint",1,_);case"r16float":return void it(c,b,"16float",1,_);case"rg16uint":return void it(c,b,"16uint",2,_);case"rg16sint":return void it(c,b,"16sint",2,_);case"rg16float":return void it(c,b,"16float",2,_);case"rgba16uint":return void it(c,b,"16uint",4,_);case"rgba16sint":return void it(c,b,"16sint",4,_);case"rgba16float":return void it(c,b,"16float",4,_);case"r32uint":return void it(c,b,"32uint",1,_);case"r32sint":return void it(c,b,"32sint",1,_);case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return void it(c,b,"32float",1,_);case"rg32uint":return void it(c,b,"32uint",2,_);case"rg32sint":return void it(c,b,"32sint",2,_);case"rg32float":return void it(c,b,"32float",2,_);case"rgba32uint":return void it(c,b,"32uint",4,_);case"rgba32sint":return void it(c,b,"32sint",4,_);case"rgba32float":return void it(c,b,"32float",4,_);case"rg11b10ufloat":console.error("TODO: rg11b10ufloat not supported for writing")}})(new Uint8Array(u),t,n,i,s,l,o,a,this.format,r)}}(e=>{e[e.token=0]="token",e[e.keyword=1]="keyword",e[e.reserved=2]="reserved"})(q||(q={}));class Z{constructor(t,n,i){this.name=t,this.type=n,this.rule=i}toString(){return this.name}}class M{}J=M,M.none=new Z("",q.reserved,""),M.eof=new Z("EOF",q.token,""),M.reserved={asm:new Z("asm",q.reserved,"asm"),bf16:new Z("bf16",q.reserved,"bf16"),do:new Z("do",q.reserved,"do"),enum:new Z("enum",q.reserved,"enum"),f16:new Z("f16",q.reserved,"f16"),f64:new Z("f64",q.reserved,"f64"),handle:new Z("handle",q.reserved,"handle"),i8:new Z("i8",q.reserved,"i8"),i16:new Z("i16",q.reserved,"i16"),i64:new Z("i64",q.reserved,"i64"),mat:new Z("mat",q.reserved,"mat"),premerge:new Z("premerge",q.reserved,"premerge"),regardless:new Z("regardless",q.reserved,"regardless"),typedef:new Z("typedef",q.reserved,"typedef"),u8:new Z("u8",q.reserved,"u8"),u16:new Z("u16",q.reserved,"u16"),u64:new Z("u64",q.reserved,"u64"),unless:new Z("unless",q.reserved,"unless"),using:new Z("using",q.reserved,"using"),vec:new Z("vec",q.reserved,"vec"),void:new Z("void",q.reserved,"void")},M.keywords={array:new Z("array",q.keyword,"array"),atomic:new Z("atomic",q.keyword,"atomic"),bool:new Z("bool",q.keyword,"bool"),f32:new Z("f32",q.keyword,"f32"),i32:new Z("i32",q.keyword,"i32"),mat2x2:new Z("mat2x2",q.keyword,"mat2x2"),mat2x3:new Z("mat2x3",q.keyword,"mat2x3"),mat2x4:new Z("mat2x4",q.keyword,"mat2x4"),mat3x2:new Z("mat3x2",q.keyword,"mat3x2"),mat3x3:new Z("mat3x3",q.keyword,"mat3x3"),mat3x4:new Z("mat3x4",q.keyword,"mat3x4"),mat4x2:new Z("mat4x2",q.keyword,"mat4x2"),mat4x3:new Z("mat4x3",q.keyword,"mat4x3"),mat4x4:new Z("mat4x4",q.keyword,"mat4x4"),ptr:new Z("ptr",q.keyword,"ptr"),sampler:new Z("sampler",q.keyword,"sampler"),sampler_comparison:new Z("sampler_comparison",q.keyword,"sampler_comparison"),struct:new Z("struct",q.keyword,"struct"),texture_1d:new Z("texture_1d",q.keyword,"texture_1d"),texture_2d:new Z("texture_2d",q.keyword,"texture_2d"),texture_2d_array:new Z("texture_2d_array",q.keyword,"texture_2d_array"),texture_3d:new Z("texture_3d",q.keyword,"texture_3d"),texture_cube:new Z("texture_cube",q.keyword,"texture_cube"),texture_cube_array:new Z("texture_cube_array",q.keyword,"texture_cube_array"),texture_multisampled_2d:new Z("texture_multisampled_2d",q.keyword,"texture_multisampled_2d"),texture_storage_1d:new Z("texture_storage_1d",q.keyword,"texture_storage_1d"),texture_storage_2d:new Z("texture_storage_2d",q.keyword,"texture_storage_2d"),texture_storage_2d_array:new Z("texture_storage_2d_array",q.keyword,"texture_storage_2d_array"),texture_storage_3d:new Z("texture_storage_3d",q.keyword,"texture_storage_3d"),texture_depth_2d:new Z("texture_depth_2d",q.keyword,"texture_depth_2d"),texture_depth_2d_array:new Z("texture_depth_2d_array",q.keyword,"texture_depth_2d_array"),texture_depth_cube:new Z("texture_depth_cube",q.keyword,"texture_depth_cube"),texture_depth_cube_array:new Z("texture_depth_cube_array",q.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new Z("texture_depth_multisampled_2d",q.keyword,"texture_depth_multisampled_2d"),texture_external:new Z("texture_external",q.keyword,"texture_external"),u32:new Z("u32",q.keyword,"u32"),vec2:new Z("vec2",q.keyword,"vec2"),vec3:new Z("vec3",q.keyword,"vec3"),vec4:new Z("vec4",q.keyword,"vec4"),bitcast:new Z("bitcast",q.keyword,"bitcast"),block:new Z("block",q.keyword,"block"),break:new Z("break",q.keyword,"break"),case:new Z("case",q.keyword,"case"),continue:new Z("continue",q.keyword,"continue"),continuing:new Z("continuing",q.keyword,"continuing"),default:new Z("default",q.keyword,"default"),diagnostic:new Z("diagnostic",q.keyword,"diagnostic"),discard:new Z("discard",q.keyword,"discard"),else:new Z("else",q.keyword,"else"),enable:new Z("enable",q.keyword,"enable"),fallthrough:new Z("fallthrough",q.keyword,"fallthrough"),false:new Z("false",q.keyword,"false"),fn:new Z("fn",q.keyword,"fn"),for:new Z("for",q.keyword,"for"),function:new Z("function",q.keyword,"function"),if:new Z("if",q.keyword,"if"),let:new Z("let",q.keyword,"let"),const:new Z("const",q.keyword,"const"),loop:new Z("loop",q.keyword,"loop"),while:new Z("while",q.keyword,"while"),private:new Z("private",q.keyword,"private"),read:new Z("read",q.keyword,"read"),read_write:new Z("read_write",q.keyword,"read_write"),return:new Z("return",q.keyword,"return"),requires:new Z("requires",q.keyword,"requires"),storage:new Z("storage",q.keyword,"storage"),switch:new Z("switch",q.keyword,"switch"),true:new Z("true",q.keyword,"true"),alias:new Z("alias",q.keyword,"alias"),type:new Z("type",q.keyword,"type"),uniform:new Z("uniform",q.keyword,"uniform"),var:new Z("var",q.keyword,"var"),override:new Z("override",q.keyword,"override"),workgroup:new Z("workgroup",q.keyword,"workgroup"),write:new Z("write",q.keyword,"write"),r8unorm:new Z("r8unorm",q.keyword,"r8unorm"),r8snorm:new Z("r8snorm",q.keyword,"r8snorm"),r8uint:new Z("r8uint",q.keyword,"r8uint"),r8sint:new Z("r8sint",q.keyword,"r8sint"),r16uint:new Z("r16uint",q.keyword,"r16uint"),r16sint:new Z("r16sint",q.keyword,"r16sint"),r16float:new Z("r16float",q.keyword,"r16float"),rg8unorm:new Z("rg8unorm",q.keyword,"rg8unorm"),rg8snorm:new Z("rg8snorm",q.keyword,"rg8snorm"),rg8uint:new Z("rg8uint",q.keyword,"rg8uint"),rg8sint:new Z("rg8sint",q.keyword,"rg8sint"),r32uint:new Z("r32uint",q.keyword,"r32uint"),r32sint:new Z("r32sint",q.keyword,"r32sint"),r32float:new Z("r32float",q.keyword,"r32float"),rg16uint:new Z("rg16uint",q.keyword,"rg16uint"),rg16sint:new Z("rg16sint",q.keyword,"rg16sint"),rg16float:new Z("rg16float",q.keyword,"rg16float"),rgba8unorm:new Z("rgba8unorm",q.keyword,"rgba8unorm"),rgba8unorm_srgb:new Z("rgba8unorm_srgb",q.keyword,"rgba8unorm_srgb"),rgba8snorm:new Z("rgba8snorm",q.keyword,"rgba8snorm"),rgba8uint:new Z("rgba8uint",q.keyword,"rgba8uint"),rgba8sint:new Z("rgba8sint",q.keyword,"rgba8sint"),bgra8unorm:new Z("bgra8unorm",q.keyword,"bgra8unorm"),bgra8unorm_srgb:new Z("bgra8unorm_srgb",q.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new Z("rgb10a2unorm",q.keyword,"rgb10a2unorm"),rg11b10float:new Z("rg11b10float",q.keyword,"rg11b10float"),rg32uint:new Z("rg32uint",q.keyword,"rg32uint"),rg32sint:new Z("rg32sint",q.keyword,"rg32sint"),rg32float:new Z("rg32float",q.keyword,"rg32float"),rgba16uint:new Z("rgba16uint",q.keyword,"rgba16uint"),rgba16sint:new Z("rgba16sint",q.keyword,"rgba16sint"),rgba16float:new Z("rgba16float",q.keyword,"rgba16float"),rgba32uint:new Z("rgba32uint",q.keyword,"rgba32uint"),rgba32sint:new Z("rgba32sint",q.keyword,"rgba32sint"),rgba32float:new Z("rgba32float",q.keyword,"rgba32float"),static_assert:new Z("static_assert",q.keyword,"static_assert")},M.tokens={decimal_float_literal:new Z("decimal_float_literal",q.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new Z("hex_float_literal",q.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+[fh]?))/),int_literal:new Z("int_literal",q.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new Z("uint_literal",q.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new Z("name",q.token,/([_\p{XID_Start}][\p{XID_Continue}]+)|([\p{XID_Start}])/u),ident:new Z("ident",q.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new Z("and",q.token,"&"),and_and:new Z("and_and",q.token,"&&"),arrow:new Z("arrow ",q.token,"->"),attr:new Z("attr",q.token,"@"),forward_slash:new Z("forward_slash",q.token,"/"),bang:new Z("bang",q.token,"!"),bracket_left:new Z("bracket_left",q.token,"["),bracket_right:new Z("bracket_right",q.token,"]"),brace_left:new Z("brace_left",q.token,"{"),brace_right:new Z("brace_right",q.token,"}"),colon:new Z("colon",q.token,":"),comma:new Z("comma",q.token,","),equal:new Z("equal",q.token,"="),equal_equal:new Z("equal_equal",q.token,"=="),not_equal:new Z("not_equal",q.token,"!="),greater_than:new Z("greater_than",q.token,">"),greater_than_equal:new Z("greater_than_equal",q.token,">="),shift_right:new Z("shift_right",q.token,">>"),less_than:new Z("less_than",q.token,"<"),less_than_equal:new Z("less_than_equal",q.token,"<="),shift_left:new Z("shift_left",q.token,"<<"),modulo:new Z("modulo",q.token,"%"),minus:new Z("minus",q.token,"-"),minus_minus:new Z("minus_minus",q.token,"--"),period:new Z("period",q.token,"."),plus:new Z("plus",q.token,"+"),plus_plus:new Z("plus_plus",q.token,"++"),or:new Z("or",q.token,"|"),or_or:new Z("or_or",q.token,"||"),paren_left:new Z("paren_left",q.token,"("),paren_right:new Z("paren_right",q.token,")"),semicolon:new Z("semicolon",q.token,";"),star:new Z("star",q.token,"*"),tilde:new Z("tilde",q.token,"~"),underscore:new Z("underscore",q.token,"_"),xor:new Z("xor",q.token,"^"),plus_equal:new Z("plus_equal",q.token,"+="),minus_equal:new Z("minus_equal",q.token,"-="),times_equal:new Z("times_equal",q.token,"*="),division_equal:new Z("division_equal",q.token,"/="),modulo_equal:new Z("modulo_equal",q.token,"%="),and_equal:new Z("and_equal",q.token,"&="),or_equal:new Z("or_equal",q.token,"|="),xor_equal:new Z("xor_equal",q.token,"^="),shift_right_equal:new Z("shift_right_equal",q.token,">>="),shift_left_equal:new Z("shift_left_equal",q.token,"<<=")},M.simpleTokens={"@":J.tokens.attr,"{":J.tokens.brace_left,"}":J.tokens.brace_right,":":J.tokens.colon,",":J.tokens.comma,"(":J.tokens.paren_left,")":J.tokens.paren_right,";":J.tokens.semicolon},M.literalTokens={"&":J.tokens.and,"&&":J.tokens.and_and,"->":J.tokens.arrow,"/":J.tokens.forward_slash,"!":J.tokens.bang,"[":J.tokens.bracket_left,"]":J.tokens.bracket_right,"=":J.tokens.equal,"==":J.tokens.equal_equal,"!=":J.tokens.not_equal,">":J.tokens.greater_than,">=":J.tokens.greater_than_equal,">>":J.tokens.shift_right,"<":J.tokens.less_than,"<=":J.tokens.less_than_equal,"<<":J.tokens.shift_left,"%":J.tokens.modulo,"-":J.tokens.minus,"--":J.tokens.minus_minus,".":J.tokens.period,"+":J.tokens.plus,"++":J.tokens.plus_plus,"|":J.tokens.or,"||":J.tokens.or_or,"*":J.tokens.star,"~":J.tokens.tilde,_:J.tokens.underscore,"^":J.tokens.xor,"+=":J.tokens.plus_equal,"-=":J.tokens.minus_equal,"*=":J.tokens.times_equal,"/=":J.tokens.division_equal,"%=":J.tokens.modulo_equal,"&=":J.tokens.and_equal,"|=":J.tokens.or_equal,"^=":J.tokens.xor_equal,">>=":J.tokens.shift_right_equal,"<<=":J.tokens.shift_left_equal},M.regexTokens={decimal_float_literal:J.tokens.decimal_float_literal,hex_float_literal:J.tokens.hex_float_literal,int_literal:J.tokens.int_literal,uint_literal:J.tokens.uint_literal,ident:J.tokens.ident},M.storage_class=[J.keywords.function,J.keywords.private,J.keywords.workgroup,J.keywords.uniform,J.keywords.storage],M.access_mode=[J.keywords.read,J.keywords.write,J.keywords.read_write],M.sampler_type=[J.keywords.sampler,J.keywords.sampler_comparison],M.sampled_texture_type=[J.keywords.texture_1d,J.keywords.texture_2d,J.keywords.texture_2d_array,J.keywords.texture_3d,J.keywords.texture_cube,J.keywords.texture_cube_array],M.multisampled_texture_type=[J.keywords.texture_multisampled_2d],M.storage_texture_type=[J.keywords.texture_storage_1d,J.keywords.texture_storage_2d,J.keywords.texture_storage_2d_array,J.keywords.texture_storage_3d],M.depth_texture_type=[J.keywords.texture_depth_2d,J.keywords.texture_depth_2d_array,J.keywords.texture_depth_cube,J.keywords.texture_depth_cube_array,J.keywords.texture_depth_multisampled_2d],M.texture_external_type=[J.keywords.texture_external],M.any_texture_type=[...J.sampled_texture_type,...J.multisampled_texture_type,...J.storage_texture_type,...J.depth_texture_type,...J.texture_external_type],M.texel_format=[J.keywords.r8unorm,J.keywords.r8snorm,J.keywords.r8uint,J.keywords.r8sint,J.keywords.r16uint,J.keywords.r16sint,J.keywords.r16float,J.keywords.rg8unorm,J.keywords.rg8snorm,J.keywords.rg8uint,J.keywords.rg8sint,J.keywords.r32uint,J.keywords.r32sint,J.keywords.r32float,J.keywords.rg16uint,J.keywords.rg16sint,J.keywords.rg16float,J.keywords.rgba8unorm,J.keywords.rgba8unorm_srgb,J.keywords.rgba8snorm,J.keywords.rgba8uint,J.keywords.rgba8sint,J.keywords.bgra8unorm,J.keywords.bgra8unorm_srgb,J.keywords.rgb10a2unorm,J.keywords.rg11b10float,J.keywords.rg32uint,J.keywords.rg32sint,J.keywords.rg32float,J.keywords.rgba16uint,J.keywords.rgba16sint,J.keywords.rgba16float,J.keywords.rgba32uint,J.keywords.rgba32sint,J.keywords.rgba32float],M.const_literal=[J.tokens.int_literal,J.tokens.uint_literal,J.tokens.decimal_float_literal,J.tokens.hex_float_literal,J.keywords.true,J.keywords.false],M.literal_or_ident=[J.tokens.ident,J.tokens.int_literal,J.tokens.uint_literal,J.tokens.decimal_float_literal,J.tokens.hex_float_literal,J.tokens.name],M.element_count_expression=[J.tokens.int_literal,J.tokens.uint_literal,J.tokens.ident],M.template_types=[J.keywords.vec2,J.keywords.vec3,J.keywords.vec4,J.keywords.mat2x2,J.keywords.mat2x3,J.keywords.mat2x4,J.keywords.mat3x2,J.keywords.mat3x3,J.keywords.mat3x4,J.keywords.mat4x2,J.keywords.mat4x3,J.keywords.mat4x4,J.keywords.atomic,J.keywords.bitcast,...J.any_texture_type],M.attribute_name=[J.tokens.ident,J.keywords.block,J.keywords.diagnostic],M.assignment_operators=[J.tokens.equal,J.tokens.plus_equal,J.tokens.minus_equal,J.tokens.times_equal,J.tokens.division_equal,J.tokens.modulo_equal,J.tokens.and_equal,J.tokens.or_equal,J.tokens.xor_equal,J.tokens.shift_right_equal,J.tokens.shift_left_equal],M.increment_operators=[J.tokens.plus_plus,J.tokens.minus_minus];class _p{constructor(t,n,i,s,r){this.type=t,this.lexeme=n,this.line=i,this.start=s,this.end=r}toString(){return this.lexeme}isTemplateType(){return M.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==M.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class dP{constructor(t){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=t??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new _p(M.eof,"",this._line,this._current,this._current)),this._tokens}scanToken(){let t=this._advance();if(t==`
`)return this._line++,!0;if(this._isWhitespace(t))return!0;if(t=="/"){if(this._peekAhead()=="/"){for(;t!=`
`;){if(this._isAtEnd())return!0;t=this._advance()}return this._line++,!0}if(this._peekAhead()=="*"){this._advance();let a=1;for(;a>0;){if(this._isAtEnd())return!0;if(t=this._advance(),t==`
`)this._line++;else if(t=="*"){if(this._peekAhead()=="/"&&(this._advance(),a--,a==0))return!0}else t=="/"&&this._peekAhead()=="*"&&(this._advance(),a++)}return!0}}const n=M.simpleTokens[t];if(n)return this._addToken(n),!0;let i=M.none;const s=this._isAlpha(t),r=t==="_";if(this._isAlphaNumeric(t)){let a=this._peekAhead();for(;this._isAlphaNumeric(a);)t+=this._advance(),a=this._peekAhead()}if(s){const a=M.keywords[t];if(a)return this._addToken(a),!0}if(s||r)return this._addToken(M.tokens.ident),!0;for(;;){let a=this._findType(t);const o=this._peekAhead();if(t=="-"&&this._tokens.length>0){if(o=="=")return this._current++,t+=o,this._addToken(M.tokens.minus_equal),!0;if(o=="-")return this._current++,t+=o,this._addToken(M.tokens.minus_minus),!0;const l=this._tokens.length-1;if((M.literal_or_ident.indexOf(this._tokens[l].type)!=-1||this._tokens[l].type==M.tokens.paren_right)&&o!=">")return this._addToken(a),!0}if(t==">"&&(o==">"||o=="=")){let l=!1,u=this._tokens.length-1;for(let c=0;c<5&&u>=0&&M.assignment_operators.indexOf(this._tokens[u].type)===-1;++c,--u)if(this._tokens[u].type===M.tokens.less_than){u>0&&this._tokens[u-1].isArrayOrTemplateType()&&(l=!0);break}if(l)return this._addToken(a),!0}if(a===M.none){let l=t,u=0;const c=2;for(let d=0;d<c;++d)if(l+=this._peekAhead(d),a=this._findType(l),a!==M.none){u=d;break}if(a===M.none)return i!==M.none&&(this._current--,this._addToken(i),!0);t=l,this._current+=u+1}if(i=a,this._isAtEnd())break;t+=this._advance()}return i!==M.none&&(this._addToken(i),!0)}_findType(t){for(const i in M.regexTokens){const s=M.regexTokens[i];if(this._match(t,s.rule))return s}return M.literalTokens[t]||M.none}_match(t,n){const i=n.exec(t);return i&&i.index==0&&i[0]==t}_isAtEnd(){return this._current>=this._source.length}_isAlpha(t){return!this._isNumeric(t)&&!this._isWhitespace(t)&&t!=="_"&&t!=="."&&t!=="("&&t!==")"&&t!=="["&&t!=="]"&&t!=="{"&&t!=="}"&&t!==","&&t!==";"&&t!==":"&&t!=="="&&t!=="!"&&t!=="<"&&t!==">"&&t!=="+"&&t!=="-"&&t!=="*"&&t!=="/"&&t!=="%"&&t!=="&"&&t!=="|"&&t!=="^"&&t!=="~"&&t!=="@"&&t!=="#"&&t!=="?"&&t!=="'"&&t!=="`"&&t!=='"'&&t!=="\\"&&t!==`
`&&t!=="\r"&&t!=="	"&&t!=="\0"}_isNumeric(t){return t>="0"&&t<="9"}_isAlphaNumeric(t){return this._isAlpha(t)||this._isNumeric(t)||t==="_"}_isWhitespace(t){return t==" "||t=="	"||t=="\r"}_advance(t=0){let n=this._source[this._current];return t=t||0,t++,this._current+=t,n}_peekAhead(t=0){return t=t||0,this._current+t>=this._source.length?"\0":this._source[this._current+t]}_addToken(t){const n=this._source.substring(this._start,this._current);this._tokens.push(new _p(t,n,this._line,this._start,this._current))}}function Ie(e){return Array.isArray(e)||e?.buffer instanceof ArrayBuffer}const xc=new Float32Array(1),fP=new Uint32Array(xc.buffer),hP=new Uint32Array(xc.buffer),Sc=new Int32Array(1),gP=new Float32Array(Sc.buffer),mP=new Uint32Array(Sc.buffer),Tc=new Uint32Array(1),vP=new Float32Array(Tc.buffer),pP=new Int32Array(Tc.buffer);function bp(e,t,n){if(t===n)return e;if(t==="f32"){if(n==="i32"||n==="x32")return xc[0]=e,fP[0];if(n==="u32")return xc[0]=e,hP[0]}else if(t==="i32"||t==="x32"){if(n==="f32")return Sc[0]=e,gP[0];if(n==="u32")return Sc[0]=e,mP[0]}else if(t==="u32"){if(n==="f32")return Tc[0]=e,vP[0];if(n==="i32"||n==="x32")return Tc[0]=e,pP[0]}return console.error(`Unsupported cast from ${t} to ${n}`),e}class yP{constructor(t){this.resources=null,this.inUse=!1,this.info=null,this.node=t}}class kl{constructor(t,n){this.align=t,this.size=n}}class ki{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new eP,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(t){return t.name=="texture_storage_1d"||t.name=="texture_storage_2d"||t.name=="texture_storage_2d_array"||t.name=="texture_storage_3d"}updateAST(t){for(const n of t)n instanceof Co&&this._functions.set(n.name,new yP(n));for(const n of t)if(n instanceof $i){const i=this.getTypeInfo(n,null);i instanceof _s&&this.structs.push(i)}for(const n of t)if(n instanceof pg)this.aliases.push(this._getAliasInfo(n));else{if(n instanceof mg){const i=n,s=this._getAttributeNum(i.attributes,"id",0),r=i.type!=null?this.getTypeInfo(i.type,i.attributes):null;this.overrides.push(new GI(i.name,r,i.attributes,s));continue}if(this._isUniformVar(n)){const i=n,s=this._getAttributeNum(i.attributes,"group",0),r=this._getAttributeNum(i.attributes,"binding",0),a=this.getTypeInfo(i.type,i.attributes),o=new Cl(i.name,a,s,r,i.attributes,ps.Uniform,i.access);o.access||(o.access="read"),this.uniforms.push(o);continue}if(this._isStorageVar(n)){const i=n,s=this._getAttributeNum(i.attributes,"group",0),r=this._getAttributeNum(i.attributes,"binding",0),a=this.getTypeInfo(i.type,i.attributes),o=this._isStorageTexture(a),l=new Cl(i.name,a,s,r,i.attributes,o?ps.StorageTexture:ps.Storage,i.access);l.access||(l.access="read"),this.storage.push(l);continue}if(this._isTextureVar(n)){const i=n,s=this._getAttributeNum(i.attributes,"group",0),r=this._getAttributeNum(i.attributes,"binding",0),a=this.getTypeInfo(i.type,i.attributes),o=this._isStorageTexture(a),l=new Cl(i.name,a,s,r,i.attributes,o?ps.StorageTexture:ps.Texture,i.access);l.access||(l.access="read"),o?this.storage.push(l):this.textures.push(l);continue}if(this._isSamplerVar(n)){const i=n,s=this._getAttributeNum(i.attributes,"group",0),r=this._getAttributeNum(i.attributes,"binding",0),a=this.getTypeInfo(i.type,i.attributes),o=new Cl(i.name,a,s,r,i.attributes,ps.Sampler,i.access);this.samplers.push(o);continue}}for(const n of t)if(n instanceof Co){const i=this._getAttribute(n,"vertex"),s=this._getAttribute(n,"fragment"),r=this._getAttribute(n,"compute"),a=i||s||r,o=new JI(n.name,a?.name,n.attributes);o.attributes=n.attributes,o.startLine=n.startLine,o.endLine=n.endLine,this.functions.push(o),this._functions.get(n.name).info=o,a&&(this._functions.get(n.name).inUse=!0,o.inUse=!0,o.resources=this._findResources(n,!!a),o.inputs=this._getInputs(n.args),o.outputs=this._getOutputs(n.returnType),this.entry[a.name].push(o)),o.arguments=n.args.map(l=>new QI(l.name,this.getTypeInfo(l.type,l.attributes),l.attributes)),o.returnType=n.returnType?this.getTypeInfo(n.returnType,n.attributes):null;continue}for(const n of this._functions.values())n.info&&(n.info.inUse=n.inUse,this._addCalls(n.node,n.info.calls));for(const n of this._functions.values())n.node.search(i=>{var s,r,a;if(i instanceof Bw){if(i.value)if(Ie(i.value))for(const o of i.value)for(const l of this.overrides)o===l.name&&((s=n.info)===null||s===void 0||s.overrides.push(l));else for(const o of this.overrides)i.value===o.name&&((r=n.info)===null||r===void 0||r.overrides.push(o))}else if(i instanceof Nn)for(const o of this.overrides)i.name===o.name&&((a=n.info)===null||a===void 0||a.overrides.push(o))});for(const n of this.uniforms)this._markStructsInUse(n.type);for(const n of this.storage)this._markStructsInUse(n.type)}getFunctionInfo(t){for(const n of this.functions)if(n.name==t)return n;return null}getStructInfo(t){for(const n of this.structs)if(n.name==t)return n;return null}getOverrideInfo(t){for(const n of this.overrides)if(n.name==t)return n;return null}_markStructsInUse(t){if(t)if(t.isStruct){if(t.inUse=!0,t.members)for(const n of t.members)this._markStructsInUse(n.type)}else if(t.isArray)this._markStructsInUse(t.format);else if(t.isTemplate)t.format&&this._markStructsInUse(t.format);else{const n=this._getAlias(t.name);n&&this._markStructsInUse(n)}}_addCalls(t,n){var i;for(const s of t.calls){const r=(i=this._functions.get(s.name))===null||i===void 0?void 0:i.info;r&&n.add(r)}}findResource(t,n,i){if(i){for(const s of this.entry.compute)if(s.name===i){for(const r of s.resources)if(r.group==t&&r.binding==n)return r}for(const s of this.entry.vertex)if(s.name===i){for(const r of s.resources)if(r.group==t&&r.binding==n)return r}for(const s of this.entry.fragment)if(s.name===i){for(const r of s.resources)if(r.group==t&&r.binding==n)return r}}for(const s of this.uniforms)if(s.group==t&&s.binding==n)return s;for(const s of this.storage)if(s.group==t&&s.binding==n)return s;for(const s of this.textures)if(s.group==t&&s.binding==n)return s;for(const s of this.samplers)if(s.group==t&&s.binding==n)return s;return null}_findResource(t){for(const n of this.uniforms)if(n.name==t)return n;for(const n of this.storage)if(n.name==t)return n;for(const n of this.textures)if(n.name==t)return n;for(const n of this.samplers)if(n.name==t)return n;return null}_markStructsFromAST(t){const n=this.getTypeInfo(t,null);this._markStructsInUse(n)}_findResources(t,n){const i=[],s=this,r=[];return t.search(a=>{if(a instanceof bc)r.push({});else if(a instanceof wc)r.pop();else if(a instanceof Xi){const o=a;n&&o.type!==null&&this._markStructsFromAST(o.type),r.length>0&&(r[r.length-1][o.name]=o)}else if(a instanceof Ti){const o=a;n&&o.type!==null&&this._markStructsFromAST(o.type)}else if(a instanceof fo){const o=a;n&&o.type!==null&&this._markStructsFromAST(o.type),r.length>0&&(r[r.length-1][o.name]=o)}else if(a instanceof Nn){const o=a;if(r.length>0&&r[r.length-1][o.name])return;const l=s._findResource(o.name);l&&i.push(l)}else if(a instanceof yg){const o=a,l=s._functions.get(o.name);l&&(n&&(l.inUse=!0),t.calls.add(l.node),l.resources===null&&(l.resources=s._findResources(l.node,n)),i.push(...l.resources))}else if(a instanceof vg){const o=a,l=s._functions.get(o.name);l&&(n&&(l.inUse=!0),t.calls.add(l.node),l.resources===null&&(l.resources=s._findResources(l.node,n)),i.push(...l.resources))}}),[...new Map(i.map(a=>[a.name,a])).values()]}getBindGroups(){const t=[];function n(i,s){i>=t.length&&(t.length=i+1),t[i]===void 0&&(t[i]=[]),s>=t[i].length&&(t[i].length=s+1)}for(const i of this.uniforms)n(i.group,i.binding),t[i.group][i.binding]=i;for(const i of this.storage)n(i.group,i.binding),t[i.group][i.binding]=i;for(const i of this.textures)n(i.group,i.binding),t[i.group][i.binding]=i;for(const i of this.samplers)n(i.group,i.binding),t[i.group][i.binding]=i;return t}_getOutputs(t,n=void 0){if(n===void 0&&(n=[]),t instanceof $i)this._getStructOutputs(t,n);else{const i=this._getOutputInfo(t);i!==null&&n.push(i)}return n}_getStructOutputs(t,n){for(const i of t.members)if(i.type instanceof $i)this._getStructOutputs(i.type,n);else{const s=this._getAttribute(i,"location")||this._getAttribute(i,"builtin");if(s!==null){const r=this.getTypeInfo(i.type,i.type.attributes),a=this._parseInt(s.value),o=new gp(i.name,r,s.name,a);n.push(o)}}}_getOutputInfo(t){const n=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(n!==null){const i=this.getTypeInfo(t,t.attributes),s=this._parseInt(n.value);return new gp("",i,n.name,s)}return null}_getInputs(t,n=void 0){n===void 0&&(n=[]);for(const i of t)if(i.type instanceof $i)this._getStructInputs(i.type,n);else{const s=this._getInputInfo(i);s!==null&&n.push(s)}return n}_getStructInputs(t,n){for(const i of t.members)if(i.type instanceof $i)this._getStructInputs(i.type,n);else{const s=this._getInputInfo(i);s!==null&&n.push(s)}}_getInputInfo(t){const n=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(n!==null){const i=this._getAttribute(t,"interpolation"),s=this.getTypeInfo(t.type,t.attributes),r=this._parseInt(n.value),a=new ZI(t.name,s,n.name,r);return i!==null&&(a.interpolation=this._parseString(i.value)),a}return null}_parseString(t){return t instanceof Array&&(t=t[0]),t}_parseInt(t){t instanceof Array&&(t=t[0]);const n=parseInt(t);return isNaN(n)?t:n}_getAlias(t){for(const n of this.aliases)if(n.name==t)return n.type;return null}_getAliasInfo(t){return new qI(t.name,this.getTypeInfo(t.type,null))}getTypeInfoByName(t){for(const n of this.structs)if(n.name==t)return n;for(const n of this.aliases)if(n.name==t)return n.type;return null}getTypeInfo(t,n=null){if(this._types.has(t))return this._types.get(t);if(t instanceof Kl){const s=t.type?this.getTypeInfo(t.type,t.attributes):null,r=new _f(t.name,s,n);return this._types.set(t,r),this._updateTypeInfo(r),r}if(t instanceof ho){const s=t,r=s.format?this.getTypeInfo(s.format,s.attributes):null,a=new Ss(s.name,n);return a.format=r,a.count=s.count,this._types.set(t,a),this._updateTypeInfo(a),a}if(t instanceof $i){const s=t,r=new _s(s.name,n);r.startLine=s.startLine,r.endLine=s.endLine;for(const a of s.members){const o=this.getTypeInfo(a.type,a.attributes);r.members.push(new hp(a.name,o,a.attributes))}return this._types.set(t,r),this._updateTypeInfo(r),r}if(t instanceof Za){const s=t,r=s.format instanceof fe,a=s.format?r?this.getTypeInfo(s.format,null):new qn(s.format,null):null,o=new rr(s.name,a,n,s.access);return this._types.set(t,o),this._updateTypeInfo(o),o}if(t instanceof Q){const s=t,r=s.format?this.getTypeInfo(s.format,null):null,a=new rr(s.name,r,n,s.access);return this._types.set(t,a),this._updateTypeInfo(a),a}const i=new qn(t.name,n);return this._types.set(t,i),this._updateTypeInfo(i),i}_updateTypeInfo(t){var n,i,s;const r=this._getTypeSize(t);if(t.size=(n=r?.size)!==null&&n!==void 0?n:0,t instanceof Ss&&t.format){const a=this._getTypeSize(t.format);t.stride=Math.max((i=a?.size)!==null&&i!==void 0?i:0,(s=a?.align)!==null&&s!==void 0?s:0),this._updateTypeInfo(t.format)}t instanceof _f&&this._updateTypeInfo(t.format),t instanceof _s&&this._updateStructInfo(t)}_updateStructInfo(t){var n;let i=0,s=0,r=0,a=0;for(let o=0,l=t.members.length;o<l;++o){const u=t.members[o],c=this._getTypeSize(u);if(!c)continue;(n=this._getAlias(u.type.name))!==null&&n!==void 0||u.type;const d=c.align,f=c.size;i=this._roundUp(d,i+s),s=f,r=i,a=Math.max(a,d),u.offset=i,u.size=f,this._updateTypeInfo(u.type)}t.size=this._roundUp(a,r+s),t.align=a}_getTypeSize(t){var n,i;if(t==null)return null;const s=this._getAttributeNum(t.attributes,"size",0),r=this._getAttributeNum(t.attributes,"align",0);if(t instanceof hp&&(t=t.type),t instanceof qn){const a=this._getAlias(t.name);a!==null&&(t=a)}{const a=ki._typeInfo[t.name];if(a!==void 0){const o=((n=t.format)===null||n===void 0?void 0:n.name)==="f16"?2:1;return new kl(Math.max(r,a.align/o),Math.max(s,a.size/o))}}{const a=ki._typeInfo[t.name.substring(0,t.name.length-1)];if(a){const o=t.name[t.name.length-1]==="h"?2:1;return new kl(Math.max(r,a.align/o),Math.max(s,a.size/o))}}if(t instanceof Ss){let a=t,o=8,l=8;const u=this._getTypeSize(a.format);return u!==null&&(l=u.size,o=u.align),l=a.count*this._getAttributeNum((i=t?.attributes)!==null&&i!==void 0?i:null,"stride",this._roundUp(o,l)),s&&(l=s),new kl(Math.max(r,o),Math.max(s,l))}if(t instanceof _s){let a=0,o=0,l=0,u=0,c=0;for(const d of t.members){const f=this._getTypeSize(d.type);f!==null&&(a=Math.max(f.align,a),l=this._roundUp(f.align,l+u),u=f.size,c=l)}return o=this._roundUp(a,c+u),new kl(Math.max(r,a),Math.max(s,o))}return null}_isUniformVar(t){return t instanceof Xi&&t.storage=="uniform"}_isStorageVar(t){return t instanceof Xi&&t.storage=="storage"}_isTextureVar(t){return t instanceof Xi&&t.type!==null&&ki._textureTypes.indexOf(t.type.name)!=-1}_isSamplerVar(t){return t instanceof Xi&&t.type!==null&&ki._samplerTypes.indexOf(t.type.name)!=-1}_getAttribute(t,n){const i=t;if(!i||!i.attributes)return null;const s=i.attributes;for(let r of s)if(r.name==n)return r;return null}_getAttributeNum(t,n,i){if(t===null)return i;for(let s of t)if(s.name==n){let r=s!==null&&s.value!==null?s.value:i;return r instanceof Array&&(r=r[0]),typeof r=="number"?r:typeof r=="string"?parseInt(r):i}return i}_roundUp(t,n){return Math.ceil(n/t)*t}}ki._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},ki._textureTypes=M.any_texture_type.map(e=>e.name),ki._samplerTypes=M.sampler_type.map(e=>e.name);let _g=0;class bg{constructor(t,n,i){this.id=_g++,this.name=t,this.value=n,this.node=i}clone(){return new bg(this.name,this.value,this.node)}}class wg{constructor(t){this.id=_g++,this.name=t.name,this.node=t}clone(){return new wg(this.node)}}class xg{constructor(t){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName="",this.id=_g++,t&&(this.parent=t,this.currentFunctionName=t.currentFunctionName)}getVariable(t){var n;return this.variables.has(t)?(n=this.variables.get(t))!==null&&n!==void 0?n:null:this.parent?this.parent.getVariable(t):null}getFunction(t){var n;return this.functions.has(t)?(n=this.functions.get(t))!==null&&n!==void 0?n:null:this.parent?this.parent.getFunction(t):null}createVariable(t,n,i){this.variables.set(t,new bg(t,n,i??null))}setVariable(t,n,i){const s=this.getVariable(t);s!==null?s.value=n:this.createVariable(t,n,i)}getVariableValue(t){var n;const i=this.getVariable(t);return(n=i?.value)!==null&&n!==void 0?n:null}clone(){return new xg(this)}}class _P{evalExpression(t,n){return null}getTypeInfo(t){return null}getVariableName(t,n){return""}}class bP{constructor(t){this.exec=t}getTypeInfo(t){return this.exec.getTypeInfo(t)}All(t,n){const i=this.exec.evalExpression(t.args[0],n);let s=!0;if(i instanceof V)return i.data.forEach(r=>{r||(s=!1)}),new K(s?1:0,this.getTypeInfo("bool"));throw new Error(`All() expects a vector argument. Line ${t.line}`)}Any(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V){const s=i.data.some(r=>r);return new K(s?1:0,this.getTypeInfo("bool"))}throw new Error(`Any() expects a vector argument. Line ${t.line}`)}Select(t,n){const i=this.exec.evalExpression(t.args[2],n);if(!(i instanceof K))throw new Error(`Select() expects a bool condition. Line ${t.line}`);return i.value?this.exec.evalExpression(t.args[1],n):this.exec.evalExpression(t.args[0],n)}ArrayLength(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.evalExpression(i,n);if(s instanceof kt&&s.typeInfo.size===0){const r=s.typeInfo,a=s.buffer.byteLength/r.stride;return new K(a,this.getTypeInfo("u32"))}return new K(s.typeInfo.size,this.getTypeInfo("u32"))}Abs(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.abs(r)),i.typeInfo);const s=i;return new K(Math.abs(s.value),s.typeInfo)}Acos(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.acos(r)),i.typeInfo);const s=i;return new K(Math.acos(s.value),i.typeInfo)}Acosh(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.acosh(r)),i.typeInfo);const s=i;return new K(Math.acosh(s.value),i.typeInfo)}Asin(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.asin(r)),i.typeInfo);const s=i;return new K(Math.asin(s.value),i.typeInfo)}Asinh(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.asinh(r)),i.typeInfo);const s=i;return new K(Math.asinh(s.value),i.typeInfo)}Atan(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.atan(r)),i.typeInfo);const s=i;return new K(Math.atan(s.value),i.typeInfo)}Atanh(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.atanh(r)),i.typeInfo);const s=i;return new K(Math.atanh(s.value),i.typeInfo)}Atan2(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n);if(i instanceof V&&s instanceof V)return new V(i.data.map((o,l)=>Math.atan2(o,s.data[l])),i.typeInfo);const r=i,a=s;return new K(Math.atan2(r.value,a.value),i.typeInfo)}Ceil(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.ceil(r)),i.typeInfo);const s=i;return new K(Math.ceil(s.value),i.typeInfo)}_clamp(t,n,i){return Math.min(Math.max(t,n),i)}Clamp(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n),r=this.exec.evalExpression(t.args[2],n);if(i instanceof V&&s instanceof V&&r instanceof V)return new V(i.data.map((u,c)=>this._clamp(u,s.data[c],r.data[c])),i.typeInfo);const a=i,o=s,l=r;return new K(this._clamp(a.value,o.value,l.value),i.typeInfo)}Cos(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.cos(r)),i.typeInfo);const s=i;return new K(Math.cos(s.value),i.typeInfo)}Cosh(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.cosh(r)),i.typeInfo);const s=i;return new K(Math.cos(s.value),i.typeInfo)}CountLeadingZeros(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.clz32(r)),i.typeInfo);const s=i;return new K(Math.clz32(s.value),i.typeInfo)}_countOneBits(t){let n=0;for(;t!==0;)1&t&&n++,t>>=1;return n}CountOneBits(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>this._countOneBits(r)),i.typeInfo);const s=i;return new K(this._countOneBits(s.value),i.typeInfo)}_countTrailingZeros(t){if(t===0)return 32;let n=0;for(;!(1&t);)t>>=1,n++;return n}CountTrailingZeros(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>this._countTrailingZeros(r)),i.typeInfo);const s=i;return new K(this._countTrailingZeros(s.value),i.typeInfo)}Cross(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n);if(i instanceof V&&s instanceof V){if(i.data.length!==3||s.data.length!==3)return console.error(`Cross() expects 3D vectors. Line ${t.line}`),null;const r=i.data,a=s.data;return new V([r[1]*a[2]-a[1]*r[2],r[2]*a[0]-a[2]*r[0],r[0]*a[1]-a[0]*r[1]],i.typeInfo)}return console.error(`Cross() expects vector arguments. Line ${t.line}`),null}Degrees(t,n){const i=this.exec.evalExpression(t.args[0],n),s=180/Math.PI;return i instanceof V?new V(i.data.map(r=>r*s),i.typeInfo):new K(i.value*s,this.getTypeInfo("f32"))}Determinant(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof Ve){const s=i.data,r=i.typeInfo.getTypeName(),a=r.endsWith("h")?this.getTypeInfo("f16"):this.getTypeInfo("f32");if(r==="mat2x2"||r==="mat2x2f"||r==="mat2x2h")return new K(s[0]*s[3]-s[1]*s[2],a);if(r==="mat2x3"||r==="mat2x3f"||r==="mat2x3h")return new K(s[0]*(s[4]*s[8]-s[5]*s[7])-s[1]*(s[3]*s[8]-s[5]*s[6])+s[2]*(s[3]*s[7]-s[4]*s[6]),a);if(r==="mat2x4"||r==="mat2x4f"||r==="mat2x4h")console.error(`TODO: Determinant for ${r}`);else if(r==="mat3x2"||r==="mat3x2f"||r==="mat3x2h")console.error(`TODO: Determinant for ${r}`);else{if(r==="mat3x3"||r==="mat3x3f"||r==="mat3x3h")return new K(s[0]*(s[4]*s[8]-s[5]*s[7])-s[1]*(s[3]*s[8]-s[5]*s[6])+s[2]*(s[3]*s[7]-s[4]*s[6]),a);r==="mat3x4"||r==="mat3x4f"||r==="mat3x4h"||r==="mat4x2"||r==="mat4x2f"||r==="mat4x2h"||r==="mat4x3"||r==="mat4x3f"||r==="mat4x3h"?console.error(`TODO: Determinant for ${r}`):r!=="mat4x4"&&r!=="mat4x4f"&&r!=="mat4x4h"||console.error(`TODO: Determinant for ${r}`)}}return console.error(`Determinant expects a matrix argument. Line ${t.line}`),null}Distance(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n);if(i instanceof V&&s instanceof V){let o=0;for(let l=0;l<i.data.length;++l)o+=(i.data[l]-s.data[l])*(i.data[l]-s.data[l]);return new K(Math.sqrt(o),this.getTypeInfo("f32"))}const r=i,a=s;return new K(Math.abs(r.value-a.value),i.typeInfo)}_dot(t,n){let i=0;for(let s=0;s<t.length;++s)i+=n[s]*t[s];return i}Dot(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n);return i instanceof V&&s instanceof V?new K(this._dot(i.data,s.data),this.getTypeInfo("f32")):(console.error(`Dot() expects vector arguments. Line ${t.line}`),null)}Dot4U8Packed(t,n){return console.error(`TODO: dot4U8Packed. Line ${t.line}`),null}Dot4I8Packed(t,n){return console.error(`TODO: dot4I8Packed. Line ${t.line}`),null}Exp(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.exp(r)),i.typeInfo);const s=i;return new K(Math.exp(s.value),i.typeInfo)}Exp2(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.pow(2,r)),i.typeInfo);const s=i;return new K(Math.pow(2,s.value),i.typeInfo)}ExtractBits(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n),r=this.exec.evalExpression(t.args[2],n);if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 offset argument. Line ${t.line}`),null;if(r.typeInfo.name!=="u32"&&r.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 count argument. Line ${t.line}`),null;const a=s.value,o=r.value;if(i instanceof V)return new V(i.data.map(u=>u>>a&(1<<o)-1),i.typeInfo);if(i.typeInfo.name!=="i32"&&i.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 argument. Line ${t.line}`),null;const l=i.value;return new K(l>>a&(1<<o)-1,this.getTypeInfo("i32"))}FaceForward(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n),r=this.exec.evalExpression(t.args[2],n);if(i instanceof V&&s instanceof V&&r instanceof V){const a=this._dot(s.data,r.data);return new V(a<0?Array.from(i.data):i.data.map(o=>-o),i.typeInfo)}return console.error(`FaceForward() expects vector arguments. Line ${t.line}`),null}_firstLeadingBit(t){return t===0?-1:31-Math.clz32(t)}FirstLeadingBit(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>this._firstLeadingBit(r)),i.typeInfo);const s=i;return new K(this._firstLeadingBit(s.value),i.typeInfo)}_firstTrailingBit(t){return t===0?-1:Math.log2(t&-t)}FirstTrailingBit(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>this._firstTrailingBit(r)),i.typeInfo);const s=i;return new K(this._firstTrailingBit(s.value),i.typeInfo)}Floor(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.floor(r)),i.typeInfo);const s=i;return new K(Math.floor(s.value),i.typeInfo)}Fma(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n),r=this.exec.evalExpression(t.args[2],n);if(i instanceof V&&s instanceof V&&r instanceof V)return i.data.length!==s.data.length||i.data.length!==r.data.length?(console.error(`Fma() expects vectors of the same length. Line ${t.line}`),null):new V(i.data.map((u,c)=>u*s.data[c]+r.data[c]),i.typeInfo);const a=i,o=s,l=r;return new K(a.value*o.value+l.value,a.typeInfo)}Fract(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>r-Math.floor(r)),i.typeInfo);const s=i;return new K(s.value-Math.floor(s.value),i.typeInfo)}Frexp(t,n){return console.error(`TODO: frexp. Line ${t.line}`),null}InsertBits(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n),r=this.exec.evalExpression(t.args[2],n),a=this.exec.evalExpression(t.args[3],n);if(r.typeInfo.name!=="u32"&&r.typeInfo.name!=="x32")return console.error(`InsertBits() expects an i32 offset argument. Line ${t.line}`),null;const o=r.value,l=(1<<a.value)-1<<o,u=~l;if(i instanceof V&&s instanceof V)return new V(i.data.map((f,h)=>f&u|s.data[h]<<o&l),i.typeInfo);const c=i.value,d=s.value;return new K(c&u|d<<o&l,i.typeInfo)}InverseSqrt(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>1/Math.sqrt(r)),i.typeInfo);const s=i;return new K(1/Math.sqrt(s.value),i.typeInfo)}Ldexp(t,n){return console.error(`TODO: ldexp. Line ${t.line}`),null}Length(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V){let r=0;return i.data.forEach(a=>{r+=a*a}),new K(Math.sqrt(r),this.getTypeInfo("f32"))}const s=i;return new K(Math.abs(s.value),i.typeInfo)}Log(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.log(r)),i.typeInfo);const s=i;return new K(Math.log(s.value),i.typeInfo)}Log2(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.log2(r)),i.typeInfo);const s=i;return new K(Math.log2(s.value),i.typeInfo)}Max(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n);if(i instanceof V&&s instanceof V)return new V(i.data.map((o,l)=>Math.max(o,s.data[l])),i.typeInfo);const r=i,a=s;return new K(Math.max(r.value,a.value),i.typeInfo)}Min(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n);if(i instanceof V&&s instanceof V)return new V(i.data.map((o,l)=>Math.min(o,s.data[l])),i.typeInfo);const r=i,a=s;return new K(Math.min(r.value,a.value),i.typeInfo)}Mix(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n),r=this.exec.evalExpression(t.args[2],n);if(i instanceof V&&s instanceof V&&r instanceof V)return new V(i.data.map((l,u)=>i.data[u]*(1-r.data[u])+s.data[u]*r.data[u]),i.typeInfo);const a=s,o=r;return new K(i.value*(1-o.value)+a.value*o.value,i.typeInfo)}Modf(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n);if(i instanceof V&&s instanceof V)return new V(i.data.map((a,o)=>a%s.data[o]),i.typeInfo);const r=s;return new K(i.value%r.value,i.typeInfo)}Normalize(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V){const s=this.Length(t,n).value;return new V(i.data.map(r=>r/s),i.typeInfo)}return console.error(`Normalize() expects a vector argument. Line ${t.line}`),null}Pow(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n);if(i instanceof V&&s instanceof V)return new V(i.data.map((o,l)=>Math.pow(o,s.data[l])),i.typeInfo);const r=i,a=s;return new K(Math.pow(r.value,a.value),i.typeInfo)}QuantizeToF16(t,n){const i=this.exec.evalExpression(t.args[0],n);return i instanceof V?new V(i.data.map(s=>s),i.typeInfo):new K(i.value,i.typeInfo)}Radians(t,n){const i=this.exec.evalExpression(t.args[0],n);return i instanceof V?new V(i.data.map(s=>s*Math.PI/180),i.typeInfo):new K(i.value*Math.PI/180,this.getTypeInfo("f32"))}Reflect(t,n){let i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n);if(i instanceof V&&s instanceof V){const r=this._dot(i.data,s.data);return new V(i.data.map((a,o)=>a-2*r*s.data[o]),i.typeInfo)}return console.error(`Reflect() expects vector arguments. Line ${t.line}`),null}Refract(t,n){let i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n),r=this.exec.evalExpression(t.args[2],n);if(i instanceof V&&s instanceof V&&r instanceof K){const a=this._dot(s.data,i.data);return new V(i.data.map((o,l)=>{const u=1-r.value*r.value*(1-a*a);if(u<0)return 0;const c=Math.sqrt(u);return r.value*o-(r.value*a+c)*s.data[l]}),i.typeInfo)}return console.error(`Refract() expects vector arguments and a scalar argument. Line ${t.line}`),null}ReverseBits(t,n){return console.error(`TODO: reverseBits. Line ${t.line}`),null}Round(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.round(r)),i.typeInfo);const s=i;return new K(Math.round(s.value),i.typeInfo)}Saturate(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.min(Math.max(r,0),1)),i.typeInfo);const s=i;return new K(Math.min(Math.max(s.value,0),1),i.typeInfo)}Sign(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.sign(r)),i.typeInfo);const s=i;return new K(Math.sign(s.value),i.typeInfo)}Sin(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.sin(r)),i.typeInfo);const s=i;return new K(Math.sin(s.value),i.typeInfo)}Sinh(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.sinh(r)),i.typeInfo);const s=i;return new K(Math.sinh(s.value),i.typeInfo)}_smoothstep(t,n,i){const s=Math.min(Math.max((i-t)/(n-t),0),1);return s*s*(3-2*s)}SmoothStep(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n),r=this.exec.evalExpression(t.args[2],n);if(r instanceof V&&i instanceof V&&s instanceof V)return new V(r.data.map((u,c)=>this._smoothstep(i.data[c],s.data[c],u)),r.typeInfo);const a=i,o=s,l=r;return new K(this._smoothstep(a.value,o.value,l.value),r.typeInfo)}Sqrt(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.sqrt(r)),i.typeInfo);const s=i;return new K(Math.sqrt(s.value),i.typeInfo)}Step(t,n){const i=this.exec.evalExpression(t.args[0],n),s=this.exec.evalExpression(t.args[1],n);if(s instanceof V&&i instanceof V)return new V(s.data.map((a,o)=>a<i.data[o]?0:1),s.typeInfo);const r=i;return new K(s.value<r.value?0:1,r.typeInfo)}Tan(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.tan(r)),i.typeInfo);const s=i;return new K(Math.tan(s.value),i.typeInfo)}Tanh(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.tanh(r)),i.typeInfo);const s=i;return new K(Math.tanh(s.value),i.typeInfo)}_getTransposeType(t){const n=t.getTypeName();return n==="mat2x2f"||n==="mat2x2h"?t:n==="mat2x3f"?this.getTypeInfo("mat3x2f"):n==="mat2x3h"?this.getTypeInfo("mat3x2h"):n==="mat2x4f"?this.getTypeInfo("mat4x2f"):n==="mat2x4h"?this.getTypeInfo("mat4x2h"):n==="mat3x2f"?this.getTypeInfo("mat2x3f"):n==="mat3x2h"?this.getTypeInfo("mat2x3h"):n==="mat3x3f"||n==="mat3x3h"?t:n==="mat3x4f"?this.getTypeInfo("mat4x3f"):n==="mat3x4h"?this.getTypeInfo("mat4x3h"):n==="mat4x2f"?this.getTypeInfo("mat2x4f"):n==="mat4x2h"?this.getTypeInfo("mat2x4h"):n==="mat4x3f"?this.getTypeInfo("mat3x4f"):n==="mat4x3h"?this.getTypeInfo("mat3x4h"):(n==="mat4x4f"||n==="mat4x4h"||console.error(`Invalid matrix type ${n}`),t)}Transpose(t,n){const i=this.exec.evalExpression(t.args[0],n);if(!(i instanceof Ve))return console.error(`Transpose() expects a matrix argument. Line ${t.line}`),null;const s=this._getTransposeType(i.typeInfo);if(i.typeInfo.name==="mat2x2"||i.typeInfo.name==="mat2x2f"||i.typeInfo.name==="mat2x2h"){const r=i.data;return new Ve([r[0],r[2],r[1],r[3]],s)}if(i.typeInfo.name==="mat2x3"||i.typeInfo.name==="mat2x3f"||i.typeInfo.name==="mat2x3h"){const r=i.data;return new Ve([r[0],r[3],r[6],r[1],r[4],r[7]],s)}if(i.typeInfo.name==="mat2x4"||i.typeInfo.name==="mat2x4f"||i.typeInfo.name==="mat2x4h"){const r=i.data;return new Ve([r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13]],s)}if(i.typeInfo.name==="mat3x2"||i.typeInfo.name==="mat3x2f"||i.typeInfo.name==="mat3x2h"){const r=i.data;return new Ve([r[0],r[3],r[1],r[4],r[2],r[5]],s)}if(i.typeInfo.name==="mat3x3"||i.typeInfo.name==="mat3x3f"||i.typeInfo.name==="mat3x3h"){const r=i.data;return new Ve([r[0],r[3],r[6],r[1],r[4],r[7],r[2],r[5],r[8]],s)}if(i.typeInfo.name==="mat3x4"||i.typeInfo.name==="mat3x4f"||i.typeInfo.name==="mat3x4h"){const r=i.data;return new Ve([r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14]],s)}if(i.typeInfo.name==="mat4x2"||i.typeInfo.name==="mat4x2f"||i.typeInfo.name==="mat4x2h"){const r=i.data;return new Ve([r[0],r[4],r[1],r[5],r[2],r[6]],s)}if(i.typeInfo.name==="mat4x3"||i.typeInfo.name==="mat4x3f"||i.typeInfo.name==="mat4x3h"){const r=i.data;return new Ve([r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]],s)}if(i.typeInfo.name==="mat4x4"||i.typeInfo.name==="mat4x4f"||i.typeInfo.name==="mat4x4h"){const r=i.data;return new Ve([r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14],r[3],r[7],r[11],r[15]],s)}return console.error(`Invalid matrix type ${i.typeInfo.name}`),null}Trunc(t,n){const i=this.exec.evalExpression(t.args[0],n);if(i instanceof V)return new V(i.data.map(r=>Math.trunc(r)),i.typeInfo);const s=i;return new K(Math.trunc(s.value),i.typeInfo)}Dpdx(t,n){return console.error(`TODO: dpdx. Line ${t.line}`),null}DpdxCoarse(t,n){return console.error(`TODO: dpdxCoarse. Line ${t.line}`),null}DpdxFine(t,n){return console.error("TODO: dpdxFine"),null}Dpdy(t,n){return console.error("TODO: dpdy"),null}DpdyCoarse(t,n){return console.error("TODO: dpdyCoarse"),null}DpdyFine(t,n){return console.error("TODO: dpdyFine"),null}Fwidth(t,n){return console.error("TODO: fwidth"),null}FwidthCoarse(t,n){return console.error("TODO: fwidthCoarse"),null}FwidthFine(t,n){return console.error("TODO: fwidthFine"),null}TextureDimensions(t,n){const i=t.args[0],s=t.args.length>1?this.exec.evalExpression(t.args[1],n).value:0;if(i instanceof Nn){const r=i.name,a=n.getVariableValue(r);if(a instanceof zi){if(s<0||s>=a.mipLevelCount)return console.error(`Invalid mip level for textureDimensions. Line ${t.line}`),null;const o=a.getMipLevelSize(s),l=a.dimension;return l==="1d"?new K(o[0],this.getTypeInfo("u32")):l==="3d"?new V(o,this.getTypeInfo("vec3u")):l==="2d"?new V(o.slice(0,2),this.getTypeInfo("vec2u")):(console.error(`Invalid texture dimension ${l} not found. Line ${t.line}`),null)}return console.error(`Texture ${r} not found. Line ${t.line}`),null}return console.error(`Invalid texture argument for textureDimensions. Line ${t.line}`),null}TextureGather(t,n){return console.error("TODO: textureGather"),null}TextureGatherCompare(t,n){return console.error("TODO: textureGatherCompare"),null}TextureLoad(t,n){const i=t.args[0],s=this.exec.evalExpression(t.args[1],n),r=t.args.length>2?this.exec.evalExpression(t.args[2],n).value:0;if(!(s instanceof V)||s.data.length!==2)return console.error(`Invalid UV argument for textureLoad. Line ${t.line}`),null;if(i instanceof Nn){const a=i.name,o=n.getVariableValue(a);if(o instanceof zi){const l=Math.floor(s.data[0]),u=Math.floor(s.data[1]);if(l<0||l>=o.width||u<0||u>=o.height)return console.error(`Texture ${a} out of bounds. Line ${t.line}`),null;const c=o.getPixel(l,u,0,r);return c===null?(console.error(`Invalid texture format for textureLoad. Line ${t.line}`),null):new V(c,this.getTypeInfo("vec4f"))}return console.error(`Texture ${a} not found. Line ${t.line}`),null}return console.error(`Invalid texture argument for textureLoad. Line ${t.line}`),null}TextureNumLayers(t,n){const i=t.args[0];if(i instanceof Nn){const s=i.name,r=n.getVariableValue(s);return r instanceof zi?new K(r.depthOrArrayLayers,this.getTypeInfo("u32")):(console.error(`Texture ${s} not found. Line ${t.line}`),null)}return console.error(`Invalid texture argument for textureNumLayers. Line ${t.line}`),null}TextureNumLevels(t,n){const i=t.args[0];if(i instanceof Nn){const s=i.name,r=n.getVariableValue(s);return r instanceof zi?new K(r.mipLevelCount,this.getTypeInfo("u32")):(console.error(`Texture ${s} not found. Line ${t.line}`),null)}return console.error(`Invalid texture argument for textureNumLevels. Line ${t.line}`),null}TextureNumSamples(t,n){const i=t.args[0];if(i instanceof Nn){const s=i.name,r=n.getVariableValue(s);return r instanceof zi?new K(r.sampleCount,this.getTypeInfo("u32")):(console.error(`Texture ${s} not found. Line ${t.line}`),null)}return console.error(`Invalid texture argument for textureNumSamples. Line ${t.line}`),null}TextureSample(t,n){return console.error("TODO: textureSample"),null}TextureSampleBias(t,n){return console.error("TODO: textureSampleBias"),null}TextureSampleCompare(t,n){return console.error("TODO: textureSampleCompare"),null}TextureSampleCompareLevel(t,n){return console.error("TODO: textureSampleCompareLevel"),null}TextureSampleGrad(t,n){return console.error("TODO: textureSampleGrad"),null}TextureSampleLevel(t,n){return console.error("TODO: textureSampleLevel"),null}TextureSampleBaseClampToEdge(t,n){return console.error("TODO: textureSampleBaseClampToEdge"),null}TextureStore(t,n){const i=t.args[0],s=this.exec.evalExpression(t.args[1],n),r=t.args.length===4?this.exec.evalExpression(t.args[2],n).value:0,a=t.args.length===4?this.exec.evalExpression(t.args[3],n).data:this.exec.evalExpression(t.args[2],n).data;if(a.length!==4)return console.error(`Invalid value argument for textureStore. Line ${t.line}`),null;if(!(s instanceof V)||s.data.length!==2)return console.error(`Invalid UV argument for textureStore. Line ${t.line}`),null;if(i instanceof Nn){const o=i.name,l=n.getVariableValue(o);if(l instanceof zi){const u=l.getMipLevelSize(0),c=Math.floor(s.data[0]),d=Math.floor(s.data[1]);return c<0||c>=u[0]||d<0||d>=u[1]?(console.error(`Texture ${o} out of bounds. Line ${t.line}`),null):(l.setPixel(c,d,0,r,Array.from(a)),null)}return console.error(`Texture ${o} not found. Line ${t.line}`),null}return console.error(`Invalid texture argument for textureStore. Line ${t.line}`),null}AtomicLoad(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.getVariableName(i,n);return n.getVariable(s).value.getSubData(this.exec,i.postfix,n)}AtomicStore(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.getVariableName(i,n),r=n.getVariable(s);let a=t.args[1];const o=this.exec.evalExpression(a,n),l=r.value.getSubData(this.exec,i.postfix,n);return l instanceof K&&o instanceof K&&(l.value=o.value),r.value instanceof kt&&r.value.setDataValue(this.exec,l,i.postfix,n),null}AtomicAdd(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.getVariableName(i,n),r=n.getVariable(s);let a=t.args[1];const o=this.exec.evalExpression(a,n),l=r.value.getSubData(this.exec,i.postfix,n),u=new K(l.value,l.typeInfo);return l instanceof K&&o instanceof K&&(l.value+=o.value),r.value instanceof kt&&r.value.setDataValue(this.exec,l,i.postfix,n),u}AtomicSub(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.getVariableName(i,n),r=n.getVariable(s);let a=t.args[1];const o=this.exec.evalExpression(a,n),l=r.value.getSubData(this.exec,i.postfix,n),u=new K(l.value,l.typeInfo);return l instanceof K&&o instanceof K&&(l.value-=o.value),r.value instanceof kt&&r.value.setDataValue(this.exec,l,i.postfix,n),u}AtomicMax(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.getVariableName(i,n),r=n.getVariable(s);let a=t.args[1];const o=this.exec.evalExpression(a,n),l=r.value.getSubData(this.exec,i.postfix,n),u=new K(l.value,l.typeInfo);return l instanceof K&&o instanceof K&&(l.value=Math.max(l.value,o.value)),r.value instanceof kt&&r.value.setDataValue(this.exec,l,i.postfix,n),u}AtomicMin(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.getVariableName(i,n),r=n.getVariable(s);let a=t.args[1];const o=this.exec.evalExpression(a,n),l=r.value.getSubData(this.exec,i.postfix,n),u=new K(l.value,l.typeInfo);return l instanceof K&&o instanceof K&&(l.value=Math.min(l.value,o.value)),r.value instanceof kt&&r.value.setDataValue(this.exec,l,i.postfix,n),u}AtomicAnd(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.getVariableName(i,n),r=n.getVariable(s);let a=t.args[1];const o=this.exec.evalExpression(a,n),l=r.value.getSubData(this.exec,i.postfix,n),u=new K(l.value,l.typeInfo);return l instanceof K&&o instanceof K&&(l.value=l.value&o.value),r.value instanceof kt&&r.value.setDataValue(this.exec,l,i.postfix,n),u}AtomicOr(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.getVariableName(i,n),r=n.getVariable(s);let a=t.args[1];const o=this.exec.evalExpression(a,n),l=r.value.getSubData(this.exec,i.postfix,n),u=new K(l.value,l.typeInfo);return l instanceof K&&o instanceof K&&(l.value=l.value|o.value),r.value instanceof kt&&r.value.setDataValue(this.exec,l,i.postfix,n),u}AtomicXor(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.getVariableName(i,n),r=n.getVariable(s);let a=t.args[1];const o=this.exec.evalExpression(a,n),l=r.value.getSubData(this.exec,i.postfix,n),u=new K(l.value,l.typeInfo);return l instanceof K&&o instanceof K&&(l.value=l.value^o.value),r.value instanceof kt&&r.value.setDataValue(this.exec,l,i.postfix,n),u}AtomicExchange(t,n){let i=t.args[0];i instanceof Nt&&(i=i.right);const s=this.exec.getVariableName(i,n),r=n.getVariable(s);let a=t.args[1];const o=this.exec.evalExpression(a,n),l=r.value.getSubData(this.exec,i.postfix,n),u=new K(l.value,l.typeInfo);return l instanceof K&&o instanceof K&&(l.value=o.value),r.value instanceof kt&&r.value.setDataValue(this.exec,l,i.postfix,n),u}AtomicCompareExchangeWeak(t,n){return console.error("TODO: atomicCompareExchangeWeak"),null}Pack4x8snorm(t,n){return console.error("TODO: pack4x8snorm"),null}Pack4x8unorm(t,n){return console.error("TODO: pack4x8unorm"),null}Pack4xI8(t,n){return console.error("TODO: pack4xI8"),null}Pack4xU8(t,n){return console.error("TODO: pack4xU8"),null}Pack4x8Clamp(t,n){return console.error("TODO: pack4x8Clamp"),null}Pack4xU8Clamp(t,n){return console.error("TODO: pack4xU8Clamp"),null}Pack2x16snorm(t,n){return console.error("TODO: pack2x16snorm"),null}Pack2x16unorm(t,n){return console.error("TODO: pack2x16unorm"),null}Pack2x16float(t,n){return console.error("TODO: pack2x16float"),null}Unpack4x8snorm(t,n){return console.error("TODO: unpack4x8snorm"),null}Unpack4x8unorm(t,n){return console.error("TODO: unpack4x8unorm"),null}Unpack4xI8(t,n){return console.error("TODO: unpack4xI8"),null}Unpack4xU8(t,n){return console.error("TODO: unpack4xU8"),null}Unpack2x16snorm(t,n){return console.error("TODO: unpack2x16snorm"),null}Unpack2x16unorm(t,n){return console.error("TODO: unpack2x16unorm"),null}Unpack2x16float(t,n){return console.error("TODO: unpack2x16float"),null}StorageBarrier(t,n){return null}TextureBarrier(t,n){return null}WorkgroupBarrier(t,n){return null}WorkgroupUniformLoad(t,n){return null}SubgroupAdd(t,n){return console.error("TODO: subgroupAdd"),null}SubgroupExclusiveAdd(t,n){return console.error("TODO: subgroupExclusiveAdd"),null}SubgroupInclusiveAdd(t,n){return console.error("TODO: subgroupInclusiveAdd"),null}SubgroupAll(t,n){return console.error("TODO: subgroupAll"),null}SubgroupAnd(t,n){return console.error("TODO: subgroupAnd"),null}SubgroupAny(t,n){return console.error("TODO: subgroupAny"),null}SubgroupBallot(t,n){return console.error("TODO: subgroupBallot"),null}SubgroupBroadcast(t,n){return console.error("TODO: subgroupBroadcast"),null}SubgroupBroadcastFirst(t,n){return console.error("TODO: subgroupBroadcastFirst"),null}SubgroupElect(t,n){return console.error("TODO: subgroupElect"),null}SubgroupMax(t,n){return console.error("TODO: subgroupMax"),null}SubgroupMin(t,n){return console.error("TODO: subgroupMin"),null}SubgroupMul(t,n){return console.error("TODO: subgroupMul"),null}SubgroupExclusiveMul(t,n){return console.error("TODO: subgroupExclusiveMul"),null}SubgroupInclusiveMul(t,n){return console.error("TODO: subgroupInclusiveMul"),null}SubgroupOr(t,n){return console.error("TODO: subgroupOr"),null}SubgroupShuffle(t,n){return console.error("TODO: subgroupShuffle"),null}SubgroupShuffleDown(t,n){return console.error("TODO: subgroupShuffleDown"),null}SubgroupShuffleUp(t,n){return console.error("TODO: subgroupShuffleUp"),null}SubgroupShuffleXor(t,n){return console.error("TODO: subgroupShuffleXor"),null}SubgroupXor(t,n){return console.error("TODO: subgroupXor"),null}QuadBroadcast(t,n){return console.error("TODO: quadBroadcast"),null}QuadSwapDiagonal(t,n){return console.error("TODO: quadSwapDiagonal"),null}QuadSwapX(t,n){return console.error("TODO: quadSwapX"),null}QuadSwapY(t,n){return console.error("TODO: quadSwapY"),null}}const _d={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},bn={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]};class on extends _P{constructor(t,n){var i;super(),this.ast=t??[],this.reflection=new ki,this.reflection.updateAST(this.ast),this.context=(i=n?.clone())!==null&&i!==void 0?i:new xg,this.builtins=new bP(this),this.typeInfo={bool:this.getTypeInfo(fe.bool),i32:this.getTypeInfo(fe.i32),u32:this.getTypeInfo(fe.u32),f32:this.getTypeInfo(fe.f32),f16:this.getTypeInfo(fe.f16),vec2f:this.getTypeInfo(Q.vec2f),vec2u:this.getTypeInfo(Q.vec2u),vec2i:this.getTypeInfo(Q.vec2i),vec2h:this.getTypeInfo(Q.vec2h),vec3f:this.getTypeInfo(Q.vec3f),vec3u:this.getTypeInfo(Q.vec3u),vec3i:this.getTypeInfo(Q.vec3i),vec3h:this.getTypeInfo(Q.vec3h),vec4f:this.getTypeInfo(Q.vec4f),vec4u:this.getTypeInfo(Q.vec4u),vec4i:this.getTypeInfo(Q.vec4i),vec4h:this.getTypeInfo(Q.vec4h),mat2x2f:this.getTypeInfo(Q.mat2x2f),mat2x3f:this.getTypeInfo(Q.mat2x3f),mat2x4f:this.getTypeInfo(Q.mat2x4f),mat3x2f:this.getTypeInfo(Q.mat3x2f),mat3x3f:this.getTypeInfo(Q.mat3x3f),mat3x4f:this.getTypeInfo(Q.mat3x4f),mat4x2f:this.getTypeInfo(Q.mat4x2f),mat4x3f:this.getTypeInfo(Q.mat4x3f),mat4x4f:this.getTypeInfo(Q.mat4x4f)}}getVariableValue(t){var n,i;const s=(i=(n=this.context.getVariable(t))===null||n===void 0?void 0:n.value)!==null&&i!==void 0?i:null;if(s===null)return null;if(s instanceof K)return s.value;if(s instanceof V||s instanceof Ve)return Array.from(s.data);if(s instanceof kt&&s.typeInfo instanceof Ss){if(s.typeInfo.format.name==="u32")return Array.from(new Uint32Array(s.buffer,s.offset,s.typeInfo.count));if(s.typeInfo.format.name==="i32")return Array.from(new Int32Array(s.buffer,s.offset,s.typeInfo.count));if(s.typeInfo.format.name==="f32")return Array.from(new Float32Array(s.buffer,s.offset,s.typeInfo.count))}return console.error(`Unsupported return variable type ${s.typeInfo.name}`),null}execute(t){(t=t??{}).constants&&this._setOverrides(t.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(t,n,i,s){const r=this.context.clone();(s=s??{}).constants&&this._setOverrides(s.constants,r),this._execStatements(this.ast,r);const a=r.getFunction(t);if(!a)return void console.error(`Function ${t} not found`);if(typeof n=="number")n=[n,1,1];else{if(n.length===0)return void console.error("Invalid dispatch count");n.length===1?n=[n[0],1,1]:n.length===2?n=[n[0],n[1],1]:n.length>3&&(n=[n[0],n[1],n[2]])}const o=n[0],l=n[1],u=n[2],c=this.getTypeInfo("vec3u");r.setVariable("@num_workgroups",new V(n,c));const d=this.reflection.getFunctionInfo(t);d===null&&console.error(`Function ${t} not found in reflection data`);for(const f in i)for(const h in i[f]){const g=i[f][h];r.variables.forEach(v=>{var m;const p=v.node;if(p?.attributes){let y=null,_=null;for(const b of p.attributes)b.name==="binding"?y=b.value:b.name==="group"&&(_=b.value);if(h==y&&f==_){let b=!1;for(const S of d.resources)if(S.name===v.name&&S.group===parseInt(f)&&S.binding===parseInt(h)){b=!0;break}if(b)if(g.texture!==void 0&&g.descriptor!==void 0){const S=new zi(g.texture,this.getTypeInfo(p.type),g.descriptor,(m=g.texture.view)!==null&&m!==void 0?m:null);v.value=S}else g.uniform!==void 0?v.value=new kt(g.uniform,this.getTypeInfo(p.type)):v.value=new kt(g,this.getTypeInfo(p.type))}}})}for(let f=0;f<u;++f)for(let h=0;h<l;++h)for(let g=0;g<o;++g)r.setVariable("@workgroup_id",new V([g,h,f],this.getTypeInfo("vec3u"))),this._dispatchWorkgroup(a,[g,h,f],r)}execStatement(t,n){if(t instanceof Cw)return this.evalExpression(t.value,n);if(t instanceof Ew){if(t.condition){const i=this.evalExpression(t.condition,n);if(!(i instanceof K))throw new Error("Invalid break-if condition");if(!i.value)return null}return on._breakObj}if(t instanceof Iw)return on._continueObj;if(t instanceof fo)this._let(t,n);else if(t instanceof Xi)this._var(t,n);else if(t instanceof Yl)this._const(t,n);else if(t instanceof Co)this._function(t,n);else{if(t instanceof Aw)return this._if(t,n);if(t instanceof Tw)return this._switch(t,n);if(t instanceof bw)return this._for(t,n);if(t instanceof _w)return this._while(t,n);if(t instanceof Sw)return this._loop(t,n);if(t instanceof bf){const i=n.clone();return i.currentFunctionName=n.currentFunctionName,this._execStatements(t.body,i)}if(t instanceof xw)this._assign(t,n);else if(t instanceof ww)this._increment(t,n);else{if(t instanceof $i)return null;if(t instanceof mg){const i=t.name;n.getVariable(i)===null&&n.setVariable(i,new K(0,this.getTypeInfo("u32")))}else if(t instanceof vg)this._call(t,n);else{if(t instanceof kw||t instanceof pg)return null;console.error("Invalid statement type.",t,`Line ${t.line}`)}}}return null}evalExpression(t,n){return t instanceof ri?this._evalBinaryOp(t,n):t instanceof Lt?this._evalLiteral(t,n):t instanceof Nn?this._evalVariable(t,n):t instanceof yg?this._evalCall(t,n):t instanceof Ti?this._evalCreate(t,n):t instanceof Pw?this._evalConst(t,n):t instanceof Rw?this._evalBitcast(t,n):t instanceof Nt?this._evalUnaryOp(t,n):(console.error("Invalid expression type",t,`Line ${t.line}`),null)}getTypeInfo(t){var n;if(t instanceof fe){const s=this.reflection.getTypeInfo(t);if(s!==null)return s}let i=(n=this.typeInfo[t])!==null&&n!==void 0?n:null;return i!==null||(i=this.reflection.getTypeInfoByName(t)),i}_setOverrides(t,n){for(const i in t){const s=t[i],r=this.reflection.getOverrideInfo(i);r!==null?(r.type===null&&(r.type=this.getTypeInfo("u32")),r.type.name==="u32"||r.type.name==="i32"||r.type.name==="f32"||r.type.name==="f16"?n.setVariable(i,new K(s,r.type)):r.type.name==="bool"?n.setVariable(i,new K(s?1:0,r.type)):r.type.name==="vec2"||r.type.name==="vec3"||r.type.name==="vec4"||r.type.name==="vec2f"||r.type.name==="vec3f"||r.type.name==="vec4f"||r.type.name==="vec2i"||r.type.name==="vec3i"||r.type.name==="vec4i"||r.type.name==="vec2u"||r.type.name==="vec3u"||r.type.name==="vec4u"||r.type.name==="vec2h"||r.type.name==="vec3h"||r.type.name==="vec4h"?n.setVariable(i,new V(s,r.type)):console.error(`Invalid constant type for ${i}`)):console.error(`Override ${i} does not exist in the shader.`)}}_dispatchWorkgroup(t,n,i){const s=[1,1,1];for(const c of t.node.attributes)if(c.name==="workgroup_size"){if(c.value.length>0){const d=i.getVariableValue(c.value[0]);s[0]=d instanceof K?d.value:parseInt(c.value[0])}if(c.value.length>1){const d=i.getVariableValue(c.value[1]);s[1]=d instanceof K?d.value:parseInt(c.value[1])}if(c.value.length>2){const d=i.getVariableValue(c.value[2]);s[2]=d instanceof K?d.value:parseInt(c.value[2])}}const r=this.getTypeInfo("vec3u"),a=this.getTypeInfo("u32");i.setVariable("@workgroup_size",new V(s,r));const o=s[0],l=s[1],u=s[2];for(let c=0,d=0;c<u;++c)for(let f=0;f<l;++f)for(let h=0;h<o;++h,++d){const g=[h,f,c],v=[h+n[0]*s[0],f+n[1]*s[1],c+n[2]*s[2]];i.setVariable("@local_invocation_id",new V(g,r)),i.setVariable("@global_invocation_id",new V(v,r)),i.setVariable("@local_invocation_index",new K(d,a)),this._dispatchExec(t,i)}}_dispatchExec(t,n){for(const i of t.node.args)for(const s of i.attributes)if(s.name==="builtin"){const r=`@${s.value}`,a=n.getVariable(r);a!==void 0&&n.variables.set(i.name,a)}this._execStatements(t.node.body,n)}getVariableName(t,n){for(;t instanceof Nt;)t=t.right;return t instanceof Nn?t.name:(console.error("Unknown variable type",t,"Line",t.line),null)}_execStatements(t,n){for(const i of t){if(i instanceof Array){const r=n.clone(),a=this._execStatements(i,r);if(a)return a;continue}const s=this.execStatement(i,n);if(s)return s}return null}_call(t,n){const i=n.clone();i.currentFunctionName=t.name;const s=n.getFunction(t.name);if(s){for(let r=0;r<s.node.args.length;++r){const a=s.node.args[r],o=this.evalExpression(t.args[r],i);i.setVariable(a.name,o,a)}this._execStatements(s.node.body,i)}else t.isBuiltin?this._callBuiltinFunction(t,i):this.getTypeInfo(t.name)&&this._evalCreate(t,n)}_increment(t,n){const i=this.getVariableName(t.variable,n),s=n.getVariable(i);s?t.operator==="++"?s.value instanceof K?s.value.value++:console.error(`Variable ${i} is not a scalar. Line ${t.line}`):t.operator==="--"?s.value instanceof K?s.value.value--:console.error(`Variable ${i} is not a scalar. Line ${t.line}`):console.error(`Unknown increment operator ${t.operator}. Line ${t.line}`):console.error(`Variable ${i} not found. Line ${t.line}`)}_getVariableData(t,n){if(t instanceof Nn){const i=this.getVariableName(t,n),s=n.getVariable(i);return s===null?(console.error(`Variable ${i} not found. Line ${t.line}`),null):s.value.getSubData(this,t.postfix,n)}if(t instanceof Nt){if(t.operator==="*"){const i=this._getVariableData(t.right,n);return i instanceof Dr?i.reference.getSubData(this,t.postfix,n):(console.error(`Variable ${t.right} is not a pointer. Line ${t.line}`),null)}if(t.operator==="&"){const i=this._getVariableData(t.right,n);return new Dr(i)}}return null}_assign(t,n){let i=null,s="<var>",r=null;if(t.variable instanceof Nt){const l=this._getVariableData(t.variable,n),u=this.evalExpression(t.value,n),c=t.operator;if(c==="="){if(l instanceof K||l instanceof V||l instanceof Ve){if(u instanceof K||u instanceof V||u instanceof Ve&&l.data.length===u.data.length)return void l.data.set(u.data);console.error(`Invalid assignment. Line ${t.line}`)}else if(l instanceof kt&&u instanceof kt&&l.buffer.byteLength-l.offset>=u.buffer.byteLength-u.offset)return void(l.buffer.byteLength%4==0?new Uint32Array(l.buffer,l.offset,l.typeInfo.size/4).set(new Uint32Array(u.buffer,u.offset,u.typeInfo.size/4)):new Uint8Array(l.buffer,l.offset,l.typeInfo.size).set(new Uint8Array(u.buffer,u.offset,u.typeInfo.size)));return console.error(`Invalid assignment. Line ${t.line}`),null}if(c==="+=")return l instanceof K||l instanceof V||l instanceof Ve?u instanceof K||u instanceof V||u instanceof Ve?void l.data.set(u.data.map((d,f)=>l.data[f]+d)):void console.error(`Invalid assignment . Line ${t.line}`):void console.error(`Invalid assignment. Line ${t.line}`);if(c==="-=")return(l instanceof K||l instanceof V||l instanceof Ve)&&(u instanceof K||u instanceof V||u instanceof Ve)?void l.data.set(u.data.map((d,f)=>l.data[f]-d)):void console.error(`Invalid assignment. Line ${t.line}`)}if(t.variable instanceof Nt){if(t.variable.operator==="*"){s=this.getVariableName(t.variable.right,n);const l=n.getVariable(s);if(!(l&&l.value instanceof Dr))return void console.error(`Variable ${s} is not a pointer. Line ${t.line}`);i=l.value.reference;let u=t.variable.postfix;if(!u){let c=t.variable.right;for(;c instanceof Nt;){if(c.postfix){u=c.postfix;break}c=c.right}}u&&(i=i.getSubData(this,u,n))}}else{r=t.variable.postfix,s=this.getVariableName(t.variable,n);const l=n.getVariable(s);if(l===null)return void console.error(`Variable ${s} not found. Line ${t.line}`);i=l.value}if(i instanceof Dr&&(i=i.reference),i===null)return void console.error(`Variable ${s} not found. Line ${t.line}`);const a=this.evalExpression(t.value,n),o=t.operator;if(o!=="="){const l=i.getSubData(this,r,n);if(l instanceof V&&a instanceof K){const u=l.data,c=a.value;if(o==="+=")for(let d=0;d<u.length;++d)u[d]+=c;else if(o==="-=")for(let d=0;d<u.length;++d)u[d]-=c;else if(o==="*=")for(let d=0;d<u.length;++d)u[d]*=c;else if(o==="/=")for(let d=0;d<u.length;++d)u[d]/=c;else if(o==="%=")for(let d=0;d<u.length;++d)u[d]%=c;else if(o==="&=")for(let d=0;d<u.length;++d)u[d]&=c;else if(o==="|=")for(let d=0;d<u.length;++d)u[d]|=c;else if(o==="^=")for(let d=0;d<u.length;++d)u[d]^=c;else if(o==="<<=")for(let d=0;d<u.length;++d)u[d]<<=c;else if(o===">>=")for(let d=0;d<u.length;++d)u[d]>>=c;else console.error(`Invalid operator ${o}. Line ${t.line}`)}else if(l instanceof V&&a instanceof V){const u=l.data,c=a.data;if(u.length!==c.length)return void console.error(`Vector length mismatch. Line ${t.line}`);if(o==="+=")for(let d=0;d<u.length;++d)u[d]+=c[d];else if(o==="-=")for(let d=0;d<u.length;++d)u[d]-=c[d];else if(o==="*=")for(let d=0;d<u.length;++d)u[d]*=c[d];else if(o==="/=")for(let d=0;d<u.length;++d)u[d]/=c[d];else if(o==="%=")for(let d=0;d<u.length;++d)u[d]%=c[d];else if(o==="&=")for(let d=0;d<u.length;++d)u[d]&=c[d];else if(o==="|=")for(let d=0;d<u.length;++d)u[d]|=c[d];else if(o==="^=")for(let d=0;d<u.length;++d)u[d]^=c[d];else if(o==="<<=")for(let d=0;d<u.length;++d)u[d]<<=c[d];else if(o===">>=")for(let d=0;d<u.length;++d)u[d]>>=c[d];else console.error(`Invalid operator ${o}. Line ${t.line}`)}else{if(!(l instanceof K&&a instanceof K))return void console.error(`Invalid type for ${t.operator} operator. Line ${t.line}`);o==="+="?l.value+=a.value:o==="-="?l.value-=a.value:o==="*="?l.value*=a.value:o==="/="?l.value/=a.value:o==="%="?l.value%=a.value:o==="&="?l.value&=a.value:o==="|="?l.value|=a.value:o==="^="?l.value^=a.value:o==="<<="?l.value<<=a.value:o===">>="?l.value>>=a.value:console.error(`Invalid operator ${o}. Line ${t.line}`)}return void(i instanceof kt&&i.setDataValue(this,l,r,n))}if(i instanceof kt)i.setDataValue(this,a,r,n);else if(r){if(!(i instanceof V||i instanceof Ve))return void console.error(`Variable ${s} is not a vector or matrix. Line ${t.line}`);if(r instanceof ua){const l=this.evalExpression(r.index,n).value;if(i instanceof V){if(!(a instanceof K))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);i.data[l]=a.value}else{if(!(i instanceof Ve))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);{const u=this.evalExpression(r.index,n).value;if(u<0)return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);if(!(a instanceof V))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);{const c=i.typeInfo.getTypeName();if(c==="mat2x2"||c==="mat2x2f"||c==="mat2x2h"){if(!(u<2&&a.data.length===2))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);i.data[2*u]=a.data[0],i.data[2*u+1]=a.data[1]}else if(c==="mat2x3"||c==="mat2x3f"||c==="mat2x3h"){if(!(u<2&&a.data.length===3))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);i.data[3*u]=a.data[0],i.data[3*u+1]=a.data[1],i.data[3*u+2]=a.data[2]}else if(c==="mat2x4"||c==="mat2x4f"||c==="mat2x4h"){if(!(u<2&&a.data.length===4))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);i.data[4*u]=a.data[0],i.data[4*u+1]=a.data[1],i.data[4*u+2]=a.data[2],i.data[4*u+3]=a.data[3]}else if(c==="mat3x2"||c==="mat3x2f"||c==="mat3x2h"){if(!(u<3&&a.data.length===2))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);i.data[2*u]=a.data[0],i.data[2*u+1]=a.data[1]}else if(c==="mat3x3"||c==="mat3x3f"||c==="mat3x3h"){if(!(u<3&&a.data.length===3))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);i.data[3*u]=a.data[0],i.data[3*u+1]=a.data[1],i.data[3*u+2]=a.data[2]}else if(c==="mat3x4"||c==="mat3x4f"||c==="mat3x4h"){if(!(u<3&&a.data.length===4))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);i.data[4*u]=a.data[0],i.data[4*u+1]=a.data[1],i.data[4*u+2]=a.data[2],i.data[4*u+3]=a.data[3]}else if(c==="mat4x2"||c==="mat4x2f"||c==="mat4x2h"){if(!(u<4&&a.data.length===2))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);i.data[2*u]=a.data[0],i.data[2*u+1]=a.data[1]}else if(c==="mat4x3"||c==="mat4x3f"||c==="mat4x3h"){if(!(u<4&&a.data.length===3))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);i.data[3*u]=a.data[0],i.data[3*u+1]=a.data[1],i.data[3*u+2]=a.data[2]}else{if(c!=="mat4x4"&&c!=="mat4x4f"&&c!=="mat4x4h")return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);if(!(u<4&&a.data.length===4))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);i.data[4*u]=a.data[0],i.data[4*u+1]=a.data[1],i.data[4*u+2]=a.data[2],i.data[4*u+3]=a.data[3]}}}}}else if(r instanceof ar){const l=r.value;if(!(i instanceof V))return void console.error(`Invalid assignment to ${l}. Variable ${s} is not a vector. Line ${t.line}`);if(a instanceof K){if(l.length>1)return void console.error(`Invalid assignment to ${l} for variable ${s}. Line ${t.line}`);if(l==="x")i.data[0]=a.value;else if(l==="y"){if(i.data.length<2)return void console.error(`Invalid assignment to ${l} for variable ${s}. Line ${t.line}`);i.data[1]=a.value}else if(l==="z"){if(i.data.length<3)return void console.error(`Invalid assignment to ${l} for variable ${s}. Line ${t.line}`);i.data[2]=a.value}else if(l==="w"){if(i.data.length<4)return void console.error(`Invalid assignment to ${l} for variable ${s}. Line ${t.line}`);i.data[3]=a.value}}else{if(!(a instanceof V))return void console.error(`Invalid assignment to ${s}. Line ${t.line}`);if(l.length!==a.data.length)return void console.error(`Invalid assignment to ${l} for variable ${s}. Line ${t.line}`);for(let u=0;u<l.length;++u){const c=l[u];if(c==="x"||c==="r")i.data[0]=a.data[u];else if(c==="y"||c==="g"){if(a.data.length<2)return void console.error(`Invalid assignment to ${c} for variable ${s}. Line ${t.line}`);i.data[1]=a.data[u]}else if(c==="z"||c==="b"){if(a.data.length<3)return void console.error(`Invalid assignment to ${c} for variable ${s}. Line ${t.line}`);i.data[2]=a.data[u]}else{if(c!=="w"&&c!=="a")return void console.error(`Invalid assignment to ${c} for variable ${s}. Line ${t.line}`);if(a.data.length<4)return void console.error(`Invalid assignment to ${c} for variable ${s}. Line ${t.line}`);i.data[3]=a.data[u]}}}}}else i instanceof K&&a instanceof K?i.value=a.value:i instanceof V&&a instanceof V||i instanceof Ve&&a instanceof Ve?i.data.set(a.data):console.error(`Invalid assignment to ${s}. Line ${t.line}`)}_function(t,n){const i=new wg(t);n.functions.set(t.name,i)}_const(t,n){let i=null;t.value!==null&&(i=this.evalExpression(t.value,n)),n.createVariable(t.name,i,t)}_let(t,n){let i=null;if(t.value!==null){if(i=this.evalExpression(t.value,n),i===null)return void console.error(`Invalid value for variable ${t.name}. Line ${t.line}`);t.value instanceof Nt||(i=i.clone())}else{const s=t.type.name;if(s==="f32"||s==="i32"||s==="u32"||s==="bool"||s==="f16"||s==="vec2"||s==="vec3"||s==="vec4"||s==="vec2f"||s==="vec3f"||s==="vec4f"||s==="vec2i"||s==="vec3i"||s==="vec4i"||s==="vec2u"||s==="vec3u"||s==="vec4u"||s==="vec2h"||s==="vec3h"||s==="vec4h"||s==="vec2b"||s==="vec3b"||s==="vec4b"||s==="mat2x2"||s==="mat2x3"||s==="mat2x4"||s==="mat3x2"||s==="mat3x3"||s==="mat3x4"||s==="mat4x2"||s==="mat4x3"||s==="mat4x4"||s==="mat2x2f"||s==="mat2x3f"||s==="mat2x4f"||s==="mat3x2f"||s==="mat3x3f"||s==="mat3x4f"||s==="mat4x2f"||s==="mat4x3f"||s==="mat4x4f"||s==="mat2x2h"||s==="mat2x3h"||s==="mat2x4h"||s==="mat3x2h"||s==="mat3x3h"||s==="mat3x4h"||s==="mat4x2h"||s==="mat4x3h"||s==="mat4x4h"||s==="array"){const r=new Ti(t.type,[]);i=this._evalCreate(r,n)}}n.createVariable(t.name,i,t)}_var(t,n){let i=null;if(t.value!==null){if(i=this.evalExpression(t.value,n),i===null)return void console.error(`Invalid value for variable ${t.name}. Line ${t.line}`);t.value instanceof Nt||(i=i.clone())}else{if(t.type===null)return void console.error(`Variable ${t.name} has no type. Line ${t.line}`);const s=t.type.name;if(s==="f32"||s==="i32"||s==="u32"||s==="bool"||s==="f16"||s==="vec2"||s==="vec3"||s==="vec4"||s==="vec2f"||s==="vec3f"||s==="vec4f"||s==="vec2i"||s==="vec3i"||s==="vec4i"||s==="vec2u"||s==="vec3u"||s==="vec4u"||s==="vec2h"||s==="vec3h"||s==="vec4h"||s==="vec2b"||s==="vec3b"||s==="vec4b"||s==="mat2x2"||s==="mat2x3"||s==="mat2x4"||s==="mat3x2"||s==="mat3x3"||s==="mat3x4"||s==="mat4x2"||s==="mat4x3"||s==="mat4x4"||s==="mat2x2f"||s==="mat2x3f"||s==="mat2x4f"||s==="mat3x2f"||s==="mat3x3f"||s==="mat3x4f"||s==="mat4x2f"||s==="mat4x3f"||s==="mat4x4f"||s==="mat2x2h"||s==="mat2x3h"||s==="mat2x4h"||s==="mat3x2h"||s==="mat3x3h"||s==="mat3x4h"||s==="mat4x2h"||s==="mat4x3h"||s==="mat4x4h"||t.type instanceof ho||t.type instanceof $i||t.type instanceof Q){const r=new Ti(t.type,[]);i=this._evalCreate(r,n)}}n.createVariable(t.name,i,t)}_switch(t,n){n=n.clone();const i=this.evalExpression(t.condition,n);if(!(i instanceof K))return console.error(`Invalid if condition. Line ${t.line}`),null;let s=null;for(const r of t.cases)if(r instanceof Dw)for(const a of r.selectors){if(a instanceof ql){s=r;continue}const o=this.evalExpression(a,n);if(!(o instanceof K))return console.error(`Invalid case selector. Line ${t.line}`),null;if(o.value===i.value)return this._execStatements(r.body,n)}else r instanceof Nw&&(s=r);return s?this._execStatements(s.body,n):null}_if(t,n){n=n.clone();const i=this.evalExpression(t.condition,n);if(!(i instanceof K))return console.error(`Invalid if condition. Line ${t.line}`),null;if(i.value)return this._execStatements(t.body,n);for(const s of t.elseif){const r=this.evalExpression(s.condition,n);if(!(r instanceof K))return console.error(`Invalid if condition. Line ${t.line}`),null;if(r.value)return this._execStatements(s.body,n)}return t.else?this._execStatements(t.else,n):null}_getScalarValue(t){return t instanceof K?t.value:(console.error("Expected scalar value.",t),0)}_for(t,n){for(n=n.clone(),this.execStatement(t.init,n);this._getScalarValue(this.evalExpression(t.condition,n));){const i=this._execStatements(t.body,n);if(i===on._breakObj)break;if(i!==null&&i!==on._continueObj)return i;this.execStatement(t.increment,n)}return null}_loop(t,n){for(n=n.clone();;){const i=this._execStatements(t.body,n);if(i===on._breakObj)break;if(i===on._continueObj){if(t.continuing&&this._execStatements(t.continuing.body,n)===on._breakObj)break}else if(i!==null)return i}return null}_while(t,n){for(n=n.clone();this._getScalarValue(this.evalExpression(t.condition,n));){const i=this._execStatements(t.body,n);if(i===on._breakObj)break;if(i!==on._continueObj&&i!==null)return i}return null}_evalBitcast(t,n){const i=this.evalExpression(t.value,n),s=t.type;if(i instanceof K){const r=bp(i.value,i.typeInfo.name,s.name);return new K(r,this.getTypeInfo(s))}if(i instanceof V){const r=i.typeInfo.getTypeName();let a="";if(r.endsWith("f"))a="f32";else if(r.endsWith("i"))a="i32";else if(r.endsWith("u"))a="u32";else if(r.endsWith("b"))a="bool";else{if(!r.endsWith("h"))return console.error(`Unknown vector type ${r}. Line ${t.line}`),null;a="f16"}const o=s.getTypeName();let l="";if(o.endsWith("f"))l="f32";else if(o.endsWith("i"))l="i32";else if(o.endsWith("u"))l="u32";else if(o.endsWith("b"))l="bool";else{if(!o.endsWith("h"))return console.error(`Unknown vector type ${l}. Line ${t.line}`),null;l="f16"}const u=(function(c,d,f){if(d===f)return c;const h=new Array(c.length);for(let g=0;g<c.length;g++)h[g]=bp(c[g],d,f);return h})(Array.from(i.data),a,l);return new V(u,this.getTypeInfo(s))}return console.error(`TODO: bitcast for ${i.typeInfo.name}. Line ${t.line}`),null}_evalConst(t,n){return n.getVariableValue(t.name).clone().getSubData(this,t.postfix,n)}_evalCreate(t,n){var i;if(t instanceof Ti){if(t.type===null)return wf.void;switch(t.type.getTypeName()){case"bool":case"i32":case"u32":case"f32":case"f16":return this._callConstructorValue(t,n);case"vec2":case"vec3":case"vec4":case"vec2f":case"vec3f":case"vec4f":case"vec2h":case"vec3h":case"vec4h":case"vec2i":case"vec3i":case"vec4i":case"vec2u":case"vec3u":case"vec4u":case"vec2b":case"vec3b":case"vec4b":return this._callConstructorVec(t,n);case"mat2x2":case"mat2x2f":case"mat2x2h":case"mat2x3":case"mat2x3f":case"mat2x3h":case"mat2x4":case"mat2x4f":case"mat2x4h":case"mat3x2":case"mat3x2f":case"mat3x2h":case"mat3x3":case"mat3x3f":case"mat3x3h":case"mat3x4":case"mat3x4f":case"mat3x4h":case"mat4x2":case"mat4x2f":case"mat4x2h":case"mat4x3":case"mat4x3f":case"mat4x3h":case"mat4x4":case"mat4x4f":case"mat4x4h":return this._callConstructorMatrix(t,n)}}const s=t instanceof Ti?t.type.name:t.name,r=t instanceof Ti?this.getTypeInfo(t.type):this.getTypeInfo(t.name);if(r===null)return console.error(`Unknown type ${s}. Line ${t.line}`),null;if(r.size===0)return null;const a=new kt(new ArrayBuffer(r.size),r,0);if(r instanceof _s){if(t.args)for(let o=0;o<t.args.length;++o){const l=r.members[o],u=t.args[o],c=this.evalExpression(u,n);a.setData(this,c,l.type,l.offset,n)}}else if(r instanceof Ss){let o=0;if(t.args)for(let l=0;l<t.args.length;++l){const u=t.args[l],c=this.evalExpression(u,n);r.format===null&&(((i=c.typeInfo)===null||i===void 0?void 0:i.name)==="x32"?r.format=this.getTypeInfo("i32"):r.format=c.typeInfo),a.setData(this,c,r.format,o,n),o+=r.stride}}else console.error(`Unknown type "${s}". Line ${t.line}`);return t instanceof Ti?a.getSubData(this,t.postfix,n):a}_evalLiteral(t,n){const i=this.getTypeInfo(t.type),s=i.name;return s==="x32"||s==="u32"||s==="f32"||s==="f16"||s==="i32"||s==="bool"?new K(t.scalarValue,i):s==="vec2"||s==="vec3"||s==="vec4"||s==="vec2f"||s==="vec3f"||s==="vec4f"||s==="vec2h"||s==="vec3h"||s==="vec4h"||s==="vec2i"||s==="vec3i"||s==="vec4i"||s==="vec2u"||s==="vec3u"||s==="vec4u"?this._callConstructorVec(t,n):s==="mat2x2"||s==="mat2x3"||s==="mat2x4"||s==="mat3x2"||s==="mat3x3"||s==="mat3x4"||s==="mat4x2"||s==="mat4x3"||s==="mat4x4"||s==="mat2x2f"||s==="mat2x3f"||s==="mat2x4f"||s==="mat3x2f"||s==="mat3x3f"||s==="mat3x4f"||s==="mat4x2f"||s==="mat4x3f"||s==="mat4x4f"||s==="mat2x2h"||s==="mat2x3h"||s==="mat2x4h"||s==="mat3x2h"||s==="mat3x3h"||s==="mat3x4h"||s==="mat4x2h"||s==="mat4x3h"||s==="mat4x4h"?this._callConstructorMatrix(t,n):t.value}_evalVariable(t,n){const i=n.getVariableValue(t.name);return i===null?i:i.getSubData(this,t.postfix,n)}_maxFormatTypeInfo(t){let n=t[0];if(n.name==="f32")return n;for(let i=1;i<t.length;++i){const s=on._priority.get(n.name);on._priority.get(t[i].name)<s&&(n=t[i])}return n.name==="x32"?this.getTypeInfo("i32"):n}_evalUnaryOp(t,n){const i=this.evalExpression(t.right,n);if(t.operator==="&")return new Dr(i);if(t.operator==="*")return i instanceof Dr?i.reference.getSubData(this,t.postfix,n):(console.error(`Invalid dereference. Line ${t.line}`),null);const s=i instanceof K?i.value:i instanceof V?Array.from(i.data):null;switch(t.operator){case"+":{if(Ie(s)){const o=s.map((l,u)=>+l);return new V(o,i.typeInfo)}const r=s,a=this._maxFormatTypeInfo([i.typeInfo,i.typeInfo]);return new K(+r,a)}case"-":{if(Ie(s)){const o=s.map((l,u)=>-l);return new V(o,i.typeInfo)}const r=s,a=this._maxFormatTypeInfo([i.typeInfo,i.typeInfo]);return new K(-r,a)}case"!":{if(Ie(s)){const o=s.map((l,u)=>l?0:1);return new V(o,i.typeInfo)}const r=s,a=this._maxFormatTypeInfo([i.typeInfo,i.typeInfo]);return new K(r?0:1,a)}case"~":{if(Ie(s)){const o=s.map((l,u)=>~l);return new V(o,i.typeInfo)}const r=s,a=this._maxFormatTypeInfo([i.typeInfo,i.typeInfo]);return new K(~r,a)}}return console.error(`Invalid unary operator ${t.operator}. Line ${t.line}`),null}_evalBinaryOp(t,n){const i=this.evalExpression(t.left,n),s=this.evalExpression(t.right,n),r=i instanceof K?i.value:i instanceof V||i instanceof Ve?Array.from(i.data):null,a=s instanceof K?s.value:s instanceof V||s instanceof Ve?Array.from(s.data):null;switch(t.operator){case"+":{if(Ie(r)&&Ie(a)){const c=r,d=a;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const f=c.map((h,g)=>h+d[g]);return new V(f,i.typeInfo)}if(Ie(r)){const c=a,d=r.map((f,h)=>f+c);return new V(d,i.typeInfo)}if(Ie(a)){const c=r,d=a.map((f,h)=>c+f);return new V(d,s.typeInfo)}const o=r,l=a,u=this._maxFormatTypeInfo([i.typeInfo,s.typeInfo]);return new K(o+l,u)}case"-":{if(Ie(r)&&Ie(a)){const c=r,d=a;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const f=c.map((h,g)=>h-d[g]);return new V(f,i.typeInfo)}if(Ie(r)){const c=a,d=r.map((f,h)=>f-c);return new V(d,i.typeInfo)}if(Ie(a)){const c=r,d=a.map((f,h)=>c-f);return new V(d,s.typeInfo)}const o=r,l=a,u=this._maxFormatTypeInfo([i.typeInfo,s.typeInfo]);return new K(o-l,u)}case"*":{if(Ie(r)&&Ie(a)){const c=r,d=a;if(i instanceof Ve&&s instanceof Ve){const f=(function(m,p,y,_){if(bn[p.name]===void 0||bn[_.name]===void 0)return null;const b=bn[p.name][0],S=bn[p.name][1],x=bn[_.name][0];if(b!==bn[_.name][1])return null;const I=new Array(x*S);for(let T=0;T<S;T++)for(let k=0;k<x;k++){let P=0;for(let D=0;D<b;D++)P+=m[D*S+T]*y[k*b+D];I[T*x+k]=P}return I})(c,i.typeInfo,d,s.typeInfo);if(f===null)return console.error(`Matrix multiplication failed. Line ${t.line}.`),null;const h=bn[s.typeInfo.name][0],g=bn[i.typeInfo.name][1],v=this.getTypeInfo(`mat${h}x${g}f`);return new Ve(f,v)}if(i instanceof Ve&&s instanceof V){const f=(function(h,g,v,m){if(bn[g.name]===void 0||_d[m.name]===void 0)return null;const p=bn[g.name][0],y=bn[g.name][1];if(p!==v.length)return null;const _=new Array(y);for(let b=0;b<y;b++){let S=0;for(let x=0;x<p;x++)S+=h[x*y+b]*v[x];_[b]=S}return _})(c,i.typeInfo,d,s.typeInfo);return f===null?(console.error(`Matrix vector multiplication failed. Line ${t.line}.`),null):new V(f,s.typeInfo)}if(i instanceof V&&s instanceof Ve){const f=(function(h,g,v,m){if(_d[g.name]===void 0||bn[m.name]===void 0)return null;const p=bn[m.name][0],y=bn[m.name][1];if(y!==h.length)return null;const _=[];for(let b=0;b<p;b++){let S=0;for(let x=0;x<y;x++)S+=h[x]*v[x*p+b];_[b]=S}return _})(c,i.typeInfo,d,s.typeInfo);return f===null?(console.error(`Matrix vector multiplication failed. Line ${t.line}.`),null):new V(f,i.typeInfo)}{if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const f=c.map((h,g)=>h*d[g]);return new V(f,i.typeInfo)}}if(Ie(r)){const c=a,d=r.map((f,h)=>f*c);return i instanceof Ve?new Ve(d,i.typeInfo):new V(d,i.typeInfo)}if(Ie(a)){const c=r,d=a.map((f,h)=>c*f);return s instanceof Ve?new Ve(d,s.typeInfo):new V(d,s.typeInfo)}const o=r,l=a,u=this._maxFormatTypeInfo([i.typeInfo,s.typeInfo]);return new K(o*l,u)}case"%":{if(Ie(r)&&Ie(a)){const c=r,d=a;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const f=c.map((h,g)=>h%d[g]);return new V(f,i.typeInfo)}if(Ie(r)){const c=a,d=r.map((f,h)=>f%c);return new V(d,i.typeInfo)}if(Ie(a)){const c=r,d=a.map((f,h)=>c%f);return new V(d,s.typeInfo)}const o=r,l=a,u=this._maxFormatTypeInfo([i.typeInfo,s.typeInfo]);return new K(o%l,u)}case"/":{if(Ie(r)&&Ie(a)){const c=r,d=a;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const f=c.map((h,g)=>h/d[g]);return new V(f,i.typeInfo)}if(Ie(r)){const c=a,d=r.map((f,h)=>f/c);return new V(d,i.typeInfo)}if(Ie(a)){const c=r,d=a.map((f,h)=>c/f);return new V(d,s.typeInfo)}const o=r,l=a,u=this._maxFormatTypeInfo([i.typeInfo,s.typeInfo]);return new K(o/l,u)}case"&":{if(Ie(r)&&Ie(a)){const c=r,d=a;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const f=c.map((h,g)=>h&d[g]);return new V(f,i.typeInfo)}if(Ie(r)){const c=a,d=r.map((f,h)=>f&c);return new V(d,i.typeInfo)}if(Ie(a)){const c=r,d=a.map((f,h)=>c&f);return new V(d,s.typeInfo)}const o=r,l=a,u=this._maxFormatTypeInfo([i.typeInfo,s.typeInfo]);return new K(o&l,u)}case"|":{if(Ie(r)&&Ie(a)){const c=r,d=a;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const f=c.map((h,g)=>h|d[g]);return new V(f,i.typeInfo)}if(Ie(r)){const c=a,d=r.map((f,h)=>f|c);return new V(d,i.typeInfo)}if(Ie(a)){const c=r,d=a.map((f,h)=>c|f);return new V(d,s.typeInfo)}const o=r,l=a,u=this._maxFormatTypeInfo([i.typeInfo,s.typeInfo]);return new K(o|l,u)}case"^":{if(Ie(r)&&Ie(a)){const c=r,d=a;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const f=c.map((h,g)=>h^d[g]);return new V(f,i.typeInfo)}if(Ie(r)){const c=a,d=r.map((f,h)=>f^c);return new V(d,i.typeInfo)}if(Ie(a)){const c=r,d=a.map((f,h)=>c^f);return new V(d,s.typeInfo)}const o=r,l=a,u=this._maxFormatTypeInfo([i.typeInfo,s.typeInfo]);return new K(o^l,u)}case"<<":{if(Ie(r)&&Ie(a)){const c=r,d=a;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const f=c.map((h,g)=>h<<d[g]);return new V(f,i.typeInfo)}if(Ie(r)){const c=a,d=r.map((f,h)=>f<<c);return new V(d,i.typeInfo)}if(Ie(a)){const c=r,d=a.map((f,h)=>c<<f);return new V(d,s.typeInfo)}const o=r,l=a,u=this._maxFormatTypeInfo([i.typeInfo,s.typeInfo]);return new K(o<<l,u)}case">>":{if(Ie(r)&&Ie(a)){const c=r,d=a;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const f=c.map((h,g)=>h>>d[g]);return new V(f,i.typeInfo)}if(Ie(r)){const c=a,d=r.map((f,h)=>f>>c);return new V(d,i.typeInfo)}if(Ie(a)){const c=r,d=a.map((f,h)=>c>>f);return new V(d,s.typeInfo)}const o=r,l=a,u=this._maxFormatTypeInfo([i.typeInfo,s.typeInfo]);return new K(o>>l,u)}case">":if(Ie(r)&&Ie(a)){const o=r,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const u=o.map((c,d)=>c>l[d]?1:0);return new V(u,i.typeInfo)}if(Ie(r)){const o=a,l=r.map((u,c)=>u>o?1:0);return new V(l,i.typeInfo)}if(Ie(a)){const o=r,l=a.map((u,c)=>o>u?1:0);return new V(l,s.typeInfo)}return new K(r>a?1:0,this.getTypeInfo("bool"));case"<":if(Ie(r)&&Ie(a)){const o=r,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const u=o.map((c,d)=>c<l[d]?1:0);return new V(u,i.typeInfo)}if(Ie(r)){const o=a,l=r.map((u,c)=>u<o?1:0);return new V(l,i.typeInfo)}if(Ie(a)){const o=r,l=a.map((u,c)=>o<u?1:0);return new V(l,s.typeInfo)}return new K(r<a?1:0,this.getTypeInfo("bool"));case"==":if(Ie(r)&&Ie(a)){const o=r,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const u=o.map((c,d)=>c===l[d]?1:0);return new V(u,i.typeInfo)}if(Ie(r)){const o=a,l=r.map((u,c)=>u==o?1:0);return new V(l,i.typeInfo)}if(Ie(a)){const o=r,l=a.map((u,c)=>o==u?1:0);return new V(l,s.typeInfo)}return new K(r===a?1:0,this.getTypeInfo("bool"));case"!=":if(Ie(r)&&Ie(a)){const o=r,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const u=o.map((c,d)=>c!==l[d]?1:0);return new V(u,i.typeInfo)}if(Ie(r)){const o=a,l=r.map((u,c)=>u!==o?1:0);return new V(l,i.typeInfo)}if(Ie(a)){const o=r,l=a.map((u,c)=>o!==u?1:0);return new V(l,s.typeInfo)}return new K(r!==a?1:0,this.getTypeInfo("bool"));case">=":if(Ie(r)&&Ie(a)){const o=r,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const u=o.map((c,d)=>c>=l[d]?1:0);return new V(u,i.typeInfo)}if(Ie(r)){const o=a,l=r.map((u,c)=>u>=o?1:0);return new V(l,i.typeInfo)}if(Ie(a)){const o=r,l=a.map((u,c)=>o>=u?1:0);return new V(l,s.typeInfo)}return new K(r>=a?1:0,this.getTypeInfo("bool"));case"<=":if(Ie(r)&&Ie(a)){const o=r,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const u=o.map((c,d)=>c<=l[d]?1:0);return new V(u,i.typeInfo)}if(Ie(r)){const o=a,l=r.map((u,c)=>u<=o?1:0);return new V(l,i.typeInfo)}if(Ie(a)){const o=r,l=a.map((u,c)=>o<=u?1:0);return new V(l,s.typeInfo)}return new K(r<=a?1:0,this.getTypeInfo("bool"));case"&&":if(Ie(r)&&Ie(a)){const o=r,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const u=o.map((c,d)=>c&&l[d]?1:0);return new V(u,i.typeInfo)}if(Ie(r)){const o=a,l=r.map((u,c)=>u&&o?1:0);return new V(l,i.typeInfo)}if(Ie(a)){const o=r,l=a.map((u,c)=>o&&u?1:0);return new V(l,s.typeInfo)}return new K(r&&a?1:0,this.getTypeInfo("bool"));case"||":if(Ie(r)&&Ie(a)){const o=r,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${t.line}.`),null;const u=o.map((c,d)=>c||l[d]?1:0);return new V(u,i.typeInfo)}if(Ie(r)){const o=a,l=r.map((u,c)=>u||o?1:0);return new V(l,i.typeInfo)}if(Ie(a)){const o=r,l=a.map((u,c)=>o||u?1:0);return new V(l,s.typeInfo)}return new K(r||a?1:0,this.getTypeInfo("bool"))}return console.error(`Unknown operator ${t.operator}. Line ${t.line}`),null}_evalCall(t,n){if(t.cachedReturnValue!==null)return t.cachedReturnValue;const i=n.clone();i.currentFunctionName=t.name;const s=n.getFunction(t.name);if(!s)return t.isBuiltin?this._callBuiltinFunction(t,i):this.getTypeInfo(t.name)?this._evalCreate(t,n):(console.error(`Unknown function "${t.name}". Line ${t.line}`),null);for(let r=0;r<s.node.args.length;++r){const a=s.node.args[r],o=this.evalExpression(t.args[r],i);i.createVariable(a.name,o,a)}return this._execStatements(s.node.body,i)}_callBuiltinFunction(t,n){switch(t.name){case"all":return this.builtins.All(t,n);case"any":return this.builtins.Any(t,n);case"select":return this.builtins.Select(t,n);case"arrayLength":return this.builtins.ArrayLength(t,n);case"abs":return this.builtins.Abs(t,n);case"acos":return this.builtins.Acos(t,n);case"acosh":return this.builtins.Acosh(t,n);case"asin":return this.builtins.Asin(t,n);case"asinh":return this.builtins.Asinh(t,n);case"atan":return this.builtins.Atan(t,n);case"atanh":return this.builtins.Atanh(t,n);case"atan2":return this.builtins.Atan2(t,n);case"ceil":return this.builtins.Ceil(t,n);case"clamp":return this.builtins.Clamp(t,n);case"cos":return this.builtins.Cos(t,n);case"cosh":return this.builtins.Cosh(t,n);case"countLeadingZeros":return this.builtins.CountLeadingZeros(t,n);case"countOneBits":return this.builtins.CountOneBits(t,n);case"countTrailingZeros":return this.builtins.CountTrailingZeros(t,n);case"cross":return this.builtins.Cross(t,n);case"degrees":return this.builtins.Degrees(t,n);case"determinant":return this.builtins.Determinant(t,n);case"distance":return this.builtins.Distance(t,n);case"dot":return this.builtins.Dot(t,n);case"dot4U8Packed":return this.builtins.Dot4U8Packed(t,n);case"dot4I8Packed":return this.builtins.Dot4I8Packed(t,n);case"exp":return this.builtins.Exp(t,n);case"exp2":return this.builtins.Exp2(t,n);case"extractBits":return this.builtins.ExtractBits(t,n);case"faceForward":return this.builtins.FaceForward(t,n);case"firstLeadingBit":return this.builtins.FirstLeadingBit(t,n);case"firstTrailingBit":return this.builtins.FirstTrailingBit(t,n);case"floor":return this.builtins.Floor(t,n);case"fma":return this.builtins.Fma(t,n);case"fract":return this.builtins.Fract(t,n);case"frexp":return this.builtins.Frexp(t,n);case"insertBits":return this.builtins.InsertBits(t,n);case"inverseSqrt":return this.builtins.InverseSqrt(t,n);case"ldexp":return this.builtins.Ldexp(t,n);case"length":return this.builtins.Length(t,n);case"log":return this.builtins.Log(t,n);case"log2":return this.builtins.Log2(t,n);case"max":return this.builtins.Max(t,n);case"min":return this.builtins.Min(t,n);case"mix":return this.builtins.Mix(t,n);case"modf":return this.builtins.Modf(t,n);case"normalize":return this.builtins.Normalize(t,n);case"pow":return this.builtins.Pow(t,n);case"quantizeToF16":return this.builtins.QuantizeToF16(t,n);case"radians":return this.builtins.Radians(t,n);case"reflect":return this.builtins.Reflect(t,n);case"refract":return this.builtins.Refract(t,n);case"reverseBits":return this.builtins.ReverseBits(t,n);case"round":return this.builtins.Round(t,n);case"saturate":return this.builtins.Saturate(t,n);case"sign":return this.builtins.Sign(t,n);case"sin":return this.builtins.Sin(t,n);case"sinh":return this.builtins.Sinh(t,n);case"smoothstep":return this.builtins.SmoothStep(t,n);case"sqrt":return this.builtins.Sqrt(t,n);case"step":return this.builtins.Step(t,n);case"tan":return this.builtins.Tan(t,n);case"tanh":return this.builtins.Tanh(t,n);case"transpose":return this.builtins.Transpose(t,n);case"trunc":return this.builtins.Trunc(t,n);case"dpdx":return this.builtins.Dpdx(t,n);case"dpdxCoarse":return this.builtins.DpdxCoarse(t,n);case"dpdxFine":return this.builtins.DpdxFine(t,n);case"dpdy":return this.builtins.Dpdy(t,n);case"dpdyCoarse":return this.builtins.DpdyCoarse(t,n);case"dpdyFine":return this.builtins.DpdyFine(t,n);case"fwidth":return this.builtins.Fwidth(t,n);case"fwidthCoarse":return this.builtins.FwidthCoarse(t,n);case"fwidthFine":return this.builtins.FwidthFine(t,n);case"textureDimensions":return this.builtins.TextureDimensions(t,n);case"textureGather":return this.builtins.TextureGather(t,n);case"textureGatherCompare":return this.builtins.TextureGatherCompare(t,n);case"textureLoad":return this.builtins.TextureLoad(t,n);case"textureNumLayers":return this.builtins.TextureNumLayers(t,n);case"textureNumLevels":return this.builtins.TextureNumLevels(t,n);case"textureNumSamples":return this.builtins.TextureNumSamples(t,n);case"textureSample":return this.builtins.TextureSample(t,n);case"textureSampleBias":return this.builtins.TextureSampleBias(t,n);case"textureSampleCompare":return this.builtins.TextureSampleCompare(t,n);case"textureSampleCompareLevel":return this.builtins.TextureSampleCompareLevel(t,n);case"textureSampleGrad":return this.builtins.TextureSampleGrad(t,n);case"textureSampleLevel":return this.builtins.TextureSampleLevel(t,n);case"textureSampleBaseClampToEdge":return this.builtins.TextureSampleBaseClampToEdge(t,n);case"textureStore":return this.builtins.TextureStore(t,n);case"atomicLoad":return this.builtins.AtomicLoad(t,n);case"atomicStore":return this.builtins.AtomicStore(t,n);case"atomicAdd":return this.builtins.AtomicAdd(t,n);case"atomicSub":return this.builtins.AtomicSub(t,n);case"atomicMax":return this.builtins.AtomicMax(t,n);case"atomicMin":return this.builtins.AtomicMin(t,n);case"atomicAnd":return this.builtins.AtomicAnd(t,n);case"atomicOr":return this.builtins.AtomicOr(t,n);case"atomicXor":return this.builtins.AtomicXor(t,n);case"atomicExchange":return this.builtins.AtomicExchange(t,n);case"atomicCompareExchangeWeak":return this.builtins.AtomicCompareExchangeWeak(t,n);case"pack4x8snorm":return this.builtins.Pack4x8snorm(t,n);case"pack4x8unorm":return this.builtins.Pack4x8unorm(t,n);case"pack4xI8":return this.builtins.Pack4xI8(t,n);case"pack4xU8":return this.builtins.Pack4xU8(t,n);case"pack4x8Clamp":return this.builtins.Pack4x8Clamp(t,n);case"pack4xU8Clamp":return this.builtins.Pack4xU8Clamp(t,n);case"pack2x16snorm":return this.builtins.Pack2x16snorm(t,n);case"pack2x16unorm":return this.builtins.Pack2x16unorm(t,n);case"pack2x16float":return this.builtins.Pack2x16float(t,n);case"unpack4x8snorm":return this.builtins.Unpack4x8snorm(t,n);case"unpack4x8unorm":return this.builtins.Unpack4x8unorm(t,n);case"unpack4xI8":return this.builtins.Unpack4xI8(t,n);case"unpack4xU8":return this.builtins.Unpack4xU8(t,n);case"unpack2x16snorm":return this.builtins.Unpack2x16snorm(t,n);case"unpack2x16unorm":return this.builtins.Unpack2x16unorm(t,n);case"unpack2x16float":return this.builtins.Unpack2x16float(t,n);case"storageBarrier":return this.builtins.StorageBarrier(t,n);case"textureBarrier":return this.builtins.TextureBarrier(t,n);case"workgroupBarrier":return this.builtins.WorkgroupBarrier(t,n);case"workgroupUniformLoad":return this.builtins.WorkgroupUniformLoad(t,n);case"subgroupAdd":return this.builtins.SubgroupAdd(t,n);case"subgroupExclusiveAdd":return this.builtins.SubgroupExclusiveAdd(t,n);case"subgroupInclusiveAdd":return this.builtins.SubgroupInclusiveAdd(t,n);case"subgroupAll":return this.builtins.SubgroupAll(t,n);case"subgroupAnd":return this.builtins.SubgroupAnd(t,n);case"subgroupAny":return this.builtins.SubgroupAny(t,n);case"subgroupBallot":return this.builtins.SubgroupBallot(t,n);case"subgroupBroadcast":return this.builtins.SubgroupBroadcast(t,n);case"subgroupBroadcastFirst":return this.builtins.SubgroupBroadcastFirst(t,n);case"subgroupElect":return this.builtins.SubgroupElect(t,n);case"subgroupMax":return this.builtins.SubgroupMax(t,n);case"subgroupMin":return this.builtins.SubgroupMin(t,n);case"subgroupMul":return this.builtins.SubgroupMul(t,n);case"subgroupExclusiveMul":return this.builtins.SubgroupExclusiveMul(t,n);case"subgroupInclusiveMul":return this.builtins.SubgroupInclusiveMul(t,n);case"subgroupOr":return this.builtins.SubgroupOr(t,n);case"subgroupShuffle":return this.builtins.SubgroupShuffle(t,n);case"subgroupShuffleDown":return this.builtins.SubgroupShuffleDown(t,n);case"subgroupShuffleUp":return this.builtins.SubgroupShuffleUp(t,n);case"subgroupShuffleXor":return this.builtins.SubgroupShuffleXor(t,n);case"subgroupXor":return this.builtins.SubgroupXor(t,n);case"quadBroadcast":return this.builtins.QuadBroadcast(t,n);case"quadSwapDiagonal":return this.builtins.QuadSwapDiagonal(t,n);case"quadSwapX":return this.builtins.QuadSwapX(t,n);case"quadSwapY":return this.builtins.QuadSwapY(t,n)}const i=n.getFunction(t.name);if(i){const s=n.clone();for(let r=0;r<i.node.args.length;++r){const a=i.node.args[r],o=this.evalExpression(t.args[r],s);s.setVariable(a.name,o,a)}return this._execStatements(i.node.body,s)}return null}_callConstructorValue(t,n){if(!t.args||t.args.length===0)return new K(0,this.getTypeInfo(t.type));const i=this.evalExpression(t.args[0],n);return i.typeInfo=this.getTypeInfo(t.type),i.getSubData(this,t.postfix,n).clone()}_callConstructorVec(t,n){const i=this.getTypeInfo(t.type),s=t.type.getTypeName(),r=_d[s];if(r===void 0)return console.error(`Invalid vec constructor ${s}. Line ${t.line}`),null;const a=[];if(t instanceof Lt)if(t.isVector){const o=t.vectorValue;for(const l of o)a.push(l)}else a.push(t.scalarValue);else if(t.args)for(const o of t.args){const l=this.evalExpression(o,n);if(l instanceof V){const u=l.data;for(let c=0;c<u.length;++c){let d=u[c];a.push(d)}}else if(l instanceof K){let u=l.value;a.push(u)}}if(t.type instanceof Q&&t.type.format===null&&(t.type.format=Q.f32),a.length===0){const o=new Array(r).fill(0);return new V(o,i).getSubData(this,t.postfix,n)}if(a.length===1)for(;a.length<r;)a.push(a[0]);return a.length<r?(console.error(`Invalid vec constructor. Line ${t.line}`),null):new V(a.length>r?a.slice(0,r):a,i).getSubData(this,t.postfix,n)}_callConstructorMatrix(t,n){const i=this.getTypeInfo(t.type),s=t.type.getTypeName(),r=bn[s];if(r===void 0)return console.error(`Invalid matrix constructor ${s}. Line ${t.line}`),null;const a=[];if(t instanceof Lt)if(t.isVector){const o=t.vectorValue;for(const l of o)a.push(l)}else a.push(t.scalarValue);else if(t.args)for(const o of t.args){const l=this.evalExpression(o,n);l instanceof V?a.push(...l.data):l instanceof K?a.push(l.value):l instanceof Ve&&a.push(...l.data)}if(i instanceof rr&&i.format===null&&(i.format=this.getTypeInfo("f32")),a.length===0){const o=new Array(r[2]).fill(0);return new Ve(o,i).getSubData(this,t.postfix,n)}return a.length!==r[2]?(console.error(`Invalid matrix constructor. Line ${t.line}`),null):new Ve(a,i).getSubData(this,t.postfix,n)}}on._breakObj=new Qn(new qn("BREAK",null),null),on._continueObj=new Qn(new qn("CONTINUE",null),null),on._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class wP{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class xP{constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new wP,this._exec=new on,this._forwardTypeCount=0}parse(t){this._initialize(t),this._deferArrayCountEval.length=0;const n=[];for(;!this._isAtEnd();){const i=this._global_decl_or_directive();if(!i)break;n.push(i)}if(this._deferArrayCountEval.length>0){for(const i of this._deferArrayCountEval){const s=i.arrayType,r=i.countNode;if(r instanceof Nn){const a=r.name,o=this._context.constants.get(a);if(o)try{const l=o.constEvaluate(this._exec);s.count=l}catch{}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(const i of n)i.search(s=>{s instanceof yp||s instanceof Kl?s.type=this._forwardType(s.type):s instanceof ho?s.format=this._forwardType(s.format):s instanceof Xi||s instanceof fo||s instanceof Yl?s.type=this._forwardType(s.type):s instanceof Co?s.returnType=this._forwardType(s.returnType):s instanceof pp&&(s.type=this._forwardType(s.type))});return n}_forwardType(t){if(t instanceof vp){const n=this._getType(t.name);if(n)return n}else t instanceof Kl?t.type=this._forwardType(t.type):t instanceof ho&&(t.format=this._forwardType(t.format));return t}_initialize(t){if(t)if(typeof t=="string"){const n=new dP(t);this._tokens=n.scanTokens()}else this._tokens=t;else this._tokens=[];this._current=0}_updateNode(t,n){return t.line=n??this._currentLine,t}_error(t,n){return{token:t,message:n,toString:()=>`${n}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==M.eof}_match(t){if(t instanceof Z)return!!this._check(t)&&(this._advance(),!0);for(let n=0,i=t.length;n<i;++n){const s=t[n];if(this._check(s))return this._advance(),!0}return!1}_consume(t,n){if(this._check(t))return this._advance();throw this._error(this._peek(),`${n}. Line:${this._currentLine}`)}_check(t){if(this._isAtEnd())return!1;const n=this._peek();if(t instanceof Array){const i=n.type;let s=!1;for(const r of t){if(i===r)return!0;r===M.tokens.name&&(s=!0)}if(s){const r=M.tokens.name.rule.exec(n.lexeme);if(r&&r.index==0&&r[0]==n.lexeme)return!0}return!1}if(n.type===t)return!0;if(t===M.tokens.name){const i=M.tokens.name.rule.exec(n.lexeme);return i&&i.index==0&&i[0]==n.lexeme}return!1}_advance(){var t,n;return this._currentLine=(n=(t=this._peek())===null||t===void 0?void 0:t.line)!==null&&n!==void 0?n:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(M.tokens.semicolon)&&!this._isAtEnd(););if(this._match(M.keywords.alias)){const n=this._type_alias();return this._consume(M.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(M.keywords.diagnostic)){const n=this._diagnostic();return this._consume(M.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(M.keywords.requires)){const n=this._requires_directive();return this._consume(M.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(M.keywords.enable)){const n=this._enable_directive();return this._consume(M.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}const t=this._attribute();if(this._check(M.keywords.var)){const n=this._global_variable_decl();return n!=null&&(n.attributes=t),this._consume(M.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(M.keywords.override)){const n=this._override_variable_decl();return n!=null&&(n.attributes=t),this._consume(M.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(M.keywords.let)){const n=this._global_let_decl();return n!=null&&(n.attributes=t),this._consume(M.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(M.keywords.const)){const n=this._global_const_decl();return n!=null&&(n.attributes=t),this._consume(M.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(M.keywords.struct)){const n=this._struct_decl();return n!=null&&(n.attributes=t),this._exec.reflection.updateAST([n]),n}if(this._check(M.keywords.fn)){const n=this._function_decl();return n!=null&&(n.attributes=t),this._exec.reflection.updateAST([n]),n}return null}_function_decl(){if(!this._match(M.keywords.fn))return null;const t=this._currentLine,n=this._consume(M.tokens.ident,"Expected function name.").toString();this._consume(M.tokens.paren_left,"Expected '(' for function arguments.");const i=[];if(!this._check(M.tokens.paren_right))do{if(this._check(M.tokens.paren_right))break;const o=this._attribute(),l=this._consume(M.tokens.name,"Expected argument name.").toString();this._consume(M.tokens.colon,"Expected ':' for argument type.");const u=this._attribute(),c=this._type_decl();c!=null&&(c.attributes=u,i.push(this._updateNode(new pp(l,c,o))))}while(this._match(M.tokens.comma));this._consume(M.tokens.paren_right,"Expected ')' after function arguments.");let s=null;if(this._match(M.tokens.arrow)){const o=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=o)}const r=this._compound_statement(),a=this._currentLine;return this._updateNode(new Co(n,i,s,r,t,a),t)}_compound_statement(){const t=[];for(this._consume(M.tokens.brace_left,"Expected '{' for block.");!this._check(M.tokens.brace_right);){const n=this._statement();n!==null&&t.push(n)}return this._consume(M.tokens.brace_right,"Expected '}' for block."),t}_statement(){for(;this._match(M.tokens.semicolon)&&!this._isAtEnd(););if(this._check(M.tokens.attr)&&this._attribute(),this._check(M.keywords.if))return this._if_statement();if(this._check(M.keywords.switch))return this._switch_statement();if(this._check(M.keywords.loop))return this._loop_statement();if(this._check(M.keywords.for))return this._for_statement();if(this._check(M.keywords.while))return this._while_statement();if(this._check(M.keywords.continuing))return this._continuing_statement();if(this._check(M.keywords.static_assert))return this._static_assert_statement();if(this._check(M.tokens.brace_left))return this._compound_statement();let t=null;if(this._check(M.keywords.return))t=this._return_statement();else if(this._check([M.keywords.var,M.keywords.let,M.keywords.const]))t=this._variable_statement();else if(this._match(M.keywords.discard))t=this._updateNode(new lP);else if(this._match(M.keywords.break)){const n=this._updateNode(new Ew);if(this._currentLoop.length>0){const i=this._currentLoop[this._currentLoop.length-1];n.loopId=i.id}t=n,this._check(M.keywords.if)&&(this._advance(),n.condition=this._optional_paren_expression())}else if(this._match(M.keywords.continue)){const n=this._updateNode(new Iw);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${n.line}`);{const i=this._currentLoop[this._currentLoop.length-1];n.loopId=i.id}t=n}else t=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return t!=null&&this._consume(M.tokens.semicolon,"Expected ';' after statement."),t}_static_assert_statement(){if(!this._match(M.keywords.static_assert))return null;const t=this._currentLine,n=this._optional_paren_expression();return this._updateNode(new rP(n),t)}_while_statement(){if(!this._match(M.keywords.while))return null;const t=this._updateNode(new _w(null,null));return this._currentLoop.push(t),t.condition=this._optional_paren_expression(),this._check(M.tokens.attr)&&this._attribute(),t.body=this._compound_statement(),this._currentLoop.pop(),t}_continuing_statement(){const t=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(M.keywords.continuing))return null;const n=this._currentLine,i=this._compound_statement();return this._updateNode(new bf(i,t),n)}_for_statement(){if(!this._match(M.keywords.for))return null;this._consume(M.tokens.paren_left,"Expected '('.");const t=this._updateNode(new bw(null,null,null,null));return this._currentLoop.push(t),t.init=this._check(M.tokens.semicolon)?null:this._for_init(),this._consume(M.tokens.semicolon,"Expected ';'."),t.condition=this._check(M.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(M.tokens.semicolon,"Expected ';'."),t.increment=this._check(M.tokens.paren_right)?null:this._for_increment(),this._consume(M.tokens.paren_right,"Expected ')'."),this._check(M.tokens.attr)&&this._attribute(),t.body=this._compound_statement(),this._currentLoop.pop(),t}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(M.keywords.var)){const t=this._variable_decl();if(t===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(M.tokens.equal)&&(n=this._short_circuit_or_expression()),this._updateNode(new Xi(t.name,t.type,t.storage,t.access,n),t.line)}if(this._match(M.keywords.let)){const t=this._currentLine,n=this._consume(M.tokens.name,"Expected name for let.").toString();let i=null;if(this._match(M.tokens.colon)){const r=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=r)}this._consume(M.tokens.equal,"Expected '=' for let.");const s=this._short_circuit_or_expression();return this._updateNode(new fo(n,i,null,null,s),t)}if(this._match(M.keywords.const)){const t=this._currentLine,n=this._consume(M.tokens.name,"Expected name for const.").toString();let i=null;if(this._match(M.tokens.colon)){const r=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=r)}this._consume(M.tokens.equal,"Expected '=' for const.");const s=this._short_circuit_or_expression();return i===null&&s instanceof Lt&&(i=s.type),this._updateNode(new Yl(n,i,null,null,s),t)}return null}_increment_decrement_statement(){const t=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(M.increment_operators))return this._current=t,null;const i=this._consume(M.increment_operators,"Expected increment operator");return this._updateNode(new ww(i.type===M.tokens.plus_plus?jr.increment:jr.decrement,n))}_assignment_statement(){let t=null;const n=this._currentLine;if(this._check(M.tokens.brace_right))return null;let i=this._match(M.tokens.underscore);if(i||(t=this._unary_expression()),!i&&t==null)return null;const s=this._consume(M.assignment_operators,"Expected assignment operator."),r=this._short_circuit_or_expression();return this._updateNode(new xw(qa.parse(s.lexeme),t,r),n)}_func_call_statement(){if(!this._check(M.tokens.ident))return null;const t=this._currentLine,n=this._current,i=this._consume(M.tokens.ident,"Expected function name."),s=this._argument_expression_list();return s===null?(this._current=n,null):this._updateNode(new vg(i.lexeme,s),t)}_loop_statement(){if(!this._match(M.keywords.loop))return null;this._check(M.tokens.attr)&&this._attribute(),this._consume(M.tokens.brace_left,"Expected '{' for loop.");const t=this._updateNode(new Sw([],null));this._currentLoop.push(t);let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let i of n)t.body.push(i);else t.body.push(n);if(n instanceof bf){t.continuing=n;break}n=this._statement()}return this._currentLoop.pop(),this._consume(M.tokens.brace_right,"Expected '}' for loop."),t}_switch_statement(){if(!this._match(M.keywords.switch))return null;const t=this._updateNode(new Tw(null,[]));if(this._currentLoop.push(t),t.condition=this._optional_paren_expression(),this._check(M.tokens.attr)&&this._attribute(),this._consume(M.tokens.brace_left,"Expected '{' for switch."),t.cases=this._switch_body(),t.cases==null||t.cases.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(M.tokens.brace_right,"Expected '}' for switch."),this._currentLoop.pop(),t}_switch_body(){const t=[];let n=!1;for(;this._check([M.keywords.default,M.keywords.case]);){if(this._match(M.keywords.case)){const i=this._case_selectors();for(const r of i)if(r instanceof ql){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");n=!0;break}this._match(M.tokens.colon),this._check(M.tokens.attr)&&this._attribute(),this._consume(M.tokens.brace_left,"Exected '{' for switch case.");const s=this._case_body();this._consume(M.tokens.brace_right,"Exected '}' for switch case."),t.push(this._updateNode(new Dw(i,s)))}if(this._match(M.keywords.default)){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");this._match(M.tokens.colon),this._check(M.tokens.attr)&&this._attribute(),this._consume(M.tokens.brace_left,"Exected '{' for switch default.");const i=this._case_body();this._consume(M.tokens.brace_right,"Exected '}' for switch default."),t.push(this._updateNode(new Nw(i)))}}return t}_case_selectors(){const t=[];for(this._match(M.keywords.default)?t.push(this._updateNode(new ql)):t.push(this._shift_expression());this._match(M.tokens.comma);)this._match(M.keywords.default)?t.push(this._updateNode(new ql)):t.push(this._shift_expression());return t}_case_body(){if(this._match(M.keywords.fallthrough))return this._consume(M.tokens.semicolon,"Expected ';'"),[];let t=this._statement();if(t==null)return[];t instanceof Array||(t=[t]);const n=this._case_body();return n.length==0?t:[...t,n[0]]}_if_statement(){if(!this._match(M.keywords.if))return null;const t=this._currentLine,n=this._optional_paren_expression();this._check(M.tokens.attr)&&this._attribute();const i=this._compound_statement();let s=[];this._match_elseif()&&(this._check(M.tokens.attr)&&this._attribute(),s=this._elseif_statement(s));let r=null;return this._match(M.keywords.else)&&(this._check(M.tokens.attr)&&this._attribute(),r=this._compound_statement()),this._updateNode(new Aw(n,i,s,r),t)}_match_elseif(){return this._tokens[this._current].type===M.keywords.else&&this._tokens[this._current+1].type===M.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(t=[]){const n=this._optional_paren_expression(),i=this._compound_statement();return t.push(this._updateNode(new cP(n,i))),this._match_elseif()&&(this._check(M.tokens.attr)&&this._attribute(),this._elseif_statement(t)),t}_return_statement(){if(!this._match(M.keywords.return))return null;const t=this._short_circuit_or_expression();return this._updateNode(new Cw(t))}_short_circuit_or_expression(){let t=this._short_circuit_and_expr();for(;this._match(M.tokens.or_or);)t=this._updateNode(new ri(this._previous().toString(),t,this._short_circuit_and_expr()));return t}_short_circuit_and_expr(){let t=this._inclusive_or_expression();for(;this._match(M.tokens.and_and);)t=this._updateNode(new ri(this._previous().toString(),t,this._inclusive_or_expression()));return t}_inclusive_or_expression(){let t=this._exclusive_or_expression();for(;this._match(M.tokens.or);)t=this._updateNode(new ri(this._previous().toString(),t,this._exclusive_or_expression()));return t}_exclusive_or_expression(){let t=this._and_expression();for(;this._match(M.tokens.xor);)t=this._updateNode(new ri(this._previous().toString(),t,this._and_expression()));return t}_and_expression(){let t=this._equality_expression();for(;this._match(M.tokens.and);)t=this._updateNode(new ri(this._previous().toString(),t,this._equality_expression()));return t}_equality_expression(){const t=this._relational_expression();return this._match([M.tokens.equal_equal,M.tokens.not_equal])?this._updateNode(new ri(this._previous().toString(),t,this._relational_expression())):t}_relational_expression(){let t=this._shift_expression();for(;this._match([M.tokens.less_than,M.tokens.greater_than,M.tokens.less_than_equal,M.tokens.greater_than_equal]);)t=this._updateNode(new ri(this._previous().toString(),t,this._shift_expression()));return t}_shift_expression(){let t=this._additive_expression();for(;this._match([M.tokens.shift_left,M.tokens.shift_right]);)t=this._updateNode(new ri(this._previous().toString(),t,this._additive_expression()));return t}_additive_expression(){let t=this._multiplicative_expression();for(;this._match([M.tokens.plus,M.tokens.minus]);)t=this._updateNode(new ri(this._previous().toString(),t,this._multiplicative_expression()));return t}_multiplicative_expression(){let t=this._unary_expression();for(;this._match([M.tokens.star,M.tokens.forward_slash,M.tokens.modulo]);)t=this._updateNode(new ri(this._previous().toString(),t,this._unary_expression()));return t}_unary_expression(){return this._match([M.tokens.minus,M.tokens.bang,M.tokens.tilde,M.tokens.star,M.tokens.and])?this._updateNode(new Nt(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){const t=this._primary_expression(),n=this._postfix_expression();return n&&(t.postfix=n),t}_postfix_expression(){if(this._match(M.tokens.bracket_left)){const t=this._short_circuit_or_expression();this._consume(M.tokens.bracket_right,"Expected ']'.");const n=this._updateNode(new ua(t)),i=this._postfix_expression();return i&&(n.postfix=i),n}if(this._match(M.tokens.period)){const t=this._consume(M.tokens.name,"Expected member name."),n=this._postfix_expression(),i=this._updateNode(new ar(t.lexeme));return n&&(i.postfix=n),i}return null}_getStruct(t){return this._context.aliases.has(t)?this._context.aliases.get(t).type:this._context.structs.has(t)?this._context.structs.get(t):null}_getType(t){const n=this._getStruct(t);if(n!==null)return n;switch(t){case"void":return fe.void;case"bool":return fe.bool;case"i32":return fe.i32;case"u32":return fe.u32;case"f32":return fe.f32;case"f16":return fe.f16;case"vec2f":return Q.vec2f;case"vec3f":return Q.vec3f;case"vec4f":return Q.vec4f;case"vec2i":return Q.vec2i;case"vec3i":return Q.vec3i;case"vec4i":return Q.vec4i;case"vec2u":return Q.vec2u;case"vec3u":return Q.vec3u;case"vec4u":return Q.vec4u;case"vec2h":return Q.vec2h;case"vec3h":return Q.vec3h;case"vec4h":return Q.vec4h;case"mat2x2f":return Q.mat2x2f;case"mat2x3f":return Q.mat2x3f;case"mat2x4f":return Q.mat2x4f;case"mat3x2f":return Q.mat3x2f;case"mat3x3f":return Q.mat3x3f;case"mat3x4f":return Q.mat3x4f;case"mat4x2f":return Q.mat4x2f;case"mat4x3f":return Q.mat4x3f;case"mat4x4f":return Q.mat4x4f;case"mat2x2h":return Q.mat2x2h;case"mat2x3h":return Q.mat2x3h;case"mat2x4h":return Q.mat2x4h;case"mat3x2h":return Q.mat3x2h;case"mat3x3h":return Q.mat3x3h;case"mat3x4h":return Q.mat3x4h;case"mat4x2h":return Q.mat4x2h;case"mat4x3h":return Q.mat4x3h;case"mat4x4h":return Q.mat4x4h;case"mat2x2i":return Q.mat2x2i;case"mat2x3i":return Q.mat2x3i;case"mat2x4i":return Q.mat2x4i;case"mat3x2i":return Q.mat3x2i;case"mat3x3i":return Q.mat3x3i;case"mat3x4i":return Q.mat3x4i;case"mat4x2i":return Q.mat4x2i;case"mat4x3i":return Q.mat4x3i;case"mat4x4i":return Q.mat4x4i;case"mat2x2u":return Q.mat2x2u;case"mat2x3u":return Q.mat2x3u;case"mat2x4u":return Q.mat2x4u;case"mat3x2u":return Q.mat3x2u;case"mat3x3u":return Q.mat3x3u;case"mat3x4u":return Q.mat3x4u;case"mat4x2u":return Q.mat4x2u;case"mat4x3u":return Q.mat4x3u;case"mat4x4u":return Q.mat4x4u}return null}_validateTypeRange(t,n){if(n.name==="i32"){if(t<-2147483648||t>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${t}. Line: ${this._currentLine}.`)}else if(n.name==="u32"&&(t<0||t>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${t}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(M.tokens.ident)){const i=this._previous().toString();if(this._check(M.tokens.paren_left)){const s=this._argument_expression_list(),r=this._getType(i);return r!==null?this._updateNode(new Ti(r,s)):this._updateNode(new yg(i,s))}if(this._context.constants.has(i)){const s=this._context.constants.get(i);return this._updateNode(new Pw(i,s.value))}return this._updateNode(new Nn(i))}if(this._match(M.tokens.int_literal)){const i=this._previous().toString();let s=i.endsWith("i")||i.endsWith("i")?fe.i32:i.endsWith("u")||i.endsWith("U")?fe.u32:fe.x32;const r=parseInt(i);return this._validateTypeRange(r,s),this._updateNode(new Lt(new K(r,this._exec.getTypeInfo(s)),s))}if(this._match(M.tokens.uint_literal)){const i=parseInt(this._previous().toString());return this._validateTypeRange(i,fe.u32),this._updateNode(new Lt(new K(i,this._exec.getTypeInfo(fe.u32)),fe.u32))}if(this._match([M.tokens.decimal_float_literal,M.tokens.hex_float_literal])){let i=this._previous().toString(),s=i.endsWith("h");s&&(i=i.substring(0,i.length-1));const r=parseFloat(i);this._validateTypeRange(r,s?fe.f16:fe.f32);const a=s?fe.f16:fe.f32;return this._updateNode(new Lt(new K(r,this._exec.getTypeInfo(a)),a))}if(this._match([M.keywords.true,M.keywords.false])){let i=this._previous().toString()===M.keywords.true.rule;return this._updateNode(new Lt(new K(i?1:0,this._exec.getTypeInfo(fe.bool)),fe.bool))}if(this._check(M.tokens.paren_left))return this._paren_expression();if(this._match(M.keywords.bitcast)){this._consume(M.tokens.less_than,"Expected '<'.");const i=this._type_decl();this._consume(M.tokens.greater_than,"Expected '>'.");const s=this._paren_expression();return this._updateNode(new Rw(i,s))}const t=this._type_decl(),n=this._argument_expression_list();return this._updateNode(new Ti(t,n))}_argument_expression_list(){if(!this._match(M.tokens.paren_left))return null;const t=[];do{if(this._check(M.tokens.paren_right))break;const n=this._short_circuit_or_expression();t.push(n)}while(this._match(M.tokens.comma));return this._consume(M.tokens.paren_right,"Expected ')' for agument list"),t}_optional_paren_expression(){this._match(M.tokens.paren_left);const t=this._short_circuit_or_expression();return this._match(M.tokens.paren_right),t}_paren_expression(){this._consume(M.tokens.paren_left,"Expected '('.");const t=this._short_circuit_or_expression();return this._consume(M.tokens.paren_right,"Expected ')'."),t}_struct_decl(){if(!this._match(M.keywords.struct))return null;const t=this._currentLine,n=this._consume(M.tokens.ident,"Expected name for struct.").toString();this._consume(M.tokens.brace_left,"Expected '{' for struct body.");const i=[];for(;!this._check(M.tokens.brace_right);){const a=this._attribute(),o=this._consume(M.tokens.name,"Expected variable name.").toString();this._consume(M.tokens.colon,"Expected ':' for struct member type.");const l=this._attribute(),u=this._type_decl();u!=null&&(u.attributes=l),this._check(M.tokens.brace_right)?this._match(M.tokens.comma):this._consume(M.tokens.comma,"Expected ',' for struct member."),i.push(this._updateNode(new yp(o,u,a)))}this._consume(M.tokens.brace_right,"Expected '}' after struct body.");const s=this._currentLine,r=this._updateNode(new $i(n,i,t,s),t);return this._context.structs.set(n,r),r}_global_variable_decl(){const t=this._variable_decl();if(!t)return null;if(this._match(M.tokens.equal)){const n=this._const_expression();t.value=n}if(t.type!==null&&t.value instanceof Lt){if(t.value.type.name!=="x32"&&t.type.getTypeName()!==t.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${t.value.type.name} to ${t.type.name}. Line:${this._currentLine}`);t.value.isScalar&&this._validateTypeRange(t.value.scalarValue,t.type),t.value.type=t.type}else t.type===null&&t.value instanceof Lt&&(t.type=t.value.type.name==="x32"?fe.i32:t.value.type,t.value.isScalar&&this._validateTypeRange(t.value.scalarValue,t.type));return t}_override_variable_decl(){const t=this._override_decl();return t&&this._match(M.tokens.equal)&&(t.value=this._const_expression()),t}_global_const_decl(){var t;if(!this._match(M.keywords.const))return null;const n=this._consume(M.tokens.name,"Expected variable name"),i=this._currentLine;let s=null;if(this._match(M.tokens.colon)){const l=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=l)}let r=null;this._consume(M.tokens.equal,"const declarations require an assignment");const a=this._short_circuit_or_expression();try{let l=[fe.f32],u=a.constEvaluate(this._exec,l);u instanceof K&&this._validateTypeRange(u.value,l[0]),l[0]instanceof Q&&l[0].format===null&&u.typeInfo instanceof rr&&u.typeInfo.format!==null&&(u.typeInfo.format.name==="f16"?l[0].format=fe.f16:u.typeInfo.format.name==="f32"?l[0].format=fe.f32:u.typeInfo.format.name==="i32"?l[0].format=fe.i32:u.typeInfo.format.name==="u32"?l[0].format=fe.u32:u.typeInfo.format.name==="bool"?l[0].format=fe.bool:console.error(`TODO: impelement template format type ${u.typeInfo.format.name}`)),r=this._updateNode(new Lt(u,l[0])),this._exec.context.setVariable(n.toString(),u)}catch{r=a}if(s!==null&&r instanceof Lt){if(r.type.name!=="x32"&&s.getTypeName()!==r.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${r.type.name} to ${s.name}. Line:${this._currentLine}`);r.type=s,r.isScalar&&this._validateTypeRange(r.scalarValue,r.type)}else s===null&&r instanceof Lt&&(s=(t=r?.type)!==null&&t!==void 0?t:fe.f32,s===fe.x32&&(s=fe.i32));const o=this._updateNode(new Yl(n.toString(),s,"","",r),i);return this._context.constants.set(o.name,o),o}_global_let_decl(){if(!this._match(M.keywords.let))return null;const t=this._currentLine,n=this._consume(M.tokens.name,"Expected variable name");let i=null;if(this._match(M.tokens.colon)){const r=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=r)}let s=null;if(this._match(M.tokens.equal)&&(s=this._const_expression()),i!==null&&s instanceof Lt){if(s.type.name!=="x32"&&i.getTypeName()!==s.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${s.type.name} to ${i.name}. Line:${this._currentLine}`);s.type=i}else i===null&&s instanceof Lt&&(i=s.type.name==="x32"?fe.i32:s.type);return s instanceof Lt&&s.isScalar&&this._validateTypeRange(s.scalarValue,i),this._updateNode(new fo(n.toString(),i,"","",s),t)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(M.keywords.var))return null;const t=this._currentLine;let n="",i="";this._match(M.tokens.less_than)&&(n=this._consume(M.storage_class,"Expected storage_class.").toString(),this._match(M.tokens.comma)&&(i=this._consume(M.access_mode,"Expected access_mode.").toString()),this._consume(M.tokens.greater_than,"Expected '>'."));const s=this._consume(M.tokens.name,"Expected variable name");let r=null;if(this._match(M.tokens.colon)){const a=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=a)}return this._updateNode(new Xi(s.toString(),r,n,i,null),t)}_override_decl(){if(!this._match(M.keywords.override))return null;const t=this._consume(M.tokens.name,"Expected variable name");let n=null;if(this._match(M.tokens.colon)){const i=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=i)}return this._updateNode(new mg(t.toString(),n,null))}_diagnostic(){this._consume(M.tokens.paren_left,"Expected '('");const t=this._consume(M.tokens.ident,"Expected severity control name.");this._consume(M.tokens.comma,"Expected ','");let n=this._consume(M.tokens.ident,"Expected diagnostic rule name.").toString();return this._match(M.tokens.period)&&(n+=`.${this._consume(M.tokens.ident,"Expected diagnostic message.").toString()}`),this._consume(M.tokens.paren_right,"Expected ')'"),this._updateNode(new kw(t.toString(),n))}_enable_directive(){const t=this._consume(M.tokens.ident,"identity expected.");return this._updateNode(new aP(t.toString()))}_requires_directive(){const t=[this._consume(M.tokens.ident,"identity expected.").toString()];for(;this._match(M.tokens.comma);){const n=this._consume(M.tokens.ident,"identity expected.");t.push(n.toString())}return this._updateNode(new oP(t))}_type_alias(){const t=this._consume(M.tokens.ident,"identity expected.");this._consume(M.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);const i=this._updateNode(new pg(t.toString(),n));return this._context.aliases.set(i.name,i),i}_type_decl(){if(this._check([M.tokens.ident,...M.texel_format,M.keywords.bool,M.keywords.f32,M.keywords.i32,M.keywords.u32])){const i=this._advance().toString();if(this._context.structs.has(i))return this._context.structs.get(i);if(this._context.aliases.has(i))return this._context.aliases.get(i).type;if(!this._getType(i)){const s=this._updateNode(new vp(i));return this._forwardTypeCount++,s}return this._updateNode(new fe(i))}let t=this._texture_sampler_types();if(t)return t;if(this._check(M.template_types)){let i=this._advance().toString(),s=null,r=null;return this._match(M.tokens.less_than)&&(s=this._type_decl(),r=null,this._match(M.tokens.comma)&&(r=this._consume(M.access_mode,"Expected access_mode for pointer").toString()),this._consume(M.tokens.greater_than,"Expected '>' for type.")),this._updateNode(new Q(i,s,r))}if(this._match(M.keywords.ptr)){let i=this._previous().toString();this._consume(M.tokens.less_than,"Expected '<' for pointer.");const s=this._consume(M.storage_class,"Expected storage_class for pointer");this._consume(M.tokens.comma,"Expected ',' for pointer.");const r=this._type_decl();let a=null;return this._match(M.tokens.comma)&&(a=this._consume(M.access_mode,"Expected access_mode for pointer").toString()),this._consume(M.tokens.greater_than,"Expected '>' for pointer."),this._updateNode(new Kl(i,s.toString(),r,a))}const n=this._attribute();if(this._match(M.keywords.array)){let i=null,s=-1;const r=this._previous();let a=null;if(this._match(M.tokens.less_than)){i=this._type_decl(),this._context.aliases.has(i.name)&&(i=this._context.aliases.get(i.name).type);let l="";if(this._match(M.tokens.comma)){a=this._shift_expression();try{l=a.constEvaluate(this._exec).toString(),a=null}catch{l="1"}}this._consume(M.tokens.greater_than,"Expected '>' for array."),s=l?parseInt(l):0}const o=this._updateNode(new ho(r.toString(),n,i,s));return a&&this._deferArrayCountEval.push({arrayType:o,countNode:a}),o}return null}_texture_sampler_types(){if(this._match(M.sampler_type))return this._updateNode(new Za(this._previous().toString(),null,null));if(this._match(M.depth_texture_type))return this._updateNode(new Za(this._previous().toString(),null,null));if(this._match(M.sampled_texture_type)||this._match(M.multisampled_texture_type)){const t=this._previous();this._consume(M.tokens.less_than,"Expected '<' for sampler type.");const n=this._type_decl();return this._consume(M.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new Za(t.toString(),n,null))}if(this._match(M.storage_texture_type)){const t=this._previous();this._consume(M.tokens.less_than,"Expected '<' for sampler type.");const n=this._consume(M.texel_format,"Invalid texel format.").toString();this._consume(M.tokens.comma,"Expected ',' after texel format.");const i=this._consume(M.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(M.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new Za(t.toString(),n,i))}return null}_attribute(){let t=[];for(;this._match(M.tokens.attr);){const n=this._consume(M.attribute_name,"Expected attribute name"),i=this._updateNode(new Bw(n.toString(),null));if(this._match(M.tokens.paren_left)){if(i.value=this._consume(M.literal_or_ident,"Expected attribute value").toString(),this._check(M.tokens.comma)){this._advance();do{const s=this._consume(M.literal_or_ident,"Expected attribute value").toString();i.value instanceof Array||(i.value=[i.value]),i.value.push(s)}while(this._match(M.tokens.comma))}this._consume(M.tokens.paren_right,"Expected ')'")}t.push(i)}return t.length==0?null:t}}class SP extends ki{constructor(t){super(),t&&this.update(t)}update(t){const n=new xP().parse(t);this.updateAST(n)}}function TP(e){const t={attributes:[],bindings:[]};let n;try{n=AP(e)}catch(r){return xe.error(r.message)(),t}for(const r of n.uniforms){const a=[];for(const o of r.type?.members||[])a.push({name:o.name,type:wp(o.type)});t.bindings.push({type:"uniform",name:r.name,group:r.group,location:r.binding,members:a})}for(const r of n.textures)t.bindings.push({type:"texture",name:r.name,group:r.group,location:r.binding});for(const r of n.samplers)t.bindings.push({type:"sampler",name:r.name,group:r.group,location:r.binding});const i=n.entry.vertex[0],s=i?.inputs.length||0;for(let r=0;r<s;r++){const a=i.inputs[r];if(a.locationType==="location"){const o=wp(a.type);t.attributes.push({name:a.name,location:Number(a.location),type:o})}}return t}function wp(e){return e.format?`${e.name}<${e.format.name}>`:e.name}function AP(e){try{return new SP(e)}catch(t){if(t instanceof Error)throw t;let n="WGSL parse error";throw typeof t=="object"&&t?.message&&(n+=`: ${t.message} `),typeof t=="object"&&t?.token&&(n+=t.token.line||""),new Error(n,{cause:t})}}const CP={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...CP}};const Zn=globalThis.mathgl.config;function kP(e,{precision:t=Zn.precision}={}){return e=EP(e),`${parseFloat(e.toPrecision(t))}`}function da(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Zt(e,t,n){return PP(e,i=>Math.max(t,Math.min(n,i)))}function Ac(e,t,n){return da(e)?e.map((i,s)=>Ac(i,t[s],n)):n*t+(1-n)*e}function ko(e,t,n){const i=Zn.EPSILON;try{if(e===t)return!0;if(da(e)&&da(t)){if(e.length!==t.length)return!1;for(let s=0;s<e.length;++s)if(!ko(e[s],t[s]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=Zn.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{Zn.EPSILON=i}}function EP(e){return Math.round(e/Zn.EPSILON)*Zn.EPSILON}function IP(e){return e.clone?e.clone():new Array(e.length)}function PP(e,t,n){if(da(e)){const i=e;n=n||IP(i);for(let s=0;s<n.length&&s<i.length;++s){const r=typeof e=="number"?e:e[s];n[s]=t(r,s,n)}return n}return t(e)}class Fw extends Array{clone(){return new this.constructor().copy(this)}fromArray(t,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=t[i+n];return this.check()}toArray(t=[],n=0){for(let i=0;i<this.ELEMENTS;++i)t[n+i]=this[i];return t}toObject(t){return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:da(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Zn)}formatString(t){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+kP(this[i],t);return`${t.printTypes?this.constructor.name:""}[${n}]`}equals(t){if(!t||this.length!==t.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!ko(this[n],t[n]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==t[n])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,n,i){if(i===void 0)return this.lerp(this,t,n);for(let s=0;s<this.ELEMENTS;++s){const r=t[s],a=typeof n=="number"?n:n[s];this[s]=r+i*(a-r)}return this.check()}min(t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(t[n],this[n]);return this.check()}max(t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(t[n],this[n]);return this.check()}clamp(t,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t[i]),n[i]);return this.check()}add(...t){for(const n of t)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...t){for(const n of t)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(t){if(typeof t=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=t;else for(let n=0;n<this.ELEMENTS&&n<t.length;++n)this[n]*=t[n];return this.check()}multiplyByScalar(t){for(let n=0;n<this.ELEMENTS;++n)this[n]*=t;return this.check()}check(){if(Zn.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let t=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)t=t&&Number.isFinite(this[n]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let n=0;n<this.ELEMENTS;++n)this[n]=t;return this.check()}addScalar(t){for(let n=0;n<this.ELEMENTS;++n)this[n]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let n=0;n<this.ELEMENTS;++n)this[n]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t),n);return this.check()}get elements(){return this}}function RP(e,t){if(e.length!==t)return!1;for(let n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}function Dn(e){if(!Number.isFinite(e))throw new Error(`Invalid number ${JSON.stringify(e)}`);return e}function bd(e,t,n=""){if(Zn.debug&&!RP(e,t))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return e}function xp(e,t){if(!e)throw new Error(`math.gl assertion ${t}`)}class MP extends Fw{get x(){return this[0]}set x(t){this[0]=Dn(t)}get y(){return this[1]}set y(t){this[1]=Dn(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let n=0;n<this.ELEMENTS;++n)t+=this[n]*this[n];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let n=0;for(let i=0;i<this.ELEMENTS;++i){const s=this[i]-t[i];n+=s*s}return Dn(n)}dot(t){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*t[i];return Dn(n)}normalize(){const t=this.magnitude();if(t!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=t;return this.check()}multiply(...t){for(const n of t)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...t){for(const n of t)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return xp(t>=0&&t<this.ELEMENTS,"index is out of range"),Dn(this[t])}setComponent(t,n){return xp(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=n,this.check()}addVectors(t,n){return this.copy(t).add(n)}subVectors(t,n){return this.copy(t).subtract(n)}multiplyVectors(t,n){return this.copy(t).multiply(n)}addScaledVector(t,n){return this.add(new this.constructor(t).multiplyScalar(n))}}const Zl=1e-6;let fa=typeof Float32Array<"u"?Float32Array:Array;function OP(){const e=new fa(2);return fa!=Float32Array&&(e[0]=0,e[1]=0),e}function Cc(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Vw(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Lw(e,t,n,i){const s=t[0],r=t[1];return e[0]=s+i*(n[0]-s),e[1]=r+i*(n[1]-r),e}function DP(e,t,n){const i=t[0],s=t[1];return e[0]=n[0]*i+n[4]*s+n[12],e[1]=n[1]*i+n[5]*s+n[13],e}(function(){const e=OP();return function(t,n,i,s,r,a){let o,l;for(n||(n=2),i||(i=0),s?l=Math.min(s*n+i,t.length):l=t.length,o=i;o<l;o+=n)e[0]=t[o],e[1]=t[o+1],r(e,e,a),t[o]=e[0],t[o+1]=e[1];return t}})();function NP(e,t,n){const i=t[0],s=t[1],r=n[3]*i+n[7]*s||1;return e[0]=(n[0]*i+n[4]*s)/r,e[1]=(n[1]*i+n[5]*s)/r,e}function Uw(e,t,n){const i=t[0],s=t[1],r=t[2],a=n[3]*i+n[7]*s+n[11]*r||1;return e[0]=(n[0]*i+n[4]*s+n[8]*r)/a,e[1]=(n[1]*i+n[5]*s+n[9]*r)/a,e[2]=(n[2]*i+n[6]*s+n[10]*r)/a,e}function BP(e,t,n){const i=t[0],s=t[1];return e[0]=n[0]*i+n[2]*s,e[1]=n[1]*i+n[3]*s,e[2]=t[2],e}function FP(){const e=new fa(3);return fa!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function VP(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function LP(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function UP(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function $P(e,t,n){const i=t[0],s=t[1],r=t[2],a=n[0],o=n[1],l=n[2];return e[0]=s*l-r*o,e[1]=r*a-i*l,e[2]=i*o-s*a,e}function $w(e,t,n){const i=t[0],s=t[1],r=t[2];let a=n[3]*i+n[7]*s+n[11]*r+n[15];return a=a||1,e[0]=(n[0]*i+n[4]*s+n[8]*r+n[12])/a,e[1]=(n[1]*i+n[5]*s+n[9]*r+n[13])/a,e[2]=(n[2]*i+n[6]*s+n[10]*r+n[14])/a,e}function zP(e,t,n){const i=t[0],s=t[1],r=t[2];return e[0]=i*n[0]+s*n[3]+r*n[6],e[1]=i*n[1]+s*n[4]+r*n[7],e[2]=i*n[2]+s*n[5]+r*n[8],e}function WP(e,t,n){const i=n[0],s=n[1],r=n[2],a=n[3],o=t[0],l=t[1],u=t[2];let c=s*u-r*l,d=r*o-i*u,f=i*l-s*o,h=s*f-r*d,g=r*c-i*f,v=i*d-s*c;const m=a*2;return c*=m,d*=m,f*=m,h*=2,g*=2,v*=2,e[0]=o+c+h,e[1]=l+d+g,e[2]=u+f+v,e}function HP(e,t,n,i){const s=[],r=[];return s[0]=t[0]-n[0],s[1]=t[1]-n[1],s[2]=t[2]-n[2],r[0]=s[0],r[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),r[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}function jP(e,t,n,i){const s=[],r=[];return s[0]=t[0]-n[0],s[1]=t[1]-n[1],s[2]=t[2]-n[2],r[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),r[1]=s[1],r[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}function XP(e,t,n,i){const s=[],r=[];return s[0]=t[0]-n[0],s[1]=t[1]-n[1],s[2]=t[2]-n[2],r[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),r[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),r[2]=s[2],e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}function YP(e,t){const n=e[0],i=e[1],s=e[2],r=t[0],a=t[1],o=t[2],l=Math.sqrt((n*n+i*i+s*s)*(r*r+a*a+o*o)),u=l&&UP(e,t)/l;return Math.acos(Math.min(Math.max(u,-1),1))}const KP=VP;(function(){const e=FP();return function(t,n,i,s,r,a){let o,l;for(n||(n=3),i||(i=0),s?l=Math.min(s*n+i,t.length):l=t.length,o=i;o<l;o+=n)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],r(e,e,a),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}})();const wd=[0,0,0];let El;class Pi extends MP{static get ZERO(){return El||(El=new Pi(0,0,0),Object.freeze(El)),El}constructor(t=0,n=0,i=0){super(-0,-0,-0),arguments.length===1&&da(t)?this.copy(t):(Zn.debug&&(Dn(t),Dn(n),Dn(i)),this[0]=t,this[1]=n,this[2]=i)}set(t,n,i){return this[0]=t,this[1]=n,this[2]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Zn.debug&&(Dn(t.x),Dn(t.y),Dn(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=Dn(t)}angle(t){return YP(this,t)}cross(t){return $P(this,this,t),this.check()}rotateX({radians:t,origin:n=wd}){return HP(this,this,n,t),this.check()}rotateY({radians:t,origin:n=wd}){return jP(this,this,n,t),this.check()}rotateZ({radians:t,origin:n=wd}){return XP(this,this,n,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return $w(this,this,t),this.check()}transformAsVector(t){return Uw(this,this,t),this.check()}transformByMatrix3(t){return zP(this,this,t),this.check()}transformByMatrix2(t){return BP(this,this,t),this.check()}transformByQuaternion(t){return WP(this,this,t),this.check()}}class qP extends Fw{toString(){let t="[";if(Zn.printRowMajor){t+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)t+=` ${this[i*this.RANK+n]}`}else{t+="column-major:";for(let n=0;n<this.ELEMENTS;++n)t+=` ${this[n]}`}return t+="]",t}getElementIndex(t,n){return n*this.RANK+t}getElement(t,n){return this[n*this.RANK+t]}setElement(t,n,i){return this[n*this.RANK+t]=Dn(i),this}getColumn(t,n=new Array(this.RANK).fill(-0)){const i=t*this.RANK;for(let s=0;s<this.RANK;++s)n[s]=this[i+s];return n}setColumn(t,n){const i=t*this.RANK;for(let s=0;s<this.RANK;++s)this[i+s]=n[s];return this}}function ZP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function GP(e,t){if(e===t){const n=t[1],i=t[2],s=t[3],r=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=r,e[11]=t[14],e[12]=s,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function xf(e,t){const n=t[0],i=t[1],s=t[2],r=t[3],a=t[4],o=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],h=t[11],g=t[12],v=t[13],m=t[14],p=t[15],y=n*o-i*a,_=n*l-s*a,b=n*u-r*a,S=i*l-s*o,x=i*u-r*o,I=s*u-r*l,T=c*v-d*g,k=c*m-f*g,P=c*p-h*g,D=d*m-f*v,E=d*p-h*v,O=f*p-h*m;let N=y*O-_*E+b*D+S*P-x*k+I*T;return N?(N=1/N,e[0]=(o*O-l*E+u*D)*N,e[1]=(s*E-i*O-r*D)*N,e[2]=(v*I-m*x+p*S)*N,e[3]=(f*x-d*I-h*S)*N,e[4]=(l*P-a*O-u*k)*N,e[5]=(n*O-s*P+r*k)*N,e[6]=(m*b-g*I-p*_)*N,e[7]=(c*I-f*b+h*_)*N,e[8]=(a*E-o*P+u*T)*N,e[9]=(i*P-n*E-r*T)*N,e[10]=(g*x-v*b+p*y)*N,e[11]=(d*b-c*x-h*y)*N,e[12]=(o*k-a*D-l*T)*N,e[13]=(n*D-i*k+s*T)*N,e[14]=(v*_-g*S-m*y)*N,e[15]=(c*S-d*_+f*y)*N,e):null}function QP(e){const t=e[0],n=e[1],i=e[2],s=e[3],r=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],d=e[10],f=e[11],h=e[12],g=e[13],v=e[14],m=e[15],p=t*a-n*r,y=t*o-i*r,_=n*o-i*a,b=u*g-c*h,S=u*v-d*h,x=c*v-d*g,I=t*x-n*S+i*b,T=r*x-a*S+o*b,k=u*_-c*y+d*p,P=h*_-g*y+v*p;return l*I-s*T+m*k-f*P}function Gs(e,t,n){const i=t[0],s=t[1],r=t[2],a=t[3],o=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],h=t[10],g=t[11],v=t[12],m=t[13],p=t[14],y=t[15];let _=n[0],b=n[1],S=n[2],x=n[3];return e[0]=_*i+b*o+S*d+x*v,e[1]=_*s+b*l+S*f+x*m,e[2]=_*r+b*u+S*h+x*p,e[3]=_*a+b*c+S*g+x*y,_=n[4],b=n[5],S=n[6],x=n[7],e[4]=_*i+b*o+S*d+x*v,e[5]=_*s+b*l+S*f+x*m,e[6]=_*r+b*u+S*h+x*p,e[7]=_*a+b*c+S*g+x*y,_=n[8],b=n[9],S=n[10],x=n[11],e[8]=_*i+b*o+S*d+x*v,e[9]=_*s+b*l+S*f+x*m,e[10]=_*r+b*u+S*h+x*p,e[11]=_*a+b*c+S*g+x*y,_=n[12],b=n[13],S=n[14],x=n[15],e[12]=_*i+b*o+S*d+x*v,e[13]=_*s+b*l+S*f+x*m,e[14]=_*r+b*u+S*h+x*p,e[15]=_*a+b*c+S*g+x*y,e}function kc(e,t,n){const i=n[0],s=n[1],r=n[2];let a,o,l,u,c,d,f,h,g,v,m,p;return t===e?(e[12]=t[0]*i+t[4]*s+t[8]*r+t[12],e[13]=t[1]*i+t[5]*s+t[9]*r+t[13],e[14]=t[2]*i+t[6]*s+t[10]*r+t[14],e[15]=t[3]*i+t[7]*s+t[11]*r+t[15]):(a=t[0],o=t[1],l=t[2],u=t[3],c=t[4],d=t[5],f=t[6],h=t[7],g=t[8],v=t[9],m=t[10],p=t[11],e[0]=a,e[1]=o,e[2]=l,e[3]=u,e[4]=c,e[5]=d,e[6]=f,e[7]=h,e[8]=g,e[9]=v,e[10]=m,e[11]=p,e[12]=a*i+c*s+g*r+t[12],e[13]=o*i+d*s+v*r+t[13],e[14]=l*i+f*s+m*r+t[14],e[15]=u*i+h*s+p*r+t[15]),e}function Sg(e,t,n){const i=n[0],s=n[1],r=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function JP(e,t,n,i){let s=i[0],r=i[1],a=i[2],o=Math.sqrt(s*s+r*r+a*a),l,u,c,d,f,h,g,v,m,p,y,_,b,S,x,I,T,k,P,D,E,O,N,L;return o<Zl?null:(o=1/o,s*=o,r*=o,a*=o,u=Math.sin(n),l=Math.cos(n),c=1-l,d=t[0],f=t[1],h=t[2],g=t[3],v=t[4],m=t[5],p=t[6],y=t[7],_=t[8],b=t[9],S=t[10],x=t[11],I=s*s*c+l,T=r*s*c+a*u,k=a*s*c-r*u,P=s*r*c-a*u,D=r*r*c+l,E=a*r*c+s*u,O=s*a*c+r*u,N=r*a*c-s*u,L=a*a*c+l,e[0]=d*I+v*T+_*k,e[1]=f*I+m*T+b*k,e[2]=h*I+p*T+S*k,e[3]=g*I+y*T+x*k,e[4]=d*P+v*D+_*E,e[5]=f*P+m*D+b*E,e[6]=h*P+p*D+S*E,e[7]=g*P+y*D+x*E,e[8]=d*O+v*N+_*L,e[9]=f*O+m*N+b*L,e[10]=h*O+p*N+S*L,e[11]=g*O+y*N+x*L,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function zw(e,t,n){const i=Math.sin(n),s=Math.cos(n),r=t[4],a=t[5],o=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*s+u*i,e[5]=a*s+c*i,e[6]=o*s+d*i,e[7]=l*s+f*i,e[8]=u*s-r*i,e[9]=c*s-a*i,e[10]=d*s-o*i,e[11]=f*s-l*i,e}function eR(e,t,n){const i=Math.sin(n),s=Math.cos(n),r=t[0],a=t[1],o=t[2],l=t[3],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*s-u*i,e[1]=a*s-c*i,e[2]=o*s-d*i,e[3]=l*s-f*i,e[8]=r*i+u*s,e[9]=a*i+c*s,e[10]=o*i+d*s,e[11]=l*i+f*s,e}function Ww(e,t,n){const i=Math.sin(n),s=Math.cos(n),r=t[0],a=t[1],o=t[2],l=t[3],u=t[4],c=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*s+u*i,e[1]=a*s+c*i,e[2]=o*s+d*i,e[3]=l*s+f*i,e[4]=u*s-r*i,e[5]=c*s-a*i,e[6]=d*s-o*i,e[7]=f*s-l*i,e}function tR(e,t){const n=t[0],i=t[1],s=t[2],r=t[3],a=n+n,o=i+i,l=s+s,u=n*a,c=i*a,d=i*o,f=s*a,h=s*o,g=s*l,v=r*a,m=r*o,p=r*l;return e[0]=1-d-g,e[1]=c+p,e[2]=f-m,e[3]=0,e[4]=c-p,e[5]=1-u-g,e[6]=h+v,e[7]=0,e[8]=f+m,e[9]=h-v,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function nR(e,t,n,i,s,r,a){const o=1/(n-t),l=1/(s-i),u=1/(r-a);return e[0]=r*2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r*2*l,e[6]=0,e[7]=0,e[8]=(n+t)*o,e[9]=(s+i)*l,e[10]=(a+r)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*r*2*u,e[15]=0,e}function iR(e,t,n,i,s){const r=1/Math.tan(t/2);if(e[0]=r/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0){const a=1/(i-s);e[10]=(s+i)*a,e[14]=2*s*i*a}else e[10]=-1,e[14]=-2*i;return e}const sR=iR;function rR(e,t,n,i,s,r,a){const o=1/(t-n),l=1/(i-s),u=1/(r-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*o,e[13]=(s+i)*l,e[14]=(a+r)*u,e[15]=1,e}const aR=rR;function oR(e,t,n,i){let s,r,a,o,l,u,c,d,f,h;const g=t[0],v=t[1],m=t[2],p=i[0],y=i[1],_=i[2],b=n[0],S=n[1],x=n[2];return Math.abs(g-b)<Zl&&Math.abs(v-S)<Zl&&Math.abs(m-x)<Zl?ZP(e):(d=g-b,f=v-S,h=m-x,s=1/Math.sqrt(d*d+f*f+h*h),d*=s,f*=s,h*=s,r=y*h-_*f,a=_*d-p*h,o=p*f-y*d,s=Math.sqrt(r*r+a*a+o*o),s?(s=1/s,r*=s,a*=s,o*=s):(r=0,a=0,o=0),l=f*o-h*a,u=h*r-d*o,c=d*a-f*r,s=Math.sqrt(l*l+u*u+c*c),s?(s=1/s,l*=s,u*=s,c*=s):(l=0,u=0,c=0),e[0]=r,e[1]=l,e[2]=d,e[3]=0,e[4]=a,e[5]=u,e[6]=f,e[7]=0,e[8]=o,e[9]=c,e[10]=h,e[11]=0,e[12]=-(r*g+a*v+o*m),e[13]=-(l*g+u*v+c*m),e[14]=-(d*g+f*v+h*m),e[15]=1,e)}function lR(){const e=new fa(4);return fa!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function cR(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function tl(e,t,n){const i=t[0],s=t[1],r=t[2],a=t[3];return e[0]=n[0]*i+n[4]*s+n[8]*r+n[12]*a,e[1]=n[1]*i+n[5]*s+n[9]*r+n[13]*a,e[2]=n[2]*i+n[6]*s+n[10]*r+n[14]*a,e[3]=n[3]*i+n[7]*s+n[11]*r+n[15]*a,e}(function(){const e=lR();return function(t,n,i,s,r,a){let o,l;for(n||(n=4),i||(i=0),s?l=Math.min(s*n+i,t.length):l=t.length,o=i;o<l;o+=n)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],e[3]=t[o+3],r(e,e,a),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=e[3];return t}})();var Sf;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(Sf||(Sf={}));const uR=45*Math.PI/180,dR=1,xd=.1,Sd=500,fR=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Jn extends qP{static get IDENTITY(){return gR()}static get ZERO(){return hR()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Sf}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,n,i,s,r,a,o,l,u,c,d,f,h,g,v,m){return this[0]=t,this[1]=n,this[2]=i,this[3]=s,this[4]=r,this[5]=a,this[6]=o,this[7]=l,this[8]=u,this[9]=c,this[10]=d,this[11]=f,this[12]=h,this[13]=g,this[14]=v,this[15]=m,this.check()}setRowMajor(t,n,i,s,r,a,o,l,u,c,d,f,h,g,v,m){return this[0]=t,this[1]=r,this[2]=u,this[3]=h,this[4]=n,this[5]=a,this[6]=c,this[7]=g,this[8]=i,this[9]=o,this[10]=d,this[11]=v,this[12]=s,this[13]=l,this[14]=f,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(fR)}fromObject(t){return this.check()}fromQuaternion(t){return tR(this,t),this.check()}frustum(t){const{left:n,right:i,bottom:s,top:r,near:a=xd,far:o=Sd}=t;return o===1/0?mR(this,n,i,s,r,a):nR(this,n,i,s,r,a,o),this.check()}lookAt(t){const{eye:n,center:i=[0,0,0],up:s=[0,1,0]}=t;return oR(this,n,i,s),this.check()}ortho(t){const{left:n,right:i,bottom:s,top:r,near:a=xd,far:o=Sd}=t;return aR(this,n,i,s,r,a,o),this.check()}orthographic(t){const{fovy:n=uR,aspect:i=dR,focalDistance:s=1,near:r=xd,far:a=Sd}=t;Sp(n);const o=n/2,l=s*Math.tan(o),u=l*i;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:r,far:a})}perspective(t){const{fovy:n=45*Math.PI/180,aspect:i=1,near:s=.1,far:r=500}=t;return Sp(n),sR(this,n,i,s,r),this.check()}determinant(){return QP(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,n){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const i=this.getScale(n),s=1/i[0],r=1/i[1],a=1/i[2];return t[0]=this[0]*s,t[1]=this[1]*r,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*s,t[5]=this[5]*r,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*s,t[9]=this[9]*r,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,n){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const i=this.getScale(n),s=1/i[0],r=1/i[1],a=1/i[2];return t[0]=this[0]*s,t[1]=this[1]*r,t[2]=this[2]*a,t[3]=this[4]*s,t[4]=this[5]*r,t[5]=this[6]*a,t[6]=this[8]*s,t[7]=this[9]*r,t[8]=this[10]*a,t}transpose(){return GP(this,this),this.check()}invert(){return xf(this,this),this.check()}multiplyLeft(t){return Gs(this,t,this),this.check()}multiplyRight(t){return Gs(this,this,t),this.check()}rotateX(t){return zw(this,this,t),this.check()}rotateY(t){return eR(this,this,t),this.check()}rotateZ(t){return Ww(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,n){return JP(this,this,t,n),this.check()}scale(t){return Sg(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return kc(this,this,t),this.check()}transform(t,n){return t.length===4?(n=tl(n||[-0,-0,-0,-0],t,this),bd(n,4),n):this.transformAsPoint(t,n)}transformAsPoint(t,n){const{length:i}=t;let s;switch(i){case 2:s=DP(n||[-0,-0],t,this);break;case 3:s=$w(n||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return bd(s,t.length),s}transformAsVector(t,n){let i;switch(t.length){case 2:i=NP(n||[-0,-0],t,this);break;case 3:i=Uw(n||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return bd(i,t.length),i}transformPoint(t,n){return this.transformAsPoint(t,n)}transformVector(t,n){return this.transformAsPoint(t,n)}transformDirection(t,n){return this.transformAsVector(t,n)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,n,i){return this.identity().translate([t,n,i])}}let Il,Pl;function hR(){return Il||(Il=new Jn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Il)),Il}function gR(){return Pl||(Pl=new Jn,Object.freeze(Pl)),Pl}function Sp(e){if(e>Math.PI*2)throw Error("expected radians")}function mR(e,t,n,i,s,r){const a=2*r/(n-t),o=2*r/(s-i),l=(n+t)/(n-t),u=(s+i)/(s-i),c=-1,d=-1,f=-2*r;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=d,e[12]=0,e[13]=0,e[14]=f,e[15]=0,e}function Hw(e,t=[],n=0){const i=Math.fround(e),s=e-i;return t[n]=i,t[n+1]=s,t}function vR(e){return e-Math.fround(e)}function pR(e){const t=new Float32Array(32);for(let n=0;n<4;++n)for(let i=0;i<4;++i){const s=n*4+i;Hw(e[i*4+n],t,s*2)}return t}const yR=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND

// All these functions are for substituting tan() function from Intel GPU only
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }

    // 2pi range reduction
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,_R={name:"fp32",vs:yR},bR=`
uniform fp64arithmeticUniforms {
  uniform float ONE;
} fp64;

/*
About LUMA_FP64_CODE_ELIMINATION_WORKAROUND

The purpose of this workaround is to prevent shader compilers from
optimizing away necessary arithmetic operations by swapping their sequences
or transform the equation to some 'equivalent' form.

The method is to multiply an artifical variable, ONE, which will be known to
the compiler to be 1 only at runtime. The whole expression is then represented
as a polynomial with respective to ONE. In the coefficients of all terms, only one a
and one b should appear

err = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE
*/

// Divide float number to high and low floats to extend fraction bits
vec2 split(float a) {
  const float SPLIT = 4097.0;
  float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float a_hi = t * fp64.ONE - (t - a);
  float a_lo = a * fp64.ONE - a_hi;
#else
  float a_hi = t - (t - a);
  float a_lo = a - a_hi;
#endif
  return vec2(a_hi, a_lo);
}

// Divide float number again when high float uses too many fraction bits
vec2 split2(vec2 a) {
  vec2 b = split(a.x);
  b.y += a.y;
  return b;
}

// Special sum operation when a > b
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float sum = (a + b) * fp64.ONE;
  float err = b - (sum - a) * fp64.ONE;
#else
  float sum = a + b;
  float err = b - (sum - a);
#endif
  return vec2(sum, err);
}

// General sum operation
vec2 twoSum(float a, float b) {
  float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);
#else
  float v = s - a;
  float err = (a - (s - v)) + (b - v);
#endif
  return vec2(s, err);
}

vec2 twoSub(float a, float b) {
  float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);
#else
  float v = s - a;
  float err = (a - (s - v)) - (b + v);
#endif
  return vec2(s, err);
}

vec2 twoSqr(float a) {
  float prod = a * a;
  vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *
    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;
#else
  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
  return vec2(prod, err);
}

vec2 twoProd(float a, float b) {
  float prod = a * b;
  vec2 a_fp64 = split(a);
  vec2 b_fp64 = split(b);
  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
  return vec2(prod, err);
}

vec2 sum_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSum(a.x, b.x);
  t = twoSum(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 sub_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSub(a.x, b.x);
  t = twoSub(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 mul_fp64(vec2 a, vec2 b) {
  vec2 prod = twoProd(a.x, b.x);
  // y component is for the error
  prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  return prod;
}

vec2 div_fp64(vec2 a, vec2 b) {
  float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
  vec2 yn = a * xn;
#endif
  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
  vec2 prod = twoProd(xn, diff);
  return sum_fp64(yn, prod);
}

vec2 sqrt_fp64(vec2 a) {
  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);

  float x = 1.0 / sqrt(a.x);
  float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;
#else
  vec2 yn_sqr = twoSqr(yn);
#endif
  float diff = sub_fp64(a, yn_sqr).x;
  vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  return sum_fp64(split(yn), prod);
#else
  return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,wR={ONE:1},xR={name:"fp64arithmetic",vs:bR,defaultUniforms:wR,uniformTypes:{ONE:"f32"},fp64ify:Hw,fp64LowPart:vR,fp64ifyMatrix4:pR},SR=[0,1,1,1],TR=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

out vec4 picking_vRGBcolor_Avalid;

// Normalize unsigned byte color to 0-1 range
vec3 picking_normalizeColor(vec3 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

// Normalize unsigned byte color to 0-1 range
vec4 picking_normalizeColor(vec4 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

bool picking_isColorZero(vec3 color) {
  return dot(color, vec3(1.0)) < 0.00001;
}

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.00001;
}

// Check if this vertex is highlighted 
bool isVertexHighlighted(vec3 vertexColor) {
  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
  return
    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}

// Set the current picking color
void picking_setPickingColor(vec3 pickingColor) {
  pickingColor = picking_normalizeColor(pickingColor);

  if (bool(picking.isActive)) {
    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!bool(picking.isAttribute)) {
      // Stores the picking color so that the fragment shader can render it during picking
      picking_vRGBcolor_Avalid.rgb = pickingColor;
    }
  } else {
    // Do the comparison with selected item color in vertex shader as it should mean fewer compares
    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.r = value;
  }
}

void picking_setPickingAttribute(vec2 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}

void picking_setPickingAttribute(vec3 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,AR=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

in vec4 picking_vRGBcolor_Avalid;

/*
 * Returns highlight color if this item is selected.
 */
vec4 picking_filterHighlightColor(vec4 color) {
  // If we are still picking, we don't highlight
  if (picking.isActive > 0.5) {
    return color;
  }

  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    // Blend in highlight color based on its alpha value
    float highLightAlpha = picking.highlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 picking_filterPickingColor(vec4 color) {
  if (bool(picking.isActive)) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 picking_filterColor(vec4 color) {
  vec4 highlightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highlightColor);
}
`,Tp={props:{},uniforms:{},name:"picking",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:SR},vs:TR,fs:AR,getUniforms:CR};function CR(e={},t){const n={};if(e.highlightedObjectColor!==void 0)if(e.highlightedObjectColor===null)n.isHighlightActive=!1;else{n.isHighlightActive=!0;const i=e.highlightedObjectColor.slice(0,3);n.highlightedObjectColor=i}if(e.highlightColor){const i=Array.from(e.highlightColor,s=>s/255);Number.isFinite(i[3])||(i[3]=1),n.highlightColor=i}return e.isActive!==void 0&&(n.isActive=!!e.isActive,n.isAttribute=!!e.isAttribute),e.useFloatColors!==void 0&&(n.useFloatColors=!!e.useFloatColors),n}const Ap=`uniform layerUniforms {
  uniform float opacity;
} layer;
`,kR={name:"layer",vs:Ap,fs:Ap,getUniforms:e=>({opacity:Math.pow(e.opacity,1/2.2)}),uniformTypes:{opacity:"f32"}},ER=`const SMOOTH_EDGE_RADIUS: f32 = 0.5;

struct VertexGeometry {
  position: vec4<f32>,
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  normal: vec3<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

var<private> geometry_: VertexGeometry = VertexGeometry(
  vec4<f32>(0.0, 0.0, 1.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec2<f32>(0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0)
);

struct FragmentGeometry {
  uv: vec2<f32>,
};

var<private> fragmentGeometry: FragmentGeometry;

fn smoothedge(edge: f32, x: f32) -> f32 {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,jw="#define SMOOTH_EDGE_RADIUS 0.5",IR=`${jw}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,PR=`${jw}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,Xw={name:"geometry",source:ER,vs:IR,fs:PR},RR=25;var Bt;(function(e){e[e.Start=1]="Start",e[e.Move=2]="Move",e[e.End=4]="End",e[e.Cancel=8]="Cancel"})(Bt||(Bt={}));var Ut;(function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Up=4]="Up",e[e.Down=8]="Down",e[e.Horizontal=3]="Horizontal",e[e.Vertical=12]="Vertical",e[e.All=15]="All"})(Ut||(Ut={}));var ze;(function(e){e[e.Possible=1]="Possible",e[e.Began=2]="Began",e[e.Changed=4]="Changed",e[e.Ended=8]="Ended",e[e.Recognized=8]="Recognized",e[e.Cancelled=16]="Cancelled",e[e.Failed=32]="Failed"})(ze||(ze={}));const MR="compute",OR="auto",Tf="manipulation",Gl="none",Af="pan-x",Cf="pan-y";function DR(e){if(e.includes(Gl))return Gl;const t=e.includes(Af),n=e.includes(Cf);return t&&n?Gl:t||n?t?Af:Cf:e.includes(Tf)?Tf:OR}class NR{constructor(t,n){this.actions="",this.manager=t,this.set(n)}set(t){t===MR&&(t=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=t,this.actions=t)}update(){this.set(this.manager.options.touchAction)}compute(){let t=[];for(const n of this.manager.recognizers)n.options.enable&&(t=t.concat(n.getTouchAction()));return DR(t.join(" "))}}function Ec(e){return e.trim().split(/\s+/g)}function Td(e,t,n){if(e)for(const i of Ec(t))e.addEventListener(i,n,!1)}function Ad(e,t,n){if(e)for(const i of Ec(t))e.removeEventListener(i,n,!1)}function Cp(e){return(e.ownerDocument||e).defaultView}function BR(e,t){let n=e;for(;n;){if(n===t)return!0;n=n.parentNode}return!1}function Yw(e){const t=e.length;if(t===1)return{x:Math.round(e[0].clientX),y:Math.round(e[0].clientY)};let n=0,i=0,s=0;for(;s<t;)n+=e[s].clientX,i+=e[s].clientY,s++;return{x:Math.round(n/t),y:Math.round(i/t)}}function kp(e){const t=[];let n=0;for(;n<e.pointers.length;)t[n]={clientX:Math.round(e.pointers[n].clientX),clientY:Math.round(e.pointers[n].clientY)},n++;return{timeStamp:Date.now(),pointers:t,center:Yw(t),deltaX:e.deltaX,deltaY:e.deltaY}}function Kw(e,t){const n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function Ep(e,t){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)}function FR(e,t){const n=t.x-e.x,i=t.y-e.y;return Math.atan2(i,n)*180/Math.PI}function Ip(e,t){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.atan2(i,n)*180/Math.PI}function qw(e,t){return e===t?Ut.None:Math.abs(e)>=Math.abs(t)?e<0?Ut.Left:Ut.Right:t<0?Ut.Up:Ut.Down}function VR(e,t){const n=t.center;let i=e.offsetDelta,s=e.prevDelta;const r=e.prevInput;return(t.eventType===Bt.Start||r?.eventType===Bt.End)&&(s=e.prevDelta={x:r?.deltaX||0,y:r?.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),{deltaX:s.x+(n.x-i.x),deltaY:s.y+(n.y-i.y)}}function Zw(e,t,n){return{x:t/e||0,y:n/e||0}}function LR(e,t){return Ep(t[0],t[1])/Ep(e[0],e[1])}function UR(e,t){return Ip(t[1],t[0])-Ip(e[1],e[0])}function $R(e,t){const n=e.lastInterval||t,i=t.timeStamp-n.timeStamp;let s,r,a,o;if(t.eventType!==Bt.Cancel&&(i>RR||n.velocity===void 0)){const l=t.deltaX-n.deltaX,u=t.deltaY-n.deltaY,c=Zw(i,l,u);r=c.x,a=c.y,s=Math.abs(c.x)>Math.abs(c.y)?c.x:c.y,o=qw(l,u),e.lastInterval=t}else s=n.velocity,r=n.velocityX,a=n.velocityY,o=n.direction;t.velocity=s,t.velocityX=r,t.velocityY=a,t.direction=o}function zR(e,t){const{session:n}=e,{pointers:i}=t,{length:s}=i;n.firstInput||(n.firstInput=kp(t)),s>1&&!n.firstMultiple?n.firstMultiple=kp(t):s===1&&(n.firstMultiple=!1);const{firstInput:r,firstMultiple:a}=n,o=a?a.center:r.center,l=t.center=Yw(i);t.timeStamp=Date.now(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=FR(o,l),t.distance=Kw(o,l);const{deltaX:u,deltaY:c}=VR(n,t);t.deltaX=u,t.deltaY=c,t.offsetDirection=qw(t.deltaX,t.deltaY);const d=Zw(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=Math.abs(d.x)>Math.abs(d.y)?d.x:d.y,t.scale=a?LR(a.pointers,i):1,t.rotation=a?UR(a.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length;let f=e.element;return BR(t.srcEvent.target,f)&&(f=t.srcEvent.target),t.target=f,$R(n,t),t}function WR(e,t,n){const i=n.pointers.length,s=n.changedPointers.length,r=t&Bt.Start&&i-s===0,a=t&(Bt.End|Bt.Cancel)&&i-s===0;n.isFirst=!!r,n.isFinal=!!a,r&&(e.session={}),n.eventType=t;const o=zR(e,n);e.emit("hammer.input",o),e.recognize(o),e.session.prevInput=o}let HR=class{constructor(t){this.evEl="",this.evWin="",this.evTarget="",this.domHandler=n=>{this.manager.options.enable&&this.handler(n)},this.manager=t,this.element=t.element,this.target=t.options.inputTarget||t.element}callback(t,n){WR(this.manager,t,n)}init(){Td(this.element,this.evEl,this.domHandler),Td(this.target,this.evTarget,this.domHandler),Td(Cp(this.element),this.evWin,this.domHandler)}destroy(){Ad(this.element,this.evEl,this.domHandler),Ad(this.target,this.evTarget,this.domHandler),Ad(Cp(this.element),this.evWin,this.domHandler)}};const jR={pointerdown:Bt.Start,pointermove:Bt.Move,pointerup:Bt.End,pointercancel:Bt.Cancel,pointerout:Bt.Cancel},XR="pointerdown",YR="pointermove pointerup pointercancel";class KR extends HR{constructor(t){super(t),this.evEl=XR,this.evWin=YR,this.store=this.manager.session.pointerEvents=[],this.init()}handler(t){const{store:n}=this;let i=!1;const s=jR[t.type],r=t.pointerType,a=r==="touch";let o=n.findIndex(l=>l.pointerId===t.pointerId);s&Bt.Start&&(t.buttons||a)?o<0&&(n.push(t),o=n.length-1):s&(Bt.End|Bt.Cancel)&&(i=!0),!(o<0)&&(n[o]=t,this.callback(s,{pointers:n,changedPointers:[t],eventType:s,pointerType:r,srcEvent:t}),i&&n.splice(o,1))}}const qR=["","webkit","Moz","MS","ms","o"];function ZR(e,t){const n=t[0].toUpperCase()+t.slice(1);for(const i of qR){const s=i?i+n:t;if(s in e)return s}}const GR=1,Pp=2,Rp={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class QR{constructor(t,n){this.options={...Rp,...n,cssProps:{...Rp.cssProps,...n.cssProps},inputTarget:n.inputTarget||t},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new KR(this),this.touchAction=new NR(this,this.options.touchAction),this.toggleCssProps(!0)}set(t){return Object.assign(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this}stop(t){this.session.stopped=t?Pp:GR}recognize(t){const{session:n}=this;if(n.stopped)return;this.session.prevented&&t.srcEvent.preventDefault();let i;const{recognizers:s}=this;let{curRecognizer:r}=n;(!r||r&&r.state&ze.Recognized)&&(r=n.curRecognizer=null);let a=0;for(;a<s.length;)i=s[a],n.stopped!==Pp&&(!r||i===r||i.canRecognizeWith(r))?i.recognize(t):i.reset(),!r&&i.state&(ze.Began|ze.Changed|ze.Ended)&&(r=n.curRecognizer=i),a++}get(t){const{recognizers:n}=this;for(let i=0;i<n.length;i++)if(n[i].options.event===t)return n[i];return null}add(t){if(Array.isArray(t)){for(const i of t)this.add(i);return this}const n=this.get(t.options.event);return n&&this.remove(n),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t}remove(t){if(Array.isArray(t)){for(const i of t)this.remove(i);return this}const n=typeof t=="string"?this.get(t):t;if(n){const{recognizers:i}=this,s=i.indexOf(n);s!==-1&&(i.splice(s,1),this.touchAction.update())}return this}on(t,n){if(!t||!n)return;const{handlers:i}=this;for(const s of Ec(t))i[s]=i[s]||[],i[s].push(n)}off(t,n){if(!t)return;const{handlers:i}=this;for(const s of Ec(t))n?i[s]&&i[s].splice(i[s].indexOf(n),1):delete i[s]}emit(t,n){const i=this.handlers[t]&&this.handlers[t].slice();if(!i||!i.length)return;const s=n;s.type=t,s.preventDefault=function(){n.srcEvent.preventDefault()};let r=0;for(;r<i.length;)i[r](s),r++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(t){const{element:n}=this;if(n){for(const[i,s]of Object.entries(this.options.cssProps)){const r=ZR(n.style,i);t?(this.oldCssProps[r]=n.style[r],n.style[r]=s):n.style[r]=this.oldCssProps[r]||""}t||(this.oldCssProps={})}}}let JR=1;function eM(){return JR++}function Mp(e){return e&ze.Cancelled?"cancel":e&ze.Ended?"end":e&ze.Changed?"move":e&ze.Began?"start":""}class Gw{constructor(t){this.options=t,this.id=eM(),this.state=ze.Possible,this.simultaneous={},this.requireFail=[]}set(t){return Object.assign(this.options,t),this.manager.touchAction.update(),this}recognizeWith(t){if(Array.isArray(t)){for(const s of t)this.recognizeWith(s);return this}let n;if(typeof t=="string"){if(n=this.manager.get(t),!n)throw new Error(`Cannot find recognizer ${t}`)}else n=t;const{simultaneous:i}=this;return i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this}dropRecognizeWith(t){if(Array.isArray(t)){for(const i of t)this.dropRecognizeWith(i);return this}let n;return typeof t=="string"?n=this.manager.get(t):n=t,n&&delete this.simultaneous[n.id],this}requireFailure(t){if(Array.isArray(t)){for(const s of t)this.requireFailure(s);return this}let n;if(typeof t=="string"){if(n=this.manager.get(t),!n)throw new Error(`Cannot find recognizer ${t}`)}else n=t;const{requireFail:i}=this;return i.indexOf(n)===-1&&(i.push(n),n.requireFailure(this)),this}dropRequireFailure(t){if(Array.isArray(t)){for(const i of t)this.dropRequireFailure(i);return this}let n;if(typeof t=="string"?n=this.manager.get(t):n=t,n){const i=this.requireFail.indexOf(n);i>-1&&this.requireFail.splice(i,1)}return this}hasRequireFailures(){return!!this.requireFail.find(t=>t.options.enable)}canRecognizeWith(t){return!!this.simultaneous[t.id]}emit(t){if(!t)return;const{state:n}=this;n<ze.Ended&&this.manager.emit(this.options.event+Mp(n),t),this.manager.emit(this.options.event,t),t.additionalEvent&&this.manager.emit(t.additionalEvent,t),n>=ze.Ended&&this.manager.emit(this.options.event+Mp(n),t)}tryEmit(t){this.canEmit()?this.emit(t):this.state=ze.Failed}canEmit(){let t=0;for(;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ze.Failed|ze.Possible)))return!1;t++}return!0}recognize(t){const n={...t};if(!this.options.enable){this.reset(),this.state=ze.Failed;return}this.state&(ze.Recognized|ze.Cancelled|ze.Failed)&&(this.state=ze.Possible),this.state=this.process(n),this.state&(ze.Began|ze.Changed|ze.Ended|ze.Cancelled)&&this.tryEmit(n)}getEventNames(){return[this.options.event]}reset(){}}class Qw extends Gw{attrTest(t){const n=this.options.pointers;return n===0||t.pointers.length===n}process(t){const{state:n}=this,{eventType:i}=t,s=n&(ze.Began|ze.Changed),r=this.attrTest(t);return s&&(i&Bt.Cancel||!r)?n|ze.Cancelled:s||r?i&Bt.End?n|ze.Ended:n&ze.Began?n|ze.Changed:ze.Began:ze.Failed}}class Op extends Gw{constructor(t={}){super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...t}),this.pTime=null,this.pCenter=null,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[Tf]}process(t){const{options:n}=this,i=t.pointers.length===n.pointers,s=t.distance<n.threshold,r=t.deltaTime<n.time;if(this.reset(),t.eventType&Bt.Start&&this.count===0)return this.failTimeout();if(s&&r&&i){if(t.eventType!==Bt.End)return this.failTimeout();const a=this.pTime?t.timeStamp-this.pTime<n.interval:!0,o=!this.pCenter||Kw(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,!o||!a?this.count=1:this.count+=1,this._input=t,this.count%n.taps===0)return this.hasRequireFailures()?(this._timer=setTimeout(()=>{this.state=ze.Recognized,this.tryEmit(this._input)},n.interval),ze.Began):ze.Recognized}return ze.Failed}failTimeout(){return this._timer=setTimeout(()=>{this.state=ze.Failed},this.options.interval),ze.Failed}reset(){clearTimeout(this._timer)}emit(t){this.state===ze.Recognized&&(t.tapCount=this.count,this.manager.emit(this.options.event,t))}}const tM=["","start","move","end","cancel","up","down","left","right"];class Dp extends Qw{constructor(t={}){super({enable:!0,pointers:1,event:"pan",threshold:10,direction:Ut.All,...t}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:t}}=this,n=[];return t&Ut.Horizontal&&n.push(Cf),t&Ut.Vertical&&n.push(Af),n}getEventNames(){return tM.map(t=>this.options.event+t)}directionTest(t){const{options:n}=this;let i=!0,{distance:s}=t,{direction:r}=t;const a=t.deltaX,o=t.deltaY;return r&n.direction||(n.direction&Ut.Horizontal?(r=a===0?Ut.None:a<0?Ut.Left:Ut.Right,i=a!==this.pX,s=Math.abs(t.deltaX)):(r=o===0?Ut.None:o<0?Ut.Up:Ut.Down,i=o!==this.pY,s=Math.abs(t.deltaY))),t.direction=r,i&&s>n.threshold&&!!(r&n.direction)}attrTest(t){return super.attrTest(t)&&(!!(this.state&ze.Began)||!(this.state&ze.Began)&&this.directionTest(t))}emit(t){this.pX=t.deltaX,this.pY=t.deltaY;const n=Ut[t.direction].toLowerCase();n&&(t.additionalEvent=this.options.event+n),super.emit(t)}}const nM=["","start","move","end","cancel","in","out"];class iM extends Qw{constructor(t={}){super({enable:!0,event:"pinch",threshold:0,pointers:2,...t})}getTouchAction(){return[Gl]}getEventNames(){return nM.map(t=>this.options.event+t)}attrTest(t){return super.attrTest(t)&&(Math.abs(t.scale-1)>this.options.threshold||!!(this.state&ze.Began))}emit(t){if(t.scale!==1){const n=t.scale<1?"in":"out";t.additionalEvent=this.options.event+n}super.emit(t)}}class fu{constructor(t,n,i){this.element=t,this.callback=n,this.options=i}}const sM=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",rM=sM.indexOf("firefox")!==-1,Np=4.000244140625,aM=40,oM=.25;class lM extends fu{constructor(t,n,i){super(t,n,{enable:!0,...i}),this.handleEvent=s=>{if(!this.options.enable)return;let r=s.deltaY;globalThis.WheelEvent&&(rM&&s.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(r/=globalThis.devicePixelRatio),s.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(r*=aM)),r!==0&&r%Np===0&&(r=Math.floor(r/Np)),s.shiftKey&&r&&(r=r*oM),this.callback({type:"wheel",center:{x:s.clientX,y:s.clientY},delta:-r,srcEvent:s,pointerType:"mouse",target:s.target})},t.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(t,n){t==="wheel"&&(this.options.enable=n)}}const Bp=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class cM extends fu{constructor(t,n,i){super(t,n,{enable:!0,...i}),this.handleEvent=r=>{this.handleOverEvent(r),this.handleOutEvent(r),this.handleEnterEvent(r),this.handleLeaveEvent(r),this.handleMoveEvent(r)},this.pressed=!1;const{enable:s}=this.options;this.enableMoveEvent=s,this.enableLeaveEvent=s,this.enableEnterEvent=s,this.enableOutEvent=s,this.enableOverEvent=s,Bp.forEach(r=>t.addEventListener(r,this.handleEvent))}destroy(){Bp.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,n){switch(t){case"pointermove":this.enableMoveEvent=n;break;case"pointerover":this.enableOverEvent=n;break;case"pointerout":this.enableOutEvent=n;break;case"pointerenter":this.enableEnterEvent=n;break;case"pointerleave":this.enableLeaveEvent=n;break}}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit("pointerover",t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit("pointerout",t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit("pointerenter",t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit("pointerleave",t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.buttons===0&&(this.pressed=!1),this.pressed||this._emit("pointermove",t);break;case"mouseup":this.pressed=!1;break}}_emit(t,n){this.callback({type:t,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const Fp=["keydown","keyup"];class uM extends fu{constructor(t,n,i){super(t,n,{enable:!0,tabIndex:0,...i}),this.handleEvent=s=>{const r=s.target||s.srcElement;r.tagName==="INPUT"&&r.type==="text"||r.tagName==="TEXTAREA"||(this.enableDownEvent&&s.type==="keydown"&&this.callback({type:"keydown",srcEvent:s,key:s.key,target:s.target}),this.enableUpEvent&&s.type==="keyup"&&this.callback({type:"keyup",srcEvent:s,key:s.key,target:s.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,t.tabIndex=this.options.tabIndex,t.style.outline="none",Fp.forEach(s=>t.addEventListener(s,this.handleEvent))}destroy(){Fp.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,n){t==="keydown"&&(this.enableDownEvent=n),t==="keyup"&&(this.enableUpEvent=n)}}class dM extends fu{constructor(t,n,i){super(t,n,i),this.handleEvent=s=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:s.clientX,y:s.clientY},srcEvent:s,pointerType:"mouse",target:s.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,n){t==="contextmenu"&&(this.options.enable=n)}}const Vp=1,kf=2,Lp=4,fM={pointerdown:Vp,pointermove:kf,pointerup:Lp,mousedown:Vp,mousemove:kf,mouseup:Lp},hM=0,gM=1,mM=2,vM=1,pM=2,yM=4;function _M(e){const t=fM[e.srcEvent.type];if(!t)return null;const{buttons:n,button:i}=e.srcEvent;let s=!1,r=!1,a=!1;return t===kf?(s=!!(n&vM),r=!!(n&yM),a=!!(n&pM)):(s=i===hM,r=i===gM,a=i===mM),{leftButton:s,middleButton:r,rightButton:a}}function bM(e,t){const n=e.center;if(!n)return null;const i=t.getBoundingClientRect(),s=i.width/t.offsetWidth||1,r=i.height/t.offsetHeight||1,a={x:(n.x-i.left-t.clientLeft)/s,y:(n.y-i.top-t.clientTop)/r};return{center:n,offsetCenter:a}}const wM={srcElement:"root",priority:0};class xM{constructor(t,n){this.handleEvent=i=>{if(this.isEmpty())return;const s=this._normalizeEvent(i);let r=i.srcEvent.target;for(;r&&r!==s.rootElement;){if(this._emit(s,r),s.handled)return;r=r.parentNode}this._emit(s,"root")},this.eventManager=t,this.recognizerName=n,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,n,i,s=!1,r=!1){const{handlers:a,handlersByElement:o}=this,l={...wM,...i};let u=o.get(l.srcElement);u||(u=[],o.set(l.srcElement,u));const c={type:t,handler:n,srcElement:l.srcElement,priority:l.priority};s&&(c.once=!0),r&&(c.passive=!0),a.push(c),this._active=this._active||!c.passive;let d=u.length-1;for(;d>=0&&!(u[d].priority>=c.priority);)d--;u.splice(d+1,0,c)}remove(t,n){const{handlers:i,handlersByElement:s}=this;for(let r=i.length-1;r>=0;r--){const a=i[r];if(a.type===t&&a.handler===n){i.splice(r,1);const o=s.get(a.srcElement);o.splice(o.indexOf(a),1),o.length===0&&s.delete(a.srcElement)}}this._active=i.some(r=>!r.passive)}_emit(t,n){const i=this.handlersByElement.get(n);if(i){let s=!1;const r=()=>{t.handled=!0},a=()=>{t.handled=!0,s=!0},o=[];for(let l=0;l<i.length;l++){const{type:u,handler:c,once:d}=i[l];if(c({...t,type:u,stopPropagation:r,stopImmediatePropagation:a}),d&&o.push(i[l]),s)break}for(let l=0;l<o.length;l++){const{type:u,handler:c}=o[l];this.remove(u,c)}}}_normalizeEvent(t){const n=this.eventManager.getElement();return{...t,..._M(t),...bM(t,n),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}function SM(e){if("recognizer"in e)return e;let t;const n=Array.isArray(e)?[...e]:[e];if(typeof n[0]=="function"){const i=n.shift(),s=n.shift()||{};t=new i(s)}else t=n.shift();return{recognizer:t,recognizeWith:typeof n[0]=="string"?[n[0]]:n[0],requireFailure:typeof n[1]=="string"?[n[1]]:n[1]}}class TM{constructor(t=null,n={}){if(this._onBasicInput=i=>{this.manager.emit(i.srcEvent.type,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...n},this.events=new Map,this.element=t,!!t){this.manager=new QR(t,this.options);for(const i of this.options.recognizers){const{recognizer:s,recognizeWith:r,requireFailure:a}=SM(i);this.manager.add(s),r&&s.recognizeWith(r),a&&s.requireFailure(a)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new lM(t,this._onOtherEvent,{enable:!1}),this.moveInput=new cM(t,this._onOtherEvent,{enable:!1}),this.keyInput=new uM(t,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new dM(t,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(t,n,i){this._addEventHandler(t,n,i,!1)}once(t,n,i){this._addEventHandler(t,n,i,!0)}watch(t,n,i){this._addEventHandler(t,n,i,!1,!0)}off(t,n){this._removeEventHandler(t,n)}_toggleRecognizer(t,n){const{manager:i}=this;if(!i)return;const s=i.get(t);s&&(s.set({enable:n}),i.touchAction.update()),this.wheelInput?.enableEventType(t,n),this.moveInput?.enableEventType(t,n),this.keyInput?.enableEventType(t,n),this.contextmenuInput?.enableEventType(t,n)}_addEventHandler(t,n,i,s,r){if(typeof t!="string"){i=n;for(const[u,c]of Object.entries(t))this._addEventHandler(u,c,i,s,r);return}const{manager:a,events:o}=this;if(!a)return;let l=o.get(t);if(!l){const u=this._getRecognizerName(t)||t;l=new xM(this,u),o.set(t,l),a&&a.on(t,l.handleEvent)}l.add(t,n,i,s,r),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,n){if(typeof t!="string"){for(const[r,a]of Object.entries(t))this._removeEventHandler(r,a);return}const{events:i}=this,s=i.get(t);if(s&&(s.remove(t,n),s.isEmpty())){const{recognizerName:r}=s;let a=!1;for(const o of i.values())if(o.recognizerName===r&&!o.isEmpty()){a=!0;break}a||this._toggleRecognizer(r,!1)}}_getRecognizerName(t){return this.manager.recognizers.find(n=>n.getEventNames().includes(t))?.options.event}}const et={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(et,"IDENTITY",{get:()=>(tt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Yn={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Zi={common:0,meters:1,pixels:2},Ef={click:"onClick",dblclick:"onClick",panstart:"onDragStart",panmove:"onDrag",panend:"onDragEnd"},Up={multipan:[Dp,{threshold:10,direction:Ut.Vertical,pointers:2}],pinch:[iM,{},null,["multipan"]],pan:[Dp,{threshold:1},["pinch"],["multipan"]],dblclick:[Op,{event:"dblclick",taps:2}],click:[Op,{event:"click"},null,["dblclick"]]};function AM(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}return!1}function nl(e){let t={},n;return i=>{for(const s in i)if(!AM(i[s],t[s])){n=e(i),t=i;break}return n}}const $p=[0,0,0,0],CM=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Jw=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],kM=[0,0,0],ex=[0,0,0],EM=nl(RM);function tx(e,t,n=ex){n.length<3&&(n=[n[0],n[1],0]);let i=n,s,r=!0;switch(t===et.LNGLAT_OFFSETS||t===et.METER_OFFSETS?s=n:s=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Yn.WEB_MERCATOR:(t===et.LNGLAT||t===et.CARTESIAN)&&(s=[0,0,0],r=!1);break;case Yn.WEB_MERCATOR_AUTO_OFFSET:t===et.LNGLAT?i=s:t===et.CARTESIAN&&(i=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],s=e.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Yn.IDENTITY:i=e.position.map(Math.fround),i[2]=i[2]||0;break;case Yn.GLOBE:r=!1,s=null;break;default:r=!1}return{geospatialOrigin:s,shaderCoordinateOrigin:i,offsetMode:r}}function IM(e,t,n){const{viewMatrixUncentered:i,projectionMatrix:s}=e;let{viewMatrix:r,viewProjectionMatrix:a}=e,o=$p,l=$p,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:d,offsetMode:f}=tx(e,t,n);return f&&(l=e.projectPosition(c||d),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,o=tl([],l,a),r=i||r,a=Gs([],s,r),a=Gs([],a,CM)),{viewMatrix:r,viewProjectionMatrix:a,projectionCenter:o,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:d,geospatialOrigin:c}}function PM({viewport:e,devicePixelRatio:t=1,modelMatrix:n=null,coordinateSystem:i=et.DEFAULT,coordinateOrigin:s=ex,autoWrapLongitude:r=!1}){i===et.DEFAULT&&(i=e.isGeospatial?et.LNGLAT:et.CARTESIAN);const a=EM({viewport:e,devicePixelRatio:t,coordinateSystem:i,coordinateOrigin:s});return a.wrapLongitude=r,a.modelMatrix=n||Jw,a}function RM({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:s,viewProjectionMatrix:r,originCommon:a,cameraPosCommon:o,shaderCoordinateOrigin:l,geospatialOrigin:u}=IM(e,n,i),c=e.getDistanceScales(),d=[e.width*t,e.height*t],f=tl([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,h={coordinateSystem:n,projectionMode:e.projectionMode,coordinateOrigin:l,commonOrigin:a.slice(0,3),center:s,pseudoMeters:!!e._pseudoMeters,viewportSize:d,devicePixelRatio:t,focalDistance:f,commonUnitsPerMeter:c.unitsPerMeter,commonUnitsPerWorldUnit:c.unitsPerMeter,commonUnitsPerWorldUnit2:kM,scale:e.scale,wrapLongitude:!1,viewProjectionMatrix:r,modelMatrix:Jw,cameraPosition:o};if(u){const g=e.getDistanceScales(u);switch(n){case et.METER_OFFSETS:h.commonUnitsPerWorldUnit=g.unitsPerMeter,h.commonUnitsPerWorldUnit2=g.unitsPerMeter2;break;case et.LNGLAT:case et.LNGLAT_OFFSETS:e._pseudoMeters||(h.commonUnitsPerMeter=g.unitsPerMeter),h.commonUnitsPerWorldUnit=g.unitsPerDegree,h.commonUnitsPerWorldUnit2=g.unitsPerDegree2;break;case et.CARTESIAN:h.commonUnitsPerWorldUnit=[1,1,g.unitsPerMeter[2]],h.commonUnitsPerWorldUnit2=[0,0,g.unitsPerMeter2[2]];break}}return h}const MM=Object.keys(et).map(e=>`const COORDINATE_SYSTEM_${e}: i32 = ${et[e]};`).join(""),OM=Object.keys(Yn).map(e=>`const PROJECTION_MODE_${e}: i32 = ${Yn[e]};`).join(""),DM=Object.keys(Zi).map(e=>`const UNIT_${e.toUpperCase()}: i32 = ${Zi[e]};`).join(""),NM=`${MM}
${OM}
${DM}

const TILE_SIZE: f32 = 512.0;
const PI: f32 = 3.1415926536;
const WORLD_SCALE: f32 = TILE_SIZE / (PI * 2.0);
const ZERO_64_LOW: vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);
const EARTH_RADIUS: f32 = 6370972.0; // meters
const GLOBE_RADIUS: f32 = 256.0;

// -----------------------------------------------------------------------------
// Uniform block (converted from GLSL uniform block)
// -----------------------------------------------------------------------------
struct ProjectUniforms {
  wrapLongitude: i32,
  coordinateSystem: i32,
  commonUnitsPerMeter: vec3<f32>,
  projectionMode: i32,
  scale: f32,
  commonUnitsPerWorldUnit: vec3<f32>,
  commonUnitsPerWorldUnit2: vec3<f32>,
  center: vec4<f32>,
  modelMatrix: mat4x4<f32>,
  viewProjectionMatrix: mat4x4<f32>,
  viewportSize: vec2<f32>,
  devicePixelRatio: f32,
  focalDistance: f32,
  cameraPosition: vec3<f32>,
  coordinateOrigin: vec3<f32>,
  commonOrigin: vec3<f32>,
  pseudoMeters: i32,
};

@group(0) @binding(0)
var<uniform> project: ProjectUniforms;

// -----------------------------------------------------------------------------
// Geometry data
// (In your GLSL code, "geometry" was assumed to be available globally. In WGSL,
// you might supply this via vertex attributes or a uniform. Here we define a
// uniform struct for demonstration.)
// -----------------------------------------------------------------------------

// Structure to carry additional geometry data used by deck.gl filters.
struct Geometry {
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  position: vec4<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

// @group(0) @binding(1)
var<private> geometry: Geometry;
`,BM=`${NM}

// -----------------------------------------------------------------------------
// Functions
// -----------------------------------------------------------------------------

// Returns an adjustment factor for commonUnitsPerMeter
fn _project_size_at_latitude(lat: f32) -> f32 {
  let y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

// Overloaded version: scales a value in meters at a given latitude.
fn _project_size_at_latitude_m(meters: f32, lat: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * _project_size_at_latitude(lat);
}

// Computes a non-linear scale factor based on geometry.
// (Note: This function relies on "geometry" being provided.)
fn project_size() -> f32 {
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
      project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
      project.pseudoMeters == 0) {
    if (geometry.position.w == 0.0) {
      return _project_size_at_latitude(geometry.worldPosition.y);
    }
    let y: f32 = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    let y2 = y * y;
    let y4 = y2 * y2;
    let y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

// Overloads to scale offsets (meters to world units)
fn project_size_float(meters: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * project_size();
}

fn project_size_vec2(meters: vec2<f32>) -> vec2<f32> {
  return meters * project.commonUnitsPerMeter.xy * project_size();
}

fn project_size_vec3(meters: vec3<f32>) -> vec3<f32> {
  return meters * project.commonUnitsPerMeter * project_size();
}

fn project_size_vec4(meters: vec4<f32>) -> vec4<f32> {
  return vec4<f32>(meters.xyz * project.commonUnitsPerMeter, meters.w);
}

// Returns a rotation matrix aligning the zaxis with the given up vector.
fn project_get_orientation_matrix(up: vec3<f32>) -> mat3x3<f32> {
  let uz = normalize(up);
  let ux = select(
    vec3<f32>(1.0, 0.0, 0.0),
    normalize(vec3<f32>(uz.y, -uz.x, 0.0)),
    abs(uz.z) == 1.0
  );
  let uy = cross(uz, ux);
  return mat3x3<f32>(ux, uy, uz);
}

// Since WGSL does not support "out" parameters, we return a struct.
struct RotationResult {
  needsRotation: bool,
  transform: mat3x3<f32>,
};

fn project_needs_rotation(commonPosition: vec3<f32>) -> RotationResult {
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    return RotationResult(true, project_get_orientation_matrix(commonPosition));
  } else {
    return RotationResult(false, mat3x3<f32>());  // identity alternative if needed
  };
}

// Projects a normal vector from the current coordinate system to world space.
fn project_normal(vector: vec3<f32>) -> vec3<f32> {
  let normal_modelspace = project.modelMatrix * vec4<f32>(vector, 0.0);
  var n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
  let rotResult = project_needs_rotation(geometry.position.xyz);
  if (rotResult.needsRotation) {
    n = rotResult.transform * n;
  }
  return n;
}

// Applies a scale offset based on y-offset (dy)
fn project_offset_(offset: vec4<f32>) -> vec4<f32> {
  let dy: f32 = offset.y;
  let commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
  return vec4<f32>(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

// Projects lng/lat coordinates to a unit tile [0,1]
fn project_mercator_(lnglat: vec2<f32>) -> vec2<f32> {
  var x = lnglat.x;
  if (project.wrapLongitude != 0) {
    x = ((x + 180.0) % 360.0) - 180.0;
  }
  let y = clamp(lnglat.y, -89.9, 89.9);
  return vec2<f32>(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// Projects lng/lat/z coordinates for a globe projection.
fn project_globe_(lnglatz: vec3<f32>) -> vec3<f32> {
  let lambda = radians(lnglatz.x);
  let phi = radians(lnglatz.y);
  let cosPhi = cos(phi);
  let D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
  return vec3<f32>(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

// Projects positions (with an optional 64-bit low part) from the input
// coordinate system to the common space.
fn project_position_vec4_f64(position: vec4<f32>, position64Low: vec3<f32>) -> vec4<f32> {
  var position_world = project.modelMatrix * position;

  // Work around for a Mac+NVIDIA bug:
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_mercator_(position_world.xy),
        _project_size_at_latitude_m(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world = vec4f(position_world.xyz + project.coordinateOrigin, position_world.w);
    }
  }
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
        return vec4<f32>(
          project_mercator_(position_world.xy) - project.commonOrigin.xy,
          project_size_float(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
      (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
       (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
        project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world = vec4f(position_world.xyz - project.coordinateOrigin, position_world.w);
  }

  return project_offset_(position_world) +
         project_offset_(project.modelMatrix * vec4<f32>(position64Low, 0.0));
}

// Overloaded versions for different input types.
fn project_position_vec4_f32(position: vec4<f32>) -> vec4<f32> {
  return project_position_vec4_f64(position, ZERO_64_LOW);
}

fn project_position_vec3_f64(position: vec3<f32>, position64Low: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), position64Low);
  return projected_position.xyz;
}

fn project_position_vec3_f32(position: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

fn project_position_vec2_f32(position: vec2<f32>) -> vec2<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

// Transforms a common space position to clip space.
fn project_common_position_to_clipspace_with_projection(position: vec4<f32>, viewProjectionMatrix: mat4x4<f32>, center: vec4<f32>) -> vec4<f32> {
  return viewProjectionMatrix * position + center;
}

// Uses the project viewProjectionMatrix and center.
fn project_common_position_to_clipspace(position: vec4<f32>) -> vec4<f32> {
  return project_common_position_to_clipspace_with_projection(position, project.viewProjectionMatrix, project.center);
}

// Returns a clip space offset corresponding to a given number of screen pixels.
fn project_pixel_size_to_clipspace(pixels: vec2<f32>) -> vec2<f32> {
  let offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
  return offset * project.focalDistance;
}

fn project_meter_size_to_pixel(meters: f32) -> f32 {
  return project_size_float(meters) * project.scale;
}

fn project_unit_size_to_pixel(size: f32, unit: i32) -> f32 {
  if (unit == UNIT_METERS) {
    return project_meter_size_to_pixel(size);
  } else if (unit == UNIT_COMMON) {
    return size * project.scale;
  }
  // UNIT_PIXELS: no scaling applied.
  return size;
}

fn project_pixel_size_float(pixels: f32) -> f32 {
  return pixels / project.scale;
}

fn project_pixel_size_vec2(pixels: vec2<f32>) -> vec2<f32> {
  return pixels / project.scale;
}
`,FM=Object.keys(et).map(e=>`const int COORDINATE_SYSTEM_${e} = ${et[e]};`).join(""),VM=Object.keys(Yn).map(e=>`const int PROJECTION_MODE_${e} = ${Yn[e]};`).join(""),LM=Object.keys(Zi).map(e=>`const int UNIT_${e.toUpperCase()} = ${Zi[e]};`).join(""),UM=`${FM}
${VM}
${LM}
uniform projectUniforms {
bool wrapLongitude;
int coordinateSystem;
vec3 commonUnitsPerMeter;
int projectionMode;
float scale;
vec3 commonUnitsPerWorldUnit;
vec3 commonUnitsPerWorldUnit2;
vec4 center;
mat4 modelMatrix;
mat4 viewProjectionMatrix;
vec2 viewportSize;
float devicePixelRatio;
float focalDistance;
vec3 cameraPosition;
vec3 coordinateOrigin;
vec3 commonOrigin;
bool pseudoMeters;
} project;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project.pseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project.commonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project.commonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project.commonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project.wrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project.modelMatrix * position;
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project.coordinateOrigin;
}
}
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project.commonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project.coordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
return offset * project.focalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project.scale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project.scale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project.scale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project.scale;
}
`,$M={};function zM(e=$M){return"viewport"in e?PM(e):{}}const Tg={name:"project",dependencies:[_R,Xw],source:BM,vs:UM,getUniforms:zM,uniformTypes:{wrapLongitude:"f32",coordinateSystem:"i32",commonUnitsPerMeter:"vec3<f32>",projectionMode:"i32",scale:"f32",commonUnitsPerWorldUnit:"vec3<f32>",commonUnitsPerWorldUnit2:"vec3<f32>",center:"vec4<f32>",modelMatrix:"mat4x4<f32>",viewProjectionMatrix:"mat4x4<f32>",viewportSize:"vec2<f32>",devicePixelRatio:"f32",focalDistance:"f32",cameraPosition:"vec3<f32>",coordinateOrigin:"vec3<f32>",commonOrigin:"vec3<f32>",pseudoMeters:"f32"}},WM=`// Define a structure to hold both the clip-space position and the common position.
struct ProjectResult {
  clipPosition: vec4<f32>,
  commonPosition: vec4<f32>,
};

// This function mimics the GLSL version with the 'out' parameter by returning both values.
fn project_position_to_clipspace_and_commonspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> ProjectResult {
  // Compute the projected position.
  let projectedPosition: vec3<f32> = project_position_vec3_f64(position, position64Low);

  // Start with the provided offset.
  var finalOffset: vec3<f32> = offset;

  // Get whether a rotation is needed and the rotation matrix.
  let rotationResult = project_needs_rotation(projectedPosition);

  // If rotation is needed, update the offset.
  if (rotationResult.needsRotation) {
    finalOffset = rotationResult.transform * offset;
  }

  // Compute the common position.
  let commonPosition: vec4<f32> = vec4<f32>(projectedPosition + finalOffset, 1.0);

  // Convert to clip-space.
  let clipPosition: vec4<f32> = project_common_position_to_clipspace(commonPosition);

  return ProjectResult(clipPosition, commonPosition);
}

// A convenience overload that returns only the clip-space position.
fn project_position_to_clipspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> vec4<f32> {
  return project_position_to_clipspace_and_commonspace(position, position64Low, offset).clipPosition;
}
`,HM=`vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,hu={name:"project32",dependencies:[Tg],source:WM,vs:HM};function jM(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function sa(e,t){const n=tl([],t,e);return cR(n,n,1/n[3]),n}function zp(e,t){const n=e%t;return n<0?t+n:n}function If(e,t,n){return e<t?t:e>n?n:e}function XM(e){return Math.log(e)*Math.LOG2E}const Ag=Math.log2||XM;function Gi(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const oi=Math.PI,nx=oi/4,Gn=oi/180,Pf=180/oi,ha=512,Ic=4003e4,Rl=85.051129,YM=1.5;function KM(e){return Ag(e)}function Pc(e){const[t,n]=e;Gi(Number.isFinite(t)),Gi(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const i=t*Gn,s=n*Gn,r=ha*(i+oi)/(2*oi),a=ha*(oi+Math.log(Math.tan(nx+s*.5)))/(2*oi);return[r,a]}function ga(e){const[t,n]=e,i=t/ha*(2*oi)-oi,s=2*(Math.atan(Math.exp(n/ha*(2*oi)-oi))-nx);return[i*Pf,s*Pf]}function qM(e){const{latitude:t}=e;Gi(Number.isFinite(t));const n=Math.cos(t*Gn);return KM(Ic*n)-9}function Cd(e){const t=Math.cos(e*Gn);return ha/Ic/t}function Rf(e){const{latitude:t,longitude:n,highPrecision:i=!1}=e;Gi(Number.isFinite(t)&&Number.isFinite(n));const s=ha,r=Math.cos(t*Gn),a=s/360,o=a/r,l=s/Ic/r,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,o,l],degreesPerUnit:[1/a,1/o,1/l]};if(i){const c=Gn*Math.tan(t*Gn)/r,d=a*c/2,f=s/Ic*c,h=f/o*l;u.unitsPerDegree2=[0,d,f],u.unitsPerMeter2=[h,0,h]}return u}function ix(e,t){const[n,i,s]=e,[r,a,o]=t,{unitsPerMeter:l,unitsPerMeter2:u}=Rf({longitude:n,latitude:i,highPrecision:!0}),c=Pc(e);c[0]+=r*(l[0]+u[0]*a),c[1]+=a*(l[1]+u[1]*a);const d=ga(c),f=(s||0)+(o||0);return Number.isFinite(s)||Number.isFinite(o)?[d[0],d[1],f]:d}function ZM(e){const{height:t,pitch:n,bearing:i,altitude:s,scale:r,center:a}=e,o=jM();kc(o,o,[0,0,-s]),zw(o,o,-n*Gn),Ww(o,o,i*Gn);const l=r/t;return Sg(o,o,[l,l,l]),a&&kc(o,o,LP([],a)),o}function GM(e){const{width:t,height:n,altitude:i,pitch:s=0,offset:r,center:a,scale:o,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=Rc(YM)}=e;i!==void 0&&(c=Rc(i));const d=c*Gn,f=s*Gn,h=sx(c);let g=h;a&&(g+=a[2]*o/Math.cos(f)/n);const v=d*(.5+(r?r[1]:0)/n),m=Math.sin(v)*g/Math.sin(If(Math.PI/2-f-v,.01,Math.PI-.01)),p=Math.sin(f)*m+g,y=g*10,_=Math.min(p*u,y);return{fov:d,aspect:t/n,focalDistance:h,near:l,far:_}}function Rc(e){return 2*Math.atan(.5/e)*Pf}function sx(e){return .5/Math.tan(.5*e*Gn)}function rx(e,t){const[n,i,s=0]=e;return Gi(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(s)),sa(t,[n,i,s,1])}function gu(e,t,n=0){const[i,s,r]=e;if(Gi(Number.isFinite(i)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(r))return sa(t,[i,s,r,1]);const a=sa(t,[i,s,0,1]),o=sa(t,[i,s,1,1]),l=a[2],u=o[2],c=l===u?0:((n||0)-l)/(u-l);return Lw([],a,o,c)}function QM(e){const{width:t,height:n,bounds:i,minExtent:s=0,maxZoom:r=24,offset:a=[0,0]}=e,[[o,l],[u,c]]=i,d=JM(e.padding),f=Pc([o,If(c,-Rl,Rl)]),h=Pc([u,If(l,-Rl,Rl)]),g=[Math.max(Math.abs(h[0]-f[0]),s),Math.max(Math.abs(h[1]-f[1]),s)],v=[t-d.left-d.right-Math.abs(a[0])*2,n-d.top-d.bottom-Math.abs(a[1])*2];Gi(v[0]>0&&v[1]>0);const m=v[0]/g[0],p=v[1]/g[1],y=(d.right-d.left)/2/m,_=(d.top-d.bottom)/2/p,b=[(h[0]+f[0])/2+y,(h[1]+f[1])/2+_],S=ga(b),x=Math.min(r,Ag(Math.abs(Math.min(m,p))));return Gi(Number.isFinite(x)),{longitude:S[0],latitude:S[1],zoom:x}}function JM(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(Gi(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const Wp=Math.PI/180;function eO(e,t=0){const{width:n,height:i,unproject:s}=e,r={targetZ:t},a=s([0,i],r),o=s([n,i],r);let l,u;const c=e.fovy?.5*e.fovy*Wp:Math.atan(.5/e.altitude),d=(90-e.pitch)*Wp;return c>d-.01?(l=Hp(e,0,t),u=Hp(e,n,t)):(l=s([0,0],r),u=s([n,0],r)),[a,o,u,l]}function Hp(e,t,n){const{pixelUnprojectionMatrix:i}=e,s=sa(i,[t,0,1,1]),r=sa(i,[t,e.height,1,1]),o=(n*e.distanceScales.unitsPerMeter[2]-s[2])/(r[2]-s[2]),l=Lw([],s,r,o),u=ga(l);return u.push(n),u}const jp=512;function tO(e){const{width:t,height:n,pitch:i=0}=e;let{longitude:s,latitude:r,zoom:a,bearing:o=0}=e;(s<-180||s>180)&&(s=zp(s+180,360)-180),(o<-180||o>180)&&(o=zp(o+180,360)-180);const l=Ag(n/jp);if(a<=l)a=l,r=0;else{const u=n/2/Math.pow(2,a),c=ga([0,u])[1];if(r<c)r=c;else{const d=ga([0,jp-u])[1];r>d&&(r=d)}}return{width:t,height:n,longitude:s,latitude:r,zoom:a,pitch:i,bearing:o}}const ax=`
uniform shadowUniforms {
  bool drawShadowMap;
  bool useShadowMap;
  vec4 color;
  highp int lightId;
  float lightCount;
  mat4 viewProjectionMatrix0;
  mat4 viewProjectionMatrix1;
  vec4 projectCenter0;
  vec4 projectCenter1;
} shadow;
`,nO=`
const int max_lights = 2;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  mat4 viewProjectionMatrices[max_lights];
  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;
  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;
  vec4 projectCenters[max_lights];
  projectCenters[0] = shadow.projectCenter0;
  projectCenters[1] = shadow.projectCenter1;

  if (shadow.drawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);
  }
  if (shadow.useShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow.lightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,iO=`
${ax}
${nO}
`,sO=`
const int max_lights = 2;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow.drawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow.useShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow.lightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow.color.a / shadow.lightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,rO=`
${ax}
${sO}
`,aO=nl(dO),oO=nl(fO),lO=[0,0,0,1],cO=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function uO(e,t){const[n,i,s]=e,r=gu([n,i,s],t);return Number.isFinite(s)?r:[r[0],r[1],0]}function dO({viewport:e,center:t}){return new Jn(e.viewProjectionMatrix).invert().transform(t)}function fO({viewport:e,shadowMatrices:t}){const n=[],i=e.pixelUnprojectionMatrix,s=e.isGeospatial?void 0:1,r=[[0,0,s],[e.width,0,s],[0,e.height,s],[e.width,e.height,s],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(a=>uO(a,i));for(const a of t){const o=a.clone().translate(new Pi(e.center).negate()),l=r.map(c=>o.transform(c)),u=new Jn().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});n.push(u.multiplyRight(a))}return n}function hO(e){const{shadowEnabled:t=!0,project:n}=e;if(!t||!n||!e.shadowMatrices||!e.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:e.dummyShadowMap,shadow_uShadowMap1:e.dummyShadowMap};const i=Tg.getUniforms(n),s=aO({viewport:n.viewport,center:i.center}),r=[],a=oO({shadowMatrices:e.shadowMatrices,viewport:n.viewport}).slice();for(let l=0;l<e.shadowMatrices.length;l++){const u=a[l],c=u.clone().translate(new Pi(n.viewport.center).negate());i.coordinateSystem===et.LNGLAT&&i.projectionMode===Yn.WEB_MERCATOR?(a[l]=c,r[l]=s):(a[l]=u.clone().multiplyRight(cO),r[l]=c.transform(s))}const o={drawShadowMap:!!e.drawToShadowMap,useShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,color:e.shadowColor||lO,lightId:e.shadowLightId||0,lightCount:e.shadowMatrices.length,shadow_uShadowMap0:e.dummyShadowMap,shadow_uShadowMap1:e.dummyShadowMap};for(let l=0;l<a.length;l++)o[`viewProjectionMatrix${l}`]=a[l],o[`projectCenter${l}`]=r[l];for(let l=0;l<2;l++)o[`shadow_uShadowMap${l}`]=e.shadowMaps&&e.shadowMaps[l]||e.dummyShadowMap;return o}const Xp={name:"shadow",dependencies:[Tg],vs:iO,fs:rO,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:hO,uniformTypes:{drawShadowMap:"f32",useShadowMap:"f32",color:"vec4<f32>",lightId:"i32",lightCount:"f32",viewProjectionMatrix0:"mat4x4<f32>",viewProjectionMatrix1:"mat4x4<f32>",projectCenter0:"vec4<f32>",projectCenter1:"vec4<f32>"}},mu={...Tp,defaultUniforms:{...Tp.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},gO=[Xw],mO=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"],vO=[];function pO(e){const t=js.getDefaultShaderAssembler();for(const i of gO)t.addDefaultModule(i);const n=e==="glsl"?mO:vO;for(const i of n)t.addShaderHook(i);return t}const yO=[255,255,255],_O=1;let bO=0;class wO{constructor(t={}){this.type="ambient";const{color:n=yO}=t,{intensity:i=_O}=t;this.id=t.id||`ambient-${bO++}`,this.color=n,this.intensity=i}}const xO=[255,255,255],SO=1,TO=[0,0,-1];let AO=0;class Yp{constructor(t={}){this.type="directional";const{color:n=xO}=t,{intensity:i=SO}=t,{direction:s=TO}=t,{_shadow:r=!1}=t;this.id=t.id||`directional-${AO++}`,this.color=n,this.intensity=i,this.type="directional",this.direction=new Pi(s).normalize().toArray(),this.shadow=r}getProjectedLight(t){return this}}class CO{constructor(t,n={id:"pass"}){const{id:i}=n;this.id=i,this.device=t,this.props={...n}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class Cg extends CO{constructor(){super(...arguments),this._lastRenderIndex=-1}render(t){const[n,i]=this.device.canvasContext.getDrawingBufferSize(),s=t.clearCanvas??!0,r=t.clearColor??(s?[0,0,0,0]:!1),a=s?1:!1,o=s?0:!1,l=t.colorMask??15,u={viewport:[0,0,n,i]};t.colorMask&&(u.colorMask=l),t.scissorRect&&(u.scissorRect=t.scissorRect);const c=this.device.beginRenderPass({framebuffer:t.target,parameters:u,clearColor:r,clearDepth:a,clearStencil:o});try{return this._drawLayers(c,t)}finally{c.end(),this.device.submit()}}_drawLayers(t,n){const{target:i,shaderModuleProps:s,viewports:r,views:a,onViewportActive:o,clearStack:l=!0}=n;n.pass=n.pass||"unknown",l&&(this._lastRenderIndex=-1);const u=[];for(const c of r){const d=a&&a[c.id];o?.(c);const f=this._getDrawLayerParams(c,n),h=c.subViewports||[c];for(const g of h){const v=this._drawLayersInViewport(t,{target:i,shaderModuleProps:s,viewport:g,view:d,pass:n.pass,layers:n.layers},f);u.push(v)}}return u}_getDrawLayerParams(t,{layers:n,pass:i,isPicking:s=!1,layerFilter:r,cullRect:a,effects:o,shaderModuleProps:l},u=!1){const c=[],d=ox(this._lastRenderIndex+1),f={layer:n[0],viewport:t,isPicking:s,renderPass:i,cullRect:a},h={};for(let g=0;g<n.length;g++){const v=n[g],m=this._shouldDrawLayer(v,f,r,h),p={shouldDrawLayer:m};m&&!u&&(p.shouldDrawLayer=!0,p.layerRenderIndex=d(v,m),p.shaderModuleProps=this._getShaderModuleProps(v,o,i,l),p.layerParameters={...v.context.deck?.props.parameters,...this.getLayerParameters(v,g,t)}),c[g]=p}return c}_drawLayersInViewport(t,{layers:n,shaderModuleProps:i,pass:s,target:r,viewport:a,view:o},l){const u=kO(this.device,{shaderModuleProps:i,target:r,viewport:a});if(o&&o.props.clear){const d=o.props.clear===!0?{color:!0,depth:!0}:o.props.clear;this.device.beginRenderPass({framebuffer:r,parameters:{viewport:u,scissorRect:u},clearColor:d.color?[0,0,0,0]:!1,clearDepth:d.depth?1:!1}).end()}const c={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};t.setParameters({viewport:u});for(let d=0;d<n.length;d++){const f=n[d],h=l[d],{shouldDrawLayer:g}=h;if(g&&f.props.pickable&&c.pickableCount++,f.isComposite&&c.compositeCount++,f.isDrawable&&h.shouldDrawLayer){const{layerRenderIndex:v,shaderModuleProps:m,layerParameters:p}=h;c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,v),m.project&&(m.project.viewport=a),f.context.renderPass=t;try{f._drawLayer({renderPass:t,shaderModuleProps:m,uniforms:{layerIndex:v},parameters:p})}catch(y){f.raiseError(y,`drawing ${f} to ${s}`)}}}return c}shouldDrawLayer(t){return!0}getShaderModuleProps(t,n,i){return null}getLayerParameters(t,n,i){return t.props.parameters}_shouldDrawLayer(t,n,i,s){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;n.layer=t;let a=t.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(n))return!1;n.layer=a,a=a.parent}if(i){const o=n.layer.id;if(o in s||(s[o]=i(n)),!s[o])return!1}return t.activateViewport(n.viewport),!0}_getShaderModuleProps(t,n,i,s){const r=this.device.canvasContext.cssToDeviceRatio(),a=t.internalState?.propsInTransition||t.props,o={layer:a,picking:{isActive:!1},project:{viewport:t.context.viewport,devicePixelRatio:r,modelMatrix:a.modelMatrix,coordinateSystem:a.coordinateSystem,coordinateOrigin:a.coordinateOrigin,autoWrapLongitude:t.wrapLongitude}};if(n)for(const l of n)Kp(o,l.getShaderModuleProps?.(t,o));return Kp(o,this.getShaderModuleProps(t,n,o),s)}}function ox(e=0,t={}){const n={},i=(s,r)=>{const a=s.props._offset,o=s.id,l=s.parent&&s.parent.id;let u;if(l&&!(l in t)&&i(s.parent,!1),l in n){const c=n[l]=n[l]||ox(t[l],t);u=c(s,r),n[o]=c}else Number.isFinite(a)?(u=a+(t[l]||0),n[o]=null):u=e;return r&&u>=e&&(e=u+1),t[o]=u,u};return i}function kO(e,{shaderModuleProps:t,target:n,viewport:i}){const s=t?.project?.devicePixelRatio??e.canvasContext.cssToDeviceRatio(),[,r]=e.canvasContext.getDrawingBufferSize(),a=n?n.height:r,o=i;return[o.x*s,a-(o.y+o.height)*s,o.width*s,o.height*s]}function Kp(e,...t){for(const n of t)if(n)for(const i in n)e[i]?Object.assign(e[i],n[i]):e[i]=n[i];return e}class EO extends Cg{constructor(t,n){super(t,n);const i=t.createTexture({format:"rgba8unorm",width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},mipmaps:!0}),s=t.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1});this.fbo=t.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[i],depthStencilAttachment:s})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(t){const n=this.fbo,i=this.device.canvasContext.cssToDeviceRatio(),s=t.viewports[0],r=s.width*i,a=s.height*i,o=[1,1,1,1];(r!==n.width||a!==n.height)&&n.resize({width:r,height:a}),super.render({...t,clearColor:o,target:n,pass:"shadow"})}getLayerParameters(t,n,i){return{...t.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:"less-equal"}}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getShaderModuleProps(t,n,i){return{shadow:{project:i.project,drawToShadowMap:!0}}}}const IO={color:[255,255,255],intensity:1},qp=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],PO=[0,0,0,200/255];class lx{constructor(t={}){this.id="lighting-effect",this.shadowColor=PO,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(t)}setup(t){this.context=t;const{device:n,deck:i}=t;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(n),i._addDefaultShaderModule(Xp),this.dummyShadowMap=n.createTexture({width:1,height:1}))}setProps(t){this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[];for(const n in t){const i=t[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.context&&this.setup(this.context),this.props=t}preRender({layers:t,layerFilter:n,viewports:i,onViewportActive:s,views:r}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:n,viewports:i,onViewportActive:s,views:r,shaderModuleProps:{shadow:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}getShaderModuleProps(t,n){const i=this.shadow?{project:n.project,shadowMaps:this.shadowPasses.map(a=>a.getShadowMap()),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},s={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(a=>a.getProjectedLight({layer:t})),pointLights:this.pointLights.map(a=>a.getProjectedLight({layer:t}))},r=t.props.material;return{shadow:i,lighting:s,phongMaterial:r,gouraudMaterial:r}}cleanup(t){for(const n of this.shadowPasses)n.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,t.deck._removeDefaultShaderModule(Xp))}_calculateMatrices(){const t=[];for(const n of this.directionalLights){const i=new Jn().lookAt({eye:new Pi(n.direction).negate()});t.push(i)}return t}_createShadowPasses(t){for(let n=0;n<this.directionalLights.length;n++){const i=new EO(t);this.shadowPasses[n]=i}}_applyDefaultLights(){const{ambientLight:t,pointLights:n,directionalLights:i}=this;!t&&n.length===0&&i.length===0&&(this.ambientLight=new wO(IO),this.directionalLights.push(new Yp(qp[0]),new Yp(qp[1])))}}class RO{constructor(t={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,n,{size:i=1,type:s,padding:r=0,copy:a=!1,initialize:o=!1,maxCount:l}){const u=s||t&&t.constructor||Float32Array,c=n*i+r;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let d=1/0;l&&(d=l*i+r);const f=this._allocate(u,c,o,d);return t&&a?f.set(t):o||f.fill(0,0,4),this._release(t),f}release(t){this._release(t)}_allocate(t,n,i,s){let r=Math.max(Math.ceil(n*this.opts.overAlloc),1);r>s&&(r=s);const a=this._pool,o=t.BYTES_PER_ELEMENT*r,l=a.findIndex(u=>u.byteLength>=o);if(l>=0){const u=new t(a.splice(l,1)[0],0,r);return i&&u.fill(0),u}return new t(r)}_release(t){if(!ArrayBuffer.isView(t))return;const n=this._pool,{buffer:i}=t,{byteLength:s}=i,r=n.findIndex(a=>a.byteLength>=s);r<0?n.push(i):(r>0||n.length<this.opts.poolSize)&&n.splice(r,0,i),n.length>this.opts.poolSize&&n.shift()}}const Eo=new RO;function Ga(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function MO(e,t){const n=e%t;return n<0?t+n:n}function OO(e){return[e[12],e[13],e[14]]}function DO(e){return{left:Nr(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:Nr(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:Nr(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:Nr(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:Nr(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:Nr(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const Zp=new Pi;function Nr(e,t,n,i){Zp.set(e,t,n);const s=Zp.len();return{distance:i/s,normal:new Pi(-e/s,-t/s,-n/s)}}function NO(e){return e-Math.fround(e)}let Wa;function kd(e,t){const{size:n=1,startIndex:i=0}=t,s=t.endIndex!==void 0?t.endIndex:e.length,r=(s-i)/n;Wa=Eo.allocate(Wa,r,{type:Float32Array,size:n*2});let a=i,o=0;for(;a<s;){for(let l=0;l<n;l++){const u=e[a++];Wa[o+l]=u,Wa[o+l+n]=NO(u)}o+=n*2}return Wa.subarray(0,r*n*2)}function BO(e){let t=null,n=!1;for(const i of e)i&&(t?(n||(t=[[t[0][0],t[0][1]],[t[1][0],t[1][1]]],n=!0),t[0][0]=Math.min(t[0][0],i[0][0]),t[0][1]=Math.min(t[0][1],i[0][1]),t[1][0]=Math.max(t[1][0],i[1][0]),t[1][1]=Math.max(t[1][1],i[1][1])):t=i);return t}const FO=Math.PI/180,VO=Ga(),Gp=[0,0,0],LO={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function UO({width:e,height:t,orthographic:n,fovyRadians:i,focalDistance:s,padding:r,near:a,far:o}){const l=e/t,u=n?new Jn().orthographic({fovy:i,aspect:l,focalDistance:s,near:a,far:o}):new Jn().perspective({fovy:i,aspect:l,near:a,far:o});if(r){const{left:c=0,right:d=0,top:f=0,bottom:h=0}=r,g=Zt((c+e-d)/2,0,e)-e/2,v=Zt((f+t-h)/2,0,t)-t/2;u[8]-=g*2/e,u[9]+=v*2/t}return u}class Ea{constructor(t={}){this._frustumPlanes={},this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||LO,this.focalDistance=t.focalDistance||1,this.position=t.position||Gp,this.modelMatrix=t.modelMatrix||null;const{longitude:n,latitude:i}=t;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Yn.WEB_MERCATOR:Yn.WEB_MERCATOR_AUTO_OFFSET:Yn.IDENTITY}equals(t){return t instanceof Ea?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&ko(t.projectionMatrix,this.projectionMatrix)&&ko(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:n=!0}={}){const i=this.projectPosition(t),s=rx(i,this.pixelProjectionMatrix),[r,a]=s,o=n?a:this.height-a;return t.length===2?[r,o]:[r,o,s[2]]}unproject(t,{topLeft:n=!0,targetZ:i}={}){const[s,r,a]=t,o=n?r:this.height-r,l=i&&i*this.distanceScales.unitsPerMeter[2],u=gu([s,o,a],this.pixelUnprojectionMatrix,l),[c,d,f]=this.unprojectPosition(u);return Number.isFinite(a)?[c,d,f]:Number.isFinite(i)?[c,d,i]:[c,d]}projectPosition(t){const[n,i]=this.projectFlat(t),s=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,i,s]}unprojectPosition(t){const[n,i]=this.unprojectFlat(t),s=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[n,i,s]}projectFlat(t){if(this.isGeospatial){const n=Pc(t);return n[1]=Zt(n[1],-318,830),n}return t}unprojectFlat(t){return this.isGeospatial?ga(t):t}getBounds(t={}){const n={targetZ:t.z||0},i=this.unproject([0,0],n),s=this.unproject([this.width,0],n),r=this.unproject([0,this.height],n),a=this.unproject([this.width,this.height],n);return[Math.min(i[0],s[0],r[0],a[0]),Math.min(i[1],s[1],r[1],a[1]),Math.max(i[0],s[0],r[0],a[0]),Math.max(i[1],s[1],r[1],a[1])]}getDistanceScales(t){return t&&this.isGeospatial?Rf({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:n,width:i=1,height:s=1}){return t<this.x+this.width&&this.x<t+i&&n<this.y+this.height&&this.y<n+s}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,DO(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,n){return null}_initProps(t){const n=t.longitude,i=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=qM({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||Rf({latitude:i,longitude:n}));const s=Math.pow(2,this.zoom);this.scale=s;const{position:r,modelMatrix:a}=t;let o=Gp;if(r&&(o=a?new Jn(a).transformAsVector(r,[]):r),this.isGeospatial){const l=this.projectPosition([n,i,0]);this.center=new Pi(o).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(o)}_initMatrices(t){const{viewMatrix:n=VO,projectionMatrix:i=null,orthographic:s=!1,fovyRadians:r,fovy:a=75,near:o=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=n,this.viewMatrix=new Jn().multiplyRight(n).translate(new Pi(this.center).negate()),this.projectionMatrix=i||UO({width:this.width,height:this.height,orthographic:s,fovyRadians:r||a*FO,focalDistance:c,padding:u,near:o,far:l});const d=Ga();Gs(d,d,this.projectionMatrix),Gs(d,d,this.viewMatrix),this.viewProjectionMatrix=d,this.viewMatrixInverse=xf([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=OO(this.viewMatrixInverse);const f=Ga(),h=Ga();Sg(f,f,[this.width/2,-this.height/2,1]),kc(f,f,[1,-1,0]),Gs(h,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=xf(Ga(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||tt.warn("Pixel project matrix not invertible")()}}Ea.displayName="Viewport";class ma extends Ea{constructor(t={}){const{latitude:n=0,longitude:i=0,zoom:s=0,pitch:r=0,bearing:a=0,nearZMultiplier:o=.1,farZMultiplier:l=1.01,nearZ:u,farZ:c,orthographic:d=!1,projectionMatrix:f,repeat:h=!1,worldOffset:g=0,position:v,padding:m,legacyMeterSizes:p=!1}=t;let{width:y,height:_,altitude:b=1.5}=t;const S=Math.pow(2,s);y=y||1,_=_||1;let x,I=null;if(f)b=f[5]/2,x=Rc(b);else{t.fovy?(x=t.fovy,b=sx(x)):x=Rc(b);let k;if(m){const{top:P=0,bottom:D=0}=m;k=[0,Zt((P+_-D)/2,0,_)-_/2]}I=GM({width:y,height:_,scale:S,center:v&&[0,0,v[2]*Cd(n)],offset:k,pitch:r,fovy:x,nearZMultiplier:o,farZMultiplier:l}),Number.isFinite(u)&&(I.near=u),Number.isFinite(c)&&(I.far=c)}let T=ZM({height:_,pitch:r,bearing:a,scale:S,altitude:b});g&&(T=new Jn().translate([512*g,0,0]).multiplyLeft(T)),super({...t,width:y,height:_,viewMatrix:T,longitude:i,latitude:n,zoom:s,...I,fovy:x,focalDistance:b}),this.latitude=n,this.longitude=i,this.zoom=s,this.pitch=r,this.bearing=a,this.altitude=b,this.fovy=x,this.orthographic=d,this._subViewports=h?[]:null,this._pseudoMeters=p,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),n=Math.floor((t[0]+180)/360),i=Math.ceil((t[2]-180)/360);for(let s=n;s<=i;s++){const r=s?new ma({...this,worldOffset:s}):this;this._subViewports.push(r)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[n,i]=this.projectFlat(t),s=(t[2]||0)*Cd(t[1]);return[n,i,s]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[n,i]=this.unprojectFlat(t),s=(t[2]||0)/Cd(i);return[n,i,s]}addMetersToLngLat(t,n){return ix(t,n)}panByPosition(t,n){const i=gu(n,this.pixelUnprojectionMatrix),s=this.projectFlat(t),r=Cc([],s,Vw([],i)),a=Cc([],this.center,r),[o,l]=this.unprojectFlat(a);return{longitude:o,latitude:l}}getBounds(t={}){const n=eO(this,t.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(t,n={}){const{width:i,height:s}=this,{longitude:r,latitude:a,zoom:o}=QM({width:i,height:s,bounds:t,...n});return new ma({width:i,height:s,longitude:r,latitude:a,zoom:o})}}ma.displayName="WebMercatorViewport";const Qp=[0,0,0];function Ed(e,t,n=!1){const i=t.projectPosition(e);if(n&&t instanceof ma){const[s,r,a=0]=e,o=t.getDistanceScales([s,r]);i[2]=a*o.unitsPerMeter[2]}return i}function $O(e){const{viewport:t,modelMatrix:n,coordinateOrigin:i}=e;let{coordinateSystem:s,fromCoordinateSystem:r,fromCoordinateOrigin:a}=e;return s===et.DEFAULT&&(s=t.isGeospatial?et.LNGLAT:et.CARTESIAN),r===void 0&&(r=s),a===void 0&&(a=i),{viewport:t,coordinateSystem:s,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:r,fromCoordinateOrigin:a}}function cx(e,{viewport:t,modelMatrix:n,coordinateSystem:i,coordinateOrigin:s,offsetMode:r}){let[a,o,l=0]=e;switch(n&&([a,o,l]=tl([],[a,o,l,1],n)),i){case et.LNGLAT:return Ed([a,o,l],t,r);case et.LNGLAT_OFFSETS:return Ed([a+s[0],o+s[1],l+(s[2]||0)],t,r);case et.METER_OFFSETS:return Ed(ix(s,[a,o,l]),t,r);case et.CARTESIAN:default:return t.isGeospatial?[a+s[0],o+s[1],l+s[2]]:t.projectPosition([a,o,l])}}function zO(e,t){const{viewport:n,coordinateSystem:i,coordinateOrigin:s,modelMatrix:r,fromCoordinateSystem:a,fromCoordinateOrigin:o}=$O(t),{autoOffset:l=!0}=t,{geospatialOrigin:u=Qp,shaderCoordinateOrigin:c=Qp,offsetMode:d=!1}=l?tx(n,i,s):{},f=cx(e,{viewport:n,modelMatrix:r,coordinateSystem:a,coordinateOrigin:o,offsetMode:d});if(d){const h=n.projectPosition(u||c);KP(f,f,h)}return f}let WO=1,HO=1;class ux{time=0;channels=new Map;animations=new Map;playing=!1;lastEngineTime=-1;constructor(){}addChannel(t){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:s=1,repeat:r=1}=t,a=WO++,o={time:0,delay:n,duration:i,rate:s,repeat:r};return this._setChannelTime(o,this.time),this.channels.set(a,o),a}removeChannel(t){this.channels.delete(t);for(const[n,i]of this.animations)i.channel===t&&this.detachAnimation(n)}isFinished(t){const n=this.channels.get(t);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(t){if(t===void 0)return this.time;const n=this.channels.get(t);return n===void 0?-1:n.time}setTime(t){this.time=Math.max(0,t);const n=this.channels.values();for(const s of n)this._setChannelTime(s,this.time);const i=this.animations.values();for(const s of i){const{animation:r,channel:a}=s;r.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,n){const i=HO++;return this.animations.set(i,{animation:t,channel:n}),t.setTime(this.getTime(n)),i}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,n){const i=n-t.delay,s=t.duration*t.repeat;i>=s?t.time=t.duration*t.rate:(t.time=Math.max(0,i)%t.duration,t.time*=t.rate)}}function jO(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function XO(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}let YO=0;const KO={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:e=>console.error(e),stats:yf.stats.get(`animation-loop-${YO++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class qO{device=null;canvas=null;props;animationProps=null;timeline=null;stats;cpuTime;gpuTime;frameRate;display;needsRedraw="initialized";_initialized=!1;_running=!1;_animationFrameId=null;_nextFramePromise=null;_resolveNextFrame=null;_cpuStartTime=0;_error=null;constructor(t){if(this.props={...KO,...t},t=this.props,!t.device)throw new Error("No device provided");const{useDevicePixels:n=!0}=this.props;this.stats=t.stats||new au({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:t.autoResizeViewport,autoResizeDrawingBuffer:t.autoResizeDrawingBuffer,useDevicePixels:n}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setError(t){if(this.props.onError(t),this._error=Error(),this.device?.canvasContext?.canvas instanceof HTMLCanvasElement){const i=document.createElement("h1");i.innerHTML=t.message,i.style.position="absolute",i.style.top="20%",i.style.left="10px",i.style.color="black",i.style.backgroundColor="red",document.body.appendChild(i)}}setNeedsRedraw(t){return this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.props.autoResizeViewport=t.autoResizeViewport||!1),"autoResizeDrawingBuffer"in t&&(this.props.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer||!1),"useDevicePixels"in t&&(this.props.useDevicePixels=t.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let t;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(t!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(t){const n=t instanceof Error?t:new Error("Unknown error");throw this.props.onError(n),n}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){return this.device?.isLost||this._error?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(t){this.display&&(this.display.destroy(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_requestAnimationFrame(){this._running&&(this._animationFrameId=jO(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(XO(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(t){if(this.display){this.display._renderFrame(t);return}this.props.onRender(this._getAnimationProps()),this.device?.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){const t=this.device?.canvasContext?.canvas;if(!this.device||!t)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:t,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:t,height:n,aspect:i}=this._getSizeAndAspect();(t!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=this.device.canvasContext?.canvas||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",this.canvas instanceof HTMLCanvasElement&&t.appendChild(this.canvas),t.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){if(!this.device)return{width:1,height:1,aspect:1};const[t,n]=this.device?.canvasContext?.getPixelSize()||[1,1];let i=1;const s=this.device?.canvasContext?.canvas;return s&&s.clientHeight?i=s.clientWidth/s.clientHeight:t>0&&n>0&&(i=t/n),{width:t,height:n,aspect:i}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.props.autoResizeDrawingBuffer&&this.device?.canvasContext?.resize({useDevicePixels:this.props.useDevicePixels})}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(t){t instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[t.offsetX,t.offsetY])}_onMouseleave(t){this._getAnimationProps()._mousePosition=null}}const Id={};function vu(e="id"){Id[e]=Id[e]||1;const t=Id[e]++;return`${e}-${t}`}class Jp{id;userData={};topology;bufferLayout=[];vertexCount;indices;attributes;constructor(t){if(this.id=t.id||vu("geometry"),this.topology=t.topology,this.indices=t.indices||null,this.attributes=t.attributes,this.vertexCount=t.vertexCount,this.bufferLayout=t.bufferLayout||[],this.indices&&!(this.indices.usage&pt.INDEX))throw new Error("Index buffer must have INDEX usage")}destroy(){this.indices?.destroy();for(const t of Object.values(this.attributes))t.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(t){return t.byteLength/12}}function ZO(e,t){if(t instanceof Jp)return t;const n=GO(e,t),{attributes:i,bufferLayout:s}=QO(e,t);return new Jp({topology:t.topology||"triangle-list",bufferLayout:s,vertexCount:t.vertexCount,indices:n,attributes:i})}function GO(e,t){if(!t.indices)return;const n=t.indices.value;return e.createBuffer({usage:pt.INDEX,data:n})}function QO(e,t){const n=[],i={};for(const[r,a]of Object.entries(t.attributes)){let o=r;switch(r){case"POSITION":o="positions";break;case"NORMAL":o="normals";break;case"TEXCOORD_0":o="texCoords";break;case"COLOR_0":o="colors";break}if(a){i[o]=e.createBuffer({data:a.value,id:`${r}-buffer`});const{value:l,size:u,normalized:c}=a;n.push({name:o,format:YI(l,u,c)})}}const s=t._calculateVertexCount(t.attributes,t.indices);return{attributes:i,bufferLayout:n,vertexCount:s}}class kg{static defaultProps={...ca.defaultProps};static getDefaultPipelineFactory(t){return t._lumaData.defaultPipelineFactory=t._lumaData.defaultPipelineFactory||new kg(t),t._lumaData.defaultPipelineFactory}device;destroyPolicy;_hashCounter=0;_hashes={};_renderPipelineCache={};_computePipelineCache={};constructor(t){this.device=t,this.destroyPolicy=t.props._factoryDestroyPolicy}createRenderPipeline(t){const n={...ca.defaultProps,...t},i=this._hashRenderPipeline(n);if(!this._renderPipelineCache[i]){const s=this.device.createRenderPipeline({...n,id:n.id?`${n.id}-cached`:void 0});s.hash=i,this._renderPipelineCache[i]={pipeline:s,useCount:0}}return this._renderPipelineCache[i].useCount++,this._renderPipelineCache[i].pipeline}createComputePipeline(t){const n={...yc.defaultProps,...t},i=this._hashComputePipeline(n);if(!this._computePipelineCache[i]){const s=this.device.createComputePipeline({...n,id:n.id?`${n.id}-cached`:void 0});s.hash=i,this._computePipelineCache[i]={pipeline:s,useCount:0}}return this._computePipelineCache[i].useCount++,this._computePipelineCache[i].pipeline}release(t){const n=t.hash,i=t instanceof yc?this._computePipelineCache:this._renderPipelineCache;i[n].useCount--,i[n].useCount===0&&this.destroyPolicy==="unused"&&(i[n].pipeline.destroy(),delete i[n])}_hashComputePipeline(t){return`${this._getHash(t.shader.source)}`}_hashRenderPipeline(t){const n=t.vs?this._getHash(t.vs.source):0,i=t.fs?this._getHash(t.fs.source):0,s="-",r=this._getHash(JSON.stringify(t.bufferLayout));switch(this.device.type){case"webgl":return`${n}/${i}V${s}BL${r}`;default:const a=this._getHash(JSON.stringify(t.parameters));return`${n}/${i}V${s}T${t.topology}P${a}BL${r}`}}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}}class Eg{static defaultProps={...uu.defaultProps};static getDefaultShaderFactory(t){return t._lumaData.defaultShaderFactory||=new Eg(t),t._lumaData.defaultShaderFactory}device;destroyPolicy;_cache={};constructor(t){this.device=t,this.destroyPolicy=t.props._factoryDestroyPolicy}createShader(t){const n=this._hashShader(t);let i=this._cache[n];if(!i){const s=this.device.createShader({...t,id:t.id?`${t.id}-cached`:void 0});this._cache[n]=i={shader:s,useCount:0}}return i.useCount++,i.shader}release(t){const n=this._hashShader(t),i=this._cache[n];i&&(i.useCount--,i.useCount===0&&this.destroyPolicy==="unused"&&(delete this._cache[n],i.shader.destroy()))}_hashShader(t){return`${t.stage}:${t.source}`}}function JO(e,t){const n={},i="Values";if(e.attributes.length===0&&!e.varyings?.length)return{"No attributes or varyings":{[i]:"N/A"}};for(const s of e.attributes)if(s){const r=`${s.location} ${s.name}: ${s.type}`;n[`in ${r}`]={[i]:s.stepMode||"vertex"}}for(const s of e.varyings||[]){const r=`${s.location} ${s.name}`;n[`out ${r}`]={[i]:JSON.stringify(s)}}return n}let Yt=null,Pd=null;function eD(e,{id:t,minimap:n,opaque:i,top:s="0",left:r="0",rgbaScale:a=1}){Yt||(Yt=document.createElement("canvas"),Yt.id=t,Yt.title=t,Yt.style.zIndex="100",Yt.style.position="absolute",Yt.style.top=s,Yt.style.left=r,Yt.style.border="blue 5px solid",Yt.style.transform="scaleY(-1)",document.body.appendChild(Yt),Pd=Yt.getContext("2d")),(Yt.width!==e.width||Yt.height!==e.height)&&(Yt.width=e.width/2,Yt.height=e.height/2,Yt.style.width="400px",Yt.style.height="400px");const o=e.device.readPixelsToArrayWebGL(e),l=Pd?.createImageData(e.width,e.height);if(l){for(let c=0;c<o.length;c+=4)l.data[0+c+0]=o[c+0]*a,l.data[0+c+1]=o[c+1]*a,l.data[0+c+2]=o[c+2]*a,l.data[0+c+3]=i?255:o[c+3]*a;Pd?.putImageData(l,0,0)}}function Mf(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Mf(e[i],t[i],n-1))return!1;return!0}if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(const r of i)if(!t.hasOwnProperty(r)||!Mf(e[r],t[r],n-1))return!1;return!0}return!1}function tD(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nD(e){return Array.isArray(e)?e.length===0||typeof e[0]=="number":!1}function dx(e){return tD(e)||nD(e)}function iD(e){return dx(e)||typeof e=="number"||typeof e=="boolean"}function fx(e){const t={bindings:{},uniforms:{}};return Object.keys(e).forEach(n=>{const i=e[n];iD(i)?t.uniforms[n]=i:t.bindings[n]=i}),t}class sD{options={disableWarnings:!1};modules;moduleUniforms;moduleBindings;constructor(t,n){Object.assign(this.options,n);const i=ag(Object.values(t).filter(s=>s.dependencies));for(const s of i)t[s.name]=s;xe.log(1,"Creating ShaderInputs with modules",Object.keys(t))(),this.modules=t,this.moduleUniforms={},this.moduleBindings={};for(const[s,r]of Object.entries(t))this._addModule(r),r.name&&s!==r.name&&!this.options.disableWarnings&&xe.warn(`Module name: ${s} vs ${r.name}`)()}destroy(){}setProps(t){for(const n of Object.keys(t)){const i=n,s=t[i]||{},r=this.modules[i];if(!r){this.options.disableWarnings||xe.warn(`Module ${n} not found`)();continue}const a=this.moduleUniforms[i],o=this.moduleBindings[i],l=r.getUniforms?.(s,a)||s,{uniforms:u,bindings:c}=fx(l);this.moduleUniforms[i]={...a,...u},this.moduleBindings[i]={...o,...c}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){const t={};for(const n of Object.values(this.moduleBindings))Object.assign(t,n);return t}getDebugTable(){const t={};for(const[n,i]of Object.entries(this.moduleUniforms))for(const[s,r]of Object.entries(i))t[`${n}.${s}`]={type:this.modules[n].uniformTypes?.[s],value:String(r)};return t}_addModule(t){const n=t.name;this.moduleUniforms[n]=t.defaultUniforms||{},this.moduleBindings[n]={}}}let rD="";async function aD(e,t){const n=new Image;return n.crossOrigin="anonymous",n.src=e.startsWith("http")?e:rD+e,await n.decode(),t?await createImageBitmap(n,t):await createImageBitmap(n)}class Rd{device;id;texture;sampler;view;ready;isReady=!1;destroyed=!1;resolveReady=()=>{};rejectReady=()=>{};get[Symbol.toStringTag](){return"AsyncTexture"}toString(){return`AsyncTexture:"${this.id}"(${this.isReady?"ready":"loading"})`}constructor(t,n){this.device=t,this.id=n.id||vu("async-texture"),typeof n?.data=="string"&&n.dimension==="2d"&&(n={...n,data:aD(n.data)}),this.ready=new Promise((i,s)=>{this.resolveReady=()=>{this.isReady=!0,i()},this.rejectReady=s}),this.initAsync(n)}async initAsync(t){const n=t.data;let i;try{i=await hx(n)}catch(r){this.rejectReady(r)}if(this.destroyed)return;const s={...t,data:i};this.texture=this.device.createTexture(s),this.sampler=this.texture.sampler,this.view=this.texture.view,this.isReady=!0,this.resolveReady()}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}resize(t){if(!this.isReady)throw new Error("Cannot resize texture before it is ready");if(t.width===this.texture.width&&t.height===this.texture.height)return!1;if(this.texture){const n=this.texture;this.texture=n.clone(t),n.destroy()}return!0}}async function hx(e){if(e=await e,Array.isArray(e))return await Promise.all(e.map(hx));if(e&&typeof e=="object"&&e.constructor===Object){const t=e,n=await Promise.all(Object.values(t)),i=Object.keys(t),s={};for(let r=0;r<i.length;r++)s[i[r]]=n[r];return s}return e}const Vs=2,oD=1e4;class Es{static defaultProps={...ca.defaultProps,source:void 0,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:js.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0};device;id;source;vs;fs;pipelineFactory;shaderFactory;userData={};parameters;topology;bufferLayout;isInstanced=void 0;instanceCount=0;vertexCount;indexBuffer=null;bufferAttributes={};constantAttributes={};bindings={};uniforms={};vertexArray;transformFeedback=null;pipeline;shaderInputs;_uniformStore;_attributeInfos={};_gpuGeometry=null;_getModuleUniforms;props;_pipelineNeedsUpdate="newly created";_needsRedraw="initializing";_destroyed=!1;_lastDrawTimestamp=-1;get[Symbol.toStringTag](){return"Model"}toString(){return`Model(${this.id})`}constructor(t,n){this.props={...Es.defaultProps,...n},n=this.props,this.id=n.id||vu("model"),this.device=t,Object.assign(this.userData,n.userData);const i=Object.fromEntries(this.props.modules?.map(l=>[l.name,l])||[]),s=n.shaderInputs||new sD(i,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(s);const r=cD(t),a=(this.props.modules?.length>0?this.props.modules:this.shaderInputs?.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){const{source:l,getUniforms:u}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:r,...this.props,modules:a});this.source=l,this._getModuleUniforms=u,this.props.shaderLayout||=TP(this.source)}else{const{vs:l,fs:u,getUniforms:c}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:r,...this.props,modules:a});this.vs=l,this.fs=u,this._getModuleUniforms=c}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,n.geometry&&this.setGeometry(n.geometry),this.pipelineFactory=n.pipelineFactory||kg.getDefaultPipelineFactory(this.device),this.shaderFactory=n.shaderFactory||Eg.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=t.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in n&&(this.isInstanced=n.isInstanced),n.instanceCount&&this.setInstanceCount(n.instanceCount),n.vertexCount&&this.setVertexCount(n.vertexCount),n.indexBuffer&&this.setIndexBuffer(n.indexBuffer),n.attributes&&this.setAttributes(n.attributes),n.constantAttributes&&this.setConstantAttributes(n.constantAttributes),n.bindings&&this.setBindings(n.bindings),n.uniforms&&this.setUniformsWebGL(n.uniforms),n.moduleSettings&&this.updateModuleSettingsWebGL(n.moduleSettings),n.transformFeedback&&(this.transformFeedback=n.transformFeedback),Object.seal(this)}destroy(){this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),this._gpuGeometry?.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const t=this._needsRedraw;return this._needsRedraw=!1,t}setNeedsRedraw(t){this._needsRedraw||=t}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(t){const n=this._areBindingsLoading();if(n)return xe.info(Vs,`>>> DRAWING ABORTED ${this.id}: ${n} not loaded`)(),!1;try{t.pushDebugGroup(`${this}.predraw(${t})`),this.predraw()}finally{t.popDebugGroup()}let i;try{t.pushDebugGroup(`${this}.draw(${t})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();const s=this._getBindings();this.pipeline.setBindings(s,{disableWarnings:this.props.disableWarnings}),Of(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:r}=this.vertexArray,a=r?r.byteLength/(r.indexType==="uint32"?4:2):void 0;i=this.pipeline.draw({renderPass:t,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:a,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{t.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(t),i?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",i}setGeometry(t){this._gpuGeometry?.destroy();const n=t&&ZO(this.device,t);if(n){this.setTopology(n.topology||"triangle-list");const i=new pd(this.bufferLayout);this.bufferLayout=i.mergeBufferLayouts(n.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(n)}this._gpuGeometry=n}setTopology(t){t!==this.topology&&(this.topology=t,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(t){const n=new pd(this.bufferLayout);this.bufferLayout=this._gpuGeometry?n.mergeBufferLayouts(t,this._gpuGeometry.bufferLayout):t,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(t){Mf(t,this.parameters,2)||(this.parameters=t,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(t){this.instanceCount=t,this.isInstanced===void 0&&t>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(t){this.vertexCount=t,this.setNeedsRedraw("vertexCount")}setShaderInputs(t){this.shaderInputs=t,this._uniformStore=new XI(this.shaderInputs.modules);for(const[n,i]of Object.entries(this.shaderInputs.modules))if(lD(i)){const s=this._uniformStore.getManagedUniformBuffer(this.device,n);this.bindings[`${n}Uniforms`]=s}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw("shaderInputs")}setBindings(t){Object.assign(this.bindings,t),this.setNeedsRedraw("bindings")}setTransformFeedback(t){this.transformFeedback=t,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(t){this.vertexArray.setIndexBuffer(t),this.setNeedsRedraw("indexBuffer")}setAttributes(t,n){const i=n?.disableWarnings??this.props.disableWarnings;t.indices&&xe.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)(),this.bufferLayout=KI(this.pipeline.shaderLayout,this.bufferLayout);const s=new pd(this.bufferLayout);for(const[r,a]of Object.entries(t)){const o=s.getBufferLayout(r);if(!o){i||xe.warn(`Model(${this.id}): Missing layout for buffer "${r}".`)();continue}const l=s.getAttributeNamesForBuffer(o);let u=!1;for(const c of l){const d=this._attributeInfos[c];if(d){const f=this.device.type==="webgpu"?s.getBufferIndex(d.bufferName):d.location;this.vertexArray.setBuffer(f,a),u=!0}}!u&&!i&&xe.warn(`Model(${this.id}): Ignoring buffer "${a.id}" for unknown attribute "${r}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(t,n){for(const[i,s]of Object.entries(t)){const r=this._attributeInfos[i];r?this.vertexArray.setConstantWebGL(r.location,s):(n?.disableWarnings??this.props.disableWarnings)||xe.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${i}"`)()}this.setNeedsRedraw("constants")}setUniforms(t){this.setUniformsWebGL(t)}setUniformsWebGL(t){Of(t)||(this.pipeline.setUniformsWebGL(t),Object.assign(this.uniforms,t)),this.setNeedsRedraw("uniforms")}updateModuleSettingsWebGL(t){const{bindings:n,uniforms:i}=fx(this._getModuleUniforms(t));Object.assign(this.bindings,n),Object.assign(this.uniforms,i),this.setNeedsRedraw("moduleSettings")}_areBindingsLoading(){for(const t of Object.values(this.bindings))if(t instanceof Rd&&!t.isReady)return t.id;return!1}_getBindings(){const t={};for(const[n,i]of Object.entries(this.bindings))i instanceof Rd?i.isReady&&(t[n]=i.texture):t[n]=i;return t}_getBindingsUpdateTimestamp(){let t=0;for(const n of Object.values(this.bindings))n instanceof cu?t=Math.max(t,n.texture.updateTimestamp):n instanceof pt||n instanceof ct?t=Math.max(t,n.updateTimestamp):n instanceof Rd?t=n.texture?Math.max(t,n.texture.updateTimestamp):1/0:n instanceof Ao||(t=Math.max(t,n.buffer.updateTimestamp));return t}_setGeometryAttributes(t){const n={...t.attributes};for(const[i]of Object.entries(n))!this.pipeline.shaderLayout.attributes.find(s=>s.name===i)&&i!=="positions"&&delete n[i];this.vertexCount=t.vertexCount,this.setIndexBuffer(t.indices||null),this.setAttributes(t.attributes,{disableWarnings:!0}),this.setAttributes(n,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(t){this._pipelineNeedsUpdate||=t,this.setNeedsRedraw(t)}_updatePipeline(){if(this._pipelineNeedsUpdate){let t=null,n=null;this.pipeline&&(xe.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),t=this.pipeline.vs,n=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const i=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debugShaders:this.props.debugShaders});let s=null;this.source?s=i:this.fs&&(s=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:i,fs:s}),this._attributeInfos=fw(this.pipeline.shaderLayout,this.bufferLayout),t&&this.shaderFactory.release(t),n&&this.shaderFactory.release(n)}return this.pipeline}_lastLogTime=0;_logOpen=!1;_logDrawCallStart(){const t=xe.level>3?0:oD;xe.level<2||Date.now()-this._lastLogTime<t||(this._lastLogTime=Date.now(),this._logOpen=!0,xe.group(Vs,`>>> DRAWING MODEL ${this.id}`,{collapsed:xe.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const t=JO(this.pipeline.shaderLayout,this.id);xe.table(Vs,t)();const n=this.shaderInputs.getDebugTable();for(const[s,r]of Object.entries(this.uniforms))n[s]={value:r};xe.table(Vs,n)();const i=this._getAttributeDebugTable();xe.table(Vs,this._attributeInfos)(),xe.table(Vs,i)(),xe.groupEnd(Vs)(),this._logOpen=!1}}_drawCount=0;_logFramebuffer(t){const n=this.device.props.debugFramebuffers;if(this._drawCount++,!n)return;const i=t.props.framebuffer;i&&eD(i,{id:i.id,minimap:!0})}_getAttributeDebugTable(){const t={};for(const[n,i]of Object.entries(this._attributeInfos)){const s=this.vertexArray.attributes[i.location];t[i.location]={name:n,type:i.shaderType,values:s?this._getBufferOrConstantValues(s,i.bufferDataType):"null"}}if(this.vertexArray.indexBuffer){const{indexBuffer:n}=this.vertexArray,i=n.indexType==="uint32"?new Uint32Array(n.debugData):new Uint16Array(n.debugData);t.indices={name:"indices",type:n.indexType,values:i.toString()}}return t}_getBufferOrConstantValues(t,n){const i=mw(n);return(t instanceof pt?new i(t.debugData):t).toString()}}function lD(e){return!!(e.uniformTypes&&!Of(e.uniformTypes))}function cD(e){return{type:e.type,shaderLanguage:e.info.shadingLanguage,shaderLanguageVersion:e.info.shadingLanguageVersion,gpu:e.info.gpu,features:e.features}}function Of(e){for(const t in e)return!1;return!0}class va{device;model;transformFeedback;static defaultProps={...Es.defaultProps,outputs:void 0,feedbackBuffers:void 0};static isSupported(t){return t?.info?.type==="webgl"}constructor(t,n=va.defaultProps){if(!va.isSupported(t))throw new Error("BufferTransform not yet implemented on WebGPU");this.device=t,this.model=new Es(this.device,{id:n.id||"buffer-transform-model",fs:n.fs||qE(),topology:n.topology||"point-list",varyings:n.outputs||n.varyings,...n}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:n.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(t){t?.inputBuffers&&this.model.setAttributes(t.inputBuffers),t?.outputBuffers&&this.transformFeedback.setBuffers(t.outputBuffers);const n=this.device.beginRenderPass(t);this.model.draw(n),n.end()}getBuffer(t){return this.transformFeedback.getBuffer(t)}readAsync(t){const n=this.getBuffer(t);if(!n)throw new Error("BufferTransform#getBuffer");if(n instanceof pt)return n.readAsync();const{buffer:i,byteOffset:s=0,byteLength:r=i.byteLength}=n;return i.readAsync(s,r)}}class pu{id;topology;vertexCount;indices;attributes;userData={};constructor(t){const{attributes:n={},indices:i=null,vertexCount:s=null}=t;this.id=t.id||vu("geometry"),this.topology=t.topology,i&&(this.indices=ArrayBuffer.isView(i)?{value:i,size:1}:i),this.attributes={};for(const[r,a]of Object.entries(n)){const o=ArrayBuffer.isView(a)?{value:a}:a;if(!ArrayBuffer.isView(o.value))throw new Error(`${this._print(r)}: must be typed array or object with value as typed array`);if((r==="POSITION"||r==="positions")&&!o.size&&(o.size=3),r==="indices"){if(this.indices)throw new Error("Multiple indices detected");this.indices=o}else this.attributes[r]=o}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return`Geometry ${this.id} attribute ${t}`}_setAttributes(t,n){return this}_calculateVertexCount(t,n){if(n)return n.value.length;let i=1/0;for(const s of Object.values(t)){const{value:r,size:a,constant:o}=s;!o&&r&&a!==void 0&&a>=1&&(i=Math.min(i,r.length/a))}return i}}const uD={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class gx extends Cg{constructor(){super(...arguments),this._colorEncoderState=null}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:n,views:i,viewports:s,onViewportActive:r,pickingFBO:a,deviceRect:{x:o,y:l,width:u,height:c},cullRect:d,effects:f,pass:h="picking",pickZ:g,shaderModuleProps:v}){this.pickZ=g;const m=this._resetColorEncoder(g),p=[o,l,u,c],y=super.render({target:a,layers:t,layerFilter:n,views:i,viewports:s,onViewportActive:r,cullRect:d,effects:f?.filter(b=>b.useInPicking),pass:h,isPicking:!0,shaderModuleProps:v,clearColor:[0,0,0,0],colorMask:15,scissorRect:p});return this._colorEncoderState=null,{decodePickingColor:m&&fD.bind(null,m),stats:y}}shouldDrawLayer(t){const{pickable:n,operation:i}=t.props;return n&&i.includes("draw")||i.includes("terrain")||i.includes("mask")}getShaderModuleProps(t,n,i){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(t,n,i){const s={...t.props.parameters},{pickable:r,operation:a}=t.props;return!this._colorEncoderState||a.includes("terrain")?s.blend=!1:r&&a.includes("draw")&&(Object.assign(s,uD),s.blend=!0,s.blendColor=dD(this._colorEncoderState,t,i)),s}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function dD(e,t,n){const{byLayer:i,byAlpha:s}=e;let r,a=i.get(t);return a?(a.viewports.push(n),r=a.a):(r=i.size+1,r<=255?(a={a:r,layer:t,viewports:[n]},i.set(t,a),s[r]=a):(tt.warn("Too many pickable layers, only picking the first 255")(),r=0)),[0,0,0,r/255]}function fD(e,t){const n=e.byAlpha[t[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(t)}}const Wr={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Mc=Symbol.for("component"),Ts=Symbol.for("propTypes"),Md=Symbol.for("deprecatedProps"),ra=Symbol.for("asyncPropDefaults"),or=Symbol.for("asyncPropOriginal"),bs=Symbol.for("asyncPropResolved");function Ig(e,t=()=>!0){return Array.isArray(e)?mx(e,t,[]):t(e)?[e]:[]}function mx(e,t,n){let i=-1;for(;++i<e.length;){const s=e[i];Array.isArray(s)?mx(s,t,n):t(s)&&n.push(s)}return n}function hD({target:e,source:t,start:n=0,count:i=1}){const s=t.length,r=i*s;let a=0;for(let o=n;a<s;a++)e[o++]=t[a];for(;a<r;)a<r-a?(e.copyWithin(n+a,n,n+a),a*=2):(e.copyWithin(n+a,n,n+r-a),a=r);return e}class gD{constructor(t,n,i){this._loadCount=0,this._subscribers=new Set,this.id=t,this.context=i,this.setData(n)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,n){if(t===this._data&&!n)return;this._data=t;const i=++this._loadCount;let s=t;typeof t=="string"&&(s=mc(t)),s instanceof Promise?(this.isLoaded=!1,this._loader=s.then(r=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=r)}).catch(r=>{this._loadCount===i&&(this.isLoaded=!0,this._error=r||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const r of this._subscribers)r.onChange(this.getData())}}class mD{constructor(t){this.protocol=t.protocol||"resource://",this._context={device:t.device,gl:t.device?.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:n,forceUpdate:i=!1,persistent:s=!0}){let r=this._resources[t];r?r.setData(n,i):(r=new gD(t,n,this._context),this._resources[t]=r),r.persistent=s}remove(t){const n=this._resources[t];n&&(n.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const n=this._consumers[t];if(n){for(const i in n){const s=n[i],r=this._resources[s.resourceId];r&&r.unsubscribe(s)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:n,consumerId:i,requestId:s="default"}){const{_resources:r,protocol:a}=this;t.startsWith(a)&&(t=t.replace(a,""),r[t]||this.add({resourceId:t,data:null,persistent:!1}));const o=r[t];if(this._track(i,s,o,n),o)return o.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,n,i,s){const r=this._consumers,a=r[t]=r[t]||{};let o=a[n];const l=o&&o.resourceId&&this._resources[o.resourceId];l&&(l.unsubscribe(o),this.prune()),i&&(o?(o.onChange=s,o.resourceId=i.id):o={onChange:s,resourceId:i.id},a[n]=o,i.subscribe(o))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const n=this._resources[t];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[t])}}}const vD="layerManager.setLayers",pD="layerManager.activateViewport";class yD{constructor(t,n){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=o=>{un(pD,this,o),o&&(this.context.viewport=o)};const{deck:i,stats:s,viewport:r,timeline:a}=n||{};this.layers=[],this.resourceManager=new mD({device:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:t,gl:t?.gl,deck:i,shaderAssembler:pO(t?.info?.shadingLanguage||"glsl"),defaultShaderModules:[kR],renderPass:void 0,stats:s||new au({id:"deck.gl"}),viewport:r||new Ea({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:a||new ux,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let n=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const s=i.getNeedsRedraw(t);n=n||s}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(n=>t.find(i=>n.id.indexOf(i)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,n){un(vD,this,n,t),this._lastRenderedLayers=t;const i=Ig(t,Boolean);for(const s of i)s.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw(`updating layers: ${t}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}addDefaultShaderModule(t){const{defaultShaderModules:n}=this.context;n.find(i=>i.name===t.name)||(n.push(t),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(t){const{defaultShaderModules:n}=this.context,i=n.findIndex(s=>s.name===t.name);i>=0&&(n.splice(i,1),this._defaultShaderModulesChanged=!0)}_handleError(t,n,i){i.raiseError(n,`${t} of ${i}`)}_updateLayers(t,n){const i={};for(const a of t)i[a.id]?tt.warn(`Multiple old layers with same id ${a.id}`)():i[a.id]=a;if(this._defaultShaderModulesChanged){for(const a of t)a.setNeedsUpdate(),a.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const s=[];this._updateSublayersRecursively(n,i,s),this._finalizeOldLayers(i);let r=!1;for(const a of s)if(a.hasUniformTransition()){r=`Uniform transition in ${a}`;break}this._needsUpdate=r,this.layers=s}_updateSublayersRecursively(t,n,i){for(const s of t){s.context=this.context;const r=n[s.id];r===null&&tt.warn(`Multiple new layers with same id ${s.id}`)(),n[s.id]=null;let a=null;try{this._debug&&r!==s&&s.validateProps(),r?(this._transferLayerState(r,s),this._updateLayer(s)):this._initializeLayer(s),i.push(s),a=s.isComposite?s.getSubLayers():null}catch(o){this._handleError("matching",o,s)}a&&this._updateSublayersRecursively(a,n,i)}}_finalizeOldLayers(t){for(const n in t){const i=t[n];i&&this._finalizeLayer(i)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=Wr.INITIALIZED}catch(n){this._handleError("initialization",n,t)}}_transferLayerState(t,n){n._transferState(t),n.lifecycle=Wr.MATCHED,n!==t&&(t.lifecycle=Wr.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(n){this._handleError("update",n,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||`finalized ${t}`,t.lifecycle=Wr.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=Wr.FINALIZED}catch(n){this._handleError("finalization",n,t)}}}function li(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!li(e[i],t[i],n-1))return!1;return!0}if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(const r of i)if(!t.hasOwnProperty(r)||!li(e[r],t[r],n-1))return!1;return!0}return!1}class _D{constructor(t){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const n=this.controllers[t];n&&n.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const n=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const n=this.controllers[t];n&&n.updateTransition()}}getViewports(t){return t?this._viewports.filter(n=>n.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(n=>{t[n.id]=n}),t}getView(t){return this.views.find(n=>n.id===t)}getViewState(t){const n=typeof t=="string"?this.getView(t):t,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(t){return this._viewportMap[t]}unproject(t,n){const i=this.getViewports(),s={x:t[0],y:t[1]};for(let r=i.length-1;r>=0;--r){const a=i[r];if(a.containsPixel(s)){const o=t.slice();return o[0]-=a.x,o[1]-=a.y,a.unproject(o,n)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,n){(t!==this.width||n!==this.height)&&(this.width=t,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(t){t=Ig(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!li(t,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):tt.warn("missing `viewState` or `initialViewState`")()}_createController(t,n){const i=n.type;return new i({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:r=>this.getView(t.id)?.makeViewport({viewState:r,width:this.width,height:this.height})})}_updateController(t,n,i,s){const r=t.controller;if(r&&i){const a={...n,...r,id:t.id,x:i.x,y:i.y,width:i.width,height:i.height};return(!s||s.constructor!==r.type)&&(s=this._createController(t,a)),s&&s.setProps(a),s}return null}_rebuildViewports(){const{views:t}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let s=t.length;s--;){const r=t[s],a=this.getViewState(r),o=r.makeViewport({viewState:a,width:this.width,height:this.height});let l=n[r.id];const u=!!r.controller;u&&!l&&(i=!0),(i||!u)&&l&&(l.finalize(),l=null),this.controllers[r.id]=this._updateController(r,a,o,l),o&&this._viewports.unshift(o)}for(const s in n){const r=n[s];r&&!this.controllers[s]&&r.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,n){return t.length!==n.length?!0:t.some((i,s)=>!t[s].equals(n[s]))}}const bD=/([0-9]+\.?[0-9]*)(%|px)/;function ls(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=bD.exec(e);if(t&&t.length>=3){const n=t[2]==="%",i=parseFloat(t[1]);return{position:n?i/100:i,relative:n}}default:throw new Error(`Could not parse position string ${e}`)}}function cs(e,t){return e.relative?Math.round(e.position*t):e.position}class vx{constructor(t){const{id:n,x:i=0,y:s=0,width:r="100%",height:a="100%",padding:o=null}=t;this.id=n||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=ls(i),this._y=ls(s),this._width=ls(r),this._height=ls(a),this._padding=o&&{left:ls(o.left||0),right:ls(o.right||0),top:ls(o.top||0),bottom:ls(o.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.constructor===t.constructor&&li(this.props,t.props,2)}makeViewport({width:t,height:n,viewState:i}){i=this.filterViewState(i);const s=this.getDimensions({width:t,height:n});if(!s.height||!s.width)return null;const r=this.getViewportType(i);return new r({...i,...this.props,...s})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:t?.id||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...t};for(const i in this.props.viewState)i!=="id"&&(n[i]=this.props.viewState[i]);return n}return t}getDimensions({width:t,height:n}){const i={x:cs(this._x,t),y:cs(this._y,n),width:cs(this._width,t),height:cs(this._height,n)};return this._padding&&(i.padding={left:cs(this._padding.left,t),top:cs(this._padding.top,n),right:cs(this._padding.right,t),bottom:cs(this._padding.bottom,n)}),i}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class yu{constructor(t){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=t}get inProgress(){return this._inProgress}start(t){this.cancel(),this.settings=t,this._inProgress=!0,this.settings.onStart?.(this)}end(){this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd?.(this))}cancel(){this._inProgress&&(this.settings.onInterrupt?.(this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:t,settings:n}=this;this._handle=t.addChannel({delay:t.getTime(),duration:n.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate?.(this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const ey=()=>{},Df={BREAK:1,SNAP_TO_END:2,IGNORE:3},wD=e=>e,xD=Df.BREAK;class SD{constructor(t){this._onTransitionUpdate=n=>{const{time:i,settings:{interpolator:s,startProps:r,endProps:a,duration:o,easing:l}}=n,u=l(i/o),c=s.interpolateProps(r,a,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new yu(t.timeline),this.onViewStateChange=t.onViewStateChange||ey,this.onStateChange=t.onStateChange||ey}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let n=!1;const i=this.props;if(this.props=t,!i||this._shouldIgnoreViewportChange(i,t))return!1;if(this._isTransitionEnabled(t)){let s=i;if(this.transition.inProgress){const{interruption:r,endProps:a}=this.transition.settings;s={...i,...r===Df.SNAP_TO_END?a:this.propsInTransition||i}}this._triggerTransition(s,t),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:n,transitionInterpolator:i}=t;return(n>0||n==="auto")&&!!i}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,n){return this.transition.inProgress?this.transition.settings.interruption===Df.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(t,n):!0}_triggerTransition(t,n){const i=this.getControllerState(t),s=this.getControllerState(n).shortestPathFrom(i),r=n.transitionInterpolator,a=r.getDuration?r.getDuration(t,n):n.transitionDuration;if(a===0)return;const o=r.initializeProps(t,s);this.propsInTransition={};const l={duration:a,easing:n.transitionEasing||wD,interpolator:r,interruption:n.transitionInterruption||xD,startProps:o.start,endProps:o.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t?.(n)}}}function fn(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class TD{constructor(t){const{compare:n,extract:i,required:s}=t;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=s}arePropsEqual(t,n){for(const i of this._propsToCompare)if(!(i in t)||!(i in n)||!ko(t[i],n[i]))return!1;return!0}initializeProps(t,n){const i={},s={};for(const r of this._propsToExtract)(r in t||r in n)&&(i[r]=t[r],s[r]=n[r]);return this._checkRequiredProps(i),this._checkRequiredProps(s),{start:i,end:s}}getDuration(t,n){return n.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach(n=>{const i=t[n];fn(Number.isFinite(i)||Array.isArray(i),`${n} is required for transition`)})}}const AD=["longitude","latitude","zoom","bearing","pitch"],CD=["longitude","latitude","zoom"];class Pg extends TD{constructor(t={}){const n=Array.isArray(t)?t:t.transitionProps,i=Array.isArray(t)?{}:t;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:AD,required:CD},super(i.transitionProps),this.opts=i}initializeProps(t,n){const i=super.initializeProps(t,n),{makeViewport:s,around:r}=this.opts;if(s&&r){const a=s(t),o=s(n),l=a.unproject(r);i.start.around=r,Object.assign(i.end,{around:o.project(l),aroundPosition:l,width:n.width,height:n.height})}return i}interpolateProps(t,n,i){const s={};for(const r of this._propsToExtract)s[r]=Ac(t[r]||0,n[r]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const r=this.opts.makeViewport({...n,...s});Object.assign(s,r.panByPosition(n.aroundPosition,Ac(t.around,n.around,i)))}return s}}const us={transitionDuration:0},kD=300,Ml=e=>1-(1-e)*(1-e),Br={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],MULTI_PAN:["multipanstart","multipanmove","multipanend"],DOUBLE_CLICK:["dblclick"],KEYBOARD:["keydown"]},Ls={};class px{constructor(t){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new SD({...t,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)this._events[t]&&this.eventManager?.off(t,this.handleEvent);this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const n=this._eventStartBlocked;switch(t.type){case"panstart":return n?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return n?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"multipanstart":return n?!1:this._onMultiPanStart(t);case"multipanmove":return this._onMultiPan(t);case"multipanend":return this._onMultiPanEnd(t);case"dblclick":return this._onDoubleClick(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:n,y:i}=this.props,{offsetCenter:s}=t;return[s.x-n,s.y-i]}isPointInBounds(t,n){const{width:i,height:s}=this.props;if(n&&n.handled)return!1;const r=t[0]>=0&&t[0]<=i&&t[1]>=0&&t[1]<=s;return r&&n&&n.stopPropagation(),r}isFunctionKeyPressed(t){const{srcEvent:n}=t;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=n}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:n}=t;this.inertia=Number.isFinite(n)?n:n===!0?kD:0;const{scrollZoom:i=!0,dragPan:s=!0,dragRotate:r=!0,doubleClickZoom:a=!0,touchZoom:o=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=!!this.onViewStateChange;this.toggleEvents(Br.WHEEL,c&&i),this.toggleEvents(Br.PAN,c),this.toggleEvents(Br.PINCH,c&&(o||l)),this.toggleEvents(Br.MULTI_PAN,c&&l),this.toggleEvents(Br.DOUBLE_CLICK,c&&a),this.toggleEvents(Br.KEYBOARD,c&&u),this.scrollZoom=i,this.dragPan=s,this.dragRotate=r,this.doubleClickZoom=a,this.touchZoom=o,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,n){this.eventManager&&t.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(t,n=null,i={}){const s={...t.getViewportProps(),...n},r=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(i),r){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:s,interactionState:this._interactionState,oldViewState:a,viewId:this.props.id})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const n=this.getCenter(t);if(!this.isPointInBounds(n,t))return!1;let i=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(i=!i);const s=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(s,us,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const n=this.getCenter(t),i=this.controllerState.pan({pos:n});return this.updateViewport(i,us,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:n}=this;if(this.dragPan&&n&&t.velocity){const i=this.getCenter(t),s=[i[0]+t.velocityX*n/2,i[1]+t.velocityY*n/2],r=this.controllerState.pan({pos:s}).panEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Ml},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const n=this.getCenter(t),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,us,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:n}=this;if(this.dragRotate&&n&&t.velocity){const i=this.getCenter(t),s=[i[0]+t.velocityX*n/2,i[1]+t.velocityY*n/2],r=this.controllerState.rotate({pos:s}).rotateEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Ml},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;const n=this.getCenter(t);if(!this.isPointInBounds(n,t))return!1;t.srcEvent.preventDefault();const{speed:i=.01,smooth:s=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:r}=t;let a=2/(1+Math.exp(-Math.abs(r*i)));r<0&&a!==0&&(a=1/a);const o=this.controllerState.zoom({pos:n,scale:a});return this.updateViewport(o,{...this._getTransitionProps({around:n}),transitionDuration:s?250:1},{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(t){const n=this.getCenter(t);if(!this.isPointInBounds(n,t))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,us,{isDragging:!0}),!0}_onMultiPan(t){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(t);n[0]-=t.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,us,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(t){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&t.velocityY){const i=this.getCenter(t),s=[i[0],i[1]+=t.velocityY*n/2],r=this.controllerState.rotate({pos:s});this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Ml},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const n=this.getCenter(t);if(!this.isPointInBounds(n,t))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Ls._startPinchRotation=t.rotation,Ls._lastPinchEvent=t,this.updateViewport(i,us,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=t,s=this.getCenter(t);n=n.zoom({pos:s,scale:i})}if(this.touchRotate){const{rotation:i}=t;n=n.rotate({deltaAngleX:Ls._startPinchRotation-i})}return this.updateViewport(n,us,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ls._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=Ls;if(this.touchZoom&&n&&i&&t.scale!==i.scale){const s=this.getCenter(t);let r=this.controllerState.rotateEnd();const a=Math.log2(t.scale),o=(a-Math.log2(i.scale))/(t.deltaTime-i.deltaTime),l=Math.pow(2,a+o*n/2);r=r.zoom({pos:s,scale:l}).zoomEnd(),this.updateViewport(r,{...this._getTransitionProps({around:s}),transitionDuration:n,transitionEasing:Ml},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const s=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(s,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ls._startPinchRotation=null,Ls._lastPinchEvent=null,!0}_onDoubleClick(t){if(!this.doubleClickZoom)return!1;const n=this.getCenter(t);if(!this.isPointInBounds(n,t))return!1;const i=this.isFunctionKeyPressed(t),s=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(s,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(t),{zoomSpeed:i,moveSpeed:s,rotateSpeedX:r,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:o}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=n?o.zoomOut(i).zoomOut(i):o.zoomOut(i),u.isZooming=!0;break;case"Equal":l=n?o.zoomIn(i).zoomIn(i):o.zoomIn(i),u.isZooming=!0;break;case"ArrowLeft":n?(l=o.rotateLeft(r),u.isRotating=!0):(l=o.moveLeft(s),u.isPanning=!0);break;case"ArrowRight":n?(l=o.rotateRight(r),u.isRotating=!0):(l=o.moveRight(s),u.isPanning=!0);break;case"ArrowUp":n?(l=o.rotateUp(a),u.isRotating=!0):(l=o.moveUp(s),u.isPanning=!0);break;case"ArrowDown":n?(l=o.rotateDown(a),u.isRotating=!0):(l=o.moveDown(s),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:n}=this;return!n||!n.transitionInterpolator?us:t?{...n,transitionInterpolator:new Pg({...t,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class yx{constructor(t,n){this._viewportProps=this.applyConstraints(t),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const ty=5,ED=1.2;class ID extends yx{constructor(t){const{width:n,height:i,latitude:s,longitude:r,zoom:a,bearing:o=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:d=20,minZoom:f=0,maxPitch:h=60,minPitch:g=0,startPanLngLat:v,startZoomLngLat:m,startRotatePos:p,startBearing:y,startPitch:_,startZoom:b,normalize:S=!0}=t;fn(Number.isFinite(r)),fn(Number.isFinite(s)),fn(Number.isFinite(a)),super({width:n,height:i,latitude:s,longitude:r,zoom:a,bearing:o,pitch:l,altitude:u,maxZoom:d,minZoom:f,maxPitch:h,minPitch:g,normalize:S,position:c},{startPanLngLat:v,startZoomLngLat:m,startRotatePos:p,startBearing:y,startPitch:_,startZoom:b}),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const r=this.makeViewport(this.getViewportProps()).panByPosition(i,t);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:s,startBearing:r,startPitch:a}=this.getState();if(!s||r===void 0||a===void 0)return this;let o;return t?o=this._getNewRotation(t,s,a,r):o={bearing:r+n,pitch:a+i},this._getUpdatedState(o)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:n,scale:i}){let{startZoom:s,startZoomLngLat:r}=this.getState();if(r||(s=this.getViewportProps().zoom,r=this._unproject(n)||this._unproject(t)),!r)return this;const{maxZoom:a,minZoom:o}=this.getViewportProps();let l=s+Math.log2(i);l=Zt(l,o,a);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(r,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const n=t.getViewportProps(),i={...this.getViewportProps()},{bearing:s,longitude:r}=i;return Math.abs(s-n.bearing)>180&&(i.bearing=s<0?s+360:s-360),Math.abs(r-n.longitude)>180&&(i.longitude=r<0?r+360:r-360),i}applyConstraints(t){const{maxZoom:n,minZoom:i,zoom:s}=t;t.zoom=Zt(s,i,n);const{maxPitch:r,minPitch:a,pitch:o}=t;t.pitch=Zt(o,a,r);const{normalize:l=!0}=t;return l&&Object.assign(t,tO(t)),t}_zoomFromCenter(t){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:t})}_panFromCenter(t){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+t[0],i/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const n=this.makeViewport(this.getViewportProps());return t&&n.unproject(t)}_getNewRotation(t,n,i,s){const r=t[0]-n[0],a=t[1]-n[1],o=t[1],l=n[1],{width:u,height:c}=this.getViewportProps(),d=r/u;let f=0;a>0?Math.abs(c-l)>ty&&(f=a/(l-c)*ED):a<0&&l>ty&&(f=1-o/l),f=Zt(f,-1,1);const{minPitch:h,maxPitch:g}=this.getViewportProps(),v=s+180*d;let m=i;return f>0?m=i+f*(g-i):f<0&&(m=i-f*(h-i)),{pitch:m,bearing:v}}}class PD extends px{constructor(){super(...arguments),this.ControllerState=ID,this.transition={transitionDuration:300,transitionInterpolator:new Pg({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(t){t.position=t.position||[0,0,0];const n=this.props;super.setProps(t),(!n||n.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class _x extends vx{constructor(t={}){super(t)}getViewportType(){return ma}get ControllerType(){return PD}}_x.displayName="MapView";const RD=new lx;function MD(e,t){const n=e.order??1/0,i=t.order??1/0;return n-i}class OD{constructor(t){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=t,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){const n=this._defaultEffects;if(!n.find(i=>i.id===t.id)){const i=n.findIndex(s=>MD(s,t)>0);i<0?n.push(t):n.splice(i,0,t),t.setup(this._context),this._setEffects(this.effects)}}setProps(t){"effects"in t&&(li(t.effects,this.effects,1)||this._setEffects(t.effects))}needsRedraw(t={clearRedrawFlags:!1}){const n=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(t){const n={};for(const s of this.effects)n[s.id]=s;const i=[];for(const s of t){const r=n[s.id];let a=s;r&&r!==s?r.setProps?(r.setProps(s.props),a=r):r.cleanup(this._context):r||s.setup(this._context),i.push(a),delete n[s.id]}for(const s in n)n[s].cleanup(this._context);this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),t.some(s=>s instanceof lx)||this._resolvedEffects.push(RD),this._needsRedraw="effects changed"}finalize(){for(const t of this._resolvedEffects)t.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class DD extends Cg{shouldDrawLayer(t){const{operation:n}=t.props;return n.includes("draw")||n.includes("terrain")}}const ND="deckRenderer.renderLayers";class BD{constructor(t){this.device=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new DD(t),this.pickLayersPass=new gx(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t};i.effects&&this._preRender(i.effects,i);const s=this.lastPostProcessEffect?this.renderBuffers[0]:i.target;this.lastPostProcessEffect&&(i.clearColor=[0,0,0,0],i.clearCanvas=!0);const r=n.render({...i,target:s});i.effects&&this._postRender(i.effects,i),this.renderCount++,un(ND,this,r,t)}needsRedraw(t={clearRedrawFlags:!1}){const n=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:t}=this;for(const n of t)n.delete();t.length=0}_preRender(t,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const i of t)n.preRenderStats[i.id]=i.preRender(n),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:t}=this,n=this.device.canvasContext.getDrawingBufferSize();t.length===0&&[0,1].map(i=>{const s=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});t.push(this.device.createFramebuffer({id:`deck-renderbuffer-${i}`,colorAttachments:[s]}))});for(const i of t)i.resize(n)}_postRender(t,n){const{renderBuffers:i}=this,s={...n,inputBuffer:i[0],swapBuffer:i[1]};for(const r of t)if(r.postRender){s.target=r.id===this.lastPostProcessEffect?n.target:void 0;const a=r.postRender(s);s.inputBuffer=a,s.swapBuffer=a===i[0]?i[1]:i[0]}}}const FD={pickedColor:null,pickedObjectIndex:-1};function VD({pickedColors:e,decodePickingColor:t,deviceX:n,deviceY:i,deviceRadius:s,deviceRect:r}){const{x:a,y:o,width:l,height:u}=r;let c=s*s,d=-1,f=0;for(let h=0;h<u;h++){const g=h+o-i,v=g*g;if(v>c)f+=4*l;else for(let m=0;m<l;m++){if(e[f+3]-1>=0){const y=m+a-n,_=y*y+v;_<=c&&(c=_,d=f)}f+=4}}if(d>=0){const h=e.slice(d,d+4),g=t(h);if(g){const v=Math.floor(d/4/l),m=d/4-v*l;return{...g,pickedColor:h,pickedX:a+m,pickedY:o+v}}tt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return FD}function LD({pickedColors:e,decodePickingColor:t}){const n=new Map;if(e){for(let i=0;i<e.length;i+=4)if(e[i+3]-1>=0){const r=e.slice(i,i+4),a=r.join(",");if(!n.has(a)){const o=t(r);o?n.set(a,{...o,color:r}):tt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function bx({pickInfo:e,viewports:t,pixelRatio:n,x:i,y:s,z:r}){let a=t[0];t.length>1&&(a=$D(e?.pickedViewports||t,{x:i,y:s}));let o;if(a){const l=[i-a.x,s-a.y];r!==void 0&&(l[2]=r),o=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:i,y:s,pixel:[i,s],coordinate:o,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:n}}function UD(e){const{pickInfo:t,lastPickedInfo:n,mode:i,layers:s}=e,{pickedColor:r,pickedLayer:a,pickedObjectIndex:o}=t,l=a?[a]:[];if(i==="hover"){const d=n.index,f=n.layerId,h=a?a.props.id:null;if(h!==f||o!==d){if(h!==f){const g=s.find(v=>v.props.id===f);g&&l.unshift(g)}n.layerId=h,n.index=o,n.info=null}}const u=bx(e),c=new Map;return c.set(null,u),l.forEach(d=>{let f={...u};d===a&&(f.color=r,f.index=o,f.picked=!0),f=wx({layer:d,info:f,mode:i});const h=f.layer;d===a&&i==="hover"&&(n.info=f),c.set(h.id,f),i==="hover"&&h.updateAutoHighlight(f)}),c}function wx({layer:e,info:t,mode:n}){for(;e&&t;){const i=t.layer||null;t.sourceLayer=i,t.layer=e,t=e.getPickingInfo({info:t,mode:n,sourceLayer:i}),e=e.parent}return t}function $D(e,t){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.containsPixel(t))return i}return e[0]}class zD{constructor(t){this._pickable=!0,this.device=t,this.pickLayersPass=new gx(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:n,layers:i,viewports:s},r=this.lastPickedInfo.info){const a=r&&r.layer&&r.layer.id,o=r&&r.viewport&&r.viewport.id,l=a?i.find(f=>f.id===a):null,u=o&&s.find(f=>f.id===o)||s[0],c=u&&u.unproject([t-u.x,n-u.y]);return{...r,...{x:t,y:n,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const n=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=n}const{canvas:t}=this.device.getDefaultCanvasContext();this.pickingFBO?.resize({width:t.width,height:t.height}),this.depthFBO?.resize({width:t.width,height:t.height})}_getPickable(t){if(this._pickable===!1)return null;const n=t.filter(i=>this.pickLayersPass.shouldDrawLayer(i)&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:t,views:n,viewports:i,x:s,y:r,radius:a=0,depth:o=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:d}){const f=this.device.canvasContext.cssToDeviceRatio(),h=this._getPickable(t);if(!h||i.length===0)return{result:[],emptyInfo:bx({viewports:i,x:s,y:r,pixelRatio:f})};this._resizeBuffer();const g=this.device.canvasContext.cssToDevicePixels([s,r],!0),v=[g.x+Math.floor(g.width/2),g.y+Math.floor(g.height/2)],m=Math.round(a*f),{width:p,height:y}=this.pickingFBO,_=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceWidth:p,deviceHeight:y}),b={x:s-a,y:r-a,width:a*2+1,height:a*2+1};let S;const x=[],I=new Set;for(let T=0;T<o;T++){let k;if(_){const D=this._drawAndSample({layers:h,views:n,viewports:i,onViewportActive:c,deviceRect:_,cullRect:b,effects:d,pass:`picking:${l}`});k=VD({...D,deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceRect:_})}else k={pickedColor:null,pickedObjectIndex:-1};let P;if(k.pickedLayer&&u&&this.depthFBO){const{pickedColors:D}=this._drawAndSample({layers:[k.pickedLayer],views:n,viewports:i,onViewportActive:c,deviceRect:{x:k.pickedX,y:k.pickedY,width:1,height:1},cullRect:b,effects:d,pass:`picking:${l}:z`},!0);D[3]&&(P=D[0])}k.pickedLayer&&T+1<o&&(I.add(k.pickedLayer),k.pickedLayer.disablePickingIndex(k.pickedObjectIndex)),S=UD({pickInfo:k,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:i,x:s,y:r,z:P,pixelRatio:f});for(const D of S.values())D.layer&&x.push(D);if(!k.pickedColor)break}for(const T of I)T.restorePickingColors();return{result:x,emptyInfo:S.get(null)}}_pickVisibleObjects({layers:t,views:n,viewports:i,x:s,y:r,width:a=1,height:o=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:d}){const f=this._getPickable(t);if(!f||i.length===0)return[];this._resizeBuffer();const h=this.device.canvasContext.cssToDeviceRatio(),g=this.device.canvasContext.cssToDevicePixels([s,r],!0),v=g.x,m=g.y+g.height,p=this.device.canvasContext.cssToDevicePixels([s+a,r+o],!0),y=p.x+p.width,_=p.y,b={x:v,y:_,width:y-v,height:m-_},S=this._drawAndSample({layers:f,views:n,viewports:i,onViewportActive:c,deviceRect:b,cullRect:{x:s,y:r,width:a,height:o},effects:d,pass:`picking:${l}`}),x=LD(S),I=new Map,T=[],k=Number.isFinite(u);for(let P=0;P<x.length&&!(k&&T.length>=u);P++){const D=x[P];let E={color:D.pickedColor,layer:null,index:D.pickedObjectIndex,picked:!0,x:s,y:r,pixelRatio:h};E=wx({layer:D.pickedLayer,info:E,mode:l});const O=E.layer.id;I.has(O)||I.set(O,new Set);const N=I.get(O),L=E.object??E.index;N.has(L)||(N.add(L),T.push(E))}return T}_drawAndSample({layers:t,views:n,viewports:i,onViewportActive:s,deviceRect:r,cullRect:a,effects:o,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,d={layers:t,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:s,pickingFBO:c,deviceRect:r,cullRect:a,effects:o,pass:l,pickZ:u,preRenderStats:{},isPicking:!0};for(const y of o)y.useInPicking&&(d.preRenderStats[y.id]=y.preRender(d));const{decodePickingColor:f}=this.pickLayersPass.render(d),{x:h,y:g,width:v,height:m}=r,p=new(u?Float32Array:Uint8Array)(v*m*4);return this.device.readPixelsToArrayWebGL(c,{sourceX:h,sourceY:g,sourceWidth:v,sourceHeight:m,target:p}),{pickedColors:p,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:n,deviceRadius:i,deviceWidth:s,deviceHeight:r}){const a=Math.max(0,t-i),o=Math.max(0,n-i),l=Math.min(s,t+i+1)-a,u=Math.min(r,n+i+1)-o;return l<=0||u<=0?null:{x:a,y:o,width:l,height:u}}}const WD={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},HD="top-left",ny="__root";class jD{constructor({deck:t,parentElement:n}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=t,this.parentElement=n}getWidgets(){return this.resolvedWidgets}setProps(t){t.widgets&&!li(t.widgets,this.widgets,1)&&this._setWidgets(t.widgets)}finalize(){for(const t of this.getWidgets())this._remove(t);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const t in this.containers)this.containers[t].remove()}addDefault(t){this.defaultWidgets.find(n=>n.id===t.id)||(this._add(t),this.defaultWidgets.push(t),this._setWidgets(this.widgets))}_setWidgets(t){const n={};for(const i of this.resolvedWidgets)n[i.id]=i;this.resolvedWidgets.length=0;for(const i of this.defaultWidgets)n[i.id]=null,this.resolvedWidgets.push(i);for(let i of t){const s=n[i.id];s?s.viewId!==i.viewId||s.placement!==i.placement?(this._remove(s),this._add(i)):i!==s&&(s.setProps(i.props),i=s):this._add(i),n[i.id]=null,this.resolvedWidgets.push(i)}for(const i in n){const s=n[i];s&&this._remove(s)}this.widgets=t}_add(t){const{viewId:n=null,placement:i=HD}=t,s=t.onAdd({deck:this.deck,viewId:n});s&&this._getContainer(n,i).append(s),t._element=s}_remove(t){t.onRemove?.(),t._element&&t._element.remove(),t._element=void 0}_getContainer(t,n){const i=t||ny;let s=this.containers[i];s||(s=document.createElement("div"),s.style.pointerEvents="none",s.style.position="absolute",s.style.overflow="hidden",this.parentElement?.append(s),this.containers[i]=s);let r=s.querySelector(`.${n}`);return r||(r=document.createElement("div"),r.className=n,r.style.position="absolute",r.style.zIndex="2",Object.assign(r.style,WD[n]),s.append(r)),r}_updateContainers(){const t=this.deck.width,n=this.deck.height;for(const i in this.containers){const s=this.lastViewports[i]||null,r=i===ny||s,a=this.containers[i];r?(a.style.display="block",a.style.left=`${s?s.x:0}px`,a.style.top=`${s?s.y:0}px`,a.style.width=`${s?s.width:t}px`,a.style.height=`${s?s.height:n}px`):a.style.display="none"}}onRedraw({viewports:t,layers:n}){const i=t.reduce((s,r)=>(s[r.id]=r,s),{});for(const s of this.getWidgets()){const{viewId:r}=s;if(r){const a=i[r];a&&(s.onViewportChange&&s.onViewportChange(a),s.onRedraw?.({viewports:[a],layers:n}))}else{if(s.onViewportChange)for(const a of t)s.onViewportChange(a);s.onRedraw?.({viewports:t,layers:n})}}this.lastViewports=i,this._updateContainers()}onHover(t,n){for(const i of this.getWidgets()){const{viewId:s}=i;(!s||s===t.viewport?.id)&&i.onHover?.(t,n)}}onEvent(t,n){const i=Ef[n.type];if(i)for(const s of this.getWidgets()){const{viewId:r}=s;(!r||r===t.viewport?.id)&&s[i]?.(t,n)}}}const XD={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};let YD=class{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:t}){const n=document.createElement("div");return n.className="deck-tooltip",Object.assign(n.style,XD),this.deck=t,this.element=n,n}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(t){this.isVisible&&t.id===this.lastViewport?.id&&t!==this.lastViewport&&this.setTooltip(null)}onHover(t){const{deck:n}=this,i=n&&n.props.getTooltip;if(!i)return;const s=i(t);this.lastViewport=t.viewport,this.setTooltip(s,t.x,t.y)}setTooltip(t,n,i){const s=this.element;if(s){if(typeof t=="string")s.innerText=t;else if(t)t.text&&(s.innerText=t.text),t.html&&(s.innerHTML=t.html),t.className&&(s.className=t.className);else{this.isVisible=!1,s.style.display="none";return}this.isVisible=!0,s.style.display="block",s.style.transform=`translate(${n}px, ${i}px)`,t&&typeof t=="object"&&"style"in t&&Object.assign(s.style,t.style)}}};var Xr;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.R16_EXT=33322]="R16_EXT",e[e.RG16_EXT=33324]="RG16_EXT",e[e.RGB16_EXT=32852]="RGB16_EXT",e[e.RGBA16_EXT=32859]="RGBA16_EXT",e[e.R16_SNORM_EXT=36760]="R16_SNORM_EXT",e[e.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",e[e.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",e[e.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",e[e.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",e[e.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",e[e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",e[e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",e[e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",e[e.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",e[e.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",e[e.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",e[e.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",e[e.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",e[e.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",e[e.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",e[e.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",e[e.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",e[e.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",e[e.LINE_WEBGL=6913]="LINE_WEBGL",e[e.FILL_WEBGL=6914]="FILL_WEBGL",e[e.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",e[e.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",e[e.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",e[e.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",e[e.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",e[e.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",e[e.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",e[e.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",e[e.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",e[e.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",e[e.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",e[e.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",e[e.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",e[e.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",e[e.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",e[e.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",e[e.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",e[e.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",e[e.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",e[e.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",e[e.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",e[e.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",e[e.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",e[e.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(Xr||(Xr={}));const Rg={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Dt=(e,t,n)=>t?e.enable(n):e.disable(n),iy=(e,t,n)=>e.hint(n,t),Mn=(e,t,n)=>e.pixelStorei(n,t),sy=(e,t,n)=>{const i=n===36006?36009:36008;return e.bindFramebuffer(i,t)},Ha=(e,t,n)=>{const s={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];e.bindBuffer(s,t)};function Od(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}const KD={3042:Dt,32773:(e,t)=>e.blendColor(...t),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(e,t)=>e.clearColor(...t),3107:(e,t)=>e.colorMask(...t),2884:Dt,2885:(e,t)=>e.cullFace(t),2929:Dt,2931:(e,t)=>e.clearDepth(t),2932:(e,t)=>e.depthFunc(t),2928:(e,t)=>e.depthRange(...t),2930:(e,t)=>e.depthMask(t),3024:Dt,35723:iy,35725:(e,t)=>e.useProgram(t),36007:(e,t)=>e.bindRenderbuffer(36161,t),36389:(e,t)=>e.bindTransformFeedback?.(36386,t),34229:(e,t)=>e.bindVertexArray(t),36006:sy,36010:sy,34964:Ha,36662:Ha,36663:Ha,35053:Ha,35055:Ha,2886:(e,t)=>e.frontFace(t),33170:iy,2849:(e,t)=>e.lineWidth(t),32823:Dt,32824:"polygonOffset",10752:"polygonOffset",35977:Dt,32926:Dt,32928:Dt,32938:"sampleCoverage",32939:"sampleCoverage",3089:Dt,3088:(e,t)=>e.scissor(...t),2960:Dt,2961:(e,t)=>e.clearStencil(t),2968:(e,t)=>e.stencilMaskSeparate(1028,t),36005:(e,t)=>e.stencilMaskSeparate(1029,t),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(e,t)=>e.viewport(...t),34383:Dt,10754:Dt,12288:Dt,12289:Dt,12290:Dt,12291:Dt,12292:Dt,12293:Dt,12294:Dt,12295:Dt,3333:Mn,3317:Mn,37440:Mn,37441:Mn,37443:Mn,3330:Mn,3332:Mn,3331:Mn,3314:Mn,32878:Mn,3316:Mn,3315:Mn,32877:Mn,framebuffer:(e,t)=>{const n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{const n=typeof t=="number"?[t,t]:t;e.blendEquationSeparate(...n)},blendFunc:(e,t)=>{const n=t?.length===2?[...t,...t]:t;e.blendFuncSeparate(...n)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(t[0],t[1]||!1),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=Od(t)?t:[t,t];const[n,i]=t;e.stencilMaskSeparate(1028,n),e.stencilMaskSeparate(1029,i)},stencilFunc:(e,t)=>{t=Od(t)&&t.length===3?[...t,...t]:t;const[n,i,s,r,a,o]=t;e.stencilFuncSeparate(1028,n,i,s),e.stencilFuncSeparate(1029,r,a,o)},stencilOp:(e,t)=>{t=Od(t)&&t.length===3?[...t,...t]:t;const[n,i,s,r,a,o]=t;e.stencilOpSeparate(1028,n,i,s),e.stencilOpSeparate(1029,r,a,o)},viewport:(e,t)=>e.viewport(...t)};function Ct(e,t,n){return t[e]!==void 0?t[e]:n[e]}const qD={blendEquation:(e,t,n)=>e.blendEquationSeparate(Ct(32777,t,n),Ct(34877,t,n)),blendFunc:(e,t,n)=>e.blendFuncSeparate(Ct(32969,t,n),Ct(32968,t,n),Ct(32971,t,n),Ct(32970,t,n)),polygonOffset:(e,t,n)=>e.polygonOffset(Ct(32824,t,n),Ct(10752,t,n)),sampleCoverage:(e,t,n)=>e.sampleCoverage(Ct(32938,t,n),Ct(32939,t,n)),stencilFuncFront:(e,t,n)=>e.stencilFuncSeparate(1028,Ct(2962,t,n),Ct(2967,t,n),Ct(2963,t,n)),stencilFuncBack:(e,t,n)=>e.stencilFuncSeparate(1029,Ct(34816,t,n),Ct(36003,t,n),Ct(36004,t,n)),stencilOpFront:(e,t,n)=>e.stencilOpSeparate(1028,Ct(2964,t,n),Ct(2965,t,n),Ct(2966,t,n)),stencilOpBack:(e,t,n)=>e.stencilOpSeparate(1029,Ct(34817,t,n),Ct(34818,t,n),Ct(34819,t,n))},ry={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,n)=>e({[t]:n}),hint:(e,t,n)=>e({[t]:n}),useProgram:(e,t)=>e({35725:t}),bindRenderbuffer:(e,t,n)=>e({36007:n}),bindTransformFeedback:(e,t,n)=>e({36389:n}),bindVertexArray:(e,t)=>e({34229:t}),bindFramebuffer:(e,t,n)=>{switch(t){case 36160:return e({36006:n,36010:n});case 36009:return e({36006:n});case 36008:return e({36010:n});default:return null}},bindBuffer:(e,t,n)=>{const i={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[t];return i?e({[i]:n}):{valueChanged:!0}},blendColor:(e,t,n,i,s)=>e({32773:new Float32Array([t,n,i,s])}),blendEquation:(e,t)=>e({32777:t,34877:t}),blendEquationSeparate:(e,t,n)=>e({32777:t,34877:n}),blendFunc:(e,t,n)=>e({32969:t,32968:n,32971:t,32970:n}),blendFuncSeparate:(e,t,n,i,s)=>e({32969:t,32968:n,32971:i,32970:s}),clearColor:(e,t,n,i,s)=>e({3106:new Float32Array([t,n,i,s])}),clearDepth:(e,t)=>e({2931:t}),clearStencil:(e,t)=>e({2961:t}),colorMask:(e,t,n,i,s)=>e({3107:[t,n,i,s]}),cullFace:(e,t)=>e({2885:t}),depthFunc:(e,t)=>e({2932:t}),depthRange:(e,t,n)=>e({2928:new Float32Array([t,n])}),depthMask:(e,t)=>e({2930:t}),frontFace:(e,t)=>e({2886:t}),lineWidth:(e,t)=>e({2849:t}),polygonOffset:(e,t,n)=>e({32824:t,10752:n}),sampleCoverage:(e,t,n)=>e({32938:t,32939:n}),scissor:(e,t,n,i,s)=>e({3088:new Int32Array([t,n,i,s])}),stencilMask:(e,t)=>e({2968:t,36005:t}),stencilMaskSeparate:(e,t,n)=>e({[t===1028?2968:36005]:n}),stencilFunc:(e,t,n,i)=>e({2962:t,2967:n,2963:i,34816:t,36003:n,36004:i}),stencilFuncSeparate:(e,t,n,i,s)=>e({[t===1028?2962:34816]:n,[t===1028?2967:36003]:i,[t===1028?2963:36004]:s}),stencilOp:(e,t,n,i)=>e({2964:t,2965:n,2966:i,34817:t,34818:n,34819:i}),stencilOpSeparate:(e,t,n,i,s)=>e({[t===1028?2964:34817]:n,[t===1028?2965:34818]:i,[t===1028?2966:34819]:s}),viewport:(e,t,n,i,s)=>e({2978:[t,n,i,s]})},wi=(e,t)=>e.isEnabled(t),ay={3042:wi,2884:wi,2929:wi,3024:wi,32823:wi,32926:wi,32928:wi,3089:wi,2960:wi,35977:wi},ZD=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function Ia(e,t){if(QD(t))return;const n={};for(const s in t){const r=Number(s),a=KD[s];a&&(typeof a=="string"?n[a]=!0:a(e,t[s],r))}const i=e.state&&e.state.cache;if(i)for(const s in n){const r=qD[s];r(e,t,i)}}function xx(e,t=Rg){if(typeof t=="number"){const s=t,r=ay[s];return r?r(e,s):e.getParameter(s)}const n=Array.isArray(t)?t:Object.keys(t),i={};for(const s of n){const r=ay[s];i[s]=r?r(e,Number(s)):e.getParameter(Number(s))}return i}function GD(e){Ia(e,Rg)}function QD(e){for(const t in e)return!1;return!0}function JD(e,t){if(e===t)return!0;const n=Array.isArray(e)||ArrayBuffer.isView(e),i=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&i&&e.length===t.length){for(let s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0}return!1}class Qs{static get(t){return t.state}gl;program=null;stateStack=[];enable=!0;cache=null;log;initialized=!1;constructor(t,n){this.gl=t,this.log=n?.log||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(t={}){this.stateStack.push({})}pop(){const t=this.stateStack[this.stateStack.length-1];Ia(this.gl,t),this.stateStack.pop()}trackState(t,n){if(this.cache=n.copyState?xx(t):Object.assign({},Rg),this.initialized)throw new Error("WebGLStateTracker");this.initialized=!0,this.gl.state=this,tN(t);for(const i in ry){const s=ry[i];eN(t,i,s)}oy(t,"getParameter"),oy(t,"isEnabled")}_updateCache(t){let n=!1,i;const s=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const r in t){const a=t[r],o=this.cache[r];JD(a,o)||(n=!0,i=o,s&&!(r in s)&&(s[r]=o),this.cache[r]=a)}return{valueChanged:n,oldValue:i}}}function oy(e,t){const n=e[t].bind(e);e[t]=function(s){if(s===void 0||ZD.has(s))return n(s);const r=Qs.get(e);return s in r.cache||(r.cache[s]=n(s)),r.enable?r.cache[s]:n(s)},Object.defineProperty(e[t],"name",{value:`${t}-from-cache`,configurable:!1})}function eN(e,t,n){if(!e[t])return;const i=e[t].bind(e);e[t]=function(...r){const a=Qs.get(e),{valueChanged:o,oldValue:l}=n(a._updateCache,...r);return o&&i(...r),l},Object.defineProperty(e[t],"name",{value:`${t}-to-cache`,configurable:!1})}function tN(e){const t=e.useProgram.bind(e);e.useProgram=function(i){const s=Qs.get(e);s.program!==i&&(t(i),s.program=i)}}function nN(e,t,n){let i="";const s={preserveDrawingBuffer:!0,...n};let r=null;if(r||=e.getContext("webgl2",s),s.failIfMajorPerformanceCaveat&&(i||="Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow."),!r&&!n.failIfMajorPerformanceCaveat&&(s.failIfMajorPerformanceCaveat=!1,r=e.getContext("webgl2",s),r.luma||={},r.luma.softwareRenderer=!0),r||(r=e.getContext("webgl",{}),r&&(r=null,i||="Your browser only supports WebGL1")),!r)throw i||="Your browser does not support WebGL",new Error(`Failed to create WebGL context: ${i}`);const{onContextLost:a,onContextRestored:o}=t;return e.addEventListener("webglcontextlost",l=>a(l),!1),e.addEventListener("webglcontextrestored",l=>o(l),!1),r.luma||={},r}function pa(e,t,n){return n[t]===void 0&&(n[t]=e.getExtension(t)||null),n[t]}function iN(e,t){const n=e.getParameter(7936),i=e.getParameter(7937);pa(e,"WEBGL_debug_renderer_info",t);const s=t.WEBGL_debug_renderer_info,r=e.getParameter(s?s.UNMASKED_VENDOR_WEBGL:7936),a=e.getParameter(s?s.UNMASKED_RENDERER_WEBGL:7937),o=r||n,l=a||i,u=e.getParameter(7938),c=Sx(o,l),d=sN(o,l),f=rN(o,l);return{type:"webgl",gpu:c,gpuType:f,gpuBackend:d,vendor:o,renderer:l,version:u,shadingLanguage:"glsl",shadingLanguageVersion:300}}function Sx(e,t){return/NVIDIA/i.exec(e)||/NVIDIA/i.exec(t)?"nvidia":/INTEL/i.exec(e)||/INTEL/i.exec(t)?"intel":/Apple/i.exec(e)||/Apple/i.exec(t)?"apple":/AMD/i.exec(e)||/AMD/i.exec(t)||/ATI/i.exec(e)||/ATI/i.exec(t)?"amd":/SwiftShader/i.exec(e)||/SwiftShader/i.exec(t)?"software":"unknown"}function sN(e,t){return/Metal/i.exec(e)||/Metal/i.exec(t)?"metal":/ANGLE/i.exec(e)||/ANGLE/i.exec(t)?"opengl":"unknown"}function rN(e,t){if(/SwiftShader/i.exec(e)||/SwiftShader/i.exec(t))return"cpu";switch(Sx(e,t)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function Tx(e){switch(e){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(e))}const Qa="WEBGL_compressed_texture_s3tc",Ja="WEBGL_compressed_texture_s3tc_srgb",Yr="EXT_texture_compression_rgtc",Kr="EXT_texture_compression_bptc",aN="WEBGL_compressed_texture_etc",oN="WEBGL_compressed_texture_astc",lN="WEBGL_compressed_texture_etc1",cN="WEBGL_compressed_texture_pvrtc",uN="WEBGL_compressed_texture_atc",ly="EXT_texture_norm16",cy="EXT_render_snorm",dN="EXT_color_buffer_float",Mg={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat-renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[cy],"norm16-renderable-webgl":[ly],"snorm16-renderable-webgl":[ly,cy],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[Qa,Ja,Yr,Kr],"texture-compression-bc5-webgl":[Yr],"texture-compression-bc7-webgl":[Kr],"texture-compression-etc2":[aN],"texture-compression-astc":[oN],"texture-compression-etc1-webgl":[lN],"texture-compression-pvrtc-webgl":[cN],"texture-compression-atc-webgl":[uN]};function fN(e){return e in Mg}function hN(e,t,n){return(Mg[t]||[]).every(s=>pa(e,s,n))}const Og={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},"r16unorm-webgl":{gl:33322,rb:!0},"r16snorm-webgl":{gl:36760},"rgba4unorm-webgl":{gl:32854,rb:!0},"rgb565unorm-webgl":{gl:36194,rb:!0},"rgb5a1unorm-webgl":{gl:32855,rb:!0},"rgb8unorm-webgl":{gl:32849},"rgb8snorm-webgl":{gl:36758},rgba8unorm:{gl:32856},"rgba8unorm-srgb":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},"rg16unorm-webgl":{gl:33324},"rg16snorm-webgl":{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},"rgb10a2uint-webgl":{gl:36975,rb:!0},"rgb16unorm-webgl":{gl:32852},"rgb16snorm-webgl":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},"rgba16unorm-webgl":{gl:32859,rb:!0},"rgba16snorm-webgl":{gl:36763},"rgb32float-webgl":{gl:34837,x:dN,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth32float-stencil8":{gl:36013,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:Qa},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:Ja},"bc1-rgba-unorm":{gl:33777,x:Qa},"bc1-rgba-unorm-srgb":{gl:35916,x:Ja},"bc2-rgba-unorm":{gl:33778,x:Qa},"bc2-rgba-unorm-srgb":{gl:35918,x:Ja},"bc3-rgba-unorm":{gl:33779,x:Qa},"bc3-rgba-unorm-srgb":{gl:35919,x:Ja},"bc4-r-unorm":{gl:36283,x:Yr},"bc4-r-snorm":{gl:36284,x:Yr},"bc5-rg-unorm":{gl:36285,x:Yr},"bc5-rg-snorm":{gl:36286,x:Yr},"bc6h-rgb-ufloat":{gl:36495,x:Kr},"bc6h-rgb-float":{gl:36494,x:Kr},"bc7-rgba-unorm":{gl:36492,x:Kr},"bc7-rgba-unorm-srgb":{gl:36493,x:Kr},"etc2-rgb8unorm":{gl:37492},"etc2-rgb8unorm-srgb":{gl:37494},"etc2-rgb8a1unorm":{gl:37496},"etc2-rgb8a1unorm-srgb":{gl:37497},"etc2-rgba8unorm":{gl:37493},"etc2-rgba8unorm-srgb":{gl:37495},"eac-r11unorm":{gl:37488},"eac-r11snorm":{gl:37489},"eac-rg11unorm":{gl:37490},"eac-rg11snorm":{gl:37491},"astc-4x4-unorm":{gl:37808},"astc-4x4-unorm-srgb":{gl:37840},"astc-5x4-unorm":{gl:37809},"astc-5x4-unorm-srgb":{gl:37841},"astc-5x5-unorm":{gl:37810},"astc-5x5-unorm-srgb":{gl:37842},"astc-6x5-unorm":{gl:37811},"astc-6x5-unorm-srgb":{gl:37843},"astc-6x6-unorm":{gl:37812},"astc-6x6-unorm-srgb":{gl:37844},"astc-8x5-unorm":{gl:37813},"astc-8x5-unorm-srgb":{gl:37845},"astc-8x6-unorm":{gl:37814},"astc-8x6-unorm-srgb":{gl:37846},"astc-8x8-unorm":{gl:37815},"astc-8x8-unorm-srgb":{gl:37847},"astc-10x5-unorm":{gl:37819},"astc-10x5-unorm-srgb":{gl:37851},"astc-10x6-unorm":{gl:37817},"astc-10x6-unorm-srgb":{gl:37849},"astc-10x8-unorm":{gl:37818},"astc-10x8-unorm-srgb":{gl:37850},"astc-10x10-unorm":{gl:37819},"astc-10x10-unorm-srgb":{gl:37851},"astc-12x10-unorm":{gl:37820},"astc-12x10-unorm-srgb":{gl:37852},"astc-12x12-unorm":{gl:37821},"astc-12x12-unorm-srgb":{gl:37853},"pvrtc-rgb4unorm-webgl":{gl:35840},"pvrtc-rgba4unorm-webgl":{gl:35842},"pvrtc-rbg2unorm-webgl":{gl:35841},"pvrtc-rgba2unorm-webgl":{gl:35843},"etc1-rbg-unorm-webgl":{gl:36196},"atc-rgb-unorm-webgl":{gl:35986},"atc-rgba-unorm-webgl":{gl:35986},"atc-rgbai-unorm-webgl":{gl:34798}};function gN(e,t,n){let i=t.create;const s=Og[t.format];return s?.gl===void 0&&(i=!1),s?.x&&(i=i&&!!pa(e,s.x,n)),{format:t.format,create:i&&t.create,render:i&&t.render,filter:i&&t.filter,blend:i&&t.blend,store:i&&t.store}}function Ax(e){const t=Og[e],n=pN(e),i=og(e);return{internalFormat:n,format:t?.dataFormat||vN(i.channels,i.integer,i.normalized,n),type:i.dataType?Tx(i.dataType):t?.types?.[0]||5121,compressed:i.compressed||!1}}function mN(e){switch(og(e).attachment){case"depth":return 36096;case"stencil":return 36128;case"depth-stencil":return 33306;default:throw new Error(`Not a depth stencil format: ${e}`)}}function vN(e,t,n,i){if(i===6408||i===6407)return i;switch(e){case"r":return t&&!n?36244:6403;case"rg":return t&&!n?33320:33319;case"rgb":return t&&!n?36248:6407;case"rgba":return t&&!n?36249:6408;case"bgra":throw new Error("bgra pixels not supported by WebGL");default:return 6408}}function pN(e){const n=Og[e]?.gl;if(n===void 0)throw new Error(`Unsupported texture format ${e}`);return n}const uy={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class yN extends dI{gl;extensions;testedFeatures=new Set;constructor(t,n,i){super([],i),this.gl=t,this.extensions=n,pa(t,"EXT_color_buffer_float",n)}*[Symbol.iterator](){const t=this.getFeatures();for(const n of t)this.has(n)&&(yield n);return[]}has(t){return this.disabledFeatures?.[t]?!1:(this.testedFeatures.has(t)||(this.testedFeatures.add(t),fN(t)&&hN(this.gl,t,this.extensions)&&this.features.add(t),this.getWebGLFeature(t)&&this.features.add(t)),this.features.has(t))}initializeFeatures(){const t=this.getFeatures().filter(n=>n!=="polygon-mode-webgl");for(const n of t)this.has(n)}getFeatures(){return[...Object.keys(uy),...Object.keys(Mg)]}getWebGLFeature(t){const n=uy[t];return typeof n=="string"?!!pa(this.gl,n,this.extensions):!!n}}class _N extends uI{get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}gl;limits={};constructor(t){super(),this.gl=t}getParameter(t){return this.limits[t]===void 0&&(this.limits[t]=this.gl.getParameter(t)),this.limits[t]||0}}class go extends du{device;gl;handle;colorAttachments=[];depthStencilAttachment=null;constructor(t,n){super(t,n);const i=n.handle===null;this.device=t,this.gl=t.gl,this.handle=this.props.handle||i?this.props.handle:this.gl.createFramebuffer(),i||(t.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}updateAttachments(){const t=this.gl.bindFramebuffer(36160,this.handle);for(let n=0;n<this.colorAttachments.length;++n){const i=this.colorAttachments[n];if(i){const s=36064+n;this._attachTextureView(s,i)}}if(this.depthStencilAttachment){const n=mN(this.depthStencilAttachment.props.format);this._attachTextureView(n,this.depthStencilAttachment)}if(this.device.props.debug){const n=this.gl.checkFramebufferStatus(36160);if(n!==36053)throw new Error(`Framebuffer ${wN(n)}`)}this.gl.bindFramebuffer(36160,t)}_attachTextureView(t,n){const{gl:i}=this.device,{texture:s}=n,r=n.props.baseMipLevel,a=n.props.baseArrayLayer;switch(i.bindTexture(s.glTarget,s.handle),s.glTarget){case 35866:case 32879:i.framebufferTextureLayer(36160,t,s.handle,r,a);break;case 34067:const o=bN(a);i.framebufferTexture2D(36160,t,o,s.handle,r);break;case 3553:i.framebufferTexture2D(36160,t,3553,s.handle,r);break;default:throw new Error("Illegal texture type")}i.bindTexture(s.glTarget,null)}}function bN(e){return e<34069?e+34069:e}function wN(e){switch(e){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${e}`}}class xN extends lg{device;format="rgba8unorm";depthStencilFormat="depth24plus";presentationSize;_framebuffer=null;get[Symbol.toStringTag](){return"WebGLCanvasContext"}constructor(t,n){super(n),this.device=t,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new go(this.device,{handle:null}),this._framebuffer}update(){const t=this.getPixelSize();(t[0]!==this.presentationSize[0]||t[1]!==this.presentationSize[1])&&(this.presentationSize=t,this.resize())}resize(t){if(this.device.gl&&this.canvas){const n=this.getDevicePixelRatio(t?.useDevicePixels);this.setDevicePixelRatio(n,t);return}}commit(){}}async function Cx(e,t){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const i=document.createElement("script");return i.setAttribute("type","text/javascript"),i.setAttribute("src",e),new Promise((s,r)=>{i.onload=s,i.onerror=a=>r(new Error(`Unable to load script '${e}': ${a}`)),n.appendChild(i)})}const SN=1;let On=null,dy=!1;const Dg={debugSpectorJS:xe.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};async function TN(e){if(!globalThis.SPECTOR)try{await Cx(e.debugSpectorJSUrl||Dg.debugSpectorJSUrl)}catch(t){xe.warn(String(t))}}function AN(e){if(e={...Dg,...e},!e.debugSpectorJS)return null;if(!On&&globalThis.SPECTOR&&!globalThis.luma?.spector){xe.probe(SN,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();const{Spector:t}=globalThis.SPECTOR;On=new t,globalThis.luma&&(globalThis.luma.spector=On)}if(!On)return null;if(dy||(dy=!0,On.spyCanvases(),On?.onCaptureStarted.add(t=>xe.info("Spector capture started:",t)()),On?.onCapture.add(t=>{xe.info("Spector capture complete:",t)(),On?.getResultUI(),On?.resultView.display(),On?.resultView.addCapture(t)})),e.gl){const t=e.gl,n=t.device;On?.startCapture(e.gl,500),t.device=n,new Promise(i=>setTimeout(i,2e3)).then(i=>{xe.info("Spector capture stopped after 2 seconds")(),On?.stopCapture()})}return On}const CN="https://unpkg.com/webgl-debug@2.0.1/index.js";function kx(e){return e.luma=e.luma||{},e.luma}async function kN(){vr()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await Cx(CN))}function EN(e,t={}){return t.debugWebGL||t.traceWebGL?PN(e,t):IN(e)}function IN(e){const t=kx(e);return t.realContext?t.realContext:e}function PN(e,t){if(!globalThis.WebGLDebugUtils)return xe.warn("webgl-debug not loaded")(),e;const n=kx(e);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...Xr,...e});const i=globalThis.WebGLDebugUtils.makeDebugContext(e,RN.bind(null,t),MN.bind(null,t));for(const a in Xr)!(a in i)&&typeof Xr[a]=="number"&&(i[a]=Xr[a]);class s{}Object.setPrototypeOf(i,Object.getPrototypeOf(e)),Object.setPrototypeOf(s,i);const r=Object.create(s);return n.realContext=e,n.debugContext=r,r.debug=!0,r}function fy(e,t){t=Array.from(t).map(i=>i===void 0?"undefined":i);let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(e,t);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${e}(${n})`}function RN(e,t,n,i){i=Array.from(i).map(o=>o===void 0?"undefined":o);const s=globalThis.WebGLDebugUtils.glEnumToString(t),r=globalThis.WebGLDebugUtils.glFunctionArgsToString(n,i),a=`${s} in gl.${n}(${r})`;xe.error(a)();debugger}function MN(e,t,n){let i="";xe.level>=1&&(i=fy(t,n),e.traceWebGL&&xe.log(1,i)());for(const s of n)if(s===void 0){i=i||fy(t,n);debugger}}const Dd={};function ON(e="id"){Dd[e]=Dd[e]||1;const t=Dd[e]++;return`${e}-${t}`}class mo extends pt{device;gl;handle;glTarget;glUsage;glIndexType=5123;byteLength;bytesUsed;constructor(t,n={}){super(t,n),this.device=t,this.gl=this.device.gl;const i=typeof n=="object"?n.handle:void 0;this.handle=i||this.gl.createBuffer(),t.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=DN(this.props.usage),this.glUsage=NN(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,n.data?this._initWithData(n.data,n.byteOffset,n.byteLength):this._initWithByteLength(n.byteLength||0)}_initWithData(t,n=0,i=t.byteLength+n){const s=this.glTarget;this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,i,this.glUsage),this.gl.bufferSubData(s,n,t),this.gl.bindBuffer(s,null),this.bytesUsed=i,this.byteLength=i,this._setDebugData(t,n,i),this.trackAllocatedMemory(i)}_initWithByteLength(t){let n=t;t===0&&(n=new Float32Array(0));const i=this.glTarget;return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.glUsage),this.gl.bindBuffer(i,null),this.bytesUsed=t,this.byteLength=t,this._setDebugData(null,0,t),this.trackAllocatedMemory(t),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(t,n=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,n,t),this.gl.bindBuffer(36663,null),this._setDebugData(t,n,t.byteLength)}async readAsync(t=0,n){return this.readSyncWebGL(t,n)}readSyncWebGL(t=0,n){n=n??this.byteLength-t;const i=new Uint8Array(n),s=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,i,s,n),this.gl.bindBuffer(36662,null),this._setDebugData(i,t,n),i}}function DN(e){return e&pt.INDEX?34963:e&pt.VERTEX?34962:e&pt.UNIFORM?35345:34962}function NN(e){return e&pt.INDEX||e&pt.VERTEX?35044:e&pt.UNIFORM?35048:35044}function BN(e){const t=e.split(/\r?\n/),n=[];for(const i of t){if(i.length<=1)continue;const s=i.split(":");if(s.length===2){const[d,f]=s;n.push({message:f.trim(),type:hy(d),lineNum:0,linePos:0});continue}const[r,a,o,...l]=s;let u=parseInt(o,10);isNaN(u)&&(u=0);let c=parseInt(a,10);isNaN(c)&&(c=0),n.push({message:l.join(":").trim(),type:hy(r),lineNum:u,linePos:c})}return n}function hy(e){const t=["warning","error","info"],n=e.toLowerCase();return t.includes(n)?n:"info"}class FN extends uu{device;handle;constructor(t,n){switch(super(t,n),this.device=t,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then(()=>this.compilationStatus)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const t=this.device.gl.getShaderInfoLog(this.handle);return t?BN(t):[]}getTranslatedSource(){return this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders?.getTranslatedShaderSource(this.handle)||null}async _compile(t){t=t.startsWith("#version ")?t:`#version 300 es
${t}`;const{gl:n}=this.device;if(n.shaderSource(this.handle,t),n.compileShader(this.handle),!this.device.props.debug){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}xe.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),xe.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const t=async s=>await new Promise(r=>setTimeout(r,s));if(!this.device.features.has("compilation-status-async-webgl")){await t(10);return}const{gl:i}=this.device;for(;;){if(i.getShaderParameter(this.handle,37297))return;await t(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}function VN(e,t,n,i){if(zN(t))return i(e);const s=e;s.pushState();try{return LN(e,t),Ia(s.gl,n),i(e)}finally{s.popState()}}function LN(e,t){const n=e,{gl:i}=n;if(t.cullMode)switch(t.cullMode){case"none":i.disable(2884);break;case"front":i.enable(2884),i.cullFace(1028);break;case"back":i.enable(2884),i.cullFace(1029);break}if(t.frontFace&&i.frontFace(Js("frontFace",t.frontFace,{ccw:2305,cw:2304})),t.unclippedDepth&&e.features.has("depth-clip-control")&&i.enable(34383),t.depthBias!==void 0&&(i.enable(32823),i.polygonOffset(t.depthBias,t.depthBiasSlopeScale||0)),t.provokingVertex&&e.features.has("provoking-vertex-webgl")){const r=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,a=Js("provokingVertex",t.provokingVertex,{first:36429,last:36430});r?.provokingVertexWEBGL(a)}if((t.polygonMode||t.polygonOffsetLine)&&e.features.has("polygon-mode-webgl")){if(t.polygonMode){const r=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,a=Js("polygonMode",t.polygonMode,{fill:6914,line:6913});r?.polygonModeWEBGL(1028,a),r?.polygonModeWEBGL(1029,a)}t.polygonOffsetLine&&i.enable(10754)}if(e.features.has("shader-clip-cull-distance-webgl")&&(t.clipDistance0&&i.enable(12288),t.clipDistance1&&i.enable(12289),t.clipDistance2&&i.enable(12290),t.clipDistance3&&i.enable(12291),t.clipDistance4&&i.enable(12292),t.clipDistance5&&i.enable(12293),t.clipDistance6&&i.enable(12294),t.clipDistance7&&i.enable(12295)),t.depthWriteEnabled!==void 0&&i.depthMask($N("depthWriteEnabled",t.depthWriteEnabled)),t.depthCompare&&(t.depthCompare!=="always"?i.enable(2929):i.disable(2929),i.depthFunc(Nf("depthCompare",t.depthCompare))),t.stencilWriteMask){const s=t.stencilWriteMask;i.stencilMaskSeparate(1028,s),i.stencilMaskSeparate(1029,s)}if(t.stencilReadMask&&xe.warn("stencilReadMask not supported under WebGL"),t.stencilCompare){const s=t.stencilReadMask||4294967295,r=Nf("depthCompare",t.stencilCompare);t.stencilCompare!=="always"?i.enable(2960):i.disable(2960),i.stencilFuncSeparate(1028,r,0,s),i.stencilFuncSeparate(1029,r,0,s)}if(t.stencilPassOperation&&t.stencilFailOperation&&t.stencilDepthFailOperation){const s=Nd("stencilPassOperation",t.stencilPassOperation),r=Nd("stencilFailOperation",t.stencilFailOperation),a=Nd("stencilDepthFailOperation",t.stencilDepthFailOperation);i.stencilOpSeparate(1028,r,a,s),i.stencilOpSeparate(1029,r,a,s)}switch(t.blend){case!0:i.enable(3042);break;case!1:i.disable(3042);break}if(t.blendColorOperation||t.blendAlphaOperation){const s=gy("blendColorOperation",t.blendColorOperation||"add"),r=gy("blendAlphaOperation",t.blendAlphaOperation||"add");i.blendEquationSeparate(s,r);const a=Ol("blendColorSrcFactor",t.blendColorSrcFactor||"one"),o=Ol("blendColorDstFactor",t.blendColorDstFactor||"zero"),l=Ol("blendAlphaSrcFactor",t.blendAlphaSrcFactor||"one"),u=Ol("blendAlphaDstFactor",t.blendAlphaDstFactor||"zero");i.blendFuncSeparate(a,o,l,u)}}function Nf(e,t){return Js(e,t,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function Nd(e,t){return Js(e,t,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function gy(e,t){return Js(e,t,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function Ol(e,t){return Js(e,t,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function UN(e,t){return`Illegal parameter ${t} for ${e}`}function Js(e,t,n){if(!(t in n))throw new Error(UN(e,t));return n[t]}function $N(e,t){return t}function zN(e){let t=!0;for(const n in e){t=!1;break}return t}function Ex(e){const t={};return e.addressModeU&&(t[10242]=Bd(e.addressModeU)),e.addressModeV&&(t[10243]=Bd(e.addressModeV)),e.addressModeW&&(t[32882]=Bd(e.addressModeW)),e.magFilter&&(t[10240]=Bf(e.magFilter)),(e.minFilter||e.mipmapFilter)&&(t[10241]=WN(e.minFilter||"linear",e.mipmapFilter)),e.lodMinClamp!==void 0&&(t[33082]=e.lodMinClamp),e.lodMaxClamp!==void 0&&(t[33083]=e.lodMaxClamp),e.type==="comparison-sampler"&&(t[34892]=34894),e.compare&&(t[34893]=Nf("compare",e.compare)),e.maxAnisotropy&&(t[34046]=e.maxAnisotropy),t}function Bd(e){switch(e){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function Bf(e){switch(e){case"nearest":return 9728;case"linear":return 9729}}function WN(e,t="none"){if(!t)return Bf(e);switch(t){case"none":return Bf(e);case"nearest":return e==="nearest"?9984:9986;case"linear":return e==="nearest"?9985:9987}}class Ff extends Ao{device;handle;parameters;constructor(t,n){super(t,n),this.device=t,this.parameters=Ex(n),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(t){for(const[n,i]of Object.entries(t)){const s=Number(n);switch(s){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,s,i);break;default:this.device.gl.samplerParameteri(this.handle,s,i);break}}}}class qr extends cu{device;gl;handle;texture;constructor(t,n){super(t,{...ct.defaultProps,...n}),this.device=t,this.gl=this.device.gl,this.handle=null,this.texture=n.texture}}const HN="Failed to deduce GL constant from typed array";function jN(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(HN)}}function XN(e,t){const{clamped:n=!0}=t||{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Ix(e){switch(e){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}function YN(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}function Oc(e,t,n){if(KN(t))return n(e);const{nocatch:i=!0}=t,s=Qs.get(e);s.push(),Ia(e,t);let r;if(i)r=n(e),s.pop();else try{r=n(e)}finally{s.pop()}return r}function KN(e){for(const t in e)return!1;return!0}function qN(e,t,n){const{dimension:i,width:s,height:r,depth:a=0}=n,{glInternalFormat:o}=n,l=n.glTarget;switch(i){case"2d-array":case"3d":e.texStorage3D(l,t,o,s,r,a);break;default:e.texStorage2D(l,t,o,s,r)}}function my(e,t,n,i){const{width:s,height:r}=i,{dimension:a,depth:o=0,mipLevel:l=0}=i,{x:u=0,y:c=0,z:d=0}=i,{glFormat:f,glType:h}=i,g=Px(i.glTarget,a,o),v=i.flipY?{37440:!0}:{};Oc(e,v,()=>{switch(a){case"2d-array":case"3d":e.bindTexture(g,t),e.texSubImage3D(g,l,u,c,d,s,r,o,f,h,n),e.bindTexture(g,null);break;case"2d":case"cube":e.bindTexture(g,t),e.texSubImage2D(g,l,u,c,s,r,f,h,n),e.bindTexture(g,null);break;default:throw new Error(a)}})}function vy(e,t,n){const{dimension:i,width:s,height:r,depth:a=0,mipLevel:o=0,byteOffset:l=0}=n,{x:u=0,y:c=0,z:d=0}=n,{glFormat:f,glType:h,compressed:g}=n,v=Px(n.glTarget,i,a);switch(i){case"2d-array":case"3d":g?e.compressedTexSubImage3D(v,o,u,c,d,s,r,a,f,t,l):e.texSubImage3D(v,o,u,c,d,s,r,a,f,h,t,l);break;case"2d":case"cube":g?e.compressedTexSubImage2D(v,o,u,c,s,r,f,t,l):e.texSubImage2D(v,o,u,c,s,r,f,h,t,l);break;default:throw new Error(i)}}function ZN(e){switch(e){case"1d":break;case"2d":return 3553;case"3d":return 32879;case"cube":return 34067;case"2d-array":return 35866}throw new Error(e)}function Px(e,t,n){return t==="cube"?34069+n:e}function GN(e,t){const{sourceX:n=0,sourceY:i=0,sourceAttachment:s=0}=t||{};let{target:r=null,sourceWidth:a,sourceHeight:o,sourceDepth:l,sourceFormat:u,sourceType:c}=t||{};const{framebuffer:d,deleteFramebuffer:f}=Rx(e),{gl:h,handle:g}=d;a||=d.width,o||=d.height;const v=d.colorAttachments[s]?.texture;if(!v)throw new Error(`Invalid framebuffer attachment ${s}`);l=v?.depth||1,u||=v?.glFormat||6408,c||=v?.glType||5121,r=eB(r,c,u,a,o),c=c||jN(r);const m=h.bindFramebuffer(36160,g);return h.readBuffer(36064+s),h.readPixels(n,i,a,o,u,c,r),h.readBuffer(36064),h.bindFramebuffer(36160,m||null),f&&d.destroy(),r}function QN(e,t){const{target:n,sourceX:i=0,sourceY:s=0,sourceFormat:r=6408,targetByteOffset:a=0}=t||{};let{sourceWidth:o,sourceHeight:l,sourceType:u}=t||{};const{framebuffer:c,deleteFramebuffer:d}=Rx(e);o=o||c.width,l=l||c.height;const f=c;u=u||5121;let h=n;if(!h){const v=Ix(r),m=YN(u),p=a+o*l*v*m;h=f.device.createBuffer({byteLength:p})}const g=e.device.createCommandEncoder();return g.copyTextureToBuffer({sourceTexture:e,width:o,height:l,origin:[i,s],destinationBuffer:h,byteOffset:a}),g.destroy(),d&&c.destroy(),h}function Rx(e){return e instanceof du?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:JN(e),deleteFramebuffer:!0}}function JN(e,t){const{device:n,width:i,height:s,id:r}=e;return n.createFramebuffer({...t,id:`framebuffer-for-${r}`,width:i,height:s,colorAttachments:[e]})}function eB(e,t,n,i,s,r){if(e)return e;t||=5121;const a=XN(t,{clamped:!1}),o=Ix(n);return new a(i*s*o)}class vo extends ct{device;gl;handle;sampler=void 0;view=void 0;mipmaps;compressed;glTarget;glFormat;glType;glInternalFormat;textureUnit=0;constructor(t,n){super(t,n);const i={...this.props};i.data=n.data,this.device=t,this.gl=this.device.gl,this.glTarget=ZN(this.props.dimension);const s=Ax(this.props.format);this.glInternalFormat=s.internalFormat,this.glFormat=s.format,this.glType=s.type,this.compressed=s.compressed,this.mipmaps=!!this.props.mipmaps,this._initialize(i),Object.seal(this)}_initialize(t){this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:t.data});let{width:n,height:i}=t;if(!n||!i){const s=ct.getTextureDataSize(t.data);n=s?.width||1,i=s?.height||1}if(this.width=n,this.height=i,this.depth=t.depth,this.setSampler(t.sampler),this.view=new qr(this.device,{...this.props,texture:this}),this.bind(),qN(this.gl,this.mipLevels,this),t.data)switch(t.dimension){case"1d":this.setTexture1DData(t.data);break;case"2d":this.setTexture2DData(t.data);break;case"3d":this.setTexture3DData(t.data);break;case"cube":this.setTextureCubeData(t.data);break;case"2d-array":this.setTextureArrayData(t.data);break;case"cube-array":this.setTextureCubeArrayData(t.data);break;default:throw new Error(t.dimension)}this.mipmaps&&this.generateMipmap()}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}createView(t){return new qr(this.device,{...t,texture:this})}setSampler(t={}){let n;t instanceof Ff?(this.sampler=t,n=t.props):(this.sampler=new Ff(this.device,t),n=t);const i=Ex(n);this._setSamplerParameters(i)}generateMipmap(t){if(!(!(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format))&&(xe.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),!t?.force)))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(i){xe.warn(`Error generating mipmap for ${this}: ${i.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}copyExternalImage(t){const n=ct.getExternalImageSize(t.image),i={...ct.defaultCopyExternalImageOptions,...n,...t},{image:s,depth:r,mipLevel:a,x:o,y:l,z:u,flipY:c}=i;let{width:d,height:f}=i;const{dimension:h,glTarget:g,glFormat:v,glInternalFormat:m,glType:p}=this;if(d=Math.min(d,this.width-o),f=Math.min(f,this.height-l),t.sourceX||t.sourceY)throw new Error("WebGL does not support sourceX/sourceY)");return my(this.device.gl,this.handle,s,{dimension:h,mipLevel:a,x:o,y:l,z:u,width:d,height:f,depth:r,glFormat:v,glType:p,glTarget:g,flipY:c}),{width:i.width,height:i.height}}setTexture1DData(t){throw new Error("setTexture1DData not supported in WebGL.")}setTexture2DData(t,n=0){this.bind();const i=ct.normalizeTextureData(t,this);i.length>1&&this.props.mipmaps!==!1&&xe.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let s=0;s<i.length;s++){const r=i[s];this._setMipLevel(n,s,r)}this.unbind()}setTexture3DData(t){if(this.props.dimension!=="3d")throw new Error(this.id);ArrayBuffer.isView(t)&&(this.bind(),vy(this.device.gl,t,this),this.unbind())}setTextureCubeData(t,n=0){if(this.props.dimension!=="cube")throw new Error(this.id);for(const i of ct.CubeFaces)this.setTextureCubeFaceData(t[i],i)}setTextureArrayData(t){throw this.props.dimension!=="2d-array"?new Error(this.id):new Error("setTextureArrayData not implemented.")}setTextureCubeArrayData(t){throw new Error("setTextureCubeArrayData not supported in WebGL2.")}setTextureCubeFaceData(t,n,i=0){Array.isArray(t)&&t.length>1&&this.props.mipmaps!==!1&&xe.warn(`${this.id} has mipmap and multiple LODs.`)();const s=ct.CubeFaces.indexOf(n);this.setTexture2DData(t,s)}update(){throw new Error("Texture.update() not implemented. Use ExternalTexture")}setImageDataForFace(t){const{face:n,width:i,height:s,pixels:r,data:a,format:o=6408,type:l=5121}=t,{gl:u}=this,c=r||a;this.bind(),c instanceof Promise?c.then(d=>this.setImageDataForFace(Object.assign({},t,{face:n,data:d,pixels:d}))):this.width||this.height?u.texImage2D(n,0,o,i,s,0,o,l,c):u.texImage2D(n,0,o,o,l,c)}_getImageDataMap(t){for(let n=0;n<ct.CubeFaces.length;++n){const i=ct.CubeFaces[n];t[i]&&(t[34069+n]=t[i],delete t[i])}return t}_setSamplerParameters(t){xe.log(1,`${this.id} sampler parameters`,this.device.getGLKeys(t))(),this.gl.bindTexture(this.glTarget,this.handle);for(const[n,i]of Object.entries(t)){const s=Number(n),r=i;switch(s){case 33082:case 33083:this.gl.texParameterf(this.glTarget,s,r);break;case 10241:this.gl.texParameteri(this.glTarget,s,r);break;case 10242:case 10243:this.gl.texParameteri(this.glTarget,s,r);break;case 34046:this.device.features.has("texture-filterable-anisotropic-webgl")&&this.gl.texParameteri(this.glTarget,s,r);break;default:this.gl.texParameteri(this.glTarget,s,r);break}}this.gl.bindTexture(this.glTarget,null)}_setMipLevel(t,n,i,s=this.glTarget){if(ct.isExternalImage(i)){my(this.device.gl,this.handle,i,{...this,depth:t,mipLevel:n,glTarget:s,flipY:this.props.flipY});return}if(ct.isTextureLevelData(i)){vy(this.device.gl,i.data,{...this,depth:t,mipLevel:n,glTarget:s});return}throw new Error("Texture: invalid image data")}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(t){const{gl:n}=this;return t!==void 0&&(this.textureUnit=t,n.activeTexture(33984+t)),n.bindTexture(this.glTarget,this.handle),t}unbind(t){const{gl:n}=this;return t!==void 0&&(this.textureUnit=t,n.activeTexture(33984+t)),n.bindTexture(this.glTarget,null),t}}const tB=[1,2,4,8];class nB extends Hs{device;glParameters;constructor(t,n){super(t,n),this.device=t;let i;if(!n?.parameters?.viewport)if(n?.framebuffer){const{width:r,height:a}=n.framebuffer;i=[0,0,r,a]}else{const[r,a]=t.getCanvasContext().getDrawingBufferSize();i=[0,0,r,a]}if(this.device.pushState(),this.setParameters({viewport:i,...this.props.parameters}),this.props.framebuffer?.handle)if(this.props.framebuffer){const r=this.props.framebuffer.colorAttachments.map((a,o)=>36064+o);this.device.gl.drawBuffers(r)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(t){}popDebugGroup(){}insertDebugMarker(t){}setParameters(t={}){const n={...this.glParameters};n.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(n.depthMask=!this.props.depthReadOnly),n.stencilMask=this.props.stencilReadOnly?0:1,n[35977]=this.props.discard,t.viewport&&(t.viewport.length>=6?(n.viewport=t.viewport.slice(0,4),n.depthRange=[t.viewport[4],t.viewport[5]]):n.viewport=t.viewport),t.scissorRect&&(n.scissorTest=!0,n.scissor=t.scissorRect),t.blendConstant&&(n.blendColor=t.blendConstant),t.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),t[2967]=t.stencilReference),t.colorMask&&(n.colorMask=tB.map(i=>!!(i&t.colorMask))),this.glParameters=n,Ia(this.device.gl,n)}beginOcclusionQuery(t){this.props.occlusionQuerySet?.beginOcclusionQuery()}endOcclusionQuery(){this.props.occlusionQuerySet?.endOcclusionQuery()}clear(){const t={...this.glParameters};let n=0;this.props.clearColors&&this.props.clearColors.forEach((i,s)=>{i&&this.clearColorBuffer(s,i)}),this.props.clearColor!==!1&&this.props.clearColors===void 0&&(n|=16384,t.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(n|=256,t.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(n|=1024,t.clearStencil=this.props.clearStencil),n!==0&&Oc(this.device.gl,t,()=>{this.device.gl.clear(n)})}clearColorBuffer(t=0,n=[0,0,0,0]){Oc(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(n.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,t,n);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,t,n);break;case Float32Array:this.device.gl.clearBufferfv(6144,t,n);break;default:throw new Error("clearColorBuffer: color must be typed array")}})}}function iB(e){return sB.includes(e)}const sB=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],Mx={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function Ox(e){const t=Mx[e];if(!t)throw new Error("uniform");const[n,i,,s]=t;return{format:s,components:i,glType:n}}function rB(e){const t=Mx[e];if(!t)throw new Error("attribute");const[,n,,i,s]=t;return{attributeType:i,vertexFormat:s,components:n}}function aB(e,t){const n={attributes:[],bindings:[]};n.attributes=oB(e,t);const i=uB(e,t);for(const o of i){const l=o.uniforms.map(u=>({name:u.name,format:u.format,byteOffset:u.byteOffset,byteStride:u.byteStride,arrayLength:u.arrayLength}));n.bindings.push({type:"uniform",name:o.name,group:0,location:o.location,visibility:(o.vertex?1:0)&(o.fragment?2:0),minBindingSize:o.byteLength,uniforms:l})}const s=cB(e,t);let r=0;for(const o of s)if(iB(o.type)){const{viewDimension:l,sampleType:u}=fB(o.type);n.bindings.push({type:"texture",name:o.name,group:0,location:r,viewDimension:l,sampleType:u}),o.textureUnit=r,r+=1}s.length&&(n.uniforms=s);const a=lB(e,t);return a?.length&&(n.varyings=a),n}function oB(e,t){const n=[],i=e.getProgramParameter(t,35721);for(let s=0;s<i;s++){const r=e.getActiveAttrib(t,s);if(!r)throw new Error("activeInfo");const{name:a,type:o}=r,l=e.getAttribLocation(t,a);if(l>=0){const{attributeType:u}=rB(o),c=/instance/i.test(a)?"instance":"vertex";n.push({name:a,location:l,stepMode:c,type:u})}}return n.sort((s,r)=>s.location-r.location),n}function lB(e,t){const n=[],i=e.getProgramParameter(t,35971);for(let s=0;s<i;s++){const r=e.getTransformFeedbackVarying(t,s);if(!r)throw new Error("activeInfo");const{name:a,type:o,size:l}=r,{glType:u,components:c}=Ox(o),d={location:s,name:a,type:u,size:l*c};n.push(d)}return n.sort((s,r)=>s.location-r.location),n}function cB(e,t){const n=[],i=e.getProgramParameter(t,35718);for(let s=0;s<i;s++){const r=e.getActiveUniform(t,s);if(!r)throw new Error("activeInfo");const{name:a,size:o,type:l}=r,{name:u,isArray:c}=hB(a);let d=e.getUniformLocation(t,u);const f={location:d,name:u,size:o,type:l,isArray:c};if(n.push(f),f.size>1)for(let h=0;h<f.size;h++){const g=`${u}[${h}]`;d=e.getUniformLocation(t,g);const v={...f,name:g,location:d};n.push(v)}}return n}function uB(e,t){const n=(r,a)=>e.getActiveUniformBlockParameter(t,r,a),i=[],s=e.getProgramParameter(t,35382);for(let r=0;r<s;r++){const a={name:e.getActiveUniformBlockName(t,r)||"",location:n(r,35391),byteLength:n(r,35392),vertex:n(r,35396),fragment:n(r,35398),uniformCount:n(r,35394),uniforms:[]},o=n(r,35395)||[],l=e.getActiveUniforms(t,o,35383),u=e.getActiveUniforms(t,o,35384),c=e.getActiveUniforms(t,o,35387),d=e.getActiveUniforms(t,o,35388);for(let f=0;f<a.uniformCount;++f){const h=e.getActiveUniform(t,o[f]);if(!h)throw new Error("activeInfo");a.uniforms.push({name:h.name,format:Ox(l[f]).format,type:l[f],arrayLength:u[f],byteOffset:c[f],byteStride:d[f]})}i.push(a)}return i.sort((r,a)=>r.location-a.location),i}const dB={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function fB(e){const t=dB[e];if(!t)throw new Error("sampler");const[n,i]=t;return{viewDimension:n,sampleType:i}}function hB(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const n=/([^[]*)(\[[0-9]+\])?/.exec(e);if(!n||n.length<2)throw new Error(`Failed to parse GLSL uniform name ${e}`);return{name:n[1],length:n[2]?1:0,isArray:!!n[2]}}function gB(e,t,n,i){const s=e;let r=i;r===!0&&(r=1),r===!1&&(r=0);const a=typeof r=="number"?[r]:r;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof i!="number")throw new Error("samplers must be set to integers");return e.uniform1i(t,i);case 5126:return e.uniform1fv(t,a);case 35664:return e.uniform2fv(t,a);case 35665:return e.uniform3fv(t,a);case 35666:return e.uniform4fv(t,a);case 5124:return e.uniform1iv(t,a);case 35667:return e.uniform2iv(t,a);case 35668:return e.uniform3iv(t,a);case 35669:return e.uniform4iv(t,a);case 35670:return e.uniform1iv(t,a);case 35671:return e.uniform2iv(t,a);case 35672:return e.uniform3iv(t,a);case 35673:return e.uniform4iv(t,a);case 5125:return s.uniform1uiv(t,a,1);case 36294:return s.uniform2uiv(t,a,2);case 36295:return s.uniform3uiv(t,a,3);case 36296:return s.uniform4uiv(t,a,4);case 35674:return e.uniformMatrix2fv(t,!1,a);case 35675:return e.uniformMatrix3fv(t,!1,a);case 35676:return e.uniformMatrix4fv(t,!1,a);case 35685:return s.uniformMatrix2x3fv(t,!1,a);case 35686:return s.uniformMatrix2x4fv(t,!1,a);case 35687:return s.uniformMatrix3x2fv(t,!1,a);case 35688:return s.uniformMatrix3x4fv(t,!1,a);case 35689:return s.uniformMatrix4x2fv(t,!1,a);case 35690:return s.uniformMatrix4x3fv(t,!1,a)}throw new Error("Illegal uniform")}function mB(e){return dx(e)!==null||typeof e=="number"||typeof e=="boolean"}function vB(e){const t={bindings:{},uniforms:{}};return Object.keys(e).forEach(n=>{const i=e[n];mB(i)?t.uniforms[n]=i:t.bindings[n]=i}),t}function pB(e){switch(e){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"triangle-list":return 4;case"triangle-strip":return 5;default:throw new Error(e)}}function yB(e){switch(e){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;default:throw new Error(e)}}const py=4;class _B extends ca{device;handle;vs;fs;introspectedLayout;uniforms={};bindings={};varyings=null;_uniformCount=0;_uniformSetters={};constructor(t,n){super(t,n),this.device=t,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=n.vs,this.fs=n.fs;const{varyings:i,bufferMode:s=35981}=n;i&&i.length>0&&(this.varyings=i,this.device.gl.transformFeedbackVaryings(this.handle,i,s)),this._linkShaders(),xe.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=aB(this.device.gl,this.handle),xe.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=bB(this.introspectedLayout,n.shaderLayout)}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(t,n){for(const[i,s]of Object.entries(t)){const r=this.shaderLayout.bindings.find(a=>a.name===i)||this.shaderLayout.bindings.find(a=>a.name===`${i}Uniforms`);if(!r){const a=this.shaderLayout.bindings.map(o=>`"${o.name}"`).join(", ");n?.disableWarnings||xe.warn(`No binding "${i}" in render pipeline "${this.id}", expected one of ${a}`,s)();continue}switch(s||xe.warn(`Unsetting binding "${i}" in render pipeline "${this.id}"`)(),r.type){case"uniform":if(!(s instanceof mo)&&!(s.buffer instanceof mo))throw new Error("buffer value");break;case"texture":if(!(s instanceof qr||s instanceof vo||s instanceof go))throw new Error("texture value");break;case"sampler":xe.warn(`Ignoring sampler ${i}`)();break;default:throw new Error(r.type)}this.bindings[i]=s}}draw(t){const{renderPass:n,parameters:i=this.props.parameters,topology:s=this.props.topology,vertexArray:r,vertexCount:a,instanceCount:o,isInstanced:l=!1,firstVertex:u=0,transformFeedback:c}=t,d=pB(s),f=!!r.indexBuffer,h=r.indexBuffer?.glIndexType;if(this.linkStatus!=="success")return xe.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable())return xe.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;this.device.gl.useProgram(this.handle),r.bindBeforeRender(n),c&&c.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const g=n;return VN(this.device,i,g.glParameters,()=>{f&&l?this.device.gl.drawElementsInstanced(d,a||0,h,u,o||0):f?this.device.gl.drawElements(d,a||0,h,u):l?this.device.gl.drawArraysInstanced(d,u,a||0,o||0):this.device.gl.drawArrays(d,u,a||0),c&&c.end()}),r.unbindAfterRender(n),!0}setUniformsWebGL(t){const{bindings:n}=vB(t);Object.keys(n).forEach(i=>{xe.warn(`Unsupported value "${JSON.stringify(n[i])}" used in setUniforms() for key ${i}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,t)}async _linkShaders(){const{gl:t}=this.device;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),xe.time(py,`linkProgram for ${this.id}`)(),t.linkProgram(this.handle),xe.timeEnd(py,`linkProgram for ${this.id}`)(),xe.level,!this.device.features.has("compilation-status-async-webgl")){const i=this._getLinkStatus();this._reportLinkStatus(i);return}xe.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),xe.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const n=this._getLinkStatus();this._reportLinkStatus(n)}async _reportLinkStatus(t){switch(t){case"success":return;default:switch(this.vs.compilationStatus){case"error":throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);case"pending":this.vs.asyncCompilationStatus.then(()=>this.vs.debugShader());break}switch(this.fs?.compilationStatus){case"error":throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);case"pending":this.fs.asyncCompilationStatus.then(()=>this.fs.debugShader());break}const n=this.device.gl.getProgramInfoLog(this.handle);throw new Error(`Error during ${t}: ${n}`)}}_getLinkStatus(){const{gl:t}=this.device;return t.getProgramParameter(this.handle,35714)?(t.validateProgram(this.handle),t.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const t=async s=>await new Promise(r=>setTimeout(r,s));if(!this.device.features.has("compilation-status-async-webgl")){await t(10);return}const{gl:i}=this.device;for(;;){if(i.getProgramParameter(this.handle,37297))return;await t(10)}}_areTexturesRenderable(){let t=!0;for(const n of this.shaderLayout.bindings)!this.bindings[n.name]&&!this.bindings[n.name.replace(/Uniforms$/,"")]&&(xe.warn(`Binding ${n.name} not found in ${this.id}`)(),t=!1);return t}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:t}=this.device;t.useProgram(this.handle);let n=0,i=0;for(const s of this.shaderLayout.bindings){const r=this.bindings[s.name]||this.bindings[s.name.replace(/Uniforms$/,"")];if(!r)throw new Error(`No value for binding ${s.name} in ${this.id}`);switch(s.type){case"uniform":const{name:a}=s,o=t.getUniformBlockIndex(this.handle,a);if(o===4294967295)throw new Error(`Invalid uniform block name ${a}`);t.uniformBlockBinding(this.handle,i,o),r instanceof mo?t.bindBufferBase(35345,i,r.handle):t.bindBufferRange(35345,i,r.buffer.handle,r.offset||0,r.size||r.buffer.byteLength-r.offset),i+=1;break;case"texture":if(!(r instanceof qr||r instanceof vo||r instanceof go))throw new Error("texture");let l;if(r instanceof qr)l=r.texture;else if(r instanceof vo)l=r;else if(r instanceof go&&r.colorAttachments[0]instanceof qr)xe.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),l=r.colorAttachments[0].texture;else throw new Error("No texture");t.activeTexture(33984+n),t.bindTexture(l.glTarget,l.handle),n+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${s.type}' not supported in WebGL`)}}}_applyUniforms(){for(const t of this.shaderLayout.uniforms||[]){const{name:n,location:i,type:s,textureUnit:r}=t,a=this.uniforms[n]??r;a!==void 0&&gB(this.device.gl,i,s,a)}}}function bB(e,t){const n={...e,attributes:e.attributes.map(i=>({...i}))};for(const i of t?.attributes||[]){const s=n.attributes.find(r=>r.name===i.name);s?(s.type=i.type||s.type,s.stepMode=i.stepMode||s.stepMode):xe.warn(`shader layout attribute ${i.name} not present in shader`)}return n}class wB extends ug{device;commands=[];constructor(t){super(t,{}),this.device=t}submitCommands(t=this.commands){for(const n of t)switch(n.name){case"copy-buffer-to-buffer":xB(this.device,n.options);break;case"copy-buffer-to-texture":SB(this.device,n.options);break;case"copy-texture-to-buffer":TB(this.device,n.options);break;case"copy-texture-to-texture":AB(this.device,n.options);break;default:throw new Error(n.name)}}}function xB(e,t){const n=t.sourceBuffer,i=t.destinationBuffer;e.gl.bindBuffer(36662,n.handle),e.gl.bindBuffer(36663,i.handle),e.gl.copyBufferSubData(36662,36663,t.sourceOffset??0,t.destinationOffset??0,t.size),e.gl.bindBuffer(36662,null),e.gl.bindBuffer(36663,null)}function SB(e,t){throw new Error("Not implemented")}function TB(e,t){const{sourceTexture:n,mipLevel:i=0,aspect:s="all",width:r=t.sourceTexture.width,height:a=t.sourceTexture.height,depthOrArrayLayers:o=0,origin:l=[0,0],destinationBuffer:u,byteOffset:c=0,bytesPerRow:d,rowsPerImage:f}=t;if(s!=="all")throw new Error("aspect not supported in WebGL");if(i!==0||o!==0||d||f)throw new Error("not implemented");const{framebuffer:h,destroyFramebuffer:g}=Dx(n);let v;try{const m=u,p=r||h.width,y=a||h.height,_=Ax(h.colorAttachments[0].texture.props.format),b=_.format,S=_.type;e.gl.bindBuffer(35051,m.handle),v=e.gl.bindFramebuffer(36160,h.handle),e.gl.readPixels(l[0],l[1],p,y,b,S,c)}finally{e.gl.bindBuffer(35051,null),v!==void 0&&e.gl.bindFramebuffer(36160,v),g&&h.destroy()}}function AB(e,t){const{sourceTexture:n,destinationMipLevel:i=0,origin:s=[0,0],destinationOrigin:r=[0,0],destinationTexture:a}=t;let{width:o=t.destinationTexture.width,height:l=t.destinationTexture.height}=t;const{framebuffer:u,destroyFramebuffer:c}=Dx(n),[d,f]=s,[h,g,v]=r,m=e.gl.bindFramebuffer(36160,u.handle);let p=null,y;if(a instanceof vo)p=a,o=Number.isFinite(o)?o:p.width,l=Number.isFinite(l)?l:p.height,p.bind(0),y=p.glTarget;else throw new Error("invalid destination");switch(y){case 3553:case 34067:e.gl.copyTexSubImage2D(y,i,h,g,d,f,o,l);break;case 35866:case 32879:e.gl.copyTexSubImage3D(y,i,h,g,v,d,f,o,l);break}p&&p.unbind(),e.gl.bindFramebuffer(36160,m),c&&u.destroy()}function Dx(e){if(e instanceof ct){const{width:t,height:n,id:i}=e;return{framebuffer:e.device.createFramebuffer({id:`framebuffer-for-${i}`,width:t,height:n,colorAttachments:[e]}),destroyFramebuffer:!0}}return{framebuffer:e,destroyFramebuffer:!1}}class CB extends cg{device;commandBuffer;constructor(t,n){super(t,n),this.device=t,this.commandBuffer=new wB(t)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(t){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:t})}copyBufferToTexture(t){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:t})}copyTextureToBuffer(t){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:t})}copyTextureToTexture(t){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:t})}pushDebugGroup(t){}popDebugGroup(){}insertDebugMarker(t){}resolveQuerySet(t,n,i){}}function kB(e){const{target:t,source:n,start:i=0,count:s=1}=e,r=n.length,a=s*r;let o=0;for(let l=i;o<r;o++)t[l++]=n[o];for(;o<a;)o<a-o?(t.copyWithin(i+o,i,i+o),o*=2):(t.copyWithin(i+o,i,i+a-o),o=a);return e.target}class Ng extends dg{get[Symbol.toStringTag](){return"VertexArray"}device;handle;buffer=null;bufferValue=null;static isConstantAttributeZeroSupported(t){return e3()==="Chrome"}constructor(t,n){super(t,n),this.device=t,this.handle=this.device.gl.createVertexArray()}destroy(){super.destroy(),this.buffer&&this.buffer?.destroy(),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(t){const n=t;if(n&&n.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,n?n.handle:null),this.indexBuffer=n,this.device.gl.bindVertexArray(null)}setBuffer(t,n){const i=n;if(i.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:s,type:r,stride:a,offset:o,normalized:l,integer:u,divisor:c}=this._getAccessor(t);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,i.handle),u?this.device.gl.vertexAttribIPointer(t,s,r,a,o):this.device.gl.vertexAttribPointer(t,s,r,l,a,o),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(t),this.device.gl.vertexAttribDivisor(t,c||0),this.attributes[t]=i,this.device.gl.bindVertexArray(null)}setConstantWebGL(t,n){this._enable(t,!1),this.attributes[t]=n}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let t=0;t<this.maxVertexAttributes;++t){const n=this.attributes[t];ArrayBuffer.isView(n)&&this.device.setConstantAttributeWebGL(t,n)}}_getAccessor(t){const n=this.attributeInfos[t];if(!n)throw new Error(`Unknown attribute location ${t}`);const i=Tx(n.bufferDataType);return{size:n.bufferComponents,type:i,stride:n.byteStride,offset:n.byteOffset,normalized:n.normalized,integer:n.integer,divisor:n.stepMode==="instance"?1:0}}_enable(t,n=!0){const s=Ng.isConstantAttributeZeroSupported(this.device)||t!==0;(n||s)&&(t=Number(t),this.device.gl.bindVertexArray(this.handle),n?this.device.gl.enableVertexAttribArray(t):this.device.gl.disableVertexAttribArray(t),this.device.gl.bindVertexArray(null))}getConstantBuffer(t,n){const i=EB(n),s=i.byteLength*t,r=i.length*t;if(this.buffer&&s!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${s} !== ${this.buffer.byteLength}.`);let a=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:s}),a=a||!IB(i,this.bufferValue),a){const o=UI(n.constructor,r);kB({target:o,source:i,start:0,count:r}),this.buffer.write(o),this.bufferValue=n}return this.buffer}}function EB(e){return Array.isArray(e)?new Float32Array(e):e}function IB(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}class PB extends fg{device;gl;handle;layout;buffers={};unusedBuffers={};bindOnUse=!0;_bound=!1;constructor(t,n){super(t,n),this.device=t,this.gl=t.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,n.buffers&&this.setBuffers(n.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(t="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(yB(t))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(t){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const n in t)this.setBuffer(n,t[n])})}setBuffer(t,n){const i=this._getVaryingIndex(t),{buffer:s,byteLength:r,byteOffset:a}=this._getBufferRange(n);if(i<0){this.unusedBuffers[t]=s,xe.warn(`${this.id} unusedBuffers varying buffer ${t}`)();return}this.buffers[i]={buffer:s,byteLength:r,byteOffset:a},this.bindOnUse||this._bindBuffer(i,s,a,r)}getBuffer(t){if(yy(t))return this.buffers[t]||null;const n=this._getVaryingIndex(t);return n>=0?this.buffers[n]:null}bind(t=this.handle){if(typeof t!="function")return this.gl.bindTransformFeedback(36386,t),this;let n;return this._bound?n=t():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,n=t(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),n}unbind(){this.bind(null)}_getBufferRange(t){if(t instanceof mo)return{buffer:t,byteOffset:0,byteLength:t.byteLength};const{buffer:n,byteOffset:i=0,byteLength:s=t.buffer.byteLength}=t;return{buffer:n,byteOffset:i,byteLength:s}}_getVaryingIndex(t){if(yy(t))return Number(t);for(const n of this.layout.varyings)if(t===n.name)return n.location;return-1}_bindBuffers(){for(const t in this.buffers){const{buffer:n,byteLength:i,byteOffset:s}=this._getBufferRange(this.buffers[t]);this._bindBuffer(Number(t),n,s,i)}}_unbindBuffers(){for(const t in this.buffers)this.gl.bindBufferBase(35982,Number(t),null)}_bindBuffer(t,n,i=0,s){const r=n&&n.handle;!r||s===void 0?this.gl.bindBufferBase(35982,t,r):this.gl.bindBufferRange(35982,t,r,i,s)}}function yy(e){return typeof e=="number"?Number.isInteger(e):/^\d+$/.test(e)}class RB extends hg{device;handle;target=null;_queryPending=!1;_pollingPromise=null;get[Symbol.toStringTag](){return"Query"}constructor(t,n){if(super(t,n),this.device=t,n.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(t){return this._begin(t?.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(t){this._queryPending||(this.target=t,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.device.gl.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(t=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,s)=>{const r=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>t?(s("Timed out"),this._pollingPromise=null):requestAnimationFrame(r)};requestAnimationFrame(r)}),this._pollingPromise}}class Zr extends xs{type="webgl";handle;features;limits;info;canvasContext;lost;_resolveContextLost;gl;debug=!1;_canvasSizeInfo={clientWidth:0,clientHeight:0,devicePixelRatio:1};_extensions={};_polyfilled=!1;spectorJS;constructor(t){super({...t,id:t.id||ON("webgl-device")});const n=xs._getCanvasContextProps(t);if(!n)throw new Error("WebGLDevice requires props.createCanvasContext to be set");let i=n.canvas?.gl?.device;if(i)throw new Error(`WebGL context already attached to device ${i.id}`);this.canvasContext=new xN(this,n),this.lost=new Promise(c=>{this._resolveContextLost=c});const s={...t.webgl};n.alphaMode==="premultiplied"&&(s.premultipliedAlpha=!0),t.powerPreference!==void 0&&(s.powerPreference=t.powerPreference);const a=this.props._handle||nN(this.canvasContext.canvas,{onContextLost:c=>this._resolveContextLost?.({reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."}),onContextRestored:c=>console.log("WebGL context restored")},s);if(!a)throw new Error("WebGL context creation failed");if(i=a.device,i){if(t._reuseDevices)return xe.log(1,`Not creating a new Device, instead returning a reference to Device ${i.id} already attached to WebGL context`,i)(),i._reused=!0,i;throw new Error(`WebGL context already attached to device ${i.id}`)}this.handle=a,this.gl=a,this.spectorJS=AN({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=iN(this.gl,this._extensions),this.limits=new _N(this.gl),this.features=new yN(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),n.autoResize!==!1&&this.canvasContext.resize(),new Qs(this.gl,{log:(...c)=>xe.log(1,...c)()}).trackState(this.gl,{copyState:!1});const l=t.debugWebGL||t.debug,u=t.debugWebGL;l&&(this.gl=EN(this.gl,{debugWebGL:l,traceWebGL:u}),xe.warn("WebGL debug mode activated. Performance reduced.")(),t.debugWebGL&&(xe.level=Math.max(xe.level,1)))}destroy(){!this.props._reuseDevices&&!this._reused&&delete this.gl.device}get isLost(){return this.gl.isContextLost()}createCanvasContext(t){throw new Error("WebGL only supports a single canvas")}createBuffer(t){const n=this._normalizeBufferProps(t);return new mo(this,n)}createTexture(t){return new vo(this,t)}createExternalTexture(t){throw new Error("createExternalTexture() not implemented")}createSampler(t){return new Ff(this,t)}createShader(t){return new FN(this,t)}createFramebuffer(t){return new go(this,t)}createVertexArray(t){return new Ng(this,t)}createTransformFeedback(t){return new PB(this,t)}createQuerySet(t){return new RB(this,t)}createRenderPipeline(t){return new _B(this,t)}beginRenderPass(t){return new nB(this,t)}createComputePipeline(t){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(t){throw new Error("ComputePass not supported in WebGL")}renderPass=null;createCommandEncoder(t={}){return new CB(this,t)}submit(){this.renderPass?.end(),this.renderPass=null}readPixelsToArrayWebGL(t,n){return GN(t,n)}readPixelsToBufferWebGL(t,n){return QN(t,n)}setParametersWebGL(t){Ia(this.gl,t)}getParametersWebGL(t){return xx(this.gl,t)}withParametersWebGL(t,n){return Oc(this.gl,t,n)}resetWebGL(){xe.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),GD(this.gl)}_getDeviceSpecificTextureFormatCapabilities(t){return gN(this.gl,t,this._extensions)}loseDevice(){let t=!1;const i=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return i&&(t=!0,i.loseContext()),this._resolveContextLost?.({reason:"destroyed",message:"Application triggered context loss"}),t}pushState(){Qs.get(this.gl).push()}popState(){Qs.get(this.gl).pop()}setSpectorMetadata(t,n){t.__SPECTOR_Metadata=n}getGLKey(t,n){const i=Number(t);for(const s in this.gl)if(this.gl[s]===i)return`GL.${s}`;return n?.emptyIfUnknown?"":String(t)}getGLKeys(t){const n={emptyIfUnknown:!0};return Object.entries(t).reduce((i,[s,r])=>(i[`${s}:${this.getGLKey(s,n)}`]=`${r}:${this.getGLKey(r,n)}`,i),{})}_constants;setConstantAttributeWebGL(t,n){const i=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(i).fill(null);const s=this._constants[t];switch(s&&NB(s,n)&&xe.info(1,`setConstantAttributeWebGL(${t}) could have been skipped, value unchanged`)(),this._constants[t]=n,n.constructor){case Float32Array:MB(this,t,n);break;case Int32Array:OB(this,t,n);break;case Uint32Array:DB(this,t,n);break;default:throw new Error("constant")}}getExtension(t){return pa(this.gl,t,this._extensions),this._extensions}}function MB(e,t,n){switch(n.length){case 1:e.gl.vertexAttrib1fv(t,n);break;case 2:e.gl.vertexAttrib2fv(t,n);break;case 3:e.gl.vertexAttrib3fv(t,n);break;case 4:e.gl.vertexAttrib4fv(t,n);break}}function OB(e,t,n){e.gl.vertexAttribI4iv(t,n)}function DB(e,t,n){e.gl.vertexAttribI4uiv(t,n)}function NB(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}const BB={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},FB=e=>({drawBuffersWEBGL(t){return e.drawBuffers(t)},COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),VB=e=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES(){return e.createVertexArray()},deleteVertexArrayOES(t){return e.deleteVertexArray(t)},isVertexArrayOES(t){return e.isVertexArray(t)},bindVertexArrayOES(t){return e.bindVertexArray(t)}}),LB=e=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE(...t){return e.drawArraysInstanced(...t)},drawElementsInstancedANGLE(...t){return e.drawElementsInstanced(...t)},vertexAttribDivisorANGLE(...t){return e.vertexAttribDivisor(...t)}});function UB(e=!0){const t=HTMLCanvasElement.prototype;if(!e&&t.originalGetContext){t.getContext=t.originalGetContext,t.originalGetContext=void 0;return}t.originalGetContext=t.getContext,t.getContext=function(n,i){if(n==="webgl"||n==="experimental-webgl"){const s=this.originalGetContext("webgl2",i);return s instanceof HTMLElement&&$B(s),s}return this.originalGetContext(n,i)}}function $B(e){e.getExtension("EXT_color_buffer_float");const t={...BB,WEBGL_disjoint_timer_query:e.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:FB(e),OES_vertex_array_object:VB(e),ANGLE_instanced_arrays:LB(e)},n=e.getExtension;e.getExtension=function(s){const r=n.call(e,s);return r||(s in t?t[s]:null)};const i=e.getSupportedExtensions;e.getSupportedExtensions=function(){return(i.apply(e)||[])?.concat(Object.keys(t))}}const Dl=1;class zB extends vI{type="webgl";constructor(){super(),xs.defaultProps={...xs.defaultProps,...Dg},Zr.adapter=this}isSupported(){return typeof WebGL2RenderingContext<"u"}enforceWebGL2(t){UB(t)}async attach(t){if(t instanceof Zr)return t;if(t?.device instanceof xs)return t.device;if(!WB(t))throw new Error("Invalid WebGL2RenderingContext");return new Zr({_handle:t,createCanvasContext:{canvas:t.canvas,autoResize:!1}})}async create(t={}){xe.groupCollapsed(Dl,"WebGLDevice created")();const n=[];(t.debugWebGL||t.debug)&&n.push(kN()),t.debugSpectorJS&&n.push(TN(t));const i=await Promise.allSettled(n);for(const a of i)a.status==="rejected"&&xe.error(`Failed to initialize debug libraries ${a.reason}`)();const s=new Zr(t),r=`${s._reused?"Reusing":"Created"} device with WebGL2 ${s.debug?"debug ":""}context: ${s.info.vendor}, ${s.info.renderer} for canvas: ${s.canvasContext.id}`;return xe.probe(Dl,r)(),xe.table(Dl,s.info)(),xe.groupEnd(Dl)(),s}}function WB(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:!!(e&&Number.isFinite(e._version))}const _y=new zB;function ds(){}const HB=({isDragging:e})=>e?"grabbing":"grab",Nx={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:ds,onWebGLInitialized:ds,onResize:ds,onViewStateChange:ds,onInteractionStateChange:ds,onBeforeRender:ds,onAfterRender:ds,onLoad:ds,onError:e=>tt.error(e.message,e.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:HB,getTooltip:null,debug:!1,drawPickingColors:!1};class Bg{constructor(t){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new au({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=i=>{const{_pickRequest:s}=this;if(i.type==="pointerleave")s.x=-1,s.y=-1,s.radius=0;else{if(i.leftButton||i.rightButton)return;{const r=i.offsetCenter;if(!r)return;s.x=r.x,s.y=r.y,s.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:s.x,y:s.y}),s.event=i},this._onEvent=i=>{const s=Ef[i.type],r=i.offsetCenter;if(!s||!r||!this.layerManager)return;const a=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:a,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:l}=o,u=l&&(l[s]||l.props[s]),c=this.props[s];let d=!1;u&&(d=u.call(l,o,i)),d||(c?.(o,i),this.widgetManager.onEvent(o,i))},this._onPointerDown=i=>{if(this.device?.type==="webgpu")return;const s=i.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:s.x,y:s.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo},this.props={...Nx,...t},t=this.props,t.viewState&&t.initialViewState&&tt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,t.device&&(this.device=t.device);let n=this.device;!n&&t.gl&&(t.gl instanceof WebGLRenderingContext&&tt.error("WebGL1 context not supported.")(),n=_y.attach(t.gl)),n||(n=yf.createDevice({type:"best-available",_reuseDevices:!0,adapters:[_y],...t.deviceProps,createCanvasContext:{canvas:this._createCanvas(t),useDevicePixels:this.props.useDevicePixels,autoResize:!1}})),this.animationLoop=this._createAnimationLoop(n,t),this.setProps(t),t._typedArrayManagerProps&&Eo.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop?.stop(),this.animationLoop?.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager?.finalize(),this.layerManager=null,this.viewManager?.finalize(),this.viewManager=null,this.effectManager?.finalize(),this.effectManager=null,this.deckRenderer?.finalize(),this.deckRenderer=null,this.deckPicker?.finalize(),this.deckPicker=null,this.eventManager?.destroy(),this.eventManager=null,this.widgetManager?.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&(this.canvas.parentElement?.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&tt.removed("onLayerHover","onHover")(),"onLayerClick"in t&&tt.removed("onLayerClick","onClick")(),t.initialViewState&&!li(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop?.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n),this.widgetManager.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(t),s=this.layerManager.needsRedraw(t),r=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return n=n||i||s||r||a,n}redraw(t){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=t||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return fn(this.viewManager),this.viewManager.views}getViewports(t){return fn(this.viewManager),this.viewManager.getViewports(t)}getCanvas(){return this.canvas}pickObject(t){const n=this._pick("pickObject","pickObject Time",t).result;return n.length?n[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,n=!1){for(const i in t)this.layerManager.resourceManager.add({resourceId:i,data:t[i],forceUpdate:n})}_removeResources(t){for(const n of t)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_addDefaultShaderModule(t){this.layerManager.addDefaultShaderModule(t)}_removeDefaultShaderModule(t){this.layerManager?.removeDefaultShaderModule(t)}_pick(t,n,i){fn(this.deckPicker);const{stats:s}=this;s.get("Pick Count").incrementCount(),s.get(n).timeStart();const r=this.deckPicker[t]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return s.get(n).timeEnd(),r}_createCanvas(t){let n=t.canvas;return typeof n=="string"&&(n=document.getElementById(n),fn(n)),n||(n=document.createElement("canvas"),n.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(n)),Object.assign(n.style,t.style),n}_setCanvasSize(t){if(!this.canvas)return;const{width:n,height:i}=t;if(n||n===0){const s=Number.isFinite(n)?`${n}px`:n;this.canvas.style.width=s}if(i||i===0){const s=Number.isFinite(i)?`${i}px`:i;this.canvas.style.position=t.style?.position||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const n=t.clientWidth??t.width,i=t.clientHeight??t.height;(n!==this.width||i!==this.height)&&(this.width=n,this.height=i,this.viewManager?.setProps({width:n,height:i}),this.layerManager?.activateViewport(this.getViewports()[0]),this.props.onResize({width:n,height:i}))}_createAnimationLoop(t,n){const{gl:i,onError:s,useDevicePixels:r}=n;return new qO({device:t,useDevicePixels:r,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,onInitialize:a=>this._setDevice(a.device),onRender:this._onRenderFrame.bind(this),onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:t}=this.props,n=Array.isArray(t)?t:t?[t]:[new _x({id:"default-view"})];return n.length&&this.props.controller&&(n[0].props.controller=this.props.controller),n}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){if(this.device?.type==="webgpu")return;const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let s=i,r=!1;for(const a of n)s=a,r=a.layer?.onHover(a,t.event)||r;r||(this.props.onHover?.(s,t.event),this.widgetManager.onHover(s,t.event)),t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(t){if(this.device=t,!this.animationLoop)return;this.canvas||(this.canvas=this.device.canvasContext?.canvas),this.device.type==="webgl"&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device.type==="webgl"&&this.props.onWebGLInitialized(this.device.gl);const n=new ux;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new TM(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(Up).map(s=>{const[r,a,o,l]=Up[s],u=this.props.eventRecognizerOptions?.[s],c={...a,...u,event:s};return{recognizer:new r(c),recognizeWith:o,requestFailure:l}}),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const s in Ef)this.eventManager.on(s,this._onEvent);this.viewManager=new _D({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new yD(this.device,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new OD({deck:this,device:this.device}),this.deckRenderer=new BD(this.device),this.deckPicker=new zD(this.device),this.widgetManager=new jD({deck:this,parentElement:this.canvas?.parentElement}),this.widgetManager.addDefault(new YD),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,n){const{device:i,gl:s}=this.layerManager.context;this.props.onBeforeRender({device:i,gl:s});const r={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n};this.deckRenderer?.renderLayers(r),r.pass==="screen"&&this.widgetManager.onRedraw({viewports:r.viewports,layers:r.layers}),this.props.onAfterRender({device:i,gl:s})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),tt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this.device?.type!=="webgpu"&&this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const n=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const n=this.animationLoop.stats;t.get("GPU Time").addTime(n.get("GPU Time").lastTiming),t.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:n}=this;t.fps=n.get("frameRate").getHz(),t.setPropsTime=n.get("setProps Time").time,t.updateAttributesTime=n.get("Update Attributes").time,t.framesRedrawn=n.get("Redraw Count").count,t.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,t.pickCount=n.get("Pick Count").count,t.gpuTime=n.get("GPU Time").time,t.cpuTime=n.get("CPU Time").time,t.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=yf.stats.get("Memory Usage");t.bufferMemory=i.get("Buffer Memory").count,t.textureMemory=i.get("Texture Memory").count,t.renderbufferMemory=i.get("Renderbuffer Memory").count,t.gpuMemory=i.get("GPU Memory").count}}Bg.defaultProps=Nx;Bg.VERSION=wE;function jB(e){switch(e){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return mw(e)}}const XB=gw;function Nl(e,t,n){const i=n==="webgpu"&&t.type==="uint8"?"unorm8":t.type;return{attribute:e,format:t.size>1?`${i}x${t.size}`:t.type,byteOffset:t.offset||0}}function Xs(e){return e.stride||e.size*e.bytesPerElement}function YB(e,t){return e.type===t.type&&e.size===t.size&&Xs(e)===Xs(t)&&(e.offset||0)===(t.offset||0)}function Vf(e,t){t.offset&&tt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Xs(e),i=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,s=t.elementOffset||0,r=i*n+s*e.bytesPerElement+(e.offset||0);return{...t,offset:r,stride:n}}function KB(e,t){const n=Vf(e,t);return{high:n,low:{...n,offset:n.offset+e.size*4}}}class qB{constructor(t,n,i){this._buffer=null,this.device=t,this.id=n.id||"",this.size=n.size||1;const s=n.logicalType||n.type,r=s==="float64";let{defaultValue:a}=n;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let o;r?o="float32":!s&&n.isIndexed?o="uint32":o=s||"float32";let l=jB(s||o);this.doublePrecision=r,r&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:a,logicalType:s,type:o,normalized:o.includes("norm"),size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*Xs(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Eo.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(t=this.id,n=null){const i={};if(this.state.constant){const s=this.value;if(n){const r=Vf(this.getAccessor(),n),a=r.offset/s.BYTES_PER_ELEMENT,o=r.size||this.size;i[t]=s.subarray(a,a+o)}else i[t]=s}else i[t]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?i[`${t}64Low`]=i[t]:i[`${t}64Low`]=new Float32Array(this.size)),i}_getBufferLayout(t=this.id,n=null){const i=this.getAccessor(),s=[],r={name:this.id,byteStride:Xs(i),attributes:s};if(this.doublePrecision){const a=KB(i,n||{});s.push(Nl(t,{...i,...a.high},this.device.type),Nl(`${t}64Low`,{...i,...a.low},this.device.type))}else if(n){const a=Vf(i,n);s.push(Nl(t,{...i,...a},this.device.type))}else s.push(Nl(t,i,this.device.type));return r}setAccessor(t){this.state.bufferAccessor=t}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const n=Array.from(this.value);t=[n,n]}else{const{value:n,numInstances:i,size:s}=this,r=i*s;if(n&&r&&n.length>=r){const a=new Array(s).fill(1/0),o=new Array(s).fill(-1/0);for(let l=0;l<r;)for(let u=0;u<s;u++){const c=n[l++];c<a[u]&&(a[u]=c),c>o[u]&&(o[u]=c)}t=[a,o]}}return this.state.bounds=t,t}setData(t){const{state:n}=this;let i;ArrayBuffer.isView(t)?i={value:t}:t instanceof pt?i={buffer:t}:i=t;const s={...this.settings,...i};if(ArrayBuffer.isView(i.value)){if(!i.type)if(this.doublePrecision&&i.value instanceof Float64Array)s.type="float32";else{const a=XB(i.value);s.type=s.normalized?a.replace("int","norm"):a}s.bytesPerElement=i.value.BYTES_PER_ELEMENT,s.stride=Xs(s)}if(n.bounds=null,i.constant){let r=i.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this.normalizeConstant(r)),!(!n.constant||!this._areValuesEqual(r,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=ArrayBuffer.isView(r)?r:new Float32Array(r)}else if(i.buffer){const r=i.buffer;n.externalBuffer=r,n.constant=!1,this.value=i.value||null}else if(i.value){this._checkExternalBuffer(i);let r=i.value;n.externalBuffer=null,n.constant=!1,this.value=r;let{buffer:a}=this;const o=Xs(s),l=(s.vertexOffset||0)*o;if(this.doublePrecision&&r instanceof Float64Array&&(r=kd(r,s)),this.settings.isIndexed){const c=this.settings.defaultType;r.constructor!==c&&(r=new c(r))}const u=r.byteLength+l+o*2;(!a||a.byteLength<u)&&(a=this._createBuffer(u)),a.write(r,l)}return this.setAccessor(s),!0}updateSubBuffer(t={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:s}=t;this.buffer.write(this.doublePrecision&&n instanceof Float64Array?kd(n,{size:this.size,startIndex:i,endIndex:s}):n.subarray(i,s),i*n.BYTES_PER_ELEMENT+this.byteOffset)}allocate(t,n=!1){const{state:i}=this,s=i.allocatedValue,r=Eo.allocate(s,t+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=r;const{byteOffset:a}=this;let{buffer:o}=this;return(!o||o.byteLength<r.byteLength+a)&&(o=this._createBuffer(r.byteLength+a),n&&s&&o.write(s instanceof Float64Array?kd(s,this):s,a)),i.allocatedValue=r,i.constant=!1,i.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(t){const{value:n}=t;if(!ArrayBuffer.isView(n))throw new Error(`Attribute ${this.id} value is not TypedArray`);const i=this.settings.defaultType;let s=!1;if(this.doublePrecision&&(s=n.BYTES_PER_ELEMENT<4),s)throw new Error(`Attribute ${this.id} does not support ${n.constructor.name}`);!(n instanceof i)&&this.settings.normalized&&!("normalized"in t)&&tt.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(t){switch(this.settings.type){case"snorm8":return new Float32Array(t).map(n=>(n+128)/255*2-1);case"snorm16":return new Float32Array(t).map(n=>(n+32768)/65535*2-1);case"unorm8":return new Float32Array(t).map(n=>n/255);case"unorm16":return new Float32Array(t).map(n=>n/65535);default:return t}}_normalizeValue(t,n,i){const{defaultValue:s,size:r}=this.settings;if(Number.isFinite(t))return n[i]=t,n;if(!t){let a=r;for(;--a>=0;)n[i+a]=s[a];return n}switch(r){case 4:n[i+3]=Number.isFinite(t[3])?t[3]:s[3];case 3:n[i+2]=Number.isFinite(t[2])?t[2]:s[2];case 2:n[i+1]=Number.isFinite(t[1])?t[1]:s[1];case 1:n[i+0]=Number.isFinite(t[0])?t[0]:s[0];break;default:let a=r;for(;--a>=0;)n[i+a]=Number.isFinite(t[a])?t[a]:s[a]}return n}_areValuesEqual(t,n){if(!t||!n)return!1;const{size:i}=this;for(let s=0;s<i;s++)if(t[s]!==n[s])return!1;return!0}_createBuffer(t){this._buffer&&this._buffer.destroy();const{isIndexed:n,type:i}=this.settings;return this._buffer=this.device.createBuffer({...this._buffer?.props,id:this.id,usage:(n?pt.INDEX:pt.VERTEX)|pt.COPY_DST,indexType:n?i:void 0,byteLength:t}),this._buffer}}const by=[],wy=[];function Fg(e,t=0,n=1/0){let i=by;const s={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?i=e:e.length>0&&(wy.length=e.length,i=wy):i=by,(t>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(t,n),s.index=t-1),{iterable:i,objectInfo:s}}function Bx(e){return e&&e[Symbol.asyncIterator]}function ZB(e,t){const{size:n,stride:i,offset:s,startIndices:r,nested:a}=t,o=e.BYTES_PER_ELEMENT,l=i?i/o:n,u=s?s/o:0,c=Math.floor((e.length-u)/l);return(d,{index:f,target:h})=>{if(!r){const p=f*l+u;for(let y=0;y<n;y++)h[y]=e[p+y];return h}const g=r[f],v=r[f+1]||c;let m;if(a){m=new Array(v-g);for(let p=g;p<v;p++){const y=p*l+u;h=new Array(n);for(let _=0;_<n;_++)h[_]=e[y+_];m[p-g]=h}}else if(l===n)m=e.subarray(g*n+u,v*n+u);else{m=new e.constructor((v-g)*n);let p=0;for(let y=g;y<v;y++){const _=y*l+u;for(let b=0;b<n;b++)m[p++]=e[_+b]}}return m}}const GB=[],Ql=[[0,1/0]];function QB(e,t){if(e===Ql||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const n=[],i=e.length;let s=0;for(let r=0;r<i;r++){const a=e[r];a[1]<t[0]?(n.push(a),s=r+1):a[0]>t[1]?n.push(a):t=[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}return n.splice(s,0,t),n}const JB={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function Fx(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const n=e.type||"interpolation";return{...JB[n],...t,...e,type:n}}class Vx extends qB{constructor(t,n){super(t,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:Ql}),this.constant=!1,this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!t,n}layoutChanged(){return this.state.layoutChanged}setAccessor(t){var n;(n=this.state).layoutChanged||(n.layoutChanged=!YB(t,this.getAccessor())),super.setAccessor(t)}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition,s=Array.isArray(n)?t[n.find(r=>t[r])]:t[n];return Fx(s,i)}setNeedsUpdate(t=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),n){const{startRow:i=0,endRow:s=1/0}=n;this.state.updateRanges=QB(this.state.updateRanges,[i,s])}else this.state.updateRanges=Ql}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=GB}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:n,settings:i}=this;return i.noAlloc?!1:i.update?(super.allocate(t,n.updateRanges!==Ql),!0):!1}updateBuffer({numInstances:t,data:n,props:i,context:s}){if(!this.needsUpdate())return!1;const{state:{updateRanges:r},settings:{update:a,noAlloc:o}}=this;let l=!0;if(a){for(const[u,c]of r)a.call(s,this,{data:n,startRow:u,endRow:c,props:i,numInstances:t});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of r){const d=Number.isFinite(u)?this.getVertexOffset(u):0,f=Number.isFinite(c)?this.getVertexOffset(c):o||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:d,endOffset:f})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return this.device.type==="webgpu"||t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:n}=this;return t?(this.clearNeedsUpdate(),n.lastExternalBuffer===t||(n.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(t,n=null){const{state:i,settings:s}=this;if(!t)return i.binaryValue=null,i.binaryAccessor=null,!1;if(s.noAlloc)return!1;if(i.binaryValue===t)return this.clearNeedsUpdate(),!0;if(i.binaryValue=t,this.setNeedsRedraw(),s.transform||n!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const a=t;fn(ArrayBuffer.isView(a.value),`invalid ${s.accessor}`);const o=!!a.size&&a.size!==this.size;return i.binaryAccessor=ZB(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:n,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:n}=this;return(n?t<n.length?n[t]:this.numInstances:t)*this.size}getValue(){const t=this.settings.shaderAttributes,n=super.getValue();if(!t)return n;for(const i in t)Object.assign(n,super.getValue(i,t[i]));return n}getBufferLayout(t){this.state.layoutChanged=!1;const n=this.settings.shaderAttributes,i=super._getBufferLayout(),{stepMode:s}=this.settings;if(s==="dynamic"?i.stepMode=t?t.isInstanced?"instance":"vertex":"instance":i.stepMode=s??"vertex",!n)return i;for(const r in n){const a=super._getBufferLayout(r,n[r]);i.attributes.push(...a.attributes)}return i}_autoUpdater(t,{data:n,startRow:i,endRow:s,props:r,numInstances:a}){if(t.constant&&this.context.device.type!=="webgpu")return;const{settings:o,state:l,value:u,size:c,startIndices:d}=t,{accessor:f,transform:h}=o;let g=l.binaryAccessor||(typeof f=="function"?f:r[f]);typeof g!="function"&&(g=()=>g),fn(typeof g=="function",`accessor "${f}" is not a function`);let v=t.getVertexOffset(i);const{iterable:m,objectInfo:p}=Fg(n,i,s);for(const y of m){p.index++;let _=g(y,p);if(h&&(_=h.call(this,_)),d){const b=(p.index<d.length-1?d[p.index+1]:a)-d[p.index];if(_&&Array.isArray(_[0])){let S=v;for(const x of _)t._normalizeValue(x,u,S),S+=c}else _&&_.length>c?u.set(_,v):(t._normalizeValue(_,p.target,0),hD({target:u,source:p.target,start:v,count:b}));v+=b*c}else t._normalizeValue(_,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:t}=this,n=Math.min(4,this.size);if(t&&t.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(t[3]);case 3:i=i&&Number.isFinite(t[2]);case 2:i=i&&Number.isFinite(t[1]);case 1:i=i&&Number.isFinite(t[0]);break;default:i=!1}if(!i)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function Fd(e){const{source:t,target:n,start:i=0,size:s,getData:r}=e,a=e.end||n.length,o=t.length,l=a-i;if(o>l){n.set(t.subarray(0,l),i);return}if(n.set(t,i),!r)return;let u=o;for(;u<l;){const c=r(u,t);for(let d=0;d<s;d++)n[i+u]=c[d]||0,u++}}function eF({source:e,target:t,size:n,getData:i,sourceStartIndices:s,targetStartIndices:r}){if(!s||!r)return Fd({source:e,target:t,size:n,getData:i}),t;let a=0,o=0;const l=i&&((c,d)=>i(c+o,d)),u=Math.min(s.length,r.length);for(let c=1;c<u;c++){const d=s[c]*n,f=r[c]*n;Fd({source:e.subarray(a,d),target:t,start:o,end:f,size:n,getData:l}),a=d,o=f}return o<t.length&&Fd({source:[],target:t,start:o,size:n,getData:l}),t}function tF(e){const{device:t,settings:n,value:i}=e,s=new Vx(t,n);return s.setData({value:i instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),s}function Lx(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${e}"`)}}function Ux(e){switch(e){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function $x(e){e.push(e.shift())}function nF(e,t){const{doublePrecision:n,settings:i,value:s,size:r}=e,a=n&&s instanceof Float64Array?2:1;let o=0;const{shaderAttributes:l}=e.settings;if(l)for(const u of Object.values(l))o=Math.max(o,u.vertexOffset??0);return(i.noAlloc?s.length:(t+o)*r)*a}function zx({device:e,source:t,target:n}){return(!n||n.byteLength<t.byteLength)&&(n?.destroy(),n=e.createBuffer({byteLength:t.byteLength,usage:t.usage})),n}function Wx({device:e,buffer:t,attribute:n,fromLength:i,toLength:s,fromStartIndices:r,getData:a=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,l=n.size*o,u=n.byteOffset,c=n.settings.bytesPerElement<4?u/n.settings.bytesPerElement*4:u,d=n.startIndices,f=r&&d,h=n.isConstant;if(!f&&t&&i>=s)return t;const g=n.value instanceof Float64Array?Float32Array:n.value.constructor,v=h?n.value:new g(n.getBuffer().readSyncWebGL(u,s*g.BYTES_PER_ELEMENT).buffer);if(n.settings.normalized&&!h){const _=a;a=(b,S)=>n.normalizeConstant(_(b,S))}const m=h?(_,b)=>a(v,b):(_,b)=>a(v.subarray(_+u,_+u+l),b),p=t?new Float32Array(t.readSyncWebGL(c,i*4).buffer):new Float32Array(0),y=new Float32Array(s);return eF({source:p,target:y,sourceStartIndices:r,targetStartIndices:d,size:l,getData:m}),(!t||t.byteLength<y.byteLength+c)&&(t?.destroy(),t=e.createBuffer({byteLength:y.byteLength+c,usage:35050})),t.write(y,c),t}class Hx{constructor({device:t,attribute:n,timeline:i}){this.buffers=[],this.currentLength=0,this.device=t,this.transition=new yu(i),this.attribute=n,this.attributeInTransition=tF(n),this.currentStartIndices=n.startIndices}get inProgress(){return this.transition.inProgress}start(t,n,i=1/0){this.settings=t,this.currentStartIndices=this.attribute.startIndices,this.currentLength=nF(this.attribute,n),this.transition.start({...t,duration:i})}update(){const t=this.transition.update();return t&&this.onUpdate(),t}setBuffer(t){this.attributeInTransition.setData({buffer:t,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const t of this.buffers)t.destroy();this.buffers.length=0}}class iF extends Hx{constructor({device:t,attribute:n,timeline:i}){super({device:t,attribute:n,timeline:i}),this.type="interpolation",this.transform=oF(t,n)}start(t,n){const i=this.currentLength,s=this.currentStartIndices;if(super.start(t,n,t.duration),t.duration<=0){this.transition.cancel();return}const{buffers:r,attribute:a}=this;$x(r),r[0]=Wx({device:this.device,buffer:r[0],attribute:a,fromLength:i,toLength:this.currentLength,fromStartIndices:s,getData:t.enter}),r[1]=zx({device:this.device,source:r[0],target:r[1]}),this.setBuffer(r[1]);const{transform:o}=this,l=o.model;let u=Math.floor(this.currentLength/a.size);jx(a)&&(u/=2),l.setVertexCount(u),a.isConstant?(l.setAttributes({aFrom:r[0]}),l.setConstantAttributes({aTo:a.value})):l.setAttributes({aFrom:r[0],aTo:a.getBuffer()}),o.transformFeedback.setBuffers({vCurrent:r[1]})}onUpdate(){const{duration:t,easing:n}=this.settings,{time:i}=this.transition;let s=i/t;n&&(s=n(s));const{model:r}=this.transform,a={time:s};r.shaderInputs.setProps({interpolation:a}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const sF=`uniform interpolationUniforms {
  float time;
} interpolation;
`,xy={name:"interpolation",vs:sF,uniformTypes:{time:"f32"}},rF=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, interpolation.time);
  gl_Position = vec4(0.0);
}
`,aF=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function jx(e){return e.doublePrecision&&e.value instanceof Float64Array}function oF(e,t){const n=t.size,i=Lx(n),s=Ux(n),r=t.getBufferLayout();return jx(t)?new va(e,{vs:aF,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:s,byteOffset:0},{attribute:"aFrom64Low",format:s,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:s,byteOffset:0},{attribute:"aTo64Low",format:s,byteOffset:4*n}]}],modules:[xR,xy],defines:{ATTRIBUTE_TYPE:i,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new va(e,{vs:rF,bufferLayout:[{name:"aFrom",format:s},{name:"aTo",format:r.attributes[0].format}],modules:[xy],defines:{ATTRIBUTE_TYPE:i},varyings:["vCurrent"],disableWarnings:!0})}class lF extends Hx{constructor({device:t,attribute:n,timeline:i}){super({device:t,attribute:n,timeline:i}),this.type="spring",this.texture=gF(t),this.framebuffer=mF(t,this.texture),this.transform=hF(t,n)}start(t,n){const i=this.currentLength,s=this.currentStartIndices;super.start(t,n);const{buffers:r,attribute:a}=this;for(let l=0;l<2;l++)r[l]=Wx({device:this.device,buffer:r[l],attribute:a,fromLength:i,toLength:this.currentLength,fromStartIndices:s,getData:t.enter});r[2]=zx({device:this.device,source:r[0],target:r[2]}),this.setBuffer(r[1]);const{model:o}=this.transform;o.setVertexCount(Math.floor(this.currentLength/a.size)),a.isConstant?o.setConstantAttributes({aTo:a.value}):o.setAttributes({aTo:a.getBuffer()})}onUpdate(){const{buffers:t,transform:n,framebuffer:i,transition:s}=this,r=this.settings;n.model.setAttributes({aPrev:t[0],aCur:t[1]}),n.transformFeedback.setBuffers({vNext:t[2]});const a={stiffness:r.stiffness,damping:r.damping};n.model.shaderInputs.setProps({spring:a}),n.run({framebuffer:i,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),$x(t),this.setBuffer(t[1]),this.device.readPixelsToArrayWebGL(i)[0]>0||s.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const cF=`uniform springUniforms {
  float damping;
  float stiffness;
} spring;
`,uF={name:"spring",vs:cF,uniformTypes:{damping:"f32",stiffness:"f32"}},dF=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE force = delta * spring.stiffness;
  ATTRIBUTE_TYPE resistance = velocity * spring.damping;
  return force - resistance + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fF=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function hF(e,t){const n=Lx(t.size),i=Ux(t.size);return new va(e,{vs:dF,fs:fF,bufferLayout:[{name:"aPrev",format:i},{name:"aCur",format:i},{name:"aTo",format:t.getBufferLayout().attributes[0].format}],varyings:["vNext"],modules:[uF],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function gF(e){return e.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function mF(e,t){return e.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[t]})}const vF={interpolation:iF,spring:lF};class pF{constructor(t,{id:n,timeline:i}){if(!t)throw new Error("AttributeTransitionManager is constructed without device");this.id=n,this.device=t,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:n,numInstances:i}){this.numInstances=i||1;for(const s in t){const r=t[s],a=r.getTransitionSetting(n);a&&this._updateAttribute(s,r,a)}for(const s in this.transitions){const r=t[s];(!r||!r.getTransitionSetting(n))&&this._removeTransition(s)}}hasAttribute(t){const n=this.transitions[t];return n&&n.inProgress}getAttributes(){const t={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(t[n]=i.attributeInTransition)}return t}run(){if(this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].delete(),delete this.transitions[t]}_updateAttribute(t,n,i){const s=this.transitions[t];let r=!s||s.type!==i.type;if(r){s&&this._removeTransition(t);const a=vF[i.type];a?this.transitions[t]=new a({attribute:n,timeline:this.timeline,device:this.device}):(tt.error(`unsupported transition type '${i.type}'`)(),r=!1)}(r||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(i,this.numInstances))}}const Sy="attributeManager.invalidate",yF="attributeManager.updateStart",_F="attributeManager.updateEnd",bF="attribute.updateStart",wF="attribute.allocate",xF="attribute.updateEnd";class SF{constructor(t,{id:n="attribute-manager",stats:i,timeline:s}={}){this.mergeBoundsMemoized=nl(BO),this.id=n,this.device=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new pF(t,{id:`${n}-transitions`,timeline:s}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{stepMode:"instance"})}remove(t){for(const n of t)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(t,n){const i=this._invalidateTrigger(t,n);un(Sy,this,t,i)}invalidateAll(t){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,t);un(Sy,this,"all")}update({data:t,numInstances:n,startIndices:i=null,transitions:s,props:r={},buffers:a={},context:o={}}){let l=!1;un(yF,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],d=c.settings.accessor;c.startIndices=i,c.numInstances=n,r[u]&&tt.removed(`props.${u}`,`data.attributes.${u}`)(),c.setExternalBuffer(a[u])||c.setBinaryValue(typeof d=="string"?a[d]:void 0,t.startIndices)||typeof d=="string"&&!a[d]&&c.setConstantValue(r[d])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:n,data:t,props:r,context:o})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&un(_F,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:s})}updateTransition(){const{attributeTransitionManager:t}=this,n=t.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(t){const n=t.map(i=>this.attributes[i]?.getBounds());return this.mergeBoundsMemoized(n)}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,s={...i.getAttributes()};for(const r in n){const a=n[r];a.needsRedraw(t)&&!i.hasAttribute(r)&&(s[r]=a)}return s}getBufferLayouts(t){return Object.values(this.getAttributes()).map(n=>n.getBufferLayout(t))}_add(t,n){for(const i in t){const s=t[i],r={...s,id:i,size:s.isIndexed&&1||s.size||1,...n};this.attributes[i]=new Vx(this.device,r)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const t={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(s=>{t[s]||(t[s]=[]),t[s].push(n)});this.updateTriggers=t}_invalidateTrigger(t,n){const{attributes:i,updateTriggers:s}=this,r=s[t];return r&&r.forEach(a=>{const o=i[a];o&&o.setNeedsUpdate(o.id,n)}),r}_updateAttribute(t){const{attribute:n,numInstances:i}=t;if(un(bF,n),n.constant){n.setConstantValue(n.value);return}n.allocate(i)&&un(wF,n,i),n.updateBuffer(t)&&(this.needsRedraw=!0,un(xF,n,i))}}class TF extends yu{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:n,toValue:i,duration:s,easing:r}}=this,a=r(t/s);this._value=Ac(n,i,a)}}const Ty=1e-5;function Ay(e,t,n,i,s){const r=t-e,o=(n-t)*s,l=-r*i;return o+l+r+t}function AF(e,t,n,i,s){if(Array.isArray(n)){const r=[];for(let a=0;a<n.length;a++)r[a]=Ay(e[a],t[a],n[a],i,s);return r}return Ay(e,t,n,i,s)}function Cy(e,t){if(Array.isArray(e)){let n=0;for(let i=0;i<e.length;i++){const s=e[i]-t[i];n+=s*s}return Math.sqrt(n)}return Math.abs(e-t)}class CF extends yu{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:n,damping:i,stiffness:s}=this.settings,{_prevValue:r=t,_currValue:a=t}=this;let o=AF(r,a,n,i,s);const l=Cy(o,n),u=Cy(o,a);l<Ty&&u<Ty&&(o=n,this.end()),this._prevValue=a,this._currValue=o}}const kF={interpolation:TF,spring:CF};class EF{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,n,i,s){const{transitions:r}=this;if(r.has(t)){const l=r.get(t),{value:u=l.settings.fromValue}=l;n=u,this.remove(t)}if(s=Fx(s),!s)return;const a=kF[s.type];if(!a){tt.error(`unsupported transition type '${s.type}'`)();return}const o=new a(this.timeline);o.start({...s,fromValue:n,toValue:i}),r.set(t,o)}remove(t){const{transitions:n}=this;n.has(t)&&(n.get(t).cancel(),n.delete(t))}update(){const t={};for(const[n,i]of this.transitions)i.update(),t[n]=i.value,i.inProgress||this.remove(n);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function IF(e){const t=e[Ts];for(const n in t){const i=t[n],{validate:s}=i;if(s&&!s(e[n],i))throw new Error(`Invalid prop ${n}: ${e[n]}`)}}function PF(e,t){const n=Xx({newProps:e,oldProps:t,propTypes:e[Ts],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=MF(e,t);let s=!1;return i||(s=OF(e,t)),{dataChanged:i,propsChanged:n,updateTriggersChanged:s,extensionsChanged:DF(e,t),transitionsChanged:RF(e,t)}}function RF(e,t){if(!e.transitions)return!1;const n={},i=e[Ts];let s=!1;for(const r in e.transitions){const a=i[r],o=a&&a.type;(o==="number"||o==="color"||o==="array")&&Lf(e[r],t[r],a)&&(n[r]=!0,s=!0)}return s?n:!1}function Xx({newProps:e,oldProps:t,ignoreProps:n={},propTypes:i={},triggerName:s="props"}){if(t===e)return!1;if(typeof e!="object"||e===null)return`${s} changed shallowly`;if(typeof t!="object"||t===null)return`${s} changed shallowly`;for(const r of Object.keys(e))if(!(r in n)){if(!(r in t))return`${s}.${r} added`;const a=Lf(e[r],t[r],i[r]);if(a)return`${s}.${r} ${a}`}for(const r of Object.keys(t))if(!(r in n)){if(!(r in e))return`${s}.${r} dropped`;if(!Object.hasOwnProperty.call(e,r)){const a=Lf(e[r],t[r],i[r]);if(a)return`${s}.${r} ${a}`}}return!1}function Lf(e,t,n){let i=n&&n.equal;return i&&!i(e,t,n)||!i&&(i=e&&t&&e.equals,i&&!i.call(e,t))?"changed deeply":!i&&t!==e?"changed shallowly":null}function MF(e,t){if(t===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:s}=e;return i?i(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied"),n&&s&&(n=s(e.data,t.data)||n),n}function OF(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&ky(e,t,"all"))return{all:!0};const n={};let i=!1;for(const s in e.updateTriggers)s!=="all"&&ky(e,t,s)&&(n[s]=!0,i=!0);return i?n:!1}function DF(e,t){if(t===null)return!0;const n=t.extensions,{extensions:i}=e;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let s=0;s<i.length;s++)if(!i[s].equals(n[s]))return!0;return!1}function ky(e,t,n){let i=e.updateTriggers[n];i=i??{};let s=t.updateTriggers[n];return s=s??{},Xx({oldProps:s,newProps:i,triggerName:n})}const NF="count(): argument not an object",BF="count(): argument not a container";function FF(e){if(!LF(e))throw new Error(NF);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(VF(e))return Object.keys(e).length;throw new Error(BF)}function VF(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function LF(e){return e!==null&&typeof e=="object"}function Ey(e,t){if(!t)return e;const n={...e,...t};if("defines"in t&&(n.defines={...e.defines,...t.defines}),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some(i=>i.name==="project64"))){const i=n.modules.findIndex(s=>s.name==="project32");i>=0&&n.modules.splice(i,1)}if("inject"in t)if(!e.inject)n.inject=t.inject;else{const i={...e.inject};for(const s in t.inject)i[s]=(i[s]||"")+t.inject[s];n.inject=i}return n}const UF={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},Uf={};function $F(e,t,n,i){if(n instanceof ct)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let s=null;n.compressed&&(s={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const r=t.createTexture({...n,sampler:{...UF,...s,...i},mipmaps:!0});return Uf[r.id]=e,r}function zF(e,t){!t||!(t instanceof ct)||Uf[t.id]===e&&(t.delete(),delete Uf[t.id])}const WF={boolean:{validate(e,t){return!0},equal(e,t,n){return!!e==!!t}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||$f(e)&&(e.length===3||e.length===4)},equal(e,t,n){return li(e,t,1)}},accessor:{validate(e,t){const n=Dc(e);return n==="function"||n===Dc(t.value)},equal(e,t,n){return typeof t=="function"?!0:li(e,t,1)}},array:{validate(e,t){return t.optional&&!e||$f(e)},equal(e,t,n){const{compare:i}=n,s=Number.isInteger(i)?i:i?1:0;return i?li(e,t,s):e===t}},object:{equal(e,t,n){if(n.ignore)return!0;const{compare:i}=n,s=Number.isInteger(i)?i:i?1:0;return i?li(e,t,s):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,n){return!n.compare&&n.ignore!==!1||e===t}},data:{transform:(e,t,n)=>{if(!e)return e;const{dataTransform:i}=n.props;return i?i(e):typeof e.shape=="string"&&e.shape.endsWith("-table")&&Array.isArray(e.data)?e.data:e}},image:{transform:(e,t,n)=>{const i=n.context;return!i||!i.device?null:$F(n.id,i.device,e,{...t.parameters,...n.props.textureParameters})},release:(e,t,n)=>{zF(n.id,e)}}};function HF(e){const t={},n={},i={};for(const[s,r]of Object.entries(e)){const a=r?.deprecatedFor;if(a)i[s]=Array.isArray(a)?a:[a];else{const o=jF(s,r);t[s]=o,n[s]=o.value}}return{propTypes:t,defaultProps:n,deprecatedProps:i}}function jF(e,t){switch(Dc(t)){case"object":return ja(e,t);case"array":return ja(e,{type:"array",value:t,compare:!1});case"boolean":return ja(e,{type:"boolean",value:t});case"number":return ja(e,{type:"number",value:t});case"function":return ja(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function ja(e,t){return"type"in t?{name:e,...WF[t.type],...t}:"value"in t?{name:e,type:Dc(t.value),...t}:{name:e,type:"object",value:t}}function $f(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function Dc(e){return $f(e)?"array":e===null?"null":typeof e}function XF(e,t){let n;for(let r=t.length-1;r>=0;r--){const a=t[r];"extensions"in a&&(n=a.extensions)}const i=zf(e.constructor,n),s=Object.create(i);s[Mc]=e,s[or]={},s[bs]={};for(let r=0;r<t.length;++r){const a=t[r];for(const o in a)s[o]=a[o]}return Object.freeze(s),s}const YF="_mergedDefaultProps";function zf(e,t){if(!(e instanceof _u.constructor))return{};let n=YF;if(t)for(const s of t){const r=s.constructor;r&&(n+=`:${r.extensionName||r.name}`)}const i=Yx(e,n);return i||(e[n]=KF(e,t||[]))}function KF(e,t){if(!e.prototype)return null;const i=Object.getPrototypeOf(e),s=zf(i),r=Yx(e,"defaultProps")||{},a=HF(r),o=Object.assign(Object.create(null),s,a.defaultProps),l=Object.assign(Object.create(null),s?.[Ts],a.propTypes),u=Object.assign(Object.create(null),s?.[Md],a.deprecatedProps);for(const c of t){const d=zf(c.constructor);d&&(Object.assign(o,d),Object.assign(l,d[Ts]),Object.assign(u,d[Md]))}return qF(o,e),GF(o,l),ZF(o,u),o[Ts]=l,o[Md]=u,t.length===0&&!Vg(e,"_propTypes")&&(e._propTypes=l),o}function qF(e,t){const n=JF(t);Object.defineProperties(e,{id:{writable:!0,value:n}})}function ZF(e,t){for(const n in t)Object.defineProperty(e,n,{enumerable:!1,set(i){const s=`${this.id}: ${n}`;for(const r of t[n])Vg(this,r)||(this[r]=i);tt.deprecated(s,t[n].join("/"))()}})}function GF(e,t){const n={},i={};for(const s in t){const r=t[s],{name:a,value:o}=r;r.async&&(n[a]=o,i[a]=QF(a))}e[ra]=n,e[or]={},Object.defineProperties(e,i)}function QF(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||Bx(t)?this[or][e]=t:this[bs][e]=t},get(){if(this[bs]){if(e in this[bs])return this[bs][e]||this[ra][e];if(e in this[or]){const t=this[Mc]&&this[Mc].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[ra][e]}}return this[ra][e]}}}function Vg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Yx(e,t){return Vg(e,t)&&e[t]}function JF(e){const t=e.componentName;return t||tt.warn(`${e.name}.componentName not specified`)(),t||e.name}let e4=0;class _u{constructor(...t){this.props=XF(this,t),this.id=this.props.id,this.count=e4++}clone(t){const{props:n}=this,i={};for(const s in n[ra])s in n[bs]?i[s]=n[bs][s]:s in n[or]&&(i[s]=n[or][s]);return new this.constructor({...n,...i,...t})}}_u.componentName="Component";_u.defaultProps={};const t4=Object.freeze({});class n4{constructor(t){this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const n=this.asyncProps[t];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||t4}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const n=this.asyncProps[t];return n&&n.resolvedValue}isAsyncPropLoading(t){if(t){const n=this.asyncProps[t];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(t,n){this._watchPromise(t,Promise.resolve(n))}setAsyncProps(t){this.component=t[Mc]||this.component;const n=t[bs]||{},i=t[or]||t,s=t[ra]||{};for(const r in n){const a=n[r];this._createAsyncPropData(r,s[r]),this._updateAsyncProp(r,a),n[r]=this.getAsyncProp(r)}for(const r in i){const a=i[r];this._createAsyncPropData(r,s[r]),this._updateAsyncProp(r,a)}}_fetch(t,n){return null}_onResolve(t,n){}_onError(t,n){}_updateAsyncProp(t,n){if(this._didAsyncInputValueChange(t,n)){if(typeof n=="string"&&(n=this._fetch(t,n)),n instanceof Promise){this._watchPromise(t,n);return}if(Bx(n)){this._resolveAsyncIterable(t,n);return}this._setPropValue(t,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,n){const i=this.asyncProps[t];return n===i.resolvedValue||n===i.lastValue?!1:(i.lastValue=n,!0)}_setPropValue(t,n){this._freezeAsyncOldProps();const i=this.asyncProps[t];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(t,n,i){const s=this.asyncProps[t];s&&i>=s.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),s.resolvedValue=n,s.resolvedLoadCount=i,this.onAsyncPropUpdated(t,n))}_watchPromise(t,n){const i=this.asyncProps[t];if(i){i.pendingLoadCount++;const s=i.pendingLoadCount;n.then(r=>{this.component&&(r=this._postProcessValue(i,r),this._setAsyncPropValue(t,r,s),this._onResolve(t,r))}).catch(r=>{this._onError(t,r)})}}async _resolveAsyncIterable(t,n){if(t!=="data"){this._setPropValue(t,n);return}const i=this.asyncProps[t];if(!i)return;i.pendingLoadCount++;const s=i.pendingLoadCount;let r=[],a=0;for await(const o of n){if(!this.component)return;const{dataTransform:l}=this.component.props;l?r=l(o,r):r=r.concat(o),Object.defineProperty(r,"__diff",{enumerable:!1,value:[{startRow:a,endRow:r.length}]}),a=r.length,this._setAsyncPropValue(t,r,s)}this._onResolve(t,r)}_postProcessValue(t,n){const i=t.type;return i&&this.component&&(i.release&&i.release(t.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(t,n){if(!this.asyncProps[t]){const s=this.component&&this.component.props[Ts];this.asyncProps[t]={type:s&&s[t],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class i4 extends n4{constructor({attributeManager:t,layer:n}){super(n),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(t,n){const i=this.layer,s=i?.props.fetch;return s?s(n,{propName:t,layer:i}):super._fetch(t,n)}_onResolve(t,n){const i=this.layer;if(i){const s=i.props.onDataLoad;t==="data"&&s&&s(n,{propName:t,layer:i})}}_onError(t,n){const i=this.layer;i&&i.raiseError(n,`loading ${t} of ${this.layer}`)}}const s4="layer.changeFlag",r4="layer.initialize",a4="layer.update",o4="layer.finalize",l4="layer.matched",Iy=2**24-1,c4=Object.freeze([]),u4=nl(({oldViewport:e,viewport:t})=>e.equals(t));let si=new Uint8ClampedArray(0);const d4={data:{type:"data",value:c4,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:n,loaders:i,loadOptions:s,signal:r})=>{const{resourceManager:a}=n.context;s=s||n.getLoadOptions(),i=i||n.props.loaders,r&&(s={...s,fetch:{...s?.fetch,signal:r}});let o=a.contains(e);return!o&&!s&&(a.add({resourceId:e,data:mc(e,i),persistent:!1}),o=!0),o?a.subscribe({resourceId:e,onChange:l=>n.internalState?.reloadAsyncProp(t,l),consumerId:n.id,requestId:t}):mc(e,i,s)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:et.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class _r extends _u{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Wr.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(t){fn(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=cx(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,r,a]=rx(i,n.pixelProjectionMatrix);return t.length===2?[s,r]:[s,r,a]}unproject(t){return fn(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,n){fn(this.internalState);const i=this.internalState.viewport||this.context.viewport;return zO(t,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}get isDrawable(){return!0}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const t=this.state;return t&&(t.models||t.model&&[t.model])||[]}setShaderModuleProps(...t){for(const n of this.getModels())n.shaderInputs.setProps(...t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===et.DEFAULT||t===et.LNGLAT||t===et.CARTESIAN}onHover(t,n){return this.props.onHover&&this.props.onHover(t,n)||!1}onClick(t,n){return this.props.onClick&&this.props.onClick(t,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,n=[]){return n[0]=t+1&255,n[1]=t+1>>8&255,n[2]=t+1>>8>>8&255,n}decodePickingColor(t){fn(t instanceof Uint8Array);const[n,i,s]=t;return n+i*256+s*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:FF(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){return this.getAttributeManager()?.getBounds(["positions","instancePositions"])}getShaders(t){t=Ey(t,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const n of this.props.extensions)t=Ey(t,n.getShaders.call(this,n));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const n=this.getAttributeManager(),{dataChanged:i}=t.changeFlags;if(i&&n)if(Array.isArray(i))for(const s of i)n.invalidateAll(s);else n.invalidateAll();if(n){const{props:s}=t,r=this.internalState.hasPickingBuffer,a=Number.isInteger(s.highlightedObjectIndex)||s.pickable||s.extensions.some(o=>o.getNeedsPickingBuffer.call(this,o));if(r!==a){this.internalState.hasPickingBuffer=a;const{pickingColors:o,instancePickingColors:l}=n.attributes,u=o||l;u&&(a&&u.constant&&(u.constant=!1,n.invalidate(u.id)),!u.value&&!a&&(u.constant=!0,u.value=[0,0,0]))}}}finalizeState(t){for(const i of this.getModels())i.destroy();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const n of this.getModels())n.draw(t.renderPass)}getPickingInfo({info:t,mode:n,sourceLayer:i}){const{index:s}=t;return s>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[s]),t}raiseError(t,n){n&&(t=new Error(`${n}: ${t.message}`,{cause:t})),this.props.onError?.(t)||this.context?.onError?.(t,this)}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){return this.internalState?.uniformTransitions.active||!1}activateViewport(t){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=t,(!n||!u4({oldViewport:n,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const n=this.getAttributeManager();n&&(t==="all"?n.invalidateAll():n.invalidate(t))}updateAttributes(t){let n=!1;for(const i in t)t[i].layoutChanged()&&(n=!0);for(const i of this.getModels())this._setModelAttributes(i,t,n)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const n=this.props,i=this.getNumInstances(),s=this.getStartIndices();t.update({data:n.data,numInstances:i,startIndices:s,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const r=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(r)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const n=t.update(),i=Object.create(this.props);for(const s in n)Object.defineProperty(i,s,{value:n[s]});return i}return this.props}calculateInstancePickingColors(t,{numInstances:n}){if(t.constant)return;const i=Math.floor(si.length/4);if(this.internalState.usesPickingColorCache=!0,i<n){n>Iy&&tt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),si=Eo.allocate(si,n,{size:4,copy:!0,maxCount:Math.max(n,Iy)});const s=Math.floor(si.length/4),r=[0,0,0];for(let a=i;a<s;a++)this.encodePickingColor(a,r),si[a*4+0]=r[0],si[a*4+1]=r[1],si[a*4+2]=r[2],si[a*4+3]=0}t.value=si.subarray(0,n*4)}_setModelAttributes(t,n,i=!1){if(!Object.keys(n).length)return;if(i){const o=this.getAttributeManager();t.setBufferLayout(o.getBufferLayouts(t)),n=o.getAttributes()}const s=t.userData?.excludeAttributes||{},r={},a={};for(const o in n){if(s[o])continue;const l=n[o].getValue();for(const u in l){const c=l[u];c instanceof pt?n[o].settings.isIndexed?t.setIndexBuffer(c):r[u]=c:c&&(a[u]=c)}}t.setAttributes(r),t.setConstantAttributes(a)}disablePickingIndex(t){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(t);return}const{pickingColors:i,instancePickingColors:s}=this.getAttributeManager().attributes,r=i||s,a=r&&n.attributes&&n.attributes[r.id];if(a&&a.value){const o=a.value,l=this.encodePickingColor(t);for(let u=0;u<n.length;u++){const c=r.getVertexOffset(u);o[c]===l[0]&&o[c+1]===l[1]&&o[c+2]===l[2]&&this._disablePickingIndex(u)}}else this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,s=n||i;if(!s)return;const r=s.getVertexOffset(t),a=s.getVertexOffset(t+1);s.buffer.write(new Uint8Array(a-r),r)}restorePickingColors(){const{pickingColors:t,instancePickingColors:n}=this.getAttributeManager().attributes,i=t||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==si.buffer&&(i.value=si.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){fn(!this.internalState),fn(Number.isFinite(this.props.coordinateSystem)),un(r4,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new i4({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(tt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.uniformTransitions=new EF(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){un(l4,this,this===t);const{state:n,internalState:i}=t;this!==t&&(this.internalState=i,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(un(a4,this,t),!t)return;const n=this.props,i=this.context,s=this.internalState,r=i.viewport,a=this._updateUniformTransition();s.propsInTransition=a,i.viewport=s.viewport||r,this.props=a;try{const o=this._getUpdateParams(),l=this.getModels();if(i.device)this.updateState(o);else try{this.updateState(o)}catch{}for(const c of this.props.extensions)c.updateState.call(this,o,c);this.setNeedsRedraw(),this._updateAttributes();const u=this.getModels()[0]!==l[0];this._postUpdate(o,u)}finally{i.viewport=r,this.props=n,this._clearChangeFlags(),s.needsUpdate=!1,s.resetOldProps()}}_finalize(){un(o4,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,this.context,t)}_drawLayer({renderPass:t,shaderModuleProps:n=null,uniforms:i={},parameters:s={}}){this._updateAttributeTransition();const r=this.props,a=this.context;this.props=this.internalState.propsInTransition||r;try{n&&this.setShaderModuleProps(n);const{getPolygonOffset:o}=this.props,l=o&&o(i)||[0,0];a.device instanceof Zr&&a.device.setParametersWebGL({polygonOffset:l});for(const u of this.getModels())u.device.type==="webgpu"?u.setParameters({...u.parameters,...s}):u.setParameters(s);if(a.device instanceof Zr)a.device.withParametersWebGL(s,()=>{const u={renderPass:t,shaderModuleProps:n,uniforms:i,parameters:s,context:a};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)});else{const u={renderPass:t,shaderModuleProps:n,uniforms:i,parameters:s,context:a};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)}}finally{this.props=r}}getChangeFlags(){return this.internalState?.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const s in t)if(t[s]){let r=!1;switch(s){case"dataChanged":const a=t[s],o=n[s];a&&Array.isArray(o)&&(n.dataChanged=Array.isArray(a)?o.concat(a):a,r=!0);default:n[s]||(n[s]=t[s],r=!0)}r&&un(s4,this,s,t)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,n){const i=PF(t,n);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged)this.internalState.uniformTransitions.add(s,n[s],t[s],t.transitions?.[s]);return this.setChangeFlags(i)}validateProps(){IF(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const n={highlightedObjectColor:t.picked?t.color:null},{highlightColor:i}=this.props;t.picked&&typeof i=="function"&&(n.highlightColor=i(t)),this.setShaderModuleProps({picking:n}),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new SF(t.device,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,n){const{props:i,oldProps:s}=t,r=this.state.model;r?.isInstanced&&r.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:o,highlightColor:l}=i;if(n||s.autoHighlight!==a||s.highlightedObjectIndex!==o||s.highlightColor!==l){const u={};Array.isArray(l)&&(u.highlightColor=l),(n||s.autoHighlight!==a||o!==s.highlightedObjectIndex)&&(u.highlightedObjectColor=Number.isFinite(o)&&o>=0?this.encodePickingColor(o):null),this.setShaderModuleProps({picking:u})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const i=this.getAttributeManager(),s=i?i.getNeedsRedraw(t):!1;if(n=n||s,n)for(const r of this.props.extensions)r.onNeedsRedraw.call(this,r);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}_r.defaultProps=d4;_r.layerName="Layer";const f4="compositeLayer.renderLayers";class Kx extends _r{get isComposite(){return!0}get isDrawable(){return!1}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:n}=t;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(t.object=n.__source.object,t.index=n.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,n){return n&&n.length}getSubLayerClass(t,n){const{_subLayerProps:i}=this.props;return i&&i[t]&&i[t].type||n}getSubLayerRow(t,n,i){return t.__source={parent:this,object:n,index:i},t}getSubLayerAccessor(t){if(typeof t=="function"){const n={index:-1,data:this.props.data,target:[]};return(i,s)=>i&&i.__source?(n.index=i.__source.index,t(i.__source.object,n)):t(i,s)}return t}getSubLayerProps(t={}){const{opacity:n,pickable:i,visible:s,parameters:r,getPolygonOffset:a,highlightedObjectIndex:o,autoHighlight:l,highlightColor:u,coordinateSystem:c,coordinateOrigin:d,wrapLongitude:f,positionFormat:h,modelMatrix:g,extensions:v,fetch:m,operation:p,_subLayerProps:y}=this.props,_={id:"",updateTriggers:{},opacity:n,pickable:i,visible:s,parameters:r,getPolygonOffset:a,highlightedObjectIndex:o,autoHighlight:l,highlightColor:u,coordinateSystem:c,coordinateOrigin:d,wrapLongitude:f,positionFormat:h,modelMatrix:g,extensions:v,fetch:m,operation:p},b=y&&t.id&&y[t.id],S=b&&b.updateTriggers,x=t.id||"sublayer";if(b){const I=this.props[Ts],T=t.type?t.type._propTypes:{};for(const k in b){const P=T[k]||I[k];P&&P.type==="accessor"&&(b[k]=this.getSubLayerAccessor(b[k]))}}Object.assign(_,t,b),_.id=`${this.props.id}-${x}`,_.updateTriggers={all:this.props.updateTriggers?.all,...t.updateTriggers,...S};for(const I of v){const T=I.getSubLayerProps.call(this,I);T&&Object.assign(_,T,{updateTriggers:Object.assign(_.updateTriggers,T.updateTriggers)})}return _}_updateAutoHighlight(t){for(const n of this.getSubLayers())n.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,n){let i=this.internalState.subLayers;const s=!i||this.needsUpdate();if(s){const r=this.renderLayers();i=Ig(r,Boolean),this.internalState.subLayers=i}un(f4,this,s,i);for(const r of i)r.parent=this}}Kx.layerName="CompositeLayer";const h4=new Jn().lookAt({eye:[0,0,1]});function g4({width:e,height:t,near:n,far:i,padding:s}){let r=-e/2,a=e/2,o=-t/2,l=t/2;if(s){const{left:u=0,right:c=0,top:d=0,bottom:f=0}=s,h=Zt((u+e-c)/2,0,e)-e/2,g=Zt((d+t-f)/2,0,t)-t/2;r-=h,a-=h,o+=g,l+=g}return new Jn().ortho({left:r,right:a,bottom:o,top:l,near:n,far:i})}class m4 extends Ea{constructor(t){const{width:n,height:i,near:s=.1,far:r=1e3,zoom:a=0,target:o=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(a)?a[0]:a,d=Array.isArray(a)?a[1]:a,f=Math.min(c,d),h=Math.pow(2,f);let g;if(c!==d){const v=Math.pow(2,c),m=Math.pow(2,d);g={unitsPerMeter:[v/h,m/h,1],metersPerUnit:[h/v,h/m,1]}}super({...t,longitude:void 0,position:o,viewMatrix:h4.clone().scale([h,h*(u?-1:1),h]),projectionMatrix:g4({width:n||1,height:i||1,padding:l,near:s,far:r}),zoom:f,distanceScales:g})}projectFlat([t,n]){const{unitsPerMeter:i}=this.distanceScales;return[t*i[0],n*i[1]]}unprojectFlat([t,n]){const{metersPerUnit:i}=this.distanceScales;return[t*i[0],n*i[1]]}panByPosition(t,n){const i=gu(n,this.pixelUnprojectionMatrix),s=this.projectFlat(t),r=Cc([],s,Vw([],i)),a=Cc([],this.center,r);return{target:this.unprojectFlat(a)}}}class v4 extends yx{constructor(t){const{width:n,height:i,rotationX:s=0,rotationOrbit:r=0,target:a=[0,0,0],zoom:o=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:d=1/0,startPanPosition:f,startRotatePos:h,startRotationX:g,startRotationOrbit:v,startZoomPosition:m,startZoom:p}=t;super({width:n,height:i,rotationX:s,rotationOrbit:r,target:a,zoom:o,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:d},{startPanPosition:f,startRotatePos:h,startRotationX:g,startRotationOrbit:v,startZoomPosition:m,startZoom:p}),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const r=this.makeViewport(this.getViewportProps()).panByPosition(i,t);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:s,startRotationX:r,startRotationOrbit:a}=this.getState(),{width:o,height:l}=this.getViewportProps();if(!s||r===void 0||a===void 0)return this;let u;if(t){let c=(t[0]-s[0])/o;const d=(t[1]-s[1])/l;(r<-90||r>90)&&(c*=-1),u={rotationX:r+d*180,rotationOrbit:a+c*180}}else u={rotationX:r+i,rotationOrbit:a+n};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const n=t.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:s}=i;return Math.abs(s-n.rotationOrbit)>180&&(i.rotationOrbit=s<0?s+360:s-360),i}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:n,scale:i}){let{startZoom:s,startZoomPosition:r}=this.getState();if(r||(s=this.getViewportProps().zoom,r=this._unproject(n)||this._unproject(t)),!r)return this;const a=this._calculateNewZoom({scale:i,startZoom:s}),o=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...o.panByPosition(r,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const n=this.makeViewport(this.getViewportProps());return t&&n.unproject(t)}_calculateNewZoom({scale:t,startZoom:n}){const{maxZoom:i,minZoom:s}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);const r=n+Math.log2(t);return Zt(r,s,i)}_panFromCenter(t){const{width:n,height:i,target:s}=this.getViewportProps();return this.pan({startPosition:s,pos:[n/2+t[0],i/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:n,minZoom:i,zoom:s,maxRotationX:r,minRotationX:a,rotationOrbit:o}=t;return t.zoom=Array.isArray(s)?[Zt(s[0],i,n),Zt(s[1],i,n)]:Zt(s,i,n),t.rotationX=Zt(t.rotationX,a,r),(o<-180||o>180)&&(t.rotationOrbit=MO(o+180,360)-180),t}}class p4 extends v4{constructor(t){super(t),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:n}){const{maxZoom:i,minZoom:s}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);let r=Math.log2(t);if(Array.isArray(n)){let[a,o]=n;switch(this.zoomAxis){case"X":a=Zt(a+r,s,i);break;case"Y":o=Zt(o+r,s,i);break;default:let l=Math.min(a+r,o+r);l<s&&(r+=s-l),l=Math.max(a+r,o+r),l>i&&(r+=i-l),a+=r,o+=r}return[a,o]}return Zt(n+r,s,i)}}class y4 extends px{constructor(){super(...arguments),this.ControllerState=p4,this.transition={transitionDuration:300,transitionInterpolator:new Pg(["target","zoom"])},this.dragMode="pan"}_onPanRotate(){return!1}}class qx extends vx{constructor(t={}){super(t)}getViewportType(){return m4}get ControllerType(){return y4}}qx.displayName="OrthographicView";const Py=`uniform iconUniforms {
  float sizeScale;
  vec2 iconsTextureDim;
  float sizeMinPixels;
  float sizeMaxPixels;
  bool billboard;
  highp int sizeUnits;
  float alphaCutoff;
} icon;
`,_4={name:"icon",vs:Py,fs:Py,uniformTypes:{sizeScale:"f32",iconsTextureDim:"vec2<f32>",sizeMinPixels:"f32",sizeMaxPixels:"f32",billboard:"f32",sizeUnits:"i32",alphaCutoff:"f32"}},b4=`#version 300 es
#define SHADER_NAME icon-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceSizes;
in float instanceAngles;
in vec4 instanceColors;
in vec3 instancePickingColors;
in vec4 instanceIconFrames;
in float instanceColorModes;
in vec2 instanceOffsets;
in vec2 instancePixelOffset;
out float vColorMode;
out vec4 vColor;
out vec2 vTextureCoords;
out vec2 uv;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = angle * PI / 180.0;
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vec2 iconSize = instanceIconFrames.zw;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * icon.sizeScale, icon.sizeUnits),
icon.sizeMinPixels, icon.sizeMaxPixels
);
float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
pixelOffset += instancePixelOffset;
pixelOffset.y *= -1.0;
if (icon.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vTextureCoords = mix(
instanceIconFrames.xy,
instanceIconFrames.xy + iconSize,
(positions.xy + 1.0) / 2.0
) / icon.iconsTextureDim;
vColor = instanceColors;
DECKGL_FILTER_COLOR(vColor, geometry);
vColorMode = instanceColorModes;
}
`,w4=`#version 300 es
#define SHADER_NAME icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in float vColorMode;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec4 texColor = texture(iconsTexture, vTextureCoords);
vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
float a = texColor.a * layer.opacity * vColor.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color, a);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,x4=1024,S4=4,Ry=()=>{},My={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},T4={x:0,y:0,width:0,height:0};function A4(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function C4(e,t,n,i){const s=Math.min(n/t.width,i/t.height),r=Math.floor(t.width*s),a=Math.floor(t.height*s);return s===1?{image:t,width:r,height:a}:(e.canvas.height=a,e.canvas.width=r,e.clearRect(0,0,r,a),e.drawImage(t,0,0,t.width,t.height,0,0,r,a),{image:e.canvas,width:r,height:a})}function Io(e){return e&&(e.id||e.url)}function k4(e,t,n,i){const{width:s,height:r,device:a}=e,o=a.createTexture({format:"rgba8unorm",width:t,height:n,sampler:i,mipmaps:!0}),l=a.createCommandEncoder();return l.copyTextureToTexture({sourceTexture:e,destinationTexture:o,width:s,height:r}),l.finish(),e.destroy(),o}function Oy(e,t,n){for(let i=0;i<t.length;i++){const{icon:s,xOffset:r}=t[i],a=Io(s);e[a]={...s,x:r,y:n}}}function E4({icons:e,buffer:t,mapping:n={},xOffset:i=0,yOffset:s=0,rowHeight:r=0,canvasWidth:a}){let o=[];for(let l=0;l<e.length;l++){const u=e[l],c=Io(u);if(!n[c]){const{height:d,width:f}=u;i+f+t>a&&(Oy(n,o,s),i=0,s=r+s+t,r=0,o=[]),o.push({icon:u,xOffset:i}),i=i+f+t,r=Math.max(r,d)}}return o.length>0&&Oy(n,o,s),{mapping:n,rowHeight:r,xOffset:i,yOffset:s,canvasWidth:a,canvasHeight:A4(r+s+t)}}function I4(e,t,n){if(!e||!t)return null;n=n||{};const i={},{iterable:s,objectInfo:r}=Fg(e);for(const a of s){r.index++;const o=t(a,r),l=Io(o);if(!o)throw new Error("Icon is missing.");if(!o.url)throw new Error("Icon url is missing.");!i[l]&&(!n[l]||o.url!==n[l].url)&&(i[l]={...o,source:a,sourceIndex:r.index})}return i}class P4{constructor(t,{onUpdate:n=Ry,onError:i=Ry}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._samplerParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=S4,this._canvasWidth=x4,this._canvasHeight=0,this._canvas=null,this.device=t,this.onUpdate=n,this.onError=i}finalize(){this._texture?.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const n=this._autoPacking?Io(t):t;return this._mapping[n]||T4}setProps({loadOptions:t,autoPacking:n,iconAtlas:i,iconMapping:s,textureParameters:r}){t&&(this._loadOptions=t),n!==void 0&&(this._autoPacking=n),s&&(this._mapping=s),i&&(this._texture?.delete(),this._texture=null,this._externalTexture=i),r&&(this._samplerParameters=r)}get isLoaded(){return this._pendingCount===0}packIcons(t,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(I4(t,n,this._mapping)||{});if(i.length>0){const{mapping:s,xOffset:r,yOffset:a,rowHeight:o,canvasHeight:l}=E4({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=o,this._mapping=s,this._xOffset=r,this._yOffset=a,this._canvasHeight=l,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._samplerParameters||My,mipmaps:!0})),this._texture.height!==this._canvasHeight&&(this._texture=k4(this._texture,this._canvasWidth,this._canvasHeight,this._samplerParameters||My)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(t){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const i of t)this._pendingCount++,mc(i.url,this._loadOptions).then(s=>{const r=Io(i),a=this._mapping[r],{x:o,y:l,width:u,height:c}=a,{image:d,width:f,height:h}=C4(n,s,u,c);this._texture?.copyExternalImage({image:d,x:o+(u-f)/2,y:l+(c-h)/2,width:f,height:h}),a.width=f,a.height=h,this._texture.generateMipmap(),this.onUpdate()}).catch(s=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:s})}).finally(()=>{this._pendingCount--})}}const Zx=[0,0,0,255],R4={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:Zx},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class Lg extends _r{getShaders(){return super.getShaders({vs:b4,fs:w4,modules:[hu,mu,_4]})}initializeState(){this.state={iconManager:new P4(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:Zx},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:n,oldProps:i,changeFlags:s}=t,r=this.getAttributeManager(),{iconAtlas:a,iconMapping:o,data:l,getIcon:u,textureParameters:c}=n,{iconManager:d}=this.state;if(typeof a=="string")return;const f=a||this.internalState.isAsyncPropLoading("iconAtlas");d.setProps({loadOptions:n.loadOptions,autoPacking:!f,iconAtlas:a,iconMapping:f?o:null,textureParameters:c}),f?i.iconMapping!==n.iconMapping&&r.invalidate("getIcon"):(s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getIcon))&&d.packIcons(l,u),s.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),r.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:s,sizeUnits:r,billboard:a,alphaCutoff:o}=this.props,{iconManager:l}=this.state,u=l.getTexture();if(u){const c=this.state.model,d={iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Zi[r],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:s,billboard:a,alphaCutoff:o};c.shaderInputs.setProps({icon:d}),c.draw(this.context.renderPass)}}_getModel(){const t=[-1,-1,1,-1,-1,1,1,1];return new Es(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new pu({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array(t)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){const n=this.getCurrentLayer()?.props.onIconError;n?n(t):tt.error(t.error.message)()}getInstanceOffset(t){const{width:n,height:i,anchorX:s=n/2,anchorY:r=i/2}=this.state.iconManager.getIconMapping(t);return[n/2-s,i/2-r]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:n,y:i,width:s,height:r}=this.state.iconManager.getIconMapping(t);return[n,i,s,r]}}Lg.defaultProps=R4;Lg.layerName="IconLayer";const M4=`struct LineUniforms {
  widthScale: f32,
  widthMinPixels: f32,
  widthMaxPixels: f32,
  useShortestPath: f32,
  widthUnits: i32,
};

@group(0) @binding(1)
var<uniform> line: LineUniforms;
`,Dy=`uniform lineUniforms {
  float widthScale;
  float widthMinPixels;
  float widthMaxPixels;
  float useShortestPath;
  highp int widthUnits;
} line;
`,O4={name:"line",source:M4,vs:Dy,fs:Dy,uniformTypes:{widthScale:"f32",widthMinPixels:"f32",widthMaxPixels:"f32",useShortestPath:"f32",widthUnits:"i32"}},D4=`// TODO(ibgreen): Hack for Layer uniforms (move to new "color" module?)
struct LayerUniforms {
  opacity: f32,
};
var<private> layer: LayerUniforms = LayerUniforms(1.0);
// @group(0) @binding(1) var<uniform> layer: LayerUniforms;

// ---------- Helper Structures & Functions ----------

// Placeholder filter functions.
fn deckgl_filter_size(offset: vec3<f32>, geometry: Geometry) -> vec3<f32> {
  return offset;
}
fn deckgl_filter_gl_position(p: vec4<f32>, geometry: Geometry) -> vec4<f32> {
  return p;
}
fn deckgl_filter_color(color: vec4<f32>, geometry: Geometry) -> vec4<f32> {
  return color;
}

// Compute an extrusion offset given a line direction (in clipspace),
// an offset direction (-1 or 1), and a width in pixels.
// Assumes a uniform "project" with a viewportSize field is available.
fn getExtrusionOffset(line_clipspace: vec2<f32>, offset_direction: f32, width: f32) -> vec2<f32> {
  // project.viewportSize should be provided as a uniform (not shown here)
  let dir_screenspace = normalize(line_clipspace * project.viewportSize);
  // Rotate by 90: (x,y) becomes (-y,x)
  let rotated = vec2<f32>(-dir_screenspace.y, dir_screenspace.x);
  return rotated * offset_direction * width / 2.0;
}

// Splits the line between two points at a given x coordinate.
// Interpolates the y and z components.
fn splitLine(a: vec3<f32>, b: vec3<f32>, x: f32) -> vec3<f32> {
  let t: f32 = (x - a.x) / (b.x - a.x);
  return vec3<f32>(x, a.yz + t * (b.yz - a.yz));
}

// ---------- Uniforms & Global Structures ----------

// Uniforms for line, layer, and project are assumed to be defined elsewhere.
// For example:
//
// @group(0) @binding(0)
// var<uniform> line: LineUniform;
//
// struct LayerUniform {
//   opacity: f32,
// };
// @group(0) @binding(1)
// var<uniform> layer: LayerUniform;
//
// struct ProjectUniform {
//   viewportSize: vec2<f32>,
// };
// @group(0) @binding(2)
// var<uniform> project: ProjectUniform;



// ---------- Vertex Output Structure ----------

struct Varyings {
  @builtin(position) gl_Position: vec4<f32>,
  @location(0) vColor: vec4<f32>,
  @location(1) uv: vec2<f32>,
};

// ---------- Vertex Shader Entry Point ----------

@vertex
fn vertexMain(
  @location(0) positions: vec3<f32>,
  @location(1) instanceSourcePositions: vec3<f32>,
  @location(2) instanceTargetPositions: vec3<f32>,
  @location(3) instanceSourcePositions64Low: vec3<f32>,
  @location(4) instanceTargetPositions64Low: vec3<f32>,
  @location(5) instanceColors: vec4<f32>,
  @location(6) instancePickingColors: vec3<f32>,
  @location(7) instanceWidths: f32
) -> Varyings {
  var geometry: Geometry;
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  var source_world: vec3<f32> = instanceSourcePositions;
  var target_world: vec3<f32> = instanceTargetPositions;
  var source_world_64low: vec3<f32> = instanceSourcePositions64Low;
  var target_world_64low: vec3<f32> = instanceTargetPositions64Low;

  // Apply shortest-path adjustments if needed.
  if (line.useShortestPath > 0.5 || line.useShortestPath < -0.5) {
    source_world.x = (source_world.x + 180.0 % 360.0) - 180.0;
    target_world.x = (target_world.x + 180.0 % 360.0) - 180.0;
    let deltaLng: f32 = target_world.x - source_world.x;

    if (deltaLng * line.useShortestPath > 180.0) {
      source_world.x = source_world.x + 360.0 * line.useShortestPath;
      source_world = splitLine(source_world, target_world, 180.0 * line.useShortestPath);
      source_world_64low = vec3<f32>(0.0, 0.0, 0.0);
    } else if (deltaLng * line.useShortestPath < -180.0) {
      target_world.x = target_world.x + 360.0 * line.useShortestPath;
      target_world = splitLine(source_world, target_world, 180.0 * line.useShortestPath);
      target_world_64low = vec3<f32>(0.0, 0.0, 0.0);
    } else if (line.useShortestPath < 0.0) {
      var abortOut: Varyings;
      abortOut.gl_Position = vec4<f32>(0.0);
      abortOut.vColor = vec4<f32>(0.0);
      abortOut.uv = vec2<f32>(0.0);
      return abortOut;
    }
  }

  // Project Pos and target positions to clip space.
  let sourceResult = project_position_to_clipspace_and_commonspace(source_world, source_world_64low, vec3<f32>(0.0));
  let targetResult = project_position_to_clipspace_and_commonspace(target_world, target_world_64low, vec3<f32>(0.0));
  let sourcePos: vec4<f32> = sourceResult.clipPosition;
  let targetPos: vec4<f32> = targetResult.clipPosition;
  let source_commonspace: vec4<f32> = sourceResult.commonPosition;
  let target_commonspace: vec4<f32> = targetResult.commonPosition;

  // Interpolate along the line segment.
  let segmentIndex: f32 = positions.x;
  let p: vec4<f32> = sourcePos + segmentIndex * (targetPos - sourcePos);
  geometry.position = source_commonspace + segmentIndex * (target_commonspace - source_commonspace);
  let uv: vec2<f32> = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Determine width in pixels.
  let widthPixels: f32 = clamp(
    project_unit_size_to_pixel(instanceWidths * line.widthScale, line.widthUnits),
    line.widthMinPixels, line.widthMaxPixels
  );

  // Compute extrusion offset.
  let extrusion: vec2<f32> = getExtrusionOffset(targetPos.xy - sourcePos.xy, positions.y, widthPixels);
  let offset: vec3<f32> = vec3<f32>(extrusion, 0.0);

  // Apply deck.gl filter functions.
  let filteredOffset = deckgl_filter_size(offset, geometry);
  let filteredP = deckgl_filter_gl_position(p, geometry);

  let clipOffset: vec2<f32> = project_pixel_size_to_clipspace(filteredOffset.xy);
  let finalPosition: vec4<f32> = filteredP + vec4<f32>(clipOffset, 0.0, 0.0);

  // Compute color.
  var vColor: vec4<f32> = vec4<f32>(instanceColors.rgb, instanceColors.a * layer.opacity);
  // vColor = deckgl_filter_color(vColor, geometry);

  var output: Varyings;
  output.gl_Position = finalPosition;
  output.vColor = vColor;
  output.uv = uv;
  return output;
}

@fragment
fn fragmentMain(
  @location(0) vColor: vec4<f32>,
  @location(1) uv: vec2<f32>
) -> @location(0) vec4<f32> {
  // Create and initialize geometry with the provided uv.
  var geometry: Geometry;
  geometry.uv = uv;

  // Start with the input color.
  var fragColor: vec4<f32> = vColor;

  // Apply the deck.gl filter to the color.
  fragColor = deckgl_filter_color(fragColor, geometry);

  return fragColor;
}
`,N4=`#version 300 es
#define SHADER_NAME line-layer-vertex-shader
in vec3 positions;
in vec3 instanceSourcePositions;
in vec3 instanceTargetPositions;
in vec3 instanceSourcePositions64Low;
in vec3 instanceTargetPositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in float instanceWidths;
out vec4 vColor;
out vec2 uv;
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
vec2 dir_screenspace = normalize(line_clipspace * project.viewportSize);
dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
return dir_screenspace * offset_direction * width / 2.0;
}
vec3 splitLine(vec3 a, vec3 b, float x) {
float t = (x - a.x) / (b.x - a.x);
return vec3(x, mix(a.yz, b.yz, t));
}
void main(void) {
geometry.worldPosition = instanceSourcePositions;
geometry.worldPositionAlt = instanceTargetPositions;
vec3 source_world = instanceSourcePositions;
vec3 target_world = instanceTargetPositions;
vec3 source_world_64low = instanceSourcePositions64Low;
vec3 target_world_64low = instanceTargetPositions64Low;
if (line.useShortestPath > 0.5 || line.useShortestPath < -0.5) {
source_world.x = mod(source_world.x + 180., 360.0) - 180.;
target_world.x = mod(target_world.x + 180., 360.0) - 180.;
float deltaLng = target_world.x - source_world.x;
if (deltaLng * line.useShortestPath > 180.) {
source_world.x += 360. * line.useShortestPath;
source_world = splitLine(source_world, target_world, 180. * line.useShortestPath);
source_world_64low = vec3(0.0);
} else if (deltaLng * line.useShortestPath < -180.) {
target_world.x += 360. * line.useShortestPath;
target_world = splitLine(source_world, target_world, 180. * line.useShortestPath);
target_world_64low = vec3(0.0);
} else if (line.useShortestPath < 0.) {
gl_Position = vec4(0.);
return;
}
}
vec4 source_commonspace;
vec4 target_commonspace;
vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
float segmentIndex = positions.x;
vec4 p = mix(source, target, segmentIndex);
geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
uv = positions.xy;
geometry.uv = uv;
geometry.pickingColor = instancePickingColors;
float widthPixels = clamp(
project_size_to_pixel(instanceWidths * line.widthScale, line.widthUnits),
line.widthMinPixels, line.widthMaxPixels
);
vec3 offset = vec3(
getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
0.0);
DECKGL_FILTER_SIZE(offset, geometry);
DECKGL_FILTER_GL_POSITION(p, geometry);
gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
vColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,B4=`#version 300 es
#define SHADER_NAME line-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,F4=[0,0,0,255],V4={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:F4},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class Nc extends _r{getBounds(){return this.getAttributeManager()?.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:N4,fs:B4,source:D4,modules:[hu,mu,O4]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){super.updateState(t),t.changeFlags.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:t}){const{widthUnits:n,widthScale:i,widthMinPixels:s,widthMaxPixels:r,wrapLongitude:a}=this.props,o=this.state.model,l={widthUnits:Zi[n],widthScale:i,widthMinPixels:s,widthMaxPixels:r,useShortestPath:a?1:0};o.shaderInputs.setProps({line:l}),o.draw(this.context.renderPass),a&&(o.shaderInputs.setProps({line:{...l,useShortestPath:-1}}),o.draw(this.context.renderPass))}_getModel(){const t=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Es(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new pu({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(t)}}}),isInstanced:!0})}}Nc.layerName="LineLayer";Nc.defaultProps=V4;const Ny=`uniform scatterplotUniforms {
  float radiusScale;
  float radiusMinPixels;
  float radiusMaxPixels;
  float lineWidthScale;
  float lineWidthMinPixels;
  float lineWidthMaxPixels;
  float stroked;
  float filled;
  bool antialiasing;
  bool billboard;
  highp int radiusUnits;
  highp int lineWidthUnits;
} scatterplot;
`,L4={name:"scatterplot",vs:Ny,fs:Ny,source:"",uniformTypes:{radiusScale:"f32",radiusMinPixels:"f32",radiusMaxPixels:"f32",lineWidthScale:"f32",lineWidthMinPixels:"f32",lineWidthMaxPixels:"f32",stroked:"f32",filled:"f32",antialiasing:"f32",billboard:"f32",radiusUnits:"i32",lineWidthUnits:"i32"}},U4=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),
scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),
scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
);
outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
float edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;
if (scatterplot.billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,$4=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = scatterplot.antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (scatterplot.stroked > 0.5) {
float isLine = scatterplot.antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (scatterplot.filled > 0.5) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (scatterplot.filled < 0.5) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,z4=`// TODO(ibgreen): Hack for Layer uniforms (move to new "color" module?)

struct LayerUniforms {
  opacity: f32,
};

var<private> layer: LayerUniforms = LayerUniforms(1.0);
// @group(0) @binding(1) var<uniform> layer: LayerUniforms;

// Main shaders

struct ScatterplotUniforms {
  radiusScale: f32,
  radiusMinPixels: f32,
  radiusMaxPixels: f32,
  lineWidthScale: f32,
  lineWidthMinPixels: f32,
  lineWidthMaxPixels: f32,
  stroked: f32,
  filled: i32,
  antialiasing: i32,
  billboard: i32,
  radiusUnits: i32,
  lineWidthUnits: i32,
};

struct ConstantAttributeUniforms {
 instancePositions: vec3<f32>,
 instancePositions64Low: vec3<f32>,
 instanceRadius: f32,
 instanceLineWidths: f32,
 instanceFillColors: vec4<f32>,
 instanceLineColors: vec4<f32>,
 instancePickingColors: vec3<f32>,

 instancePositionsConstant: i32,
 instancePositions64LowConstant: i32,
 instanceRadiusConstant: i32,
 instanceLineWidthsConstant: i32,
 instanceFillColorsConstant: i32,
 instanceLineColorsConstant: i32,
 instancePickingColorsConstant: i32
};

@group(0) @binding(2) var<uniform> scatterplot: ScatterplotUniforms;

struct ConstantAttributes {
  instancePositions: vec3<f32>,
  instancePositions64Low: vec3<f32>,
  instanceRadius: f32,
  instanceLineWidths: f32,
  instanceFillColors: vec4<f32>,
  instanceLineColors: vec4<f32>,
  instancePickingColors: vec3<f32>
};

const constants = ConstantAttributes(
  vec3<f32>(0.0),
  vec3<f32>(0.0),
  0.0,
  0.0,
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec3<f32>(0.0)
);

struct Attributes {
  @builtin(instance_index) instanceIndex : u32,
  @builtin(vertex_index) vertexIndex : u32,
  @location(0) positions: vec3<f32>,
  @location(1) instancePositions: vec3<f32>,
  @location(2) instancePositions64Low: vec3<f32>,
  @location(3) instanceRadius: f32,
  @location(4) instanceLineWidths: f32,
  @location(5) instanceFillColors: vec4<f32>,
  @location(6) instanceLineColors: vec4<f32>,
  @location(7) instancePickingColors: vec3<f32>
};

struct Varyings {
  @builtin(position) position: vec4<f32>,
  @location(0) vFillColor: vec4<f32>,
  @location(1) vLineColor: vec4<f32>,
  @location(2) unitPosition: vec2<f32>,
  @location(3) innerUnitRadius: f32,
  @location(4) outerRadiusPixels: f32,
};

@vertex
fn vertexMain(attributes: Attributes) -> Varyings {
  var varyings: Varyings;

  // Draw an inline geometry constant array clip space triangle to verify that rendering works.
  // var positions = array<vec2<f32>, 3>(vec2(0.0, 0.5), vec2(-0.5, -0.5), vec2(0.5, -0.5));
  // if (attributes.instanceIndex == 0) {
  //   varyings.position = vec4<f32>(positions[attributes.vertexIndex], 0.0, 1.0);
  //   return varyings;
  // }

  // var geometry: Geometry;
  // geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  varyings.outerRadiusPixels = clamp(
    project_unit_size_to_pixel(scatterplot.radiusScale * attributes.instanceRadius, scatterplot.radiusUnits),
    scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
  );

  // Multiply out line width and clamp to limits
  let lineWidthPixels = clamp(
    project_unit_size_to_pixel(scatterplot.lineWidthScale * attributes.instanceLineWidths, scatterplot.lineWidthUnits),
    scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  varyings.outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
  // Expand geometry to accommodate edge smoothing
  let edgePadding = select(
    (varyings.outerRadiusPixels + SMOOTH_EDGE_RADIUS) / varyings.outerRadiusPixels,
    1.0,
    scatterplot.antialiasing != 0
  );

  // position on the containing square in [-1, 1] space
  varyings.unitPosition = edgePadding * attributes.positions.xy;
  geometry.uv = varyings.unitPosition;
  geometry.pickingColor = attributes.instancePickingColors;

  varyings.innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / varyings.outerRadiusPixels;

  if (scatterplot.billboard != 0) {
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
    let offset = attributes.positions; // * edgePadding * varyings.outerRadiusPixels;
    // DECKGL_FILTER_SIZE(offset, geometry);
    let clipPixels = project_pixel_size_to_clipspace(offset.xy);
    varyings.position.x = clipPixels.x;
    varyings.position.y = clipPixels.y;
  } else {
    let offset = edgePadding * attributes.positions * project_pixel_size_float(varyings.outerRadiusPixels);
    // DECKGL_FILTER_SIZE(offset, geometry);
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, offset); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
  }

  // Apply opacity to instance color, or return instance picking color
  varyings.vFillColor = vec4<f32>(attributes.instanceFillColors.rgb, attributes.instanceFillColors.a * layer.opacity);
  // DECKGL_FILTER_COLOR(varyings.vFillColor, geometry);
  varyings.vLineColor = vec4<f32>(attributes.instanceLineColors.rgb, attributes.instanceLineColors.a * layer.opacity);
  // DECKGL_FILTER_COLOR(varyings.vLineColor, geometry);

  return varyings;
}

@fragment
fn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {
  // var geometry: Geometry;
  // geometry.uv = unitPosition;

  let distToCenter = length(varyings.unitPosition) * varyings.outerRadiusPixels;
  let inCircle = select(
    smoothedge(distToCenter, varyings.outerRadiusPixels),
    step(distToCenter, varyings.outerRadiusPixels),
    scatterplot.antialiasing != 0
  );

  if (inCircle == 0.0) {
    // discard;
  }

  var fragColor: vec4<f32>;

  if (scatterplot.stroked != 0) {
    let isLine = select(
      smoothedge(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      step(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      scatterplot.antialiasing != 0
    );

    if (scatterplot.filled != 0) {
      fragColor = mix(varyings.vFillColor, varyings.vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        // discard;
      }
      fragColor = vec4<f32>(varyings.vLineColor.rgb, varyings.vLineColor.a * isLine);
    }
  } else if (scatterplot.filled == 0) {
    // discard;
  } else {
    fragColor = varyings.vFillColor;
  }

  fragColor.a *= inCircle;
  // DECKGL_FILTER_COLOR(fragColor, geometry);

  return fragColor;
  // return vec4<f32>(0, 0, 1, 1);
}
`,By=[0,0,0,255],W4={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:By},getLineColor:{type:"accessor",value:By},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Ug extends _r{getShaders(){return super.getShaders({vs:U4,fs:$4,source:z4,modules:[hu,mu,L4]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t),t.changeFlags.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:t}){const{radiusUnits:n,radiusScale:i,radiusMinPixels:s,radiusMaxPixels:r,stroked:a,filled:o,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:d,lineWidthMinPixels:f,lineWidthMaxPixels:h}=this.props,g={stroked:a,filled:o,billboard:l,antialiasing:u,radiusUnits:Zi[n],radiusScale:i,radiusMinPixels:s,radiusMaxPixels:r,lineWidthUnits:Zi[c],lineWidthScale:d,lineWidthMinPixels:f,lineWidthMaxPixels:h},v=this.state.model;v.shaderInputs.setProps({scatterplot:g}),v.draw(this.context.renderPass)}_getModel(){const t=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new Es(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new pu({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(t)}}}),isInstanced:!0})}}Ug.defaultProps=W4;Ug.layerName="ScatterplotLayer";function H4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const Fy=`uniform sdfUniforms {
  float gamma;
  bool enabled;
  float buffer;
  float outlineBuffer;
  vec4 outlineColor;
} sdf;
`,j4={name:"sdf",vs:Fy,fs:Fy,uniformTypes:{gamma:"f32",enabled:"f32",buffer:"f32",outlineBuffer:"f32",outlineColor:"vec4<f32>"}},X4=`#version 300 es
#define SHADER_NAME multi-icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
if (!bool(picking.isActive)) {
float alpha = texture(iconsTexture, vTextureCoords).a;
vec4 color = vColor;
if (sdf.enabled) {
float distance = alpha;
alpha = smoothstep(sdf.buffer - sdf.gamma, sdf.buffer + sdf.gamma, distance);
if (sdf.outlineBuffer > 0.0) {
float inFill = alpha;
float inBorder = smoothstep(sdf.outlineBuffer - sdf.gamma, sdf.outlineBuffer + sdf.gamma, distance);
color = mix(sdf.outlineColor, vColor, inFill);
alpha = inBorder;
}
}
float a = alpha * color.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color.rgb, a * layer.opacity);
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Vd=192/256,Vy=[],Y4={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class $g extends Lg{getShaders(){const t=super.getShaders();return{...t,modules:[...t.modules,j4],fs:X4}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(n,{index:i,target:s})=>this.encodePickingColor(i,s)}})}updateState(t){super.updateState(t);const{props:n,oldProps:i}=t;let{outlineColor:s}=n;s!==i.outlineColor&&(s=s.map(r=>r/255),s[3]=Number.isFinite(s[3])?s[3]:1,this.setState({outlineColor:s})),!n.sdf&&n.outlineWidth&&tt.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(t){const{sdf:n,smoothing:i,outlineWidth:s}=this.props,{outlineColor:r}=this.state,a=s?Math.max(i,Vd*(1-s)):-1,o=this.state.model,l={buffer:Vd,outlineBuffer:a,gamma:i,enabled:!!n,outlineColor:r};if(o.shaderInputs.setProps({sdf:l}),super.draw(t),n&&s){const{iconManager:u}=this.state;u.getTexture()&&(o.shaderInputs.setProps({sdf:{...l,outlineBuffer:Vd}}),o.draw(this.context.renderPass))}}getInstanceOffset(t){return t?Array.from(t).flatMap(n=>super.getInstanceOffset(n)):Vy}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(n=>super.getInstanceIconFrame(n)):Vy}}$g.defaultProps=Y4;$g.layerName="MultiIconLayer";const po=1e20;class K4{constructor({fontSize:t=24,buffer:n=3,radius:i=8,cutoff:s=.25,fontFamily:r="sans-serif",fontWeight:a="normal",fontStyle:o="normal",lang:l=null}={}){this.buffer=n,this.cutoff=s,this.radius=i,this.lang=l;const u=this.size=t+n*4,c=this._createCanvas(u),d=this.ctx=c.getContext("2d",{willReadFrequently:!0});d.font=`${o} ${a} ${t}px ${r}`,d.textBaseline="alphabetic",d.textAlign="left",d.fillStyle="black",this.gridOuter=new Float64Array(u*u),this.gridInner=new Float64Array(u*u),this.f=new Float64Array(u),this.z=new Float64Array(u+1),this.v=new Uint16Array(u)}_createCanvas(t){const n=document.createElement("canvas");return n.width=n.height=t,n}draw(t){const{width:n,actualBoundingBoxAscent:i,actualBoundingBoxDescent:s,actualBoundingBoxLeft:r,actualBoundingBoxRight:a}=this.ctx.measureText(t),o=Math.ceil(i),l=0,u=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(a-r))),c=Math.min(this.size-this.buffer,o+Math.ceil(s)),d=u+2*this.buffer,f=c+2*this.buffer,h=Math.max(d*f,0),g=new Uint8ClampedArray(h),v={data:g,width:d,height:f,glyphWidth:u,glyphHeight:c,glyphTop:o,glyphLeft:l,glyphAdvance:n};if(u===0||c===0)return v;const{ctx:m,buffer:p,gridInner:y,gridOuter:_}=this;this.lang&&(m.lang=this.lang),m.clearRect(p,p,u,c),m.fillText(t,p,p+o);const b=m.getImageData(p,p,u,c);_.fill(po,0,h),y.fill(0,0,h);for(let S=0;S<c;S++)for(let x=0;x<u;x++){const I=b.data[4*(S*u+x)+3]/255;if(I===0)continue;const T=(S+p)*d+x+p;if(I===1)_[T]=0,y[T]=po;else{const k=.5-I;_[T]=k>0?k*k:0,y[T]=k<0?k*k:0}}Ly(_,0,0,d,f,d,this.f,this.v,this.z),Ly(y,p,p,u,c,d,this.f,this.v,this.z);for(let S=0;S<h;S++){const x=Math.sqrt(_[S])-Math.sqrt(y[S]);g[S]=Math.round(255-255*(x/this.radius+this.cutoff))}return v}}function Ly(e,t,n,i,s,r,a,o,l){for(let u=t;u<t+i;u++)Uy(e,n*r+u,r,s,a,o,l);for(let u=n;u<n+s;u++)Uy(e,u*r+t,1,i,a,o,l)}function Uy(e,t,n,i,s,r,a){r[0]=0,a[0]=-po,a[1]=po,s[0]=e[t];for(let o=1,l=0,u=0;o<i;o++){s[o]=e[t+o*n];const c=o*o;do{const d=r[l];u=(s[o]-s[d]+c-d*d)/(o-d)/2}while(u<=a[l]&&--l>-1);l++,r[l]=o,a[l]=u,a[l+1]=po}for(let o=0,l=0;o<i;o++){for(;a[l+1]<o;)l++;const u=r[l],c=o-u;e[t+o*n]=s[u]+c*c}}const q4=32,Z4=[];function G4(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function Q4({characterSet:e,getFontWidth:t,fontHeight:n,buffer:i,maxCanvasWidth:s,mapping:r={},xOffset:a=0,yOffset:o=0}){let l=0,u=a;const c=n+i*2;for(const d of e)if(!r[d]){const f=t(d);u+f+i*2>s&&(u=0,l++),r[d]={x:u+i,y:o+l*c+i,width:f,height:c,layoutWidth:f,layoutHeight:n},u+=f+i*2}return{mapping:r,xOffset:u,yOffset:o+l*c,canvasHeight:G4(o+(l+1)*c)}}function Gx(e,t,n,i){let s=0;for(let r=t;r<n;r++){const a=e[r];s+=i[a]?.layoutWidth||0}return s}function Qx(e,t,n,i,s,r){let a=t,o=0;for(let l=t;l<n;l++){const u=Gx(e,l,l+1,s);o+u>i&&(a<l&&r.push(l),a=l,o=0),o+=u}return o}function J4(e,t,n,i,s,r){let a=t,o=t,l=t,u=0;for(let c=t;c<n;c++)if((e[c]===" "||e[c+1]===" "||c+1===n)&&(l=c+1),l>o){let d=Gx(e,o,l,s);u+d>i&&(a<o&&(r.push(o),a=o,u=0),d>i&&(d=Qx(e,o,l,i,s,r),a=r[r.length-1])),o=l,u+=d}return u}function eV(e,t,n,i,s=0,r){r===void 0&&(r=e.length);const a=[];return t==="break-all"?Qx(e,s,r,n,i,a):J4(e,s,r,n,i,a),a}function tV(e,t,n,i,s,r){let a=0,o=0;for(let l=t;l<n;l++){const u=e[l],c=i[u];c?(o||(o=c.layoutHeight),s[l]=a+c.layoutWidth/2,a+=c.layoutWidth):(tt.warn(`Missing character: ${u} (${u.codePointAt(0)})`)(),s[l]=a,a+=q4)}r[0]=a,r[1]=o}function nV(e,t,n,i,s){const r=Array.from(e),a=r.length,o=new Array(a),l=new Array(a),u=new Array(a),c=(n==="break-word"||n==="break-all")&&isFinite(i)&&i>0,d=[0,0],f=[0,0];let h=0,g=0,v=0;for(let m=0;m<=a;m++){const p=r[m];if((p===`
`||m===a)&&(v=m),v>g){const y=c?eV(r,n,i,s,g,v):Z4;for(let _=0;_<=y.length;_++){const b=_===0?g:y[_-1],S=_<y.length?y[_]:v;tV(r,b,S,s,o,f);for(let x=b;x<S;x++){o[x]-f[0]/2;const I=r[x],T=s[I]?.layoutOffsetY||0;l[x]=h+f[1]/2+T,u[x]=f[0]}h=h+f[1]*t,d[0]=Math.max(d[0],f[0])}g=v}p===`
`&&(o[g]=0,l[g]=0,u[g]=0,g++)}return d[1]=h,{x:o,y:l,rowWidth:u,size:d}}function iV({value:e,length:t,stride:n,offset:i,startIndices:s,characterSet:r}){const a=e.BYTES_PER_ELEMENT,o=n?n/a:1,l=i?i/a:0,u=s[t]||Math.ceil((e.length-l)/o),c=r&&new Set,d=new Array(t);let f=e;if(o>1||l>0){const h=e.constructor;f=new h(u);for(let g=0;g<u;g++)f[g]=e[g*o+l]}for(let h=0;h<t;h++){const g=s[h],v=s[h+1]||u,m=f.subarray(g,v);d[h]=String.fromCodePoint.apply(null,m),c&&m.forEach(c.add,c)}if(c)for(const h of c)r.add(String.fromCodePoint(h));return{texts:d,characterCount:u}}class Jx{constructor(t=5){this._cache={},this._order=[],this.limit=t}get(t){const n=this._cache[t];return n&&(this._deleteOrder(t),this._appendOrder(t)),n}set(t,n){this._cache[t]?(this.delete(t),this._cache[t]=n,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=n,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const n=this._order.indexOf(t);n>=0&&this._order.splice(n,1)}_appendOrder(t){this._order.push(t)}}function sV(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const aa={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:sV(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},$y=1024,zy=.9,Wy=1.2,eS=3;let Bc=new Jx(eS);function rV(e,t){let n;typeof t=="string"?n=new Set(Array.from(t)):n=new Set(t);const i=Bc.get(e);if(!i)return n;for(const s in i.mapping)n.has(s)&&n.delete(s);return n}function aV(e,t){for(let n=0;n<e.length;n++)t.data[4*n+3]=e[n]}function Hy(e,t,n,i){e.font=`${i} ${n}px ${t}`,e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function oV(e){tt.assert(Number.isFinite(e)&&e>=eS,"Invalid cache limit"),Bc=new Jx(e)}class lV{constructor(){this.props={...aa}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:t,buffer:n}=this.props;return(t*Wy+n*2)/t}setProps(t={}){Object.assign(this.props,t),this._key=this._getKey();const n=rV(this._key,this.props.characterSet),i=Bc.get(this._key);if(i&&n.size===0){this._atlas!==i&&(this._atlas=i);return}const s=this._generateFontAtlas(n,i);this._atlas=s,Bc.set(this._key,s)}_generateFontAtlas(t,n){const{fontFamily:i,fontWeight:s,fontSize:r,buffer:a,sdf:o,radius:l,cutoff:u}=this.props;let c=n&&n.data;c||(c=document.createElement("canvas"),c.width=$y);const d=c.getContext("2d",{willReadFrequently:!0});Hy(d,i,r,s);const{mapping:f,canvasHeight:h,xOffset:g,yOffset:v}=Q4({getFontWidth:m=>d.measureText(m).width,fontHeight:r*Wy,buffer:a,characterSet:t,maxCanvasWidth:$y,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(c.height!==h){const m=d.getImageData(0,0,c.width,c.height);c.height=h,d.putImageData(m,0,0)}if(Hy(d,i,r,s),o){const m=new K4({fontSize:r,buffer:a,radius:l,cutoff:u,fontFamily:i,fontWeight:`${s}`});for(const p of t){const{data:y,width:_,height:b,glyphTop:S}=m.draw(p);f[p].width=_,f[p].layoutOffsetY=r*zy-S;const x=d.createImageData(_,b);aV(y,x),d.putImageData(x,f[p].x,f[p].y)}}else for(const m of t)d.fillText(m,f[m].x,f[m].y+a+r*zy);return{xOffset:g,yOffset:v,mapping:f,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:t,fontWeight:n,fontSize:i,buffer:s,sdf:r,radius:a,cutoff:o}=this.props;return r?`${t} ${n} ${i} ${s} ${a} ${o}`:`${t} ${n} ${i} ${s}`}}const jy=`uniform textBackgroundUniforms {
  bool billboard;
  float sizeScale;
  float sizeMinPixels;
  float sizeMaxPixels;
  vec4 borderRadius;
  vec4 padding;
  highp int sizeUnits;
  bool stroked;
} textBackground;
`,cV={name:"textBackground",vs:jy,fs:jy,uniformTypes:{billboard:"f32",sizeScale:"f32",sizeMinPixels:"f32",sizeMaxPixels:"f32",borderRadius:"vec4<f32>",padding:"vec4<f32>",sizeUnits:"i32",stroked:"f32"}},uV=`#version 300 es
#define SHADER_NAME text-background-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceRects;
in float instanceSizes;
in float instanceAngles;
in vec2 instancePixelOffsets;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out float vLineWidth;
out vec2 uv;
out vec2 dimensions;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = radians(angle);
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vLineWidth = instanceLineWidths;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * textBackground.sizeScale, textBackground.sizeUnits),
textBackground.sizeMinPixels, textBackground.sizeMaxPixels
);
dimensions = instanceRects.zw * sizePixels + textBackground.padding.xy + textBackground.padding.zw;
vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-textBackground.padding.xy, textBackground.padding.zw, positions);
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
pixelOffset += instancePixelOffsets;
pixelOffset.y *= -1.0;
if (textBackground.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,dV=`#version 300 es
#define SHADER_NAME text-background-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in float vLineWidth;
in vec2 uv;
in vec2 dimensions;
out vec4 fragColor;
float round_rect(vec2 p, vec2 size, vec4 radii) {
vec2 pixelPositionCB = (p - 0.5) * size;
vec2 sizeCB = size * 0.5;
float maxBorderRadius = min(size.x, size.y) * 0.5;
vec4 borderRadius = vec4(min(radii, maxBorderRadius));
borderRadius.xy =
(pixelPositionCB.x > 0.0) ? borderRadius.xy : borderRadius.zw;
borderRadius.x = (pixelPositionCB.y > 0.0) ? borderRadius.x : borderRadius.y;
vec2 q = abs(pixelPositionCB) - sizeCB + borderRadius.x;
return -(min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - borderRadius.x);
}
float rect(vec2 p, vec2 size) {
vec2 pixelPosition = p * size;
return min(min(pixelPosition.x, size.x - pixelPosition.x),
min(pixelPosition.y, size.y - pixelPosition.y));
}
vec4 get_stroked_fragColor(float dist) {
float isBorder = smoothedge(dist, vLineWidth);
return mix(vFillColor, vLineColor, isBorder);
}
void main(void) {
geometry.uv = uv;
if (textBackground.borderRadius != vec4(0.0)) {
float distToEdge = round_rect(uv, dimensions, textBackground.borderRadius);
if (textBackground.stroked) {
fragColor = get_stroked_fragColor(distToEdge);
} else {
fragColor = vFillColor;
}
float shapeAlpha = smoothedge(-distToEdge, 0.0);
fragColor.a *= shapeAlpha;
} else {
if (textBackground.stroked) {
float distToEdge = rect(uv, dimensions);
fragColor = get_stroked_fragColor(distToEdge);
} else {
fragColor = vFillColor;
}
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,fV={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,borderRadius:{type:"object",value:0},padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class zg extends _r{getShaders(){return super.getShaders({vs:uV,fs:dV,modules:[hu,mu,cV]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:n}=t;n.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:t}){const{billboard:n,sizeScale:i,sizeUnits:s,sizeMinPixels:r,sizeMaxPixels:a,getLineWidth:o}=this.props;let{padding:l,borderRadius:u}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),Array.isArray(u)||(u=[u,u,u,u]);const c=this.state.model,d={billboard:n,stroked:!!o,borderRadius:u,padding:l,sizeUnits:Zi[s],sizeScale:i,sizeMinPixels:r,sizeMaxPixels:a};c.shaderInputs.setProps({textBackground:d}),c.draw(this.context.renderPass)}_getModel(){const t=[0,0,1,0,0,1,1,1];return new Es(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new pu({topology:"triangle-strip",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(t)}}}),isInstanced:!0})}}zg.defaultProps=fV;zg.layerName="TextBackgroundLayer";const Xy={start:1,middle:0,end:-1},Yy={top:1,center:0,bottom:-1},Ld=[0,0,0,255],hV=1,gV={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Ld},getBorderWidth:{type:"accessor",value:0},backgroundBorderRadius:{type:"object",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:aa.characterSet},fontFamily:aa.fontFamily,fontWeight:aa.fontWeight,lineHeight:hV,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Ld},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:Ld},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Fc extends Kx{constructor(){super(...arguments),this.getBoundingRect=(t,n)=>{let{size:[i,s]}=this.transformParagraph(t,n);const{fontSize:r}=this.state.fontAtlasManager.props;i/=r,s/=r;const{getTextAnchor:a,getAlignmentBaseline:o}=this.props,l=Xy[typeof a=="function"?a(t,n):a],u=Yy[typeof o=="function"?o(t,n):o];return[(l-1)*i/2,(u-1)*s/2,i,s]},this.getIconOffsets=(t,n)=>{const{getTextAnchor:i,getAlignmentBaseline:s}=this.props,{x:r,y:a,rowWidth:o,size:[l,u]}=this.transformParagraph(t,n),c=Xy[typeof i=="function"?i(t,n):i],d=Yy[typeof s=="function"?s(t,n):s],f=r.length,h=new Array(f*2);let g=0;for(let v=0;v<f;v++){const m=(1-c)*(l-o[v])/2;h[g++]=(c-1)*l/2+m+r[v],h[g++]=(d-1)*u/2+a[v]}return h}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new lV},this.props.maxWidth>0&&tt.once(1,"v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(t){const{props:n,oldProps:i,changeFlags:s}=t;(s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:s,characterSet:r}=this.state,a={...t,characterSet:r,fontFamily:n,fontWeight:i};if(!s.mapping)return s.setProps(a),!0;for(const o in a)if(a[o]!==s.props[o])return s.setProps(a),!0;return!1}_updateText(){const{data:t,characterSet:n}=this.props,i=t.attributes?.getText;let{getText:s}=this.props,r=t.startIndices,a;const o=n==="auto"&&new Set;if(i&&r){const{texts:l,characterCount:u}=iV({...ArrayBuffer.isView(i)?{value:i}:i,length:t.length,startIndices:r,characterSet:o});a=u,s=(c,{index:d})=>l[d]}else{const{iterable:l,objectInfo:u}=Fg(t);r=[0],a=0;for(const c of l){u.index++;const d=Array.from(s(c,u)||"");o&&d.forEach(o.add,o),a+=d.length,r.push(a)}}this.setState({getText:s,startIndices:r,numInstances:a,characterSet:o||n})}transformParagraph(t,n){const{fontAtlasManager:i}=this.state,s=i.mapping,r=this.state.getText,{wordBreak:a,lineHeight:o,maxWidth:l}=this.props,u=r(t,n)||"";return nV(u,o,a,l*i.props.fontSize,s)}renderLayers(){const{startIndices:t,numInstances:n,getText:i,fontAtlasManager:{scale:s,atlas:r,mapping:a},styleVersion:o}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:d,getSize:f,getAngle:h,getPixelOffset:g,getBackgroundColor:v,getBorderColor:m,getBorderWidth:p,backgroundBorderRadius:y,backgroundPadding:_,background:b,billboard:S,fontSettings:x,outlineWidth:I,outlineColor:T,sizeScale:k,sizeUnits:P,sizeMinPixels:D,sizeMaxPixels:E,transitions:O,updateTriggers:N}=this.props,L=this.getSubLayerClass("characters",$g),H=this.getSubLayerClass("background",zg);return[b&&new H({getFillColor:v,getLineColor:m,getLineWidth:p,borderRadius:y,padding:_,getPosition:c,getSize:f,getAngle:h,getPixelOffset:g,billboard:S,sizeScale:k,sizeUnits:P,sizeMinPixels:D,sizeMaxPixels:E,transitions:O&&{getPosition:O.getPosition,getAngle:O.getAngle,getSize:O.getSize,getFillColor:O.getBackgroundColor,getLineColor:O.getBorderColor,getLineWidth:O.getBorderWidth,getPixelOffset:O.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:N.getPosition,getAngle:N.getAngle,getSize:N.getSize,getFillColor:N.getBackgroundColor,getLineColor:N.getBorderColor,getLineWidth:N.getBorderWidth,getPixelOffset:N.getPixelOffset,getBoundingRect:{getText:N.getText,getTextAnchor:N.getTextAnchor,getAlignmentBaseline:N.getAlignmentBaseline,styleVersion:o}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new L({sdf:x.sdf,smoothing:Number.isFinite(x.smoothing)?x.smoothing:aa.smoothing,outlineWidth:I/(x.radius||aa.radius),outlineColor:T,iconAtlas:r,iconMapping:a,getPosition:c,getColor:d,getSize:f,getAngle:h,getPixelOffset:g,billboard:S,sizeScale:k*s,sizeUnits:P,sizeMinPixels:D*s,sizeMaxPixels:E*s,transitions:O&&{getPosition:O.getPosition,getAngle:O.getAngle,getColor:O.getColor,getSize:O.getSize,getPixelOffset:O.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:N.getText,getPosition:N.getPosition,getAngle:N.getAngle,getColor:N.getColor,getSize:N.getSize,getPixelOffset:N.getPixelOffset,getIconOffsets:{getTextAnchor:N.getTextAnchor,getAlignmentBaseline:N.getAlignmentBaseline,styleVersion:o}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(t){oV(t)}}Fc.defaultProps=gV;Fc.layerName="TextLayer";const Xa=864e5,mV={__name:"ListeningCloud",props:{points:{type:Array,default:()=>[]},domain:{type:Object,required:!0},selectedArtist:{type:String,default:null},selectedTrack:{type:String,default:null},xScale:{type:Number,default:1},yScale:{type:Number,default:1}},setup(e){const t=e,n=le(null);let i=null,s={target:[0,0,0],zoom:0},r=1,a=1,o=!1;const l=[0,187,255,179],u=[100,100,100,90];function c(S){return Math.max(2,Math.min(24,2+Math.max(0,S-6)*3))}function d(S){const x=c(s.zoom);return t.selectedTrack?S.track===t.selectedTrack?x*2:x:t.selectedArtist&&S.artist===t.selectedArtist?x*1.5:x}function f(S){return t.selectedTrack?S.track===t.selectedTrack?l:u:t.selectedArtist?S.artist===t.selectedArtist?l:u:l}function h(){const S=t.domain.t0,x=S+t.domain.x1*Xa,I=Math.max(1,Math.round((x-S)/Xa)),T=I/365;let k="year";T<1.5&&I>120&&(k="month"),I<=120&&I>14&&(k="week"),I<=14&&(k="day");const P=[],D=new Date(S);function E(N){const H=Math.floor((N-S)/Xa)*t.xScale;let G;k==="year"&&(G=new Intl.DateTimeFormat(void 0,{year:"numeric"}).format(N)),k==="month"&&(G=new Intl.DateTimeFormat(void 0,{year:"2-digit",month:"short"}).format(N)),k==="week"&&(G=new Intl.DateTimeFormat(void 0,{month:"short",day:"2-digit"}).format(N)),k==="day"&&(G=new Intl.DateTimeFormat(void 0,{month:"short",day:"2-digit"}).format(N)),P.push({x:H,label:G})}let O;if(k==="year")for(O=new Date(D.getFullYear(),0,1).getTime();O<=x;)E(O),O=new Date(new Date(O).getFullYear()+1,0,1).getTime();else if(k==="month")for(O=new Date(D.getFullYear(),D.getMonth(),1).getTime();O<=x;){E(O);const N=new Date(O);O=new Date(N.getFullYear(),N.getMonth()+1,1).getTime()}else if(k==="week"){const N=new Date(S),L=(N.getDay()+6)%7;for(O=new Date(N.getFullYear(),N.getMonth(),N.getDate()-L+7).getTime();O<=x;)E(O),O+=7*Xa}else for(O=new Date(D.getFullYear(),D.getMonth(),D.getDate()).getTime();O<=x;)E(O),O+=Xa;return P}function g(){const S=[],x=[0,6,12,18,24];for(const I of x){const T=I*t.yScale,k=`${I}`;S.push({y:T,label:k})}return S}function v(){return new Ug({id:"plays",data:t.points,pickable:!0,getPosition:S=>[S.x*t.xScale,S.y*t.yScale],radiusUnits:"pixels",getRadius:d,getFillColor:f,updateTriggers:{getPosition:[t.xScale,t.yScale],getFillColor:[t.selectedArtist,t.selectedTrack],getRadius:[s.zoom,t.selectedArtist,t.selectedTrack]},transitions:{getFillColor:120,getRadius:120}})}function m(){const S=h(),x=(t.domain.y0-.8)*t.yScale,I=new Nc({id:"x-ticks",data:S.map(k=>({sourcePosition:[k.x,x],targetPosition:[k.x,x+.5*t.yScale]})),getSourcePosition:k=>k.sourcePosition,getTargetPosition:k=>k.targetPosition,getWidth:1,widthUnits:"pixels",getColor:[200,220,235,40]}),T=new Fc({id:"x-labels",data:S.map(k=>({position:[k.x,x-.3*t.yScale],label:k.label})),getPosition:k=>k.position,getText:k=>k.label,getSize:12,sizeUnits:"pixels",getColor:[190,205,215,230],fontFamily:"Inter, system-ui, sans-serif",getTextAnchor:()=>"middle",getAlignmentBaseline:()=>"bottom"});return[I,T]}function p(){const S=g(),x=(t.domain.x0-1)*t.xScale,I=new Nc({id:"y-ticks",data:S.map(k=>({sourcePosition:[x,k.y],targetPosition:[x+.6*t.xScale,k.y]})),getSourcePosition:k=>k.sourcePosition,getTargetPosition:k=>k.targetPosition,getWidth:1,widthUnits:"pixels",getColor:[200,220,235,40]}),T=new Fc({id:"y-labels",data:S.map(k=>({position:[x-.4*t.xScale,k.y],label:k.label})),getPosition:k=>k.position,getText:k=>k.label,getSize:12,sizeUnits:"pixels",getColor:[190,205,215,230],fontFamily:"Inter, system-ui, sans-serif",getTextAnchor:()=>"end",getAlignmentBaseline:()=>"middle"});return[I,T]}function y(){return[...m(),...p(),v()]}function _(){i&&i.setProps({layers:y()})}function b(S=.06){const x=(t.domain.x1-t.domain.x0)*t.xScale,I=(t.domain.y1-t.domain.y0)*t.yScale,T=r*(1-S*2),k=a*(1-S*2),P=T/x,D=k/I,E=Math.max(1e-6,Math.min(P,D)),O=Math.log2(E),N=(t.domain.x0+t.domain.x1)/2*t.xScale,L=(t.domain.y0+t.domain.y1)/2*t.yScale;s={target:[N,L,0],zoom:O},i.setProps({viewState:s}),o=!0}return Wt(()=>{s={target:[(t.domain.x0+t.domain.x1)/2*t.xScale,(t.domain.y0+t.domain.y1)/2*t.yScale,0],zoom:0},i=new Bg({parent:n.value,views:[new qx],controller:{doubleClickZoom:!1,minZoom:-3,maxZoom:15},width:"100%",height:"100%",onResize:()=>(r=n.value.clientWidth,a=n.value.clientHeight,!o&&r&&a&&b(),{width:r,height:a}),onViewStateChange:({viewState:S})=>{s=S,i.setProps({viewState:S}),_()},initialViewState:s,layers:y(),getTooltip:({object:S})=>S&&{text:new Date(S.ts).toLocaleString()+`
${S.artist}  ${S.track}`}})}),me(()=>t.points,()=>{o=!1,_(),r&&a&&b()}),me(()=>[t.xScale,t.yScale],()=>{o=!1,_(),r&&a&&b()}),me(()=>t.selectedArtist,_),me(()=>t.selectedTrack,_),Ht(()=>{i?.finalize(),i=null}),(S,x)=>(an(),fs("div",{class:"canva-container",ref_key:"container",ref:n},null,512))}};var Jl={exports:{}},vV=Jl.exports,Ky;function pV(){return Ky||(Ky=1,(function(e,t){(function(n,i){e.exports=i()})(vV,(function(){var n=1e3,i=6e4,s=36e5,r="millisecond",a="second",o="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",g="date",v="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var L=["th","st","nd","rd"],H=N%100;return"["+N+(L[(H-20)%10]||L[H]||L[0])+"]"}},_=function(N,L,H){var G=String(N);return!G||G.length>=L?N:""+Array(L+1-G.length).join(H)+N},b={s:_,z:function(N){var L=-N.utcOffset(),H=Math.abs(L),G=Math.floor(H/60),z=H%60;return(L<=0?"+":"-")+_(G,2,"0")+":"+_(z,2,"0")},m:function N(L,H){if(L.date()<H.date())return-N(H,L);var G=12*(H.year()-L.year())+(H.month()-L.month()),z=L.clone().add(G,d),$=H-z<0,B=L.clone().add(G+($?-1:1),d);return+(-(G+(H-z)/($?z-B:B-z))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:d,y:h,w:c,d:u,D:g,h:l,m:o,s:a,ms:r,Q:f}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},S="en",x={};x[S]=y;var I="$isDayjsObject",T=function(N){return N instanceof E||!(!N||!N[I])},k=function N(L,H,G){var z;if(!L)return S;if(typeof L=="string"){var $=L.toLowerCase();x[$]&&(z=$),H&&(x[$]=H,z=$);var B=L.split("-");if(!z&&B.length>1)return N(B[0])}else{var W=L.name;x[W]=L,z=W}return!G&&z&&(S=z),z||!G&&S},P=function(N,L){if(T(N))return N.clone();var H=typeof L=="object"?L:{};return H.date=N,H.args=arguments,new E(H)},D=b;D.l=k,D.i=T,D.w=function(N,L){return P(N,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var E=(function(){function N(H){this.$L=k(H.locale,null,!0),this.parse(H),this.$x=this.$x||H.x||{},this[I]=!0}var L=N.prototype;return L.parse=function(H){this.$d=(function(G){var z=G.date,$=G.utc;if(z===null)return new Date(NaN);if(D.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var B=z.match(m);if(B){var W=B[2]-1||0,X=(B[7]||"0").substring(0,3);return $?new Date(Date.UTC(B[1],W,B[3]||1,B[4]||0,B[5]||0,B[6]||0,X)):new Date(B[1],W,B[3]||1,B[4]||0,B[5]||0,B[6]||0,X)}}return new Date(z)})(H),this.init()},L.init=function(){var H=this.$d;this.$y=H.getFullYear(),this.$M=H.getMonth(),this.$D=H.getDate(),this.$W=H.getDay(),this.$H=H.getHours(),this.$m=H.getMinutes(),this.$s=H.getSeconds(),this.$ms=H.getMilliseconds()},L.$utils=function(){return D},L.isValid=function(){return this.$d.toString()!==v},L.isSame=function(H,G){var z=P(H);return this.startOf(G)<=z&&z<=this.endOf(G)},L.isAfter=function(H,G){return P(H)<this.startOf(G)},L.isBefore=function(H,G){return this.endOf(G)<P(H)},L.$g=function(H,G,z){return D.u(H)?this[G]:this.set(z,H)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(H,G){var z=this,$=!!D.u(G)||G,B=D.p(H),W=function(ke,ce){var Ee=D.w(z.$u?Date.UTC(z.$y,ce,ke):new Date(z.$y,ce,ke),z);return $?Ee:Ee.endOf(u)},X=function(ke,ce){return D.w(z.toDate()[ke].apply(z.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(ce)),z)},re=this.$W,ge=this.$M,de=this.$D,ye="set"+(this.$u?"UTC":"");switch(B){case h:return $?W(1,0):W(31,11);case d:return $?W(1,ge):W(0,ge+1);case c:var ee=this.$locale().weekStart||0,_e=(re<ee?re+7:re)-ee;return W($?de-_e:de+(6-_e),ge);case u:case g:return X(ye+"Hours",0);case l:return X(ye+"Minutes",1);case o:return X(ye+"Seconds",2);case a:return X(ye+"Milliseconds",3);default:return this.clone()}},L.endOf=function(H){return this.startOf(H,!1)},L.$set=function(H,G){var z,$=D.p(H),B="set"+(this.$u?"UTC":""),W=(z={},z[u]=B+"Date",z[g]=B+"Date",z[d]=B+"Month",z[h]=B+"FullYear",z[l]=B+"Hours",z[o]=B+"Minutes",z[a]=B+"Seconds",z[r]=B+"Milliseconds",z)[$],X=$===u?this.$D+(G-this.$W):G;if($===d||$===h){var re=this.clone().set(g,1);re.$d[W](X),re.init(),this.$d=re.set(g,Math.min(this.$D,re.daysInMonth())).$d}else W&&this.$d[W](X);return this.init(),this},L.set=function(H,G){return this.clone().$set(H,G)},L.get=function(H){return this[D.p(H)]()},L.add=function(H,G){var z,$=this;H=Number(H);var B=D.p(G),W=function(ge){var de=P($);return D.w(de.date(de.date()+Math.round(ge*H)),$)};if(B===d)return this.set(d,this.$M+H);if(B===h)return this.set(h,this.$y+H);if(B===u)return W(1);if(B===c)return W(7);var X=(z={},z[o]=i,z[l]=s,z[a]=n,z)[B]||1,re=this.$d.getTime()+H*X;return D.w(re,this)},L.subtract=function(H,G){return this.add(-1*H,G)},L.format=function(H){var G=this,z=this.$locale();if(!this.isValid())return z.invalidDate||v;var $=H||"YYYY-MM-DDTHH:mm:ssZ",B=D.z(this),W=this.$H,X=this.$m,re=this.$M,ge=z.weekdays,de=z.months,ye=z.meridiem,ee=function(ce,Ee,R,F){return ce&&(ce[Ee]||ce(G,$))||R[Ee].slice(0,F)},_e=function(ce){return D.s(W%12||12,ce,"0")},ke=ye||function(ce,Ee,R){var F=ce<12?"AM":"PM";return R?F.toLowerCase():F};return $.replace(p,(function(ce,Ee){return Ee||(function(R){switch(R){case"YY":return String(G.$y).slice(-2);case"YYYY":return D.s(G.$y,4,"0");case"M":return re+1;case"MM":return D.s(re+1,2,"0");case"MMM":return ee(z.monthsShort,re,de,3);case"MMMM":return ee(de,re);case"D":return G.$D;case"DD":return D.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return ee(z.weekdaysMin,G.$W,ge,2);case"ddd":return ee(z.weekdaysShort,G.$W,ge,3);case"dddd":return ge[G.$W];case"H":return String(W);case"HH":return D.s(W,2,"0");case"h":return _e(1);case"hh":return _e(2);case"a":return ke(W,X,!0);case"A":return ke(W,X,!1);case"m":return String(X);case"mm":return D.s(X,2,"0");case"s":return String(G.$s);case"ss":return D.s(G.$s,2,"0");case"SSS":return D.s(G.$ms,3,"0");case"Z":return B}return null})(ce)||B.replace(":","")}))},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(H,G,z){var $,B=this,W=D.p(G),X=P(H),re=(X.utcOffset()-this.utcOffset())*i,ge=this-X,de=function(){return D.m(B,X)};switch(W){case h:$=de()/12;break;case d:$=de();break;case f:$=de()/3;break;case c:$=(ge-re)/6048e5;break;case u:$=(ge-re)/864e5;break;case l:$=ge/s;break;case o:$=ge/i;break;case a:$=ge/n;break;default:$=ge}return z?$:D.a($)},L.daysInMonth=function(){return this.endOf(d).$D},L.$locale=function(){return x[this.$L]},L.locale=function(H,G){if(!H)return this.$L;var z=this.clone(),$=k(H,G,!0);return $&&(z.$L=$),z},L.clone=function(){return D.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},N})(),O=E.prototype;return P.prototype=O,[["$ms",r],["$s",a],["$m",o],["$H",l],["$W",u],["$M",d],["$y",h],["$D",g]].forEach((function(N){O[N[1]]=function(L){return this.$g(L,N[0],N[1])}})),P.extend=function(N,L){return N.$i||(N(L,E,P),N.$i=!0),P},P.locale=k,P.isDayjs=T,P.unix=function(N){return P(1e3*N)},P.en=x[S],P.Ls=x,P.p={},P}))})(Jl)),Jl.exports}var yV=pV();const qy=H4(yV);async function _V(e){const t=Array.from(e),n=[];for(const s of t){const r=await s.text(),a=JSON.parse(r);for(const o of a)"ts"in o?n.push({ts:o.ts?qy(o.ts).valueOf():0,ms:o.ms_played??0,track:o.master_metadata_track_name??"Unknown",artist:o.master_metadata_album_artist_name??"Unknown"}):n.push({ts:o.endTime?qy(o.endTime).valueOf():0,ms:o.msPlayed??0,track:o.trackName??"Unknown",artist:o.artistName??"Unknown"})}const i=n.filter(s=>Number.isFinite(s.ts));return i.sort((s,r)=>s.ts-r.ts),i}function bV(e){if(!e.length)return{points:[],x0:0,x1:1,y0:0,y1:24,t0:0};const t=1440*60*1e3,n=Math.floor(e[0].ts/t)*t,i=e.map(r=>{const a=Math.floor((r.ts-n)/t),o=new Date(r.ts),l=o.getHours()+o.getMinutes()/60+o.getSeconds()/3600;return{x:a,y:l,ts:r.ts,ms:r.ms,artist:r.artist,track:r.track}}),s=Math.max(...i.map(r=>r.x));return{points:i,x0:0,x1:s,y0:0,y1:24,t0:n}}const wV={key:1,class:"pa-4 text-medium-emphasis"},xV={key:2,class:"text-caption text-medium-emphasis",style:{position:"absolute",left:"8px",bottom:"8px"}},SV={key:1,class:"pa-4 text-medium-emphasis text-caption"},TV={key:0},AV={key:1,class:"pa-4 text-medium-emphasis text-caption"},CV={__name:"App",setup(e){const t=le([]),n=le([]),i=le({x0:0,x1:1,y0:0,y1:24,t0:0}),s=le(null),r=le(null),a=le(1),o=le(1);async function l(g){if(!g||!g.length)return;t.value=await _V(g);const v=bV(t.value);n.value=v.points,i.value=v,d()}function u(g){s.value=g,r.value=null}function c(g){r.value=g}function d(){s.value=null,r.value=null}const f=C(()=>{if(!t.value.length)return[];const g=new Map;for(const v of t.value)g.set(v.artist,(g.get(v.artist)||0)+1);return Array.from(g,([v,m])=>({name:v,count:m})).sort((v,m)=>m.count-v.count).slice(0,20).map((v,m)=>({...v,rank:m+1}))}),h=C(()=>{const g=s.value;if(!g)return[];const v=new Map;for(const m of t.value)m.artist===g&&v.set(m.track,(v.get(m.track)||0)+1);return Array.from(v,([m,p])=>({track:m,count:p})).sort((m,p)=>p.count-m.count).slice(0,20).map((m,p)=>({...m,rank:p+1}))});return(g,v)=>{const m=rn("v-file-input"),p=rn("v-card-title"),y=rn("v-card"),_=rn("v-card-text"),b=rn("v-slider"),S=rn("v-col"),x=rn("v-row"),I=rn("v-spacer"),T=rn("v-chip"),k=rn("v-divider"),P=rn("v-list-item-title"),D=rn("v-list-item"),E=rn("v-list"),O=rn("v-container"),N=rn("v-app");return an(),hs(N,null,{default:st(()=>[w(O,{class:"py-4"},{default:st(()=>[w(y,{class:"mb-4",variant:"tonal"},{default:st(()=>[w(p,{class:"d-flex align-center"},{default:st(()=>[v[2]||(v[2]=A("span",{class:"text-h6 me-auto"},"Spotify History",-1)),w(m,{label:"Load your Spotify JSON files",accept:".json",multiple:"","prepend-icon":"mdi-file-upload",density:"comfortable",variant:"outlined","hide-details":"","onUpdate:modelValue":l,style:{"min-width":"320px"}})]),_:1})]),_:1}),w(y,{class:"mb-4",elevation:"8"},{default:st(()=>[w(_,{class:"pa-0 position-relative",style:{overflow:"hidden"}},{default:st(()=>[n.value.length?(an(),hs(mV,{key:0,points:n.value,domain:i.value,"selected-artist":s.value,"selected-track":r.value,"x-scale":a.value,"y-scale":o.value},null,8,["points","domain","selected-artist","selected-track","x-scale","y-scale"])):(an(),fs("div",wV,"No data loaded yet.")),n.value.length?(an(),fs("div",xV," Displaying "+cn(n.value.length.toLocaleString())+" data points ",1)):ed("",!0)]),_:1})]),_:1}),w(x,{dense:"",class:"mb-2"},{default:st(()=>[w(S,{cols:"12",md:"6"},{default:st(()=>[w(b,{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=L=>a.value=L),min:"0.2",max:"3",step:"0.05",label:"Day spacing (X scale)","thumb-label":""},null,8,["modelValue"])]),_:1}),w(S,{cols:"12",md:"6"},{default:st(()=>[w(b,{modelValue:o.value,"onUpdate:modelValue":v[1]||(v[1]=L=>o.value=L),min:"0.2",max:"3",step:"0.05",label:"Horizontal spacing (Y scale)","thumb-label":""},null,8,["modelValue"])]),_:1})]),_:1}),w(x,{dense:""},{default:st(()=>[w(S,{cols:"12",lg:"6"},{default:st(()=>[w(y,{class:"h-100",variant:"tonal"},{default:st(()=>[w(p,{class:"text-subtitle-1 d-flex align-center"},{default:st(()=>[v[4]||(v[4]=Kt(" Top Artists ",-1)),w(I),s.value||r.value?(an(),hs(T,{key:0,size:"small",variant:"elevated",color:"primary",class:"ms-2",onClick:d},{default:st(()=>[...v[3]||(v[3]=[Kt("Clear filter",-1)])]),_:1})):ed("",!0)]),_:1}),w(k),w(_,{class:"pa-0"},{default:st(()=>[f.value.length?(an(),hs(E,{key:0,lines:"one",density:"comfortable"},{default:st(()=>[(an(!0),fs(Ae,null,nv(f.value,L=>(an(),hs(D,{key:L.name,ripple:!1,active:L.name===s.value&&!r.value,color:"primary",rounded:"lg",onClick:H=>u(L.name)},{append:st(()=>[w(T,{size:"small",color:"primary",variant:"flat",class:"pointer-events-none"},{default:st(()=>[Kt(cn(L.count.toLocaleString()),1)]),_:2},1024)]),default:st(()=>[w(P,{class:"text-truncate"},{default:st(()=>[Kt(cn(L.rank)+". "+cn(L.name),1)]),_:2},1024)]),_:2},1032,["active","onClick"]))),128))]),_:1})):(an(),fs("div",SV,"Load files to see your top artists."))]),_:1})]),_:1})]),_:1}),w(S,{cols:"12",lg:"6"},{default:st(()=>[w(y,{class:"h-100",variant:"tonal"},{default:st(()=>[w(p,{class:"text-subtitle-1"},{default:st(()=>[v[5]||(v[5]=Kt(" Top Tracks",-1)),s.value?(an(),fs("span",TV," by "+cn(s.value),1)):ed("",!0)]),_:1}),w(k),w(_,{class:"pa-0"},{default:st(()=>[s.value&&h.value.length?(an(),hs(E,{key:0,lines:"one",density:"comfortable"},{default:st(()=>[(an(!0),fs(Ae,null,nv(h.value,L=>(an(),hs(D,{key:L.track,ripple:!1,active:L.track===r.value,color:"primary",rounded:"lg",onClick:H=>c(L.track)},{append:st(()=>[w(T,{size:"small",color:"primary",variant:"flat",class:"pointer-events-none"},{default:st(()=>[Kt(cn(L.count.toLocaleString()),1)]),_:2},1024)]),default:st(()=>[w(P,{class:"text-truncate"},{default:st(()=>[Kt(cn(L.rank)+". "+cn(L.track),1)]),_:2},1024)]),_:2},1032,["active","onClick"]))),128))]),_:1})):(an(),fs("div",AV," Click an artist on the left to see their most-played tracks. "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};function en(e,t){let n;function i(){n=oa(),n.run(()=>t.length?t(()=>{n?.stop(),i()}):t())}me(e,s=>{s&&!n?i():s||(n?.stop(),n=void 0)},{immediate:!0}),Ft(()=>{n?.stop()})}const qe=typeof window<"u",Wg=qe&&"IntersectionObserver"in window,kV=qe&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),Zy=qe&&"EyeDropper"in window,tS=qe&&"matchMedia"in window&&typeof window.matchMedia=="function",Qi=()=>tS&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;function Gy(e,t,n){EV(e,t),t.set(e,n)}function EV(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qy(e,t,n){return e.set(nS(e,t),n),n}function Vi(e,t){return e.get(nS(e,t))}function nS(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function iS(e,t,n){const i=t.length-1;if(i<0)return e===void 0?n:e;for(let s=0;s<i;s++){if(e==null)return n;e=e[t[s]]}return e==null||e[t[i]]===void 0?n:e[t[i]]}function $t(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const n=Object.keys(e);return n.length!==Object.keys(t).length?!1:n.every(i=>$t(e[i],t[i]))}function lr(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),iS(e,t.split("."),n))}function Et(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const s=t(e,n);return typeof s>"u"?n:s}if(typeof t=="string")return lr(e,t,n);if(Array.isArray(t))return iS(e,t,n);if(typeof t!="function")return n;const i=t(e,n);return typeof i>"u"?n:i}function Ln(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,i)=>t+i)}function we(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const n=Number(e);return isNaN(n)?String(e):isFinite(n)?`${n}${t}`:void 0}function Po(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Jy(e){let t;return e!==null&&typeof e=="object"&&((t=Object.getPrototypeOf(e))===Object.prototype||t===null)}function Hg(e){if(e&&"$el"in e){const t=e.$el;return t?.nodeType===Node.TEXT_NODE?t.nextElementSibling:t}return e}const Wf=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function sS(e){return Object.keys(e)}function Ys(e,t){return t.every(n=>e.hasOwnProperty(n))}function In(e,t){const n={};for(const i of t)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function Hf(e,t,n){const i=Object.create(null),s=Object.create(null);for(const r in e)t.some(a=>a instanceof RegExp?a.test(r):a===r)?i[r]=e[r]:s[r]=e[r];return[i,s]}function Qe(e,t){const n={...e};return t.forEach(i=>delete n[i]),n}const rS=/^on[^a-z]/,jg=e=>rS.test(e),IV=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],PV=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function RV(e){return e.isComposing&&PV.includes(e.key)}function Ms(e){const[t,n]=Hf(e,[rS]),i=Qe(t,IV),[s,r]=Hf(n,["class","style","id",/^data-/]);return Object.assign(s,t),Object.assign(r,i),[s,r]}function bt(e){return e==null?[]:Array.isArray(e)?e:[e]}function aS(e,t){let n=0;const i=function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];clearTimeout(n),n=setTimeout(()=>e(...r),En(t))};return i.clear=()=>{clearTimeout(n)},i.immediate=e,i}function at(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function e_(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function t_(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function n_(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function MV(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let i=0;for(;i<e.length;)n.push(e.substr(i,t)),i+=t;return n}function i_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let i=-1;for(;Math.abs(e)>=t&&i<n.length-1;)e/=t,++i;return`${e.toFixed(1)} ${n[i]}B`}function mn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i={};for(const s in e)i[s]=e[s];for(const s in t){const r=e[s],a=t[s];if(Jy(r)&&Jy(a)){i[s]=mn(r,a,n);continue}if(n&&Array.isArray(r)&&Array.isArray(a)){i[s]=n(r,a);continue}i[s]=a}return i}function oS(e){return e.map(t=>t.type===Ae?oS(t.children):t).flat()}function er(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(er.cache.has(e))return er.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return er.cache.set(e,t),t}er.cache=new Map;function Gr(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>Gr(e,n)).flat(1);if(t.suspense)return Gr(e,t.ssContent);if(Array.isArray(t.children))return t.children.map(n=>Gr(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return Gr(e,t.component.subTree).flat(1)}return[]}var Fr=new WeakMap,Us=new WeakMap;class lS{constructor(t){Gy(this,Fr,[]),Gy(this,Us,0),this.size=t}get isFull(){return Vi(Fr,this).length===this.size}push(t){Vi(Fr,this)[Vi(Us,this)]=t,Qy(Us,this,(Vi(Us,this)+1)%this.size)}values(){return Vi(Fr,this).slice(Vi(Us,this)).concat(Vi(Fr,this).slice(0,Vi(Us,this)))}clear(){Vi(Fr,this).length=0,Qy(Us,this,0)}}function OV(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function Xg(e){const t=qt({});ht(()=>{const i=e();for(const s in i)t[s]=i[s]},{flush:"sync"});const n={};for(const i in t)n[i]=U(()=>t[i]);return n}function Vc(e,t){return e.includes(t)}function cS(e){return e[2].toLowerCase()+e.slice(3)}const Gt=()=>[Function,Array];function s_(e,t){return t="on"+Di(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function bu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(Array.isArray(e))for(const s of e)s(...n);else typeof e=="function"&&e(...n)}function Ro(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(i=>`${i}${t?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(n)]}function uS(e,t,n){let i,s=e.indexOf(document.activeElement);const r=t==="next"?1:-1;do s+=r,i=e[s];while((!i||i.offsetParent==null||!(n?.(i)??!0))&&s<e.length&&s>=0);return i}function tr(e,t){const n=Ro(e);if(t==null)(e===document.activeElement||!e.contains(document.activeElement))&&n[0]?.focus();else if(t==="first")n[0]?.focus();else if(t==="last")n.at(-1)?.focus();else if(typeof t=="number")n[t]?.focus();else{const i=uS(n,t);i?i.focus():tr(e,t==="next"?"first":"last")}}function Bl(e){return e==null||typeof e=="string"&&e.trim()===""}function dS(){}function ya(e,t){if(!(qe&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function wu(e){return e.some(t=>So(t)?t.type===hn?!1:t.type!==Ae||wu(t.children):!0)?e:null}function Fl(e,t,n){return e?.(t)??n?.(t)}function DV(e,t){if(!qe||e===0)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function NV(e,t){const n=e.clientX,i=e.clientY,s=t.getBoundingClientRect(),r=s.left,a=s.top,o=s.right,l=s.bottom;return n>=r&&n<=o&&i>=a&&i<=l}function Lc(){const e=he(),t=n=>{e.value=n};return Object.defineProperty(t,"value",{enumerable:!0,get:()=>e.value,set:n=>e.value=n}),Object.defineProperty(t,"el",{enumerable:!0,get:()=>Hg(e.value)}),t}function _a(e){const t=e.key.length===1,n=!e.ctrlKey&&!e.metaKey&&!e.altKey;return t&&n}function jf(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function Uc(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function BV(e,t,n){const i=new RegExp(`[\\d\\-${Uc(n)}]`),s=e.split("").filter(a=>i.test(a)).filter((a,o,l)=>o===0&&/[-]/.test(a)||a===n&&o===l.indexOf(a)||/\d/.test(a)).join("");if(t===0)return s.split(n)[0];const r=new RegExp(`${Uc(n)}\\d`);if(t!==null&&r.test(s)){const a=s.split(n);return[a[0],a[1].substring(0,t)].join(n)}return s}function FV(e){const t={};for(const n in e)t[Tn(n)]=e[n];return t}function VV(e){const t=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(n=>{let[i,s]=n;return t.includes(i)?!!s:s!==void 0}))}const fS=["top","bottom"],LV=["start","end","left","right"];function Xf(e,t){let[n,i]=e.split(" ");return i||(i=Vc(fS,n)?"start":Vc(LV,n)?"top":"center"),{side:Yf(n,t),align:Yf(i,t)}}function Yf(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function Ud(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function $d(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function r_(e){return{side:e.align,align:e.side}}function a_(e){return Vc(fS,e.side)?"y":"x"}class Ii{constructor(t){let{x:n,y:i,width:s,height:r}=t;this.x=n,this.y=i,this.width=s,this.height=r}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function o_(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function hS(e){return Array.isArray(e)?new Ii({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function UV(e){if(e===document.documentElement)return visualViewport?new Ii({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new Ii({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const t=e.getBoundingClientRect();return new Ii({x:t.x,y:t.y,width:e.clientWidth,height:e.clientHeight})}}function Yg(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),i=n.transform;if(i){let s,r,a,o,l;if(i.startsWith("matrix3d("))s=i.slice(9,-1).split(/, /),r=Number(s[0]),a=Number(s[5]),o=Number(s[12]),l=Number(s[13]);else if(i.startsWith("matrix("))s=i.slice(7,-1).split(/, /),r=Number(s[0]),a=Number(s[3]),o=Number(s[4]),l=Number(s[5]);else return new Ii(t);const u=n.transformOrigin,c=t.x-o-(1-r)*parseFloat(u),d=t.y-l-(1-a)*parseFloat(u.slice(u.indexOf(" ")+1)),f=r?t.width/r:e.offsetWidth+1,h=a?t.height/a:e.offsetHeight+1;return new Ii({x:c,y:d,width:f,height:h})}else return new Ii(t)}function Wi(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let i;try{i=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof i.finished>"u"&&(i.finished=new Promise(s=>{i.onfinish=()=>{s(i)}})),i}const ec=new WeakMap;function $V(e,t){Object.keys(t).forEach(n=>{if(jg(n)){const i=cS(n),s=ec.get(e);if(t[n]==null)s?.forEach(r=>{const[a,o]=r;a===i&&(e.removeEventListener(i,o),s.delete(r))});else if(!s||![...s].some(r=>r[0]===i&&r[1]===t[n])){e.addEventListener(i,t[n]);const r=s||new Set;r.add([i,t[n]]),ec.has(e)||ec.set(e,r)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function zV(e,t){Object.keys(t).forEach(n=>{if(jg(n)){const i=cS(n),s=ec.get(e);s?.forEach(r=>{const[a,o]=r;a===i&&(e.removeEventListener(i,o),s.delete(r))})}else e.removeAttribute(n)})}const Vr=2.4,l_=.2126729,c_=.7151522,u_=.072175,WV=.55,HV=.58,jV=.57,XV=.62,Vl=.03,d_=1.45,YV=5e-4,KV=1.25,qV=1.25,f_=.078,h_=12.82051282051282,Ll=.06,g_=.001;function m_(e,t){const n=(e.r/255)**Vr,i=(e.g/255)**Vr,s=(e.b/255)**Vr,r=(t.r/255)**Vr,a=(t.g/255)**Vr,o=(t.b/255)**Vr;let l=n*l_+i*c_+s*u_,u=r*l_+a*c_+o*u_;if(l<=Vl&&(l+=(Vl-l)**d_),u<=Vl&&(u+=(Vl-u)**d_),Math.abs(u-l)<YV)return 0;let c;if(u>l){const d=(u**WV-l**HV)*KV;c=d<g_?0:d<f_?d-d*h_*Ll:d-Ll}else{const d=(u**XV-l**jV)*qV;c=d>-g_?0:d>-f_?d-d*h_*Ll:d+Ll}return c*100}function gS(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const $c=.20689655172413793,ZV=e=>e>$c**3?Math.cbrt(e):e/(3*$c**2)+4/29,GV=e=>e>$c?e**3:3*$c**2*(e-4/29);function mS(e){const t=ZV,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function vS(e){const t=GV,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const QV=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],JV=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,eL=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],tL=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function pS(e){const t=Array(3),n=JV,i=QV;for(let s=0;s<3;++s)t[s]=Math.round(at(n(i[s][0]*e[0]+i[s][1]*e[1]+i[s][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function Kg(e){let{r:t,g:n,b:i}=e;const s=[0,0,0],r=tL,a=eL;t=r(t/255),n=r(n/255),i=r(i/255);for(let o=0;o<3;++o)s[o]=a[o][0]*t+a[o][1]*n+a[o][2]*i;return s}function Kf(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function nL(e){return Kf(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const v_=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,iL={rgb:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),rgba:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),hsl:(e,t,n,i)=>p_({h:e,s:t,l:n,a:i}),hsla:(e,t,n,i)=>p_({h:e,s:t,l:n,a:i}),hsv:(e,t,n,i)=>Ri({h:e,s:t,v:n,a:i}),hsva:(e,t,n,i)=>Ri({h:e,s:t,v:n,a:i})};function Un(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&v_.test(e)){const{groups:t}=e.match(v_),{fn:n,values:i}=t,s=i.split(/,\s*|\s*\/\s*|\s+/).map((r,a)=>r.endsWith("%")||a>0&&a<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(r)/100:parseFloat(r));return iL[n](...s)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),wS(t)}else if(typeof e=="object"){if(Ys(e,["r","g","b"]))return e;if(Ys(e,["h","s","l"]))return Ri(qg(e));if(Ys(e,["h","s","v"]))return Ri(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Ri(e){const{h:t,s:n,v:i,a:s}=e,r=o=>{const l=(o+t/60)%6;return i-i*n*Math.max(Math.min(l,4-l,1),0)},a=[r(5),r(3),r(1)].map(o=>Math.round(o*255));return{r:a[0],g:a[1],b:a[2],a:s}}function p_(e){return Ri(qg(e))}function il(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,i=e.b/255,s=Math.max(t,n,i),r=Math.min(t,n,i);let a=0;s!==r&&(s===t?a=60*(0+(n-i)/(s-r)):s===n?a=60*(2+(i-t)/(s-r)):s===i&&(a=60*(4+(t-n)/(s-r)))),a<0&&(a=a+360);const o=s===0?0:(s-r)/s,l=[a,o,s];return{h:l[0],s:l[1],v:l[2],a:e.a}}function qf(e){const{h:t,s:n,v:i,a:s}=e,r=i-i*n/2,a=r===1||r===0?0:(i-r)/Math.min(r,1-r);return{h:t,s:a,l:r,a:s}}function qg(e){const{h:t,s:n,l:i,a:s}=e,r=i+n*Math.min(i,1-i),a=r===0?0:2-2*i/r;return{h:t,s:a,v:r,a:s}}function yS(e){let{r:t,g:n,b:i,a:s}=e;return s===void 0?`rgb(${t}, ${n}, ${i})`:`rgba(${t}, ${n}, ${i}, ${s})`}function _S(e){return yS(Ri(e))}function Ul(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function bS(e){let{r:t,g:n,b:i,a:s}=e;return`#${[Ul(t),Ul(n),Ul(i),s!==void 0?Ul(Math.round(s*255)):""].join("")}`}function wS(e){e=rL(e);let[t,n,i,s]=MV(e,2).map(r=>parseInt(r,16));return s=s===void 0?s:s/255,{r:t,g:n,b:i,a:s}}function sL(e){const t=wS(e);return il(t)}function xS(e){return bS(Ri(e))}function rL(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=t_(t_(e,6),8,"F")),e}function aL(e,t){const n=mS(Kg(e));return n[0]=n[0]+t*10,pS(vS(n))}function oL(e,t){const n=mS(Kg(e));return n[0]=n[0]-t*10,pS(vS(n))}function Zf(e){const t=Un(e);return Kg(t)[1]}function lL(e,t){const n=Zf(e),i=Zf(t),s=Math.max(n,i),r=Math.min(n,i);return(s+.05)/(r+.05)}function SS(e){const t=Math.abs(m_(Un(0),Un(e)));return Math.abs(m_(Un(16777215),Un(e)))>Math.min(t,50)?"#fff":"#000"}function j(e,t){return n=>Object.keys(e).reduce((i,s)=>{const a=typeof e[s]=="object"&&e[s]!=null&&!Array.isArray(e[s])?e[s]:{type:e[s]};return n&&s in n?i[s]={...a,default:n[s]}:i[s]=a,t&&!i[s].source&&(i[s].source=t),i},{})}const Ce=j({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function At(e,t){const n=Zo();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function Ni(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=At(e).type;return er(t?.aliasName||t?.name)}function cL(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:At("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}const ba=Symbol.for("vuetify:defaults");function uL(e){return le(e)}function Zg(){const e=He(ba);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function wt(e,t){const n=Zg(),i=le(e),s=C(()=>{if(En(t?.disabled))return n.value;const a=En(t?.scoped),o=En(t?.reset),l=En(t?.root);if(i.value==null&&!(a||o||l))return n.value;let u=mn(i.value,{prev:n.value});if(a)return u;if(o||l){const c=Number(o||1/0);for(let d=0;d<=c&&!(!u||!("prev"in u));d++)u=u.prev;return u&&typeof l=="string"&&l in u&&(u=mn(mn(u,{prev:u}),u[l])),u}return u.prev?mn(u.prev,u):u});return dt(ba,s),s}function dL(e,t){return e.props&&(typeof e.props[t]<"u"||typeof e.props[er(t)]<"u")}function fL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zg();const i=At("useDefaults");if(t=t??i.type.name??i.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const s=C(()=>n.value?.[e._as??t]),r=new Proxy(e,{get(l,u){const c=Reflect.get(l,u);if(u==="class"||u==="style")return[s.value?.[u],c].filter(h=>h!=null);if(dL(i.vnode,u))return c;const d=s.value?.[u];if(d!==void 0)return d;const f=n.value?.global?.[u];return f!==void 0?f:c}}),a=he();ht(()=>{if(s.value){const l=Object.entries(s.value).filter(u=>{let[c]=u;return c.startsWith(c[0].toUpperCase())});a.value=l.length?Object.fromEntries(l):void 0}else a.value=void 0});function o(){const l=cL(ba,i);dt(ba,C(()=>a.value?mn(l?.value??{},a.value):l?.value))}return{props:r,provideSubDefaults:o}}function Hn(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=j(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(i){return In(i,t)},e.props._as=String,e.setup=function(i,s){const r=Zg();if(!r.value)return e._setup(i,s);const{props:a,provideSubDefaults:o}=fL(i,i._as??e.name,r),l=e._setup(a,s);return o(),l}}return e}function ie(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?Hn:TC)(t)}function hL(e,t){return t.props=e,t}function is(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return ie()({name:n??Di(Tn(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...Ce()},setup(i,s){let{slots:r}=s;return()=>ns(i.tag,{class:[e,i.class],style:i.style},r.default?.())}})}function TS(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const Mo="cubic-bezier(0.4, 0, 0.2, 1)",y_="cubic-bezier(0.0, 0, 0.2, 1)",__="cubic-bezier(0.4, 0, 1, 1)",gL={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5,instant:e=>1};function b_(e,t,n){return Object.keys(e).filter(i=>jg(i)&&i.endsWith(t)).reduce((i,s)=>(i[s.slice(0,-t.length)]=r=>e[s](r,n(r)),i),{})}function Gg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?mL(e):Qg(e))return e;e=e.parentElement}return document.scrollingElement}function zc(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(Qg(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function Qg(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),n=t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight,i=t.overflowX==="scroll"||t.overflowX==="auto"&&e.scrollWidth>e.clientWidth;return n||i}function mL(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function vL(e){let{depth:t,isLast:n,isLastGroup:i,leafLinks:s,separateRoots:r,parentIndentLines:a,variant:o}=e;if(!a||!t)return{leaf:void 0,node:void 0,children:a};if(o==="simple")return{leaf:[...a,"line"],node:[...a,"line"],children:[...a,"line"]};const l=n&&(!i||r||t>1);return{leaf:[...a,l?"last-leaf":"leaf",...s?["leaf-link"]:[]],node:[...a,l?"last-leaf":"leaf"],children:[...a,l?"none":"line"]}}function pL(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function oe(e){const t=At("useRender");t.render=e}function Re(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:d=>d,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:d=>d;const r=At("useProxiedModel"),a=le(e[t]!==void 0?e[t]:n),o=er(t),u=C(o!==t?()=>(e[t],!!((r.vnode.props?.hasOwnProperty(t)||r.vnode.props?.hasOwnProperty(o))&&(r.vnode.props?.hasOwnProperty(`onUpdate:${t}`)||r.vnode.props?.hasOwnProperty(`onUpdate:${o}`)))):()=>(e[t],!!(r.vnode.props?.hasOwnProperty(t)&&r.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));en(()=>!u.value,()=>{me(()=>e[t],d=>{a.value=d})});const c=C({get(){const d=e[t];return i(u.value?d:a.value)},set(d){const f=s(d),h=Oe(u.value?e[t]:a.value);h===f||i(h)===d||(a.value=f,r?.emit(`update:${t}`,f))}});return Object.defineProperty(c,"externalValue",{get:()=>u.value?e[t]:a.value}),c}const yL={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},w_="$vuetify.",x_=(e,t)=>e.replace(/\{(\d+)\}/g,(n,i)=>String(t[Number(i)])),AS=(e,t,n)=>function(i){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];if(!i.startsWith(w_))return x_(i,r);const o=i.replace(w_,""),l=e.value&&n.value[e.value],u=t.value&&n.value[t.value];let c=lr(l,o,null);return c||(`${i}${e.value}`,c=lr(u,o,null)),c||(c=i),typeof c!="string"&&(c=i),x_(c,r)};function Jg(e,t){return(n,i)=>new Intl.NumberFormat([e.value,t.value],i).format(n)}function CS(e,t){return Jg(e,t)(.1).includes(",")?",":"."}function zd(e,t,n){const i=Re(e,t,e[t]??n.value);return i.value=e[t]??n.value,me(n,s=>{e[t]==null&&(i.value=n.value)}),i}function kS(e){return t=>{const n=zd(t,"locale",e.current),i=zd(t,"fallback",e.fallback),s=zd(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:i,messages:s,decimalSeparator:U(()=>CS(n,i)),t:AS(n,i,s),n:Jg(n,i),provide:kS({current:n,fallback:i,messages:s})}}}function _L(e){const t=he(e?.locale??"en"),n=he(e?.fallback??"en"),i=le({en:yL,...e?.messages});return{name:"vuetify",current:t,fallback:n,messages:i,decimalSeparator:U(()=>e?.decimalSeparator??CS(t,n)),t:AS(t,n,i),n:Jg(t,n),provide:kS({current:t,fallback:n,messages:i})}}const wa=Symbol.for("vuetify:locale");function bL(e){return e.name!=null}function wL(e){const t=e?.adapter&&bL(e?.adapter)?e?.adapter:_L(e),n=TL(t,e);return{...t,...n}}function nt(){const e=He(wa);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function xL(e){const t=He(wa);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),i=AL(n,t.rtl,e),s={...n,...i};return dt(wa,s),s}function SL(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function TL(e,t){const n=le(t?.rtl??SL()),i=C(()=>n.value[e.current.value]??!1);return{isRtl:i,rtl:n,rtlClasses:U(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function AL(e,t,n){const i=C(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:i,rtl:t,rtlClasses:U(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function Mt(){const e=He(wa);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function sl(e){const t=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):return{firstDay:6,firstWeekSize:1};case t==="MV":return{firstDay:5,firstWeekSize:1};case t==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function CL(e,t,n){const i=[];let s=[];const r=ES(e),a=IS(e),o=n??sl(t)?.firstDay??0,l=(r.getDay()-o+7)%7,u=(a.getDay()-o+7)%7;for(let c=0;c<l;c++){const d=new Date(r);d.setDate(d.getDate()-(l-c)),s.push(d)}for(let c=1;c<=a.getDate();c++){const d=new Date(e.getFullYear(),e.getMonth(),c);s.push(d),s.length===7&&(i.push(s),s=[])}for(let c=1;c<7-u;c++){const d=new Date(a);d.setDate(d.getDate()+c),s.push(d)}return s.length>0&&i.push(s),i}function Wc(e,t,n){let i=(n??sl(t)?.firstDay??0)%7;[0,1,2,3,4,5,6].includes(i)||(i=0);const s=new Date(e);for(;s.getDay()!==i;)s.setDate(s.getDate()-1);return s}function kL(e,t){const n=new Date(e),i=((sl(t)?.firstDay??0)+6)%7;for(;n.getDay()!==i;)n.setDate(n.getDate()+1);return n}function ES(e){return new Date(e.getFullYear(),e.getMonth(),1)}function IS(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function EL(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const IL=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function PS(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(IL.test(e))return EL(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const S_=new Date(2e3,0,2);function PL(e,t,n){const i=t??sl(e)?.firstDay??0;return Ln(7).map(s=>{const r=new Date(S_);return r.setDate(S_.getDate()+i+s),new Intl.DateTimeFormat(e,{weekday:n??"narrow"}).format(r)})}function RL(e,t,n,i){const s=PS(e)??new Date,r=i?.[t];if(typeof r=="function")return r(s,t,n);let a={};switch(t){case"fullDate":a={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":a={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const o=s.getDate(),l=new Intl.DateTimeFormat(n,{month:"long"}).format(s);return`${o} ${l}`;case"normalDateWithWeekday":a={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":a={month:"short",day:"numeric"};break;case"year":a={year:"numeric"};break;case"month":a={month:"long"};break;case"monthShort":a={month:"short"};break;case"monthAndYear":a={month:"long",year:"numeric"};break;case"monthAndDate":a={month:"long",day:"numeric"};break;case"weekday":a={weekday:"long"};break;case"weekdayShort":a={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(s.getDate());case"hours12h":a={hour:"numeric",hour12:!0};break;case"hours24h":a={hour:"numeric",hour12:!1};break;case"minutes":a={minute:"numeric"};break;case"seconds":a={second:"numeric"};break;case"fullTime":a={hour:"numeric",minute:"numeric"};break;case"fullTime12h":a={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":a={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":a={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":a={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,a).format(s).replace(/, /g," ");case"keyboardDateTime12h":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,a).format(s).replace(/, /g," ");case"keyboardDateTime24h":return a={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,a).format(s).replace(/, /g," ");default:a=r??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,a).format(s)}function ML(e,t){const n=e.toJsDate(t),i=n.getFullYear(),s=n_(String(n.getMonth()+1),2,"0"),r=n_(String(n.getDate()),2,"0");return`${i}-${s}-${r}`}function OL(e){const[t,n,i]=e.split("-").map(Number);return new Date(t,n-1,i)}function DL(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function NL(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function nr(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function BL(e,t){const n=new Date(e);return n.setDate(n.getDate()+t*7),n}function FL(e,t){const n=new Date(e);return n.setDate(1),n.setMonth(n.getMonth()+t),n}function Oo(e){return e.getFullYear()}function VL(e){return e.getMonth()}function LL(e,t,n,i){const s=sl(t),r=n??s?.firstDay??0,a=s?.firstWeekSize??1;return i!==void 0?UL(e,t,r,i):$L(e,t,r,a)}function UL(e,t,n,i){const s=(7+i-n)%7,r=Wc(e,t,n),a=nr(r,6);function o(f){return(7+new Date(f,0,1).getDay()-n)%7}let l=Oo(e);l<Oo(a)&&o(l+1)<=s&&l++;const u=new Date(l,0,1),c=o(l),d=c<=s?nr(u,-c):nr(u,7-c);return 1+jc(em(e),Do(d),"weeks")}function $L(e,t,n,i){const s=nr(Wc(e,t,n),6);function r(c){const d=new Date(c,0,1);return 7-jc(d,Wc(d,t,n),"days")}let a=Oo(e);a<Oo(s)&&r(a+1)>=i&&a++;const o=new Date(a,0,1),l=r(a),u=l>=i?nr(o,l-7):nr(o,l);return 1+jc(em(e),Do(u),"weeks")}function zL(e){return e.getDate()}function WL(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function HL(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function jL(e){return e.getHours()}function XL(e){return e.getMinutes()}function YL(e){return new Date(e.getFullYear(),0,1)}function KL(e){return new Date(e.getFullYear(),11,31)}function qL(e,t){return Hc(e,t[0])&&QL(e,t[1])}function ZL(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function Hc(e,t){return e.getTime()>t.getTime()}function GL(e,t){return Hc(Do(e),Do(t))}function QL(e,t){return e.getTime()<t.getTime()}function T_(e,t){return e.getTime()===t.getTime()}function JL(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function e6(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function t6(e,t){return e.getFullYear()===t.getFullYear()}function jc(e,t,n){const i=new Date(e),s=new Date(t);switch(n){case"years":return i.getFullYear()-s.getFullYear();case"quarters":return Math.floor((i.getMonth()-s.getMonth()+(i.getFullYear()-s.getFullYear())*12)/4);case"months":return i.getMonth()-s.getMonth()+(i.getFullYear()-s.getFullYear())*12;case"weeks":return Math.floor((i.getTime()-s.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((i.getTime()-s.getTime())/(1e3*60*60*24));case"hours":return Math.floor((i.getTime()-s.getTime())/(1e3*60*60));case"minutes":return Math.floor((i.getTime()-s.getTime())/(1e3*60));case"seconds":return Math.floor((i.getTime()-s.getTime())/1e3);default:return i.getTime()-s.getTime()}}function n6(e,t){const n=new Date(e);return n.setHours(t),n}function i6(e,t){const n=new Date(e);return n.setMinutes(t),n}function s6(e,t){const n=new Date(e);return n.setMonth(t),n}function r6(e,t){const n=new Date(e);return n.setDate(t),n}function a6(e,t){const n=new Date(e);return n.setFullYear(t),n}function Do(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function em(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class o6{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return PS(t)}toJsDate(t){return t}toISO(t){return ML(this,t)}parseISO(t){return OL(t)}addMinutes(t,n){return DL(t,n)}addHours(t,n){return NL(t,n)}addDays(t,n){return nr(t,n)}addWeeks(t,n){return BL(t,n)}addMonths(t,n){return FL(t,n)}getWeekArray(t,n){const i=n!==void 0?Number(n):void 0;return CL(t,this.locale,i)}startOfWeek(t,n){const i=n!==void 0?Number(n):void 0;return Wc(t,this.locale,i)}endOfWeek(t){return kL(t,this.locale)}startOfMonth(t){return ES(t)}endOfMonth(t){return IS(t)}format(t,n){return RL(t,n,this.locale,this.formats)}isEqual(t,n){return T_(t,n)}isValid(t){return ZL(t)}isWithinRange(t,n){return qL(t,n)}isAfter(t,n){return Hc(t,n)}isAfterDay(t,n){return GL(t,n)}isBefore(t,n){return!Hc(t,n)&&!T_(t,n)}isSameDay(t,n){return JL(t,n)}isSameMonth(t,n){return e6(t,n)}isSameYear(t,n){return t6(t,n)}setMinutes(t,n){return i6(t,n)}setHours(t,n){return n6(t,n)}setMonth(t,n){return s6(t,n)}setDate(t,n){return r6(t,n)}setYear(t,n){return a6(t,n)}getDiff(t,n,i){return jc(t,n,i)}getWeekdays(t,n){const i=t!==void 0?Number(t):void 0;return PL(this.locale,i,n)}getYear(t){return Oo(t)}getMonth(t){return VL(t)}getWeek(t,n,i){const s=n!==void 0?Number(n):void 0,r=i!==void 0?Number(i):void 0;return LL(t,this.locale,s,r)}getDate(t){return zL(t)}getNextMonth(t){return WL(t)}getPreviousMonth(t){return HL(t)}getHours(t){return jL(t)}getMinutes(t){return XL(t)}startOfDay(t){return Do(t)}endOfDay(t){return em(t)}startOfYear(t){return YL(t)}endOfYear(t){return KL(t)}}const RS=Symbol.for("vuetify:date-options"),A_=Symbol.for("vuetify:date-adapter");function l6(e,t){const n=mn({adapter:o6,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:MS(n,t)}}function c6(e,t,n){const i=e.getDiff(e.endOfDay(n??t),e.startOfDay(t),"days"),s=[t];for(let r=1;r<i;r++){const a=e.addDays(t,r);s.push(a)}return n&&s.push(e.endOfDay(n)),s}function MS(e,t){const n=qt(typeof e.adapter=="function"?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return me(t.current,i=>{n.locale=e.locale[i]??i??n.locale}),n}function rl(){const e=He(RS);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=nt();return MS(e,t)}const xu=["sm","md","lg","xl","xxl"],Gf=Symbol.for("vuetify:display"),C_={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},u6=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C_;return mn(C_,e)};function k_(e){return qe&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function E_(e){return qe&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function I_(e){const t=qe&&!e?window.navigator.userAgent:"ssr";function n(g){return!!t.match(g)}const i=n(/android/i),s=n(/iphone|ipad|ipod/i),r=n(/cordova/i),a=n(/electron/i),o=n(/chrome/i),l=n(/edge/i),u=n(/firefox/i),c=n(/opera/i),d=n(/win/i),f=n(/mac/i),h=n(/linux/i);return{android:i,ios:s,cordova:r,electron:a,chrome:o,edge:l,firefox:u,opera:c,win:d,mac:f,linux:h,touch:kV,ssr:t==="ssr"}}function d6(e,t){const{thresholds:n,mobileBreakpoint:i}=u6(e),s=he(E_(t)),r=he(I_(t)),a=qt({}),o=he(k_(t));function l(){s.value=E_(),o.value=k_()}function u(){l(),r.value=I_()}return ht(()=>{const c=o.value<n.sm,d=o.value<n.md&&!c,f=o.value<n.lg&&!(d||c),h=o.value<n.xl&&!(f||d||c),g=o.value<n.xxl&&!(h||f||d||c),v=o.value>=n.xxl,m=c?"xs":d?"sm":f?"md":h?"lg":g?"xl":"xxl",p=typeof i=="number"?i:n[i],y=o.value<p;a.xs=c,a.sm=d,a.md=f,a.lg=h,a.xl=g,a.xxl=v,a.smAndUp=!c,a.mdAndUp=!(c||d),a.lgAndUp=!(c||d||f),a.xlAndUp=!(c||d||f||h),a.smAndDown=!(f||h||g||v),a.mdAndDown=!(h||g||v),a.lgAndDown=!(g||v),a.xlAndDown=!v,a.name=m,a.height=s.value,a.width=o.value,a.mobile=y,a.mobileBreakpoint=i,a.platform=r.value,a.thresholds=n}),qe&&(window.addEventListener("resize",l,{passive:!0}),Ft(()=>{window.removeEventListener("resize",l)},!0)),{...Ca(a),update:u,ssr:!!t}}const br=j({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function ni(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ni();const n=He(Gf);if(!n)throw new Error("Could not find Vuetify display injection");const i=C(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?n.width.value<e.mobileBreakpoint:e.mobileBreakpoint?n.width.value<n.thresholds.value[e.mobileBreakpoint]:e.mobile===null?n.mobile.value:!1),s=U(()=>t?{[`${t}--mobile`]:i.value}:{});return{...n,displayClasses:s,mobile:i}}const OS=Symbol.for("vuetify:goto");function DS(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:gL}}function f6(e){return tm(e)??(document.scrollingElement||document.body)}function tm(e){return typeof e=="string"?document.querySelector(e):Hg(e)}function Wd(e,t,n){if(typeof e=="number")return t&&n?-e:e;let i=tm(e),s=0;for(;i;)s+=t?i.offsetLeft:i.offsetTop,i=i.offsetParent;return s}function h6(e,t){return{rtl:t.isRtl,options:mn(DS(),e)}}async function P_(e,t,n,i){const s=n?"scrollLeft":"scrollTop",r=mn(i?.options??DS(),t),a=i?.rtl.value,o=(typeof e=="number"?e:tm(e))??0,l=r.container==="parent"&&o instanceof HTMLElement?o.parentElement:f6(r.container),u=window.matchMedia("(prefers-reduced-motion: reduce)").matches?r.patterns.instant:typeof r.easing=="function"?r.easing:r.patterns[r.easing];if(!u)throw new TypeError(`Easing function "${r.easing}" not found.`);let c;if(typeof o=="number")c=Wd(o,n,a);else if(c=Wd(o,n,a)-Wd(l,n,a),r.layout){const g=window.getComputedStyle(o).getPropertyValue("--v-layout-top");g&&(c-=parseInt(g,10))}c+=r.offset,c=m6(l,c,!!a,!!n);const d=l[s]??0;if(c===d)return Promise.resolve(c);const f=performance.now();return new Promise(h=>requestAnimationFrame(function g(v){const p=(v-f)/r.duration,y=Math.floor(d+(c-d)*u(at(p,0,1)));if(l[s]=y,p>=1&&Math.abs(y-l[s])<10)return h(c);if(p>2)return h(l[s]);requestAnimationFrame(g)}))}function g6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=He(OS),{isRtl:n}=Mt();if(!t)throw new Error("[Vuetify] Could not find injected goto instance");const i={...t,rtl:U(()=>t.rtl.value||n.value)};async function s(r,a){return P_(r,mn(e,a),!1,i)}return s.horizontal=async(r,a)=>P_(r,mn(e,a),!0,i),s}function m6(e,t,n,i){const{scrollWidth:s,scrollHeight:r}=e,[a,o]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let l,u;return i?n?(l=-(s-a),u=0):(l=0,u=s-a):(l=0,u=r+-o),at(t,l,u)}const v6={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",tableGroupCollapse:"mdi-chevron-down",tableGroupExpand:"mdi-chevron-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},p6={component:e=>ns(im,{...e,class:"mdi"})},Pe=[String,Function,Object,Array],Qf=Symbol.for("vuetify:icons"),Su=j({icon:{type:Pe},tag:{type:[String,Object,Function],required:!0}},"icon"),Jf=ie()({name:"VComponentIcon",props:Su(),setup(e,t){let{slots:n}=t;return()=>{const i=e.icon;return w(e.tag,null,{default:()=>[e.icon?w(i,null,null):n.default?.()]})}}}),nm=Hn({name:"VSvgIcon",inheritAttrs:!1,props:Su(),setup(e,t){let{attrs:n}=t;return()=>w(e.tag,ne(n,{style:null}),{default:()=>[A("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(i=>Array.isArray(i)?A("path",{d:i[0],"fill-opacity":i[1]},null):A("path",{d:i},null)):A("path",{d:e.icon},null)])]})}}),y6=Hn({name:"VLigatureIcon",props:Su(),setup(e){return()=>w(e.tag,null,{default:()=>[e.icon]})}}),im=Hn({name:"VClassIcon",props:Su(),setup(e){return()=>w(e.tag,{class:se(e.icon)},null)}});function _6(){return{svg:{component:nm},class:{component:im}}}function b6(e){const t=_6(),n=e?.defaultSet??"mdi";return n==="mdi"&&!t.mdi&&(t.mdi=p6),mn({defaultSet:n,sets:t,aliases:{...v6,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const w6=e=>{const t=He(Qf);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:C(()=>{const i=zn(e);if(!i)return{component:Jf};let s=i;if(typeof s=="string"&&(s=s.trim(),s.startsWith("$")&&(s=t.aliases?.[s.slice(1)])),Array.isArray(s))return{component:nm,icon:s};if(typeof s!="string")return{component:Jf,icon:s};const r=Object.keys(t.sets).find(l=>typeof s=="string"&&s.startsWith(`${l}:`)),a=r?s.slice(r.length+1):s;return{component:t.sets[r??t.defaultSet].component,icon:a}})}},No=Symbol.for("vuetify:theme"),Xe=j({theme:String},"theme");function R_(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function x6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R_();const t=R_();if(!e)return{...t,isDisabled:!0};const n={};for(const[i,s]of Object.entries(e.themes??{})){const r=s.dark||i==="dark"?t.themes?.dark:t.themes?.light;n[i]=mn(r,s)}return mn(t,{...e,themes:n})}function $s(e,t,n,i){e.push(`${C6(t,i)} {
`,...n.map(s=>`  ${s};
`),`}
`)}function M_(e,t){const n=e.dark?2:1,i=e.dark?1:2,s=[];for(const[r,a]of Object.entries(e.colors)){const o=Un(a);s.push(`--${t}theme-${r}: ${o.r},${o.g},${o.b}`),r.startsWith("on-")||s.push(`--${t}theme-${r}-overlay-multiplier: ${Zf(a)>.18?n:i}`)}for(const[r,a]of Object.entries(e.variables)){const o=typeof a=="string"&&a.startsWith("#")?Un(a):void 0,l=o?`${o.r}, ${o.g}, ${o.b}`:void 0;s.push(`--${t}${r}: ${l??a}`)}return s}function S6(e,t,n){const i={};if(n)for(const s of["lighten","darken"]){const r=s==="lighten"?aL:oL;for(const a of Ln(n[s],1))i[`${e}-${s}-${a}`]=bS(r(Un(t),a))}return i}function T6(e,t){if(!t)return{};let n={};for(const i of t.colors){const s=e[i];s&&(n={...n,...S6(i,s,t)})}return n}function A6(e){const t={};for(const n of Object.keys(e)){if(n.startsWith("on-")||e[`on-${n}`])continue;const i=`on-${n}`,s=Un(e[n]);t[i]=SS(s)}return t}function C6(e,t){if(!t)return e;const n=`:where(${t})`;return e===":root"?n:`${n} ${e}`}function k6(e,t,n){const i=E6(e,t);i&&(i.innerHTML=n)}function E6(e,t){if(!qe)return null;let n=document.getElementById(e);return n||(n=document.createElement("style"),n.id=e,n.type="text/css",t&&n.setAttribute("nonce",t),document.head.appendChild(n)),n}function I6(e){const t=x6(e),n=he(t.defaultTheme),i=le(t.themes),s=he("light"),r=C({get(){return n.value==="system"?s.value:n.value},set(y){n.value=y}}),a=C(()=>{const y={};for(const[_,b]of Object.entries(i.value)){const S={...b.colors,...T6(b.colors,t.variations)};y[_]={...b,colors:{...S,...A6(S)}}}return y}),o=U(()=>a.value[r.value]),l=U(()=>n.value==="system"),u=C(()=>{const y=[],_=t.unimportant?"":" !important",b=t.scoped?t.prefix:"";o.value?.dark&&$s(y,":root",["color-scheme: dark"],t.scope),$s(y,":root",M_(o.value,t.prefix),t.scope);for(const[S,x]of Object.entries(a.value))$s(y,`.${t.prefix}theme--${S}`,[`color-scheme: ${x.dark?"dark":"normal"}`,...M_(x,t.prefix)],t.scope);if(t.utilities){const S=[],x=[],I=new Set(Object.values(a.value).flatMap(T=>Object.keys(T.colors)));for(const T of I)T.startsWith("on-")?$s(x,`.${T}`,[`color: rgb(var(--${t.prefix}theme-${T}))${_}`],t.scope):($s(S,`.${b}bg-${T}`,[`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${T}-overlay-multiplier)`,`background-color: rgb(var(--${t.prefix}theme-${T}))${_}`,`color: rgb(var(--${t.prefix}theme-on-${T}))${_}`],t.scope),$s(x,`.${b}text-${T}`,[`color: rgb(var(--${t.prefix}theme-${T}))${_}`],t.scope),$s(x,`.${b}border-${T}`,[`--${t.prefix}border-color: var(--${t.prefix}theme-${T})`],t.scope));y.push(...S,...x)}return y.map((S,x)=>x===0?S:`    ${S}`).join("")}),c=U(()=>t.isDisabled?void 0:`${t.prefix}theme--${r.value}`),d=U(()=>Object.keys(a.value));if(tS){let _=function(){s.value=y.matches?"dark":"light"};var p=_;const y=window.matchMedia("(prefers-color-scheme: dark)");_(),y.addEventListener("change",_,{passive:!0}),hb()&&Ft(()=>{y.removeEventListener("change",_)})}function f(y){if(t.isDisabled)return;const _=y._context.provides.usehead;if(_){let x=function(){return{style:[{textContent:u.value,id:t.stylesheetId,nonce:t.cspNonce||!1}]}};var b=x;if(_.push){const I=_.push(x);qe&&me(u,()=>{I.patch(x)})}else qe?(_.addHeadObjs(U(x)),ht(()=>_.updateDOM())):_.addHeadObjs(x())}else{let x=function(){k6(t.stylesheetId,t.cspNonce,u.value)};var S=x;qe?me(u,x,{immediate:!0}):x()}}function h(y){y!=="system"&&!d.value.includes(y)||(r.value=y)}function g(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.value;const _=y.indexOf(r.value),b=_===-1?0:(_+1)%y.length;h(y[b])}function v(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];g(y)}const m=new Proxy(r,{get(y,_){return Reflect.get(y,_)},set(y,_,b){return _==="value"&&gS(`theme.global.name.value = ${b}`,`theme.change('${b}')`),Reflect.set(y,_,b)}});return{install:f,change:h,cycle:g,toggle:v,isDisabled:t.isDisabled,isSystem:l,name:r,themes:i,current:o,computedThemes:a,prefix:t.prefix,themeClasses:c,styles:u,global:{name:m,current:o}}}function Ze(e){At("provideTheme");const t=He(No,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=U(()=>e.theme??t.name.value),i=U(()=>t.themes.value[n.value]),s=U(()=>t.isDisabled?void 0:`${t.prefix}theme--${n.value}`),r={...t,name:n,current:i,themeClasses:s};return dt(No,r),r}function sm(){At("useTheme");const e=He(No,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function ei(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=Lc(),i=le();if(qe){const s=new ResizeObserver(r=>{e?.(r,s),r.length&&(t==="content"?i.value=r[0].contentRect:i.value=r[0].target.getBoundingClientRect())});Ht(()=>{s.disconnect()}),me(()=>n.el,(r,a)=>{a&&(s.unobserve(a),i.value=void 0),r&&s.observe(r)},{flush:"post"})}return{resizeRef:n,contentRect:Aa(i)}}const Bo=Symbol.for("vuetify:layout"),NS=Symbol.for("vuetify:layout-item"),O_=1e3,BS=j({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),wr=j({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function FS(){const e=He(Bo);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function xr(e){const t=He(Bo);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${yn()}`,i=At("useLayoutItem");dt(NS,{id:n});const s=he(!1);Wh(()=>s.value=!0),Yb(()=>s.value=!1);const{layoutItemStyles:r,layoutItemScrimStyles:a}=t.register(i,{...e,active:C(()=>s.value?!1:e.active.value),id:n});return Ht(()=>t.unregister(n)),{layoutItemStyles:r,layoutRect:t.layoutRect,layoutItemScrimStyles:a}}const P6=(e,t,n,i)=>{let s={top:0,left:0,right:0,bottom:0};const r=[{id:"",layer:{...s}}];for(const a of e){const o=t.get(a),l=n.get(a),u=i.get(a);if(!o||!l||!u)continue;const c={...s,[o.value]:parseInt(s[o.value],10)+(u.value?parseInt(l.value,10):0)};r.push({id:a,layer:c}),s=c}return r};function VS(e){const t=He(Bo,null),n=C(()=>t?t.rootZIndex.value-100:O_),i=le([]),s=qt(new Map),r=qt(new Map),a=qt(new Map),o=qt(new Map),l=qt(new Map),{resizeRef:u,contentRect:c}=ei(),d=C(()=>{const x=new Map,I=e.overlaps??[];for(const T of I.filter(k=>k.includes(":"))){const[k,P]=T.split(":");if(!i.value.includes(k)||!i.value.includes(P))continue;const D=s.get(k),E=s.get(P),O=r.get(k),N=r.get(P);!D||!E||!O||!N||(x.set(P,{position:D.value,amount:parseInt(O.value,10)}),x.set(k,{position:E.value,amount:-parseInt(N.value,10)}))}return x}),f=C(()=>{const x=[...new Set([...a.values()].map(T=>T.value))].sort((T,k)=>T-k),I=[];for(const T of x){const k=i.value.filter(P=>a.get(P)?.value===T);I.push(...k)}return P6(I,s,r,o)}),h=C(()=>!Array.from(l.values()).some(x=>x.value)),g=C(()=>f.value[f.value.length-1].layer),v=U(()=>({"--v-layout-left":we(g.value.left),"--v-layout-right":we(g.value.right),"--v-layout-top":we(g.value.top),"--v-layout-bottom":we(g.value.bottom),...h.value?void 0:{transition:"none"}})),m=C(()=>f.value.slice(1).map((x,I)=>{let{id:T}=x;const{layer:k}=f.value[I],P=r.get(T),D=s.get(T);return{id:T,...k,size:Number(P.value),position:D.value}})),p=x=>m.value.find(I=>I.id===x),y=At("createLayout"),_=he(!1);Wt(()=>{_.value=!0}),dt(Bo,{register:(x,I)=>{let{id:T,order:k,position:P,layoutSize:D,elementSize:E,active:O,disableTransitions:N,absolute:L}=I;a.set(T,k),s.set(T,P),r.set(T,D),o.set(T,O),N&&l.set(T,N);const G=Gr(NS,y?.vnode).indexOf(x);G>-1?i.value.splice(G,0,T):i.value.push(T);const z=C(()=>m.value.findIndex(X=>X.id===T)),$=C(()=>n.value+f.value.length*2-z.value*2),B=C(()=>{const X=P.value==="left"||P.value==="right",re=P.value==="right",ge=P.value==="bottom",de=E.value??D.value,ye=de===0?"%":"px",ee={[P.value]:0,zIndex:$.value,transform:`translate${X?"X":"Y"}(${(O.value?0:-(de===0?100:de))*(re||ge?-1:1)}${ye})`,position:L.value||n.value!==O_?"absolute":"fixed",...h.value?void 0:{transition:"none"}};if(!_.value)return ee;const _e=m.value[z.value],ke=d.value.get(T);return ke&&(_e[ke.position]+=ke.amount),{...ee,height:X?`calc(100% - ${_e.top}px - ${_e.bottom}px)`:E.value?`${E.value}px`:void 0,left:re?void 0:`${_e.left}px`,right:re?`${_e.right}px`:void 0,top:P.value!=="bottom"?`${_e.top}px`:void 0,bottom:P.value!=="top"?`${_e.bottom}px`:void 0,width:X?E.value?`${E.value}px`:void 0:`calc(100% - ${_e.left}px - ${_e.right}px)`}}),W=C(()=>({zIndex:$.value-1}));return{layoutItemStyles:B,layoutItemScrimStyles:W,zIndex:$}},unregister:x=>{a.delete(x),s.delete(x),r.delete(x),o.delete(x),l.delete(x),i.value=i.value.filter(I=>I!==x)},mainRect:g,mainStyles:v,getLayoutItem:p,items:m,layoutRect:c,rootZIndex:n});const b=U(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),S=U(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:b,layoutStyles:S,getLayoutItem:p,items:m,layoutRect:c,layoutRef:u}}function LS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,i=mn(t,n),{aliases:s={},components:r={},directives:a={}}=i,o=oa();return o.run(()=>{const l=uL(i.defaults),u=d6(i.display,i.ssr),c=I6(i.theme),d=b6(i.icons),f=wL(i.locale),h=l6(i.date,f),g=h6(i.goTo,f);function v(p){for(const _ in a)p.directive(_,a[_]);for(const _ in r)p.component(_,r[_]);for(const _ in s)p.component(_,Hn({...s[_],name:_,aliasName:s[_].name}));const y=oa();if(y.run(()=>{c.install(p)}),p.onUnmount(()=>y.stop()),p.provide(ba,l),p.provide(Gf,u),p.provide(No,c),p.provide(Qf,d),p.provide(wa,f),p.provide(RS,h.options),p.provide(A_,h.instance),p.provide(OS,g),qe&&i.ssr)if(p.$nuxt)p.$nuxt.hook("app:suspense:resolve",()=>{u.update()});else{const{mount:_}=p;p.mount=function(){const b=_(...arguments);return je(()=>u.update()),p.mount=_,b}}p.mixin({computed:{$vuetify(){return qt({defaults:Lr.call(this,ba),display:Lr.call(this,Gf),theme:Lr.call(this,No),icons:Lr.call(this,Qf),locale:Lr.call(this,wa),date:Lr.call(this,A_)})}}})}function m(){o.stop()}return{install:v,unmount:m,defaults:l,display:u,theme:c,icons:d,locale:f,date:h,goTo:g}})}const R6="3.10.0";LS.version=R6;function Lr(e){const t=this.$,n=t.parent?.provides??t.vnode.appContext?.provides;if(n&&e in n)return n[e]}const M6=j({...Ce(),...Qe(BS(),["fullHeight"]),...Xe()},"VApp"),O6=ie()({name:"VApp",props:M6(),setup(e,t){let{slots:n}=t;const i=Ze(e),{layoutClasses:s,getLayoutItem:r,items:a,layoutRef:o}=VS({...e,fullHeight:!0}),{rtlClasses:l}=Mt();return oe(()=>A("div",{ref:o,class:se(["v-application",i.themeClasses.value,s.value,l.value,e.class]),style:pe([e.style])},[A("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:r,items:a,theme:i}}}),Ne=j({tag:{type:[String,Object,Function],default:"div"}},"tag"),US=j({text:String,...Ce(),...Ne()},"VToolbarTitle"),rm=ie()({name:"VToolbarTitle",props:US(),setup(e,t){let{slots:n}=t;return oe(()=>{const i=!!(n.default||n.text||e.text);return w(e.tag,{class:se(["v-toolbar-title",e.class]),style:pe(e.style)},{default:()=>[i&&A("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}}),D6=j({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function jn(e,t,n){return ie()({name:e,props:D6({mode:n,origin:t}),setup(i,s){let{slots:r}=s;const a={onBeforeEnter(o){i.origin&&(o.style.transformOrigin=i.origin)},onLeave(o){if(i.leaveAbsolute){const{offsetTop:l,offsetLeft:u,offsetWidth:c,offsetHeight:d}=o;o._transitionInitialStyles={position:o.style.position,top:o.style.top,left:o.style.left,width:o.style.width,height:o.style.height},o.style.position="absolute",o.style.top=`${l}px`,o.style.left=`${u}px`,o.style.width=`${c}px`,o.style.height=`${d}px`}i.hideOnLeave&&o.style.setProperty("display","none","important")},onAfterLeave(o){if(i.leaveAbsolute&&o?._transitionInitialStyles){const{position:l,top:u,left:c,width:d,height:f}=o._transitionInitialStyles;delete o._transitionInitialStyles,o.style.position=l||"",o.style.top=u||"",o.style.left=c||"",o.style.width=d||"",o.style.height=f||""}}};return()=>{const o=i.group?Gh:Cs;return ns(o,{name:i.disabled?"":e,css:!i.disabled,...i.group?void 0:{mode:i.mode},...i.disabled?{}:a},r.default)}}})}function $S(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return ie()({name:e,props:{mode:{type:String,default:n},disabled:{type:Boolean,default:Qi()},group:Boolean},setup(i,s){let{slots:r}=s;const a=i.group?Gh:Cs;return()=>ns(a,{name:i.disabled?"":e,css:!i.disabled,...i.disabled?{}:t},r.default)}})}function zS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",i=Tn(`offset-${n}`);return{onBeforeEnter(a){a._parent=a.parentNode,a._initialStyle={transition:a.style.transition,overflow:a.style.overflow,[n]:a.style[n]}},onEnter(a){const o=a._initialStyle;if(!o)return;a.style.setProperty("transition","none","important"),a.style.overflow="hidden";const l=`${a[i]}px`;a.style[n]="0",a.offsetHeight,a.style.transition=o.transition,e&&a._parent&&a._parent.classList.add(e),requestAnimationFrame(()=>{a.style[n]=l})},onAfterEnter:r,onEnterCancelled:r,onLeave(a){a._initialStyle={transition:"",overflow:a.style.overflow,[n]:a.style[n]},a.style.overflow="hidden",a.style[n]=`${a[i]}px`,a.offsetHeight,requestAnimationFrame(()=>a.style[n]="0")},onAfterLeave:s,onLeaveCancelled:s};function s(a){e&&a._parent&&a._parent.classList.remove(e),r(a)}function r(a){if(!a._initialStyle)return;const o=a._initialStyle[n];a.style.overflow=a._initialStyle.overflow,o!=null&&(a.style[n]=o),delete a._initialStyle}}const N6=j({target:[Object,Array]},"v-dialog-transition"),Hd=new WeakMap,Tu=ie()({name:"VDialogTransition",props:N6(),setup(e,t){let{slots:n}=t;const i={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,r){await new Promise(f=>requestAnimationFrame(f)),await new Promise(f=>requestAnimationFrame(f)),s.style.visibility="";const a=N_(e.target,s),{x:o,y:l,sx:u,sy:c,speed:d}=a;if(Hd.set(s,a),Qi())Wi(s,[{opacity:0},{}],{duration:125*d,easing:y_}).finished.then(()=>r());else{const f=Wi(s,[{transform:`translate(${o}px, ${l}px) scale(${u}, ${c})`,opacity:0},{}],{duration:225*d,easing:y_});D_(s)?.forEach(h=>{Wi(h,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*d,easing:Mo})}),f.finished.then(()=>r())}},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,r){await new Promise(f=>requestAnimationFrame(f));let a;!Hd.has(s)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?a=N_(e.target,s):a=Hd.get(s);const{x:o,y:l,sx:u,sy:c,speed:d}=a;Qi()?Wi(s,[{},{opacity:0}],{duration:85*d,easing:__}).finished.then(()=>r()):(Wi(s,[{},{transform:`translate(${o}px, ${l}px) scale(${u}, ${c})`,opacity:0}],{duration:125*d,easing:__}).finished.then(()=>r()),D_(s)?.forEach(h=>{Wi(h,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*d,easing:Mo})}))},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>e.target?w(Cs,ne({name:"dialog-transition"},i,{css:!1}),n):w(Cs,{name:"dialog-transition"},n)}});function D_(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function N_(e,t){const n=hS(e),i=Yg(t),[s,r]=getComputedStyle(t).transformOrigin.split(" ").map(p=>parseFloat(p)),[a,o]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;a==="left"||o==="left"?l-=n.width/2:(a==="right"||o==="right")&&(l+=n.width/2);let u=n.top+n.height/2;a==="top"||o==="top"?u-=n.height/2:(a==="bottom"||o==="bottom")&&(u+=n.height/2);const c=n.width/i.width,d=n.height/i.height,f=Math.max(1,c,d),h=c/f||0,g=d/f||0,v=i.width*i.height/(window.innerWidth*window.innerHeight),m=v>.12?Math.min(1.5,(v-.12)*10+1):1;return{x:l-(s+i.left),y:u-(r+i.top),sx:h,sy:g,speed:m}}const B6=jn("fab-transition","center center","out-in"),F6=jn("dialog-bottom-transition"),V6=jn("dialog-top-transition"),Fo=jn("fade-transition"),am=jn("scale-transition"),L6=jn("scroll-x-transition"),U6=jn("scroll-x-reverse-transition"),$6=jn("scroll-y-transition"),z6=jn("scroll-y-reverse-transition"),W6=jn("slide-x-transition"),H6=jn("slide-x-reverse-transition"),om=jn("slide-y-transition"),j6=jn("slide-y-reverse-transition"),Au=$S("expand-transition",zS()),lm=$S("expand-x-transition",zS("",!0)),X6=j({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Be=ie(!1)({name:"VDefaultsProvider",props:X6(),setup(e,t){let{slots:n}=t;const{defaults:i,disabled:s,reset:r,root:a,scoped:o}=Ca(e);return wt(i,{reset:r,root:a,scoped:o,disabled:s}),()=>n.default?.()}}),It=j({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Pt(e){return{dimensionStyles:C(()=>{const n={},i=we(e.height),s=we(e.maxHeight),r=we(e.maxWidth),a=we(e.minHeight),o=we(e.minWidth),l=we(e.width);return i!=null&&(n.height=i),s!=null&&(n.maxHeight=s),r!=null&&(n.maxWidth=r),a!=null&&(n.minHeight=a),o!=null&&(n.minWidth=o),l!=null&&(n.width=l),n})}}function Y6(e){return{aspectStyles:C(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const WS=j({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Ce(),...It()},"VResponsive"),eh=ie()({name:"VResponsive",props:WS(),setup(e,t){let{slots:n}=t;const{aspectStyles:i}=Y6(e),{dimensionStyles:s}=Pt(e);return oe(()=>A("div",{class:se(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:pe([s.value,e.style])},[A("div",{class:"v-responsive__sizer",style:pe(i.value)},null),n.additional?.(),n.default&&A("div",{class:se(["v-responsive__content",e.contentClass])},[n.default()])])),{}}});function cm(e){return Xg(()=>{const{class:t,style:n}=K6(e);return{colorClasses:t,colorStyles:n}})}function Qt(e){const{colorClasses:t,colorStyles:n}=cm(()=>({text:zn(e)}));return{textColorClasses:t,textColorStyles:n}}function Ge(e){const{colorClasses:t,colorStyles:n}=cm(()=>({background:zn(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}function K6(e){const t=zn(e),n=[],i={};if(t.background)if(Kf(t.background)){if(i.backgroundColor=t.background,!t.text&&nL(t.background)){const s=Un(t.background);if(s.a==null||s.a===1){const r=SS(s);i.color=r,i.caretColor=r}}}else n.push(`bg-${t.background}`);return t.text&&(Kf(t.text)?(i.color=t.text,i.caretColor=t.text):n.push(`text-${t.text}`)),{class:n,style:i}}const gt=j({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function xt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ni();return{roundedClasses:C(()=>{const i=Rt(e)?e.value:e.rounded,s=Rt(e)?!1:e.tile,r=[];if(s||i===!1)r.push("rounded-0");else if(i===!0||i==="")r.push(`${t}--rounded`);else if(typeof i=="string"||i===0)for(const a of String(i).split(" "))r.push(`rounded-${a}`);return r})}}const mi=j({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),vn=(e,t)=>{let{slots:n}=t;const{transition:i,disabled:s,group:r,...a}=e,{component:o=r?Gh:Cs,...l}=Po(i)?i:{};let u;return Po(i)?u=ne(l,VV({disabled:s,group:r}),a):u=ne({name:s||!i?"":i},a),ns(o,u,n)};function q6(e,t){if(!Wg)return;const n=t.modifiers||{},i=t.value,{handler:s,options:r}=typeof i=="object"?i:{handler:i,options:{}},a=new IntersectionObserver(function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;const u=e._observe?.[t.instance.$.uid];if(!u)return;const c=o.some(d=>d.isIntersecting);s&&(!n.quiet||u.init)&&(!n.once||c||u.init)&&s(c,o,l),c&&n.once?HS(e,t):u.init=!0},r);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:a},a.observe(e)}function HS(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const di={mounted:q6,unmounted:HS},jS=j({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...WS(),...Ce(),...gt(),...mi()},"VImg"),Ji=ie()({name:"VImg",directives:{vIntersect:di},props:jS(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:s,backgroundColorStyles:r}=Ge(()=>e.color),{roundedClasses:a}=xt(e),o=At("VImg"),l=he(""),u=le(),c=he(e.eager?"loading":"idle"),d=he(),f=he(),h=C(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),g=C(()=>h.value.aspect||d.value/f.value||0);me(()=>e.src,()=>{v(c.value!=="idle")}),me(g,(E,O)=>{!E&&O&&u.value&&b(u.value)}),ka(()=>v());function v(E){if(!(e.eager&&E)&&!(Wg&&!E&&!e.eager)){if(c.value="loading",h.value.lazySrc){const O=new Image;O.src=h.value.lazySrc,b(O,null)}h.value.src&&je(()=>{n("loadstart",u.value?.currentSrc||h.value.src),setTimeout(()=>{if(!o.isUnmounted)if(u.value?.complete){if(u.value.naturalWidth||p(),c.value==="error")return;g.value||b(u.value,null),c.value==="loading"&&m()}else g.value||b(u.value),y()})})}}function m(){o.isUnmounted||(y(),b(u.value),c.value="loaded",n("load",u.value?.currentSrc||h.value.src))}function p(){o.isUnmounted||(c.value="error",n("error",u.value?.currentSrc||h.value.src))}function y(){const E=u.value;E&&(l.value=E.currentSrc||E.src)}let _=-1;Ht(()=>{clearTimeout(_)});function b(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const N=()=>{if(clearTimeout(_),o.isUnmounted)return;const{naturalHeight:L,naturalWidth:H}=E;L||H?(d.value=H,f.value=L):!E.complete&&c.value==="loading"&&O!=null?_=window.setTimeout(N,O):(E.currentSrc.endsWith(".svg")||E.currentSrc.startsWith("data:image/svg+xml"))&&(d.value=1,f.value=1)};N()}const S=U(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),x=()=>{if(!h.value.src||c.value==="idle")return null;const E=A("img",{class:se(["v-img__img",S.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:h.value.src,srcset:h.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:u,onLoad:m,onError:p},null),O=i.sources?.();return w(vn,{transition:e.transition,appear:!0},{default:()=>[_t(O?A("picture",{class:"v-img__picture"},[O,E]):E,[[hi,c.value==="loaded"]])]})},I=()=>w(vn,{transition:e.transition},{default:()=>[h.value.lazySrc&&c.value!=="loaded"&&A("img",{class:se(["v-img__img","v-img__img--preload",S.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:h.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),T=()=>i.placeholder?w(vn,{transition:e.transition,appear:!0},{default:()=>[(c.value==="loading"||c.value==="error"&&!i.error)&&A("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,k=()=>i.error?w(vn,{transition:e.transition,appear:!0},{default:()=>[c.value==="error"&&A("div",{class:"v-img__error"},[i.error()])]}):null,P=()=>e.gradient?A("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,D=he(!1);{const E=me(g,O=>{O&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{D.value=!0})}),E())})}return oe(()=>{const E=eh.filterProps(e);return _t(w(eh,ne({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!D.value},s.value,a.value,e.class],style:[{width:we(e.width==="auto"?d.value:e.width)},r.value,e.style]},E,{aspectRatio:g.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>A(Ae,null,[w(x,null,null),w(I,null,null),w(P,null,null),w(T,null,null),w(k,null,null)]),default:i.default}),[[di,{handler:v,options:e.options},null,{once:!0}]])}),{currentSrc:l,image:u,state:c,naturalWidth:d,naturalHeight:f}}}),An=j({border:[Boolean,Number,String]},"border");function Pn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ni();return{borderClasses:C(()=>{const i=e.border;return i===!0||i===""?`${t}--border`:typeof i=="string"||i===0?String(i).split(" ").map(s=>`border-${s}`):[]})}}const Ot=j({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function jt(e){return{elevationClasses:U(()=>{const n=Rt(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const Z6=[null,"prominent","default","comfortable","compact"],XS=j({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Z6.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...An(),...Ce(),...Ot(),...gt(),...Ne({tag:"header"}),...Xe()},"VToolbar"),th=ie()({name:"VToolbar",props:XS(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:s}=Ge(()=>e.color),{borderClasses:r}=Pn(e),{elevationClasses:a}=jt(e),{roundedClasses:o}=xt(e),{themeClasses:l}=Ze(e),{rtlClasses:u}=Mt(),c=he(e.extended===null?!!n.extension?.():e.extended),d=C(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),f=C(()=>c.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return wt({VBtn:{variant:"text"}}),oe(()=>{const h=!!(e.title||n.title),g=!!(n.image||e.image),v=n.extension?.();return c.value=e.extended===null?!!v:e.extended,w(e.tag,{class:se(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},i.value,r.value,a.value,o.value,l.value,u.value,e.class]),style:pe([s.value,e.style])},{default:()=>[g&&A("div",{key:"image",class:"v-toolbar__image"},[n.image?w(Be,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):w(Ji,{key:"image-img",cover:!0,src:e.image},null)]),w(Be,{defaults:{VTabs:{height:we(d.value)}}},{default:()=>[A("div",{class:"v-toolbar__content",style:{height:we(d.value)}},[n.prepend&&A("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),h&&w(rm,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&A("div",{class:"v-toolbar__append"},[n.append?.()])])]}),w(Be,{defaults:{VTabs:{height:we(f.value)}}},{default:()=>[w(Au,null,{default:()=>[c.value&&A("div",{class:"v-toolbar__extension",style:{height:we(f.value)}},[v])]})]})]})}),{contentHeight:d,extensionHeight:f}}}),G6=j({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Q6(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let i=0,s=0;const r=le(null),a=he(0),o=he(0),l=he(0),u=he(!1),c=he(!1),d=C(()=>Number(e.scrollThreshold)),f=C(()=>at((d.value-a.value)/d.value||0)),h=()=>{const g=r.value;if(!g||n&&!n.value)return;i=a.value,a.value="window"in g?g.pageYOffset:g.scrollTop;const v=g instanceof Window?document.documentElement.scrollHeight:g.scrollHeight;if(s!==v){s=v;return}c.value=a.value<i,l.value=Math.abs(a.value-d.value)};return me(c,()=>{o.value=o.value||a.value}),me(u,()=>{o.value=0}),Wt(()=>{me(()=>e.scrollTarget,g=>{const v=g?document.querySelector(g):window;v&&v!==r.value&&(r.value?.removeEventListener("scroll",h),r.value=v,r.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),Ht(()=>{r.value?.removeEventListener("scroll",h)}),n&&me(n,h,{immediate:!0}),{scrollThreshold:d,currentScroll:a,currentThreshold:l,isScrollActive:u,scrollRatio:f,isScrollingUp:c,savedScroll:o}}function Sr(){const e=he(!1);return Wt(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:U(()=>e.value?void 0:{transition:"none !important"}),isBooted:Aa(e)}}const J6=j({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...XS(),...wr(),...G6(),height:{type:[Number,String],default:64}},"VAppBar"),eU=ie()({name:"VAppBar",props:J6(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=le(),s=Re(e,"modelValue"),r=C(()=>{const y=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:y.has("hide"),fullyHide:y.has("fully-hide"),inverted:y.has("inverted"),collapse:y.has("collapse"),elevate:y.has("elevate"),fadeImage:y.has("fade-image")}}),a=C(()=>{const y=r.value;return y.hide||y.fullyHide||y.inverted||y.collapse||y.elevate||y.fadeImage||!s.value}),{currentScroll:o,scrollThreshold:l,isScrollingUp:u,scrollRatio:c}=Q6(e,{canScroll:a}),d=U(()=>r.value.hide||r.value.fullyHide),f=C(()=>e.collapse||r.value.collapse&&(r.value.inverted?c.value>0:c.value===0)),h=C(()=>e.flat||r.value.fullyHide&&!s.value||r.value.elevate&&(r.value.inverted?o.value>0:o.value===0)),g=C(()=>r.value.fadeImage?r.value.inverted?1-c.value:c.value:void 0),v=C(()=>{if(r.value.hide&&r.value.inverted)return 0;const y=i.value?.contentHeight??0,_=i.value?.extensionHeight??0;return d.value?o.value<l.value||r.value.fullyHide?y+_:y:y+_});en(()=>!!e.scrollBehavior,()=>{ht(()=>{d.value?r.value.inverted?s.value=o.value>l.value:s.value=u.value||o.value<l.value:s.value=!0})});const{ssrBootStyles:m}=Sr(),{layoutItemStyles:p}=xr({id:e.name,order:C(()=>parseInt(e.order,10)),position:U(()=>e.location),layoutSize:v,elementSize:he(void 0),active:s,absolute:U(()=>e.absolute)});return oe(()=>{const y=th.filterProps(e);return w(th,ne({ref:i,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...p.value,"--v-toolbar-image-opacity":g.value,height:void 0,...m.value},e.style]},y,{collapse:f.value,flat:h.value}),n)}),{}}}),tU=[null,"default","comfortable","compact"],Vt=j({density:{type:String,default:"default",validator:e=>tU.includes(e)}},"density");function _n(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ni();return{densityClasses:U(()=>`${t}--density-${e.density}`)}}const nU=["elevated","flat","tonal","outlined","text","plain"];function Os(e,t){return A(Ae,null,[e&&A("span",{key:"overlay",class:se(`${t}__overlay`)},null),A("span",{key:"underlay",class:se(`${t}__underlay`)},null)])}const ii=j({color:String,variant:{type:String,default:"elevated",validator:e=>nU.includes(e)}},"variant");function Tr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ni();const n=U(()=>{const{variant:r}=zn(e);return`${t}--variant-${r}`}),{colorClasses:i,colorStyles:s}=cm(()=>{const{variant:r,color:a}=zn(e);return{[["elevated","flat"].includes(r)?"background":"text"]:a}});return{colorClasses:i,colorStyles:s,variantClasses:n}}const YS=j({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...An(),...Ce(),...Vt(),...Ot(),...gt(),...Ne(),...Xe(),...ii()},"VBtnGroup"),nh=ie()({name:"VBtnGroup",props:YS(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ze(e),{densityClasses:s}=_n(e),{borderClasses:r}=Pn(e),{elevationClasses:a}=jt(e),{roundedClasses:o}=xt(e);wt({VBtn:{height:U(()=>e.direction==="horizontal"?"auto":null),baseColor:U(()=>e.baseColor),color:U(()=>e.color),density:U(()=>e.density),flat:!0,variant:U(()=>e.variant)}}),oe(()=>w(e.tag,{class:se(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},i.value,r.value,s.value,a.value,o.value,e.class]),style:pe(e.style)},n))}}),Ar=j({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Cr=j({value:null,disabled:Boolean,selectedClass:String},"group-item");function kr(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=At("useGroupItem");if(!i)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const s=yn();dt(Symbol.for(`${t.description}:id`),s);const r=He(t,null);if(!r){if(!n)return r;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const a=U(()=>e.value),o=C(()=>!!(r.disabled.value||e.disabled));r.register({id:s,value:a,disabled:o},i),Ht(()=>{r.unregister(s)});const l=C(()=>r.isSelected(s)),u=C(()=>r.items.value[0].id===s),c=C(()=>r.items.value[r.items.value.length-1].id===s),d=C(()=>l.value&&[r.selectedClass.value,e.selectedClass]);return me(l,f=>{i.emit("group:selected",{value:f})},{flush:"sync"}),{id:s,isSelected:l,isFirst:u,isLast:c,toggle:()=>r.select(s,!l.value),select:f=>r.select(s,f),selectedClass:d,value:a,disabled:o,group:r}}function Ds(e,t){let n=!1;const i=qt([]),s=Re(e,"modelValue",[],f=>f==null?[]:KS(i,bt(f)),f=>{const h=sU(i,f);return e.multiple?h:h[0]}),r=At("useGroup");function a(f,h){const g=f,v=Symbol.for(`${t.description}:id`),p=Gr(v,r?.vnode).indexOf(h);En(g.value)==null&&(g.value=p,g.useIndexAsValue=!0),p>-1?i.splice(p,0,g):i.push(g)}function o(f){if(n)return;l();const h=i.findIndex(g=>g.id===f);i.splice(h,1)}function l(){const f=i.find(h=>!h.disabled);f&&e.mandatory==="force"&&!s.value.length&&(s.value=[f.id])}Wt(()=>{l()}),Ht(()=>{n=!0}),Hh(()=>{for(let f=0;f<i.length;f++)i[f].useIndexAsValue&&(i[f].value=f)});function u(f,h){const g=i.find(v=>v.id===f);if(!(h&&g?.disabled))if(e.multiple){const v=s.value.slice(),m=v.findIndex(y=>y===f),p=~m;if(h=h??!p,p&&e.mandatory&&v.length<=1||!p&&e.max!=null&&v.length+1>e.max)return;m<0&&h?v.push(f):m>=0&&!h&&v.splice(m,1),s.value=v}else{const v=s.value.includes(f);if(e.mandatory&&v||!v&&!h)return;s.value=h??!v?[f]:[]}}function c(f){if(e.multiple,s.value.length){const h=s.value[0],g=i.findIndex(p=>p.id===h);let v=(g+f)%i.length,m=i[v];for(;m.disabled&&v!==g;)v=(v+f)%i.length,m=i[v];if(m.disabled)return;s.value=[i[v].id]}else{const h=i.find(g=>!g.disabled);h&&(s.value=[h.id])}}const d={register:a,unregister:o,selected:s,select:u,disabled:U(()=>e.disabled),prev:()=>c(i.length-1),next:()=>c(1),isSelected:f=>s.value.includes(f),selectedClass:U(()=>e.selectedClass),items:U(()=>i),getItemIndex:f=>iU(i,f)};return dt(t,d),d}function iU(e,t){const n=KS(e,[t]);return n.length?e.findIndex(i=>i.id===n[0]):-1}function KS(e,t){const n=[];return t.forEach(i=>{const s=e.find(a=>$t(i,a.value)),r=e[i];s?.value!=null?n.push(s.id):r?.useIndexAsValue&&n.push(r.id)}),n}function sU(e,t){const n=[];return t.forEach(i=>{const s=e.findIndex(r=>r.id===i);if(~s){const r=e[s];n.push(r.value!=null?r.value:s)}}),n}const um=Symbol.for("vuetify:v-btn-toggle"),rU=j({...YS(),...Ar()},"VBtnToggle"),aU=ie()({name:"VBtnToggle",props:rU(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,next:s,prev:r,select:a,selected:o}=Ds(e,um);return oe(()=>{const l=nh.filterProps(e);return w(nh,ne({class:["v-btn-toggle",e.class]},l,{style:e.style}),{default:()=>[n.default?.({isSelected:i,next:s,prev:r,select:a,selected:o})]})}),{next:s,prev:r,select:a}}}),oU=["x-small","small","default","large","x-large"],Bi=j({size:{type:[String,Number],default:"default"}},"size");function Pa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ni();return Xg(()=>{const n=e.size;let i,s;return Vc(oU,n)?i=`${t}--size-${n}`:n&&(s={width:we(n),height:we(n)}),{sizeClasses:i,sizeStyles:s}})}const lU=j({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:Pe,opacity:[String,Number],...Ce(),...Bi(),...Ne({tag:"i"}),...Xe()},"VIcon"),Ye=ie()({name:"VIcon",props:lU(),setup(e,t){let{attrs:n,slots:i}=t;const s=he(),{themeClasses:r}=sm(),{iconData:a}=w6(()=>s.value||e.icon),{sizeClasses:o}=Pa(e),{textColorClasses:l,textColorStyles:u}=Qt(()=>e.color);return oe(()=>{const c=i.default?.();c&&(s.value=oS(c).filter(f=>f.type===qo&&f.children&&typeof f.children=="string")[0]?.children);const d=!!(n.onClick||n.onClickOnce);return w(a.value.component,{tag:e.tag,icon:a.value.icon,class:se(["v-icon","notranslate",r.value,o.value,l.value,{"v-icon--clickable":d,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:pe([{"--v-icon-opacity":e.opacity},o.value?void 0:{fontSize:we(e.size),height:we(e.size),width:we(e.size)},u.value,e.style]),role:d?"button":void 0,"aria-hidden":!d,tabindex:d?e.disabled?-1:0:void 0},{default:()=>[c]})}),{}}});function al(e,t){const n=le(),i=he(!1);if(Wg){const s=new IntersectionObserver(r=>{i.value=!!r.find(a=>a.isIntersecting)},t);Ft(()=>{s.disconnect()}),me(n,(r,a)=>{a&&(s.unobserve(a),i.value=!1),r&&s.observe(r)},{flush:"post"})}return{intersectionRef:n,isIntersecting:i}}const cU=j({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Ce(),...Bi(),...Ne({tag:"div"}),...Xe()},"VProgressCircular"),cr=ie()({name:"VProgressCircular",props:cU(),setup(e,t){let{slots:n}=t;const i=20,s=2*Math.PI*i,r=le(),{themeClasses:a}=Ze(e),{sizeClasses:o,sizeStyles:l}=Pa(e),{textColorClasses:u,textColorStyles:c}=Qt(()=>e.color),{textColorClasses:d,textColorStyles:f}=Qt(()=>e.bgColor),{intersectionRef:h,isIntersecting:g}=al(),{resizeRef:v,contentRect:m}=ei(),p=U(()=>at(parseFloat(e.modelValue),0,100)),y=U(()=>Number(e.width)),_=U(()=>l.value?Number(e.size):m.value?m.value.width:Math.max(y.value,32)),b=U(()=>i/(1-y.value/_.value)*2),S=U(()=>y.value/_.value*b.value),x=U(()=>we((100-p.value)/100*s));return ht(()=>{h.value=r.value,v.value=r.value}),oe(()=>w(e.tag,{ref:r,class:se(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":g.value,"v-progress-circular--disable-shrink":e.indeterminate&&(e.indeterminate==="disable-shrink"||Qi())},a.value,o.value,u.value,e.class]),style:pe([l.value,c.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:p.value},{default:()=>[A("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${b.value} ${b.value}`},[A("circle",{class:se(["v-progress-circular__underlay",d.value]),style:pe(f.value),fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":S.value,"stroke-dasharray":s,"stroke-dashoffset":0},null),A("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":S.value,"stroke-dasharray":s,"stroke-dashoffset":x.value},null)]),n.default&&A("div",{class:"v-progress-circular__content"},[n.default({value:p.value})])]})),{}}}),B_={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},ss=j({location:String},"location");function Er(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:i}=Mt();return{locationStyles:C(()=>{if(!e.location)return{};const{side:r,align:a}=Xf(e.location.split(" ").length>1?e.location:`${e.location} center`,i.value);function o(u){return n?n(u):0}const l={};return r!=="center"&&(t?l[B_[r]]=`calc(100% - ${o(r)}px)`:l[r]=0),a!=="center"?t?l[B_[a]]=`calc(100% - ${o(a)}px)`:l[a]=0:(r==="center"?l.top=l.left="50%":l[{top:"left",bottom:"left",left:"top",right:"top"}[r]]="50%",l.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[r]),l})}}const uU=j({chunkCount:{type:[Number,String],default:null},chunkWidth:{type:[Number,String],default:null},chunkGap:{type:[Number,String],default:4}},"chunks");function dU(e,t){const n=U(()=>!!e.chunkCount||!!e.chunkWidth),i=C(()=>{const o=zn(t);if(!o)return 0;if(!e.chunkCount)return Number(e.chunkWidth);const l=Number(e.chunkCount);return(o-Number(e.chunkGap)*(l-1))/l}),s=U(()=>Number(e.chunkGap)),r=C(()=>{if(!n.value)return{};const o=we(s.value),l=we(i.value);return{maskRepeat:"repeat-x",maskImage:`linear-gradient(90deg, #000, #000 ${l}, transparent ${l}, transparent)`,maskSize:`calc(${l} + ${o}) 100%`}});function a(o){const l=zn(t);if(!l)return o;const u=100*s.value/l,c=100*(i.value+s.value)/l,d=Math.floor((o+u)/c);return at(0,d*c-u/2,100)}return{hasChunks:n,chunksMaskStyles:r,snapValueToChunk:a}}const fU=j({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...uU(),...Ce(),...ss({location:"top"}),...gt(),...Ne(),...Xe()},"VProgressLinear"),Cu=ie()({name:"VProgressLinear",props:fU(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=le(),s=Re(e,"modelValue"),{isRtl:r,rtlClasses:a}=Mt(),{themeClasses:o}=Ze(e),{locationStyles:l}=Er(e),{textColorClasses:u,textColorStyles:c}=Qt(()=>e.color),{backgroundColorClasses:d,backgroundColorStyles:f}=Ge(()=>e.bgColor||e.color),{backgroundColorClasses:h,backgroundColorStyles:g}=Ge(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:v,backgroundColorStyles:m}=Ge(()=>e.color),{roundedClasses:p}=xt(e),{intersectionRef:y,isIntersecting:_}=al(),b=C(()=>parseFloat(e.max)),S=C(()=>parseFloat(e.height)),x=C(()=>at(parseFloat(e.bufferValue)/b.value*100,0,100)),I=C(()=>at(parseFloat(s.value)/b.value*100,0,100)),T=C(()=>r.value!==e.reverse),k=C(()=>e.indeterminate?"fade-transition":"slide-x-transition"),P=he(0),{hasChunks:D,chunksMaskStyles:E,snapValueToChunk:O}=dU(e,P);en(D,()=>{const{resizeRef:G}=ei(z=>P.value=z[0].contentRect.width);ht(()=>G.value=i.value)});const N=C(()=>D.value?O(x.value):x.value),L=C(()=>D.value?O(I.value):I.value);function H(G){if(!y.value)return;const{left:z,right:$,width:B}=y.value.getBoundingClientRect(),W=T.value?B-G.clientX+($-B):G.clientX-z;s.value=Math.round(W/B*b.value)}return ht(()=>{y.value=i.value}),oe(()=>w(e.tag,{ref:i,class:se(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&_.value,"v-progress-linear--reverse":T.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},p.value,o.value,a.value,e.class]),style:pe([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?we(S.value):0,"--v-progress-linear-height":we(S.value),...e.absolute?l.value:{}},E.value,e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(s.value),b.value),onClick:e.clickable&&H},{default:()=>[e.stream&&A("div",{key:"stream",class:se(["v-progress-linear__stream",u.value]),style:{...c.value,[T.value?"left":"right"]:we(-S.value),borderTop:`${we(S.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${we(S.value/4)})`,width:we(100-x.value,"%"),"--v-progress-linear-stream-to":we(S.value*(T.value?1:-1))}},null),A("div",{class:se(["v-progress-linear__background",d.value]),style:pe([f.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),A("div",{class:se(["v-progress-linear__buffer",h.value]),style:pe([g.value,{opacity:parseFloat(e.bufferOpacity),width:we(N.value,"%")}])},null),w(Cs,{name:k.value},{default:()=>[e.indeterminate?A("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(G=>A("div",{key:G,class:se(["v-progress-linear__indeterminate",G,v.value]),style:pe(m.value)},null))]):A("div",{class:se(["v-progress-linear__determinate",v.value]),style:pe([m.value,{width:we(L.value,"%")}])},null)]}),n.default&&A("div",{class:"v-progress-linear__content"},[n.default({value:I.value,buffer:x.value})])]})),{}}}),ku=j({loading:[Boolean,String]},"loader");function ol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ni();return{loaderClasses:U(()=>({[`${t}--loading`]:e.loading}))}}function ll(e,t){let{slots:n}=t;return A("div",{class:se(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||w(Cu,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const hU=["static","relative","fixed","absolute","sticky"],Ra=j({position:{type:String,validator:e=>hU.includes(e)}},"position");function Ma(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ni();return{positionClasses:U(()=>e.position?`${t}--${e.position}`:void 0)}}function gU(){const e=At("useRoute");return C(()=>e?.proxy?.$route)}function qS(){return At("useRouter")?.proxy?.$router}function cl(e,t){const n=RC("RouterLink"),i=U(()=>!!(e.href||e.to)),s=C(()=>i?.value||s_(t,"click")||s_(e,"click"));if(typeof n=="string"||!("useLink"in n)){const c=U(()=>e.href);return{isLink:i,isClickable:s,href:c,linkProps:qt({href:c})}}const r=n.useLink({to:U(()=>e.to||""),replace:U(()=>e.replace)}),a=C(()=>e.to?r:void 0),o=gU(),l=C(()=>a.value?e.exact?o.value?a.value.isExactActive?.value&&$t(a.value.route.value.query,o.value.query):a.value.isExactActive?.value??!1:a.value.isActive?.value??!1:!1),u=C(()=>e.to?a.value?.route.value.href:e.href);return{isLink:i,isClickable:s,isActive:l,route:a.value?.route,navigate:a.value?.navigate,href:u,linkProps:qt({href:u,"aria-current":U(()=>l.value?"page":void 0)})}}const ul=j({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let jd=!1;function mU(e,t){let n=!1,i,s;qe&&e?.beforeEach&&(je(()=>{window.addEventListener("popstate",r),i=e.beforeEach((a,o,l)=>{jd?n?t(l):l():setTimeout(()=>n?t(l):l()),jd=!0}),s=e?.afterEach(()=>{jd=!1})}),Ft(()=>{window.removeEventListener("popstate",r),i?.(),s?.()}));function r(a){a.state?.replaced||(n=!0,setTimeout(()=>n=!1))}}function vU(e,t){me(()=>e.isActive?.value,n=>{e.isLink.value&&n!=null&&t&&je(()=>{t(n)})},{immediate:!0})}const ih=Symbol("rippleStop"),pU=80;function F_(e,t){e.style.transform=t,e.style.webkitTransform=t}function sh(e){return e.constructor.name==="TouchEvent"}function ZS(e){return e.constructor.name==="KeyboardEvent"}const yU=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=0,s=0;if(!ZS(e)){const d=t.getBoundingClientRect(),f=sh(e)?e.touches[e.touches.length-1]:e;i=f.clientX-d.left,s=f.clientY-d.top}let r=0,a=.3;t._ripple?.circle?(a=.15,r=t.clientWidth/2,r=n.center?r:r+Math.sqrt((i-r)**2+(s-r)**2)/4):r=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const o=`${(t.clientWidth-r*2)/2}px`,l=`${(t.clientHeight-r*2)/2}px`,u=n.center?o:`${i-r}px`,c=n.center?l:`${s-r}px`;return{radius:r,scale:a,x:u,y:c,centerX:o,centerY:l}},Xc={show(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t?._ripple?.enabled)return;const i=document.createElement("span"),s=document.createElement("span");i.appendChild(s),i.className="v-ripple__container",n.class&&(i.className+=` ${n.class}`);const{radius:r,scale:a,x:o,y:l,centerX:u,centerY:c}=yU(e,t,n),d=`${r*2}px`;s.className="v-ripple__animation",s.style.width=d,s.style.height=d,t.appendChild(i);const f=window.getComputedStyle(t);f&&f.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),F_(s,`translate(${o}, ${l}) scale3d(${a},${a},${a})`),s.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),F_(s,`translate(${u}, ${c}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=Array.from(t).findLast(r=>!r.dataset.isHiding);if(n)n.dataset.isHiding="true";else return;const i=performance.now()-Number(n.dataset.activated),s=Math.max(250-i,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},s)}};function GS(e){return typeof e>"u"||!!e}function Vo(e){const t={},n=e.currentTarget;if(!(!n?._ripple||n._ripple.touched||e[ih])){if(e[ih]=!0,sh(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||ZS(e),n._ripple.class&&(t.class=n._ripple.class),sh(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{Xc.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},pU)}else Xc.show(e,n,t)}}function V_(e){e[ih]=!0}function Bn(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{Bn(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),Xc.hide(t)}}function QS(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let Lo=!1;function L_(e,t){!Lo&&t.includes(e.key)&&(Lo=!0,Vo(e))}function JS(e){Lo=!1,Bn(e)}function eT(e){Lo&&(Lo=!1,Bn(e))}function tT(e,t,n){const{value:i,modifiers:s}=t,r=GS(i);r||Xc.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=r,e._ripple.centered=s.center,e._ripple.circle=s.circle;const a=Po(i)?i:{};a.class&&(e._ripple.class=a.class);const o=a.keys??["Enter","Space"];if(e._ripple.keyDownHandler=l=>L_(l,o),r&&!n){if(s.stop){e.addEventListener("touchstart",V_,{passive:!0}),e.addEventListener("mousedown",V_);return}e.addEventListener("touchstart",Vo,{passive:!0}),e.addEventListener("touchend",Bn,{passive:!0}),e.addEventListener("touchmove",QS,{passive:!0}),e.addEventListener("touchcancel",Bn),e.addEventListener("mousedown",Vo),e.addEventListener("mouseup",Bn),e.addEventListener("mouseleave",Bn),e.addEventListener("keydown",l=>L_(l,o)),e.addEventListener("keyup",JS),e.addEventListener("blur",eT),e.addEventListener("dragstart",Bn,{passive:!0})}else!r&&n&&nT(e)}function nT(e){e.removeEventListener("mousedown",Vo),e.removeEventListener("touchstart",Vo),e.removeEventListener("touchend",Bn),e.removeEventListener("touchmove",QS),e.removeEventListener("touchcancel",Bn),e.removeEventListener("mouseup",Bn),e.removeEventListener("mouseleave",Bn),e._ripple?.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",JS),e.removeEventListener("dragstart",Bn),e.removeEventListener("blur",eT)}function _U(e,t){tT(e,t,!1)}function bU(e){nT(e),delete e._ripple}function wU(e,t){if(t.value===t.oldValue)return;const n=GS(t.oldValue);tT(e,t,n)}const pn={mounted:_U,unmounted:bU,updated:wU},Eu=j({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:um},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Pe,appendIcon:Pe,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,spaced:String,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...An(),...Ce(),...Vt(),...It(),...Ot(),...Cr(),...ku(),...ss(),...Ra(),...gt(),...ul(),...Bi(),...Ne({tag:"button"}),...Xe(),...ii({variant:"elevated"})},"VBtn"),We=ie()({name:"VBtn",props:Eu(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:s}=Ze(e),{borderClasses:r}=Pn(e),{densityClasses:a}=_n(e),{dimensionStyles:o}=Pt(e),{elevationClasses:l}=jt(e),{loaderClasses:u}=ol(e),{locationStyles:c}=Er(e),{positionClasses:d}=Ma(e),{roundedClasses:f}=xt(e),{sizeClasses:h,sizeStyles:g}=Pa(e),v=kr(e,e.symbol,!1),m=cl(e,n),p=C(()=>e.active!==void 0?e.active:m.isLink.value?m.isActive?.value:v?.isSelected.value),y=U(()=>p.value?e.activeColor??e.color:e.color),_=C(()=>({color:v?.isSelected.value&&(!m.isLink.value||m.isActive?.value)||!v||m.isActive?.value?y.value??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:b,colorStyles:S,variantClasses:x}=Tr(_),I=C(()=>v?.disabled.value||e.disabled),T=U(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),k=C(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function P(D){I.value||m.isLink.value&&(D.metaKey||D.ctrlKey||D.shiftKey||D.button!==0||n.target==="_blank")||(m.navigate?.(D),v?.toggle())}return vU(m,v?.select),oe(()=>{const D=m.isLink.value?"a":e.tag,E=!!(e.prependIcon||i.prepend),O=!!(e.appendIcon||i.append),N=!!(e.icon&&e.icon!==!0);return _t(w(D,ne({type:D==="a"?void 0:"button",class:["v-btn",v?.selectedClass.value,{"v-btn--active":p.value,"v-btn--block":e.block,"v-btn--disabled":I.value,"v-btn--elevated":T.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},e.spaced?["v-btn--spaced",`v-btn--spaced-${e.spaced}`]:[],s.value,r.value,b.value,a.value,l.value,u.value,d.value,f.value,h.value,x.value,e.class],style:[S.value,o.value,c.value,g.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:I.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:P,value:k.value},m.linkProps),{default:()=>[Os(!0,"v-btn"),!e.icon&&E&&A("span",{key:"prepend",class:"v-btn__prepend"},[i.prepend?w(Be,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},i.prepend):w(Ye,{key:"prepend-icon",icon:e.prependIcon},null)]),A("span",{class:"v-btn__content","data-no-activator":""},[!i.default&&N?w(Ye,{key:"content-icon",icon:e.icon},null):w(Be,{key:"content-defaults",disabled:!N,defaults:{VIcon:{icon:e.icon}}},{default:()=>[i.default?.()??cn(e.text)]})]),!e.icon&&O&&A("span",{key:"append",class:"v-btn__append"},[i.append?w(Be,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},i.append):w(Ye,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&A("span",{key:"loader",class:"v-btn__loader"},[i.loader?.()??w(cr,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[pn,!I.value&&e.ripple,"",{center:!!e.icon}]])}),{group:v}}}),xU=j({...Qe(Eu({icon:"$menu",variant:"text"}),["spaced"])},"VAppBarNavIcon"),SU=ie()({name:"VAppBarNavIcon",props:xU(),setup(e,t){let{slots:n}=t;return oe(()=>w(We,ne(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),TU=ie()({name:"VAppBarTitle",props:US(),setup(e,t){let{slots:n}=t;return oe(()=>w(rm,ne(e,{class:"v-app-bar-title"}),n)),{}}}),iT=is("v-alert-title"),AU=j({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function CU(e,t){return{iconSize:C(()=>{const i=new Map(e.iconSizes),s=e.iconSize??t()??"default";return i.has(s)?i.get(s):s})}}const kU=["success","info","warning","error"],EU=j({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Pe,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>kU.includes(e)},...Ce(),...Vt(),...It(),...Ot(),...AU(),...ss(),...Ra(),...gt(),...Ne(),...Xe(),...ii({variant:"flat"})},"VAlert"),IU=ie()({name:"VAlert",props:EU(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const s=Re(e,"modelValue"),r=U(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:a}=CU(e,()=>e.prominent?44:void 0),{themeClasses:o}=Ze(e),{colorClasses:l,colorStyles:u,variantClasses:c}=Tr(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:d}=_n(e),{dimensionStyles:f}=Pt(e),{elevationClasses:h}=jt(e),{locationStyles:g}=Er(e),{positionClasses:v}=Ma(e),{roundedClasses:m}=xt(e),{textColorClasses:p,textColorStyles:y}=Qt(()=>e.borderColor),{t:_}=nt(),b=U(()=>({"aria-label":_(e.closeLabel),onClick(S){s.value=!1,n("click:close",S)}}));return()=>{const S=!!(i.prepend||r.value),x=!!(i.title||e.title),I=!!(i.close||e.closable),T={density:e.density,icon:r.value,size:e.iconSize||e.prominent?a.value:void 0};return s.value&&w(e.tag,{class:se(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},o.value,l.value,d.value,h.value,v.value,m.value,c.value,e.class]),style:pe([u.value,f.value,g.value,e.style]),role:"alert"},{default:()=>[Os(!1,"v-alert"),e.border&&A("div",{key:"border",class:se(["v-alert__border",p.value]),style:pe(y.value)},null),S&&A("div",{key:"prepend",class:"v-alert__prepend"},[i.prepend?w(Be,{key:"prepend-defaults",disabled:!r.value,defaults:{VIcon:{...T}}},i.prepend):w(Ye,ne({key:"prepend-icon"},T),null)]),A("div",{class:"v-alert__content"},[x&&w(iT,{key:"title"},{default:()=>[i.title?.()??e.title]}),i.text?.()??e.text,i.default?.()]),i.append&&A("div",{key:"append",class:"v-alert__append"},[i.append()]),I&&A("div",{key:"close",class:"v-alert__close"},[i.close?w(Be,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[i.close?.({props:b.value})]}):w(We,ne({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},b.value),null)])]})}}}),PU=j({start:Boolean,end:Boolean,icon:Pe,image:String,text:String,...An(),...Ce(),...Vt(),...gt(),...Bi(),...Ne(),...Xe(),...ii({variant:"flat"})},"VAvatar"),Wn=ie()({name:"VAvatar",props:PU(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ze(e),{borderClasses:s}=Pn(e),{colorClasses:r,colorStyles:a,variantClasses:o}=Tr(e),{densityClasses:l}=_n(e),{roundedClasses:u}=xt(e),{sizeClasses:c,sizeStyles:d}=Pa(e);return oe(()=>w(e.tag,{class:se(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},i.value,s.value,r.value,l.value,u.value,c.value,o.value,e.class]),style:pe([a.value,d.value,e.style])},{default:()=>[n.default?w(Be,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?w(Ji,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?w(Ye,{key:"icon",icon:e.icon},null):e.text,Os(!1,"v-avatar")]})),{}}}),RU=j({text:String,onClick:Gt(),...Ce(),...Xe()},"VLabel"),Oa=ie()({name:"VLabel",props:RU(),setup(e,t){let{slots:n}=t;return oe(()=>A("label",{class:se(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:pe(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),sT=Symbol.for("vuetify:selection-control-group"),dm=j({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Pe,trueIcon:Pe,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:$t},...Ce(),...Vt(),...Xe()},"SelectionControlGroup"),MU=j({...dm({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),rT=ie()({name:"VSelectionControlGroup",props:MU(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"modelValue"),s=yn(),r=U(()=>e.id||`v-selection-control-group-${s}`),a=U(()=>e.name||r.value),o=new Set;return dt(sT,{modelValue:i,forceUpdate:()=>{o.forEach(l=>l())},onForceUpdate:l=>{o.add(l),Ft(()=>{o.delete(l)})}}),wt({[e.defaultsTarget]:{color:U(()=>e.color),disabled:U(()=>e.disabled),density:U(()=>e.density),error:U(()=>e.error),inline:U(()=>e.inline),modelValue:i,multiple:U(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),name:a,falseIcon:U(()=>e.falseIcon),trueIcon:U(()=>e.trueIcon),readonly:U(()=>e.readonly),ripple:U(()=>e.ripple),type:U(()=>e.type),valueComparator:U(()=>e.valueComparator)}}),oe(()=>A("div",{class:se(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:pe(e.style),role:e.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),Iu=j({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Ce(),...dm()},"VSelectionControl");function OU(e){const t=He(sT,void 0),{densityClasses:n}=_n(e),i=Re(e,"modelValue"),s=C(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),r=C(()=>e.falseValue!==void 0?e.falseValue:!1),a=C(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),o=C({get(){const h=t?t.modelValue.value:i.value;return a.value?bt(h).some(g=>e.valueComparator(g,s.value)):e.valueComparator(h,s.value)},set(h){if(e.readonly)return;const g=h?s.value:r.value;let v=g;a.value&&(v=h?[...bt(i.value),g]:bt(i.value).filter(m=>!e.valueComparator(m,s.value))),t?t.modelValue.value=v:i.value=v}}),{textColorClasses:l,textColorStyles:u}=Qt(()=>{if(!(e.error||e.disabled))return o.value?e.color:e.baseColor}),{backgroundColorClasses:c,backgroundColorStyles:d}=Ge(()=>o.value&&!e.error&&!e.disabled?e.color:e.baseColor),f=C(()=>o.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:s,falseValue:r,model:o,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,icon:f}}const Is=ie()({name:"VSelectionControl",directives:{vRipple:pn},inheritAttrs:!1,props:Iu(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{group:s,densityClasses:r,icon:a,model:o,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,trueValue:f}=OU(e),h=yn(),g=he(!1),v=he(!1),m=le(),p=U(()=>e.id||`input-${h}`),y=U(()=>!e.disabled&&!e.readonly);s?.onForceUpdate(()=>{m.value&&(m.value.checked=o.value)});function _(I){y.value&&(g.value=!0,ya(I.target,":focus-visible")!==!1&&(v.value=!0))}function b(){g.value=!1,v.value=!1}function S(I){I.stopPropagation()}function x(I){if(!y.value){m.value&&(m.value.checked=o.value);return}e.readonly&&s&&je(()=>s.forceUpdate()),o.value=I.target.checked}return oe(()=>{const I=i.label?i.label({label:e.label,props:{for:p.value}}):e.label,[T,k]=Ms(n),P=A("input",ne({ref:m,checked:o.value,disabled:!!e.disabled,id:p.value,onBlur:b,onFocus:_,onInput:x,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:f.value,name:e.name,"aria-checked":e.type==="checkbox"?o.value:void 0},k),null);return A("div",ne({class:["v-selection-control",{"v-selection-control--dirty":o.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":g.value,"v-selection-control--focus-visible":v.value,"v-selection-control--inline":e.inline},r.value,e.class]},T,{style:e.style}),[A("div",{class:se(["v-selection-control__wrapper",l.value]),style:pe(u.value)},[i.default?.({backgroundColorClasses:c,backgroundColorStyles:d}),_t(A("div",{class:se(["v-selection-control__input"])},[i.input?.({model:o,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,inputNode:P,icon:a.value,props:{onFocus:_,onBlur:b,id:p.value}})??A(Ae,null,[a.value&&w(Ye,{key:"icon",icon:a.value},null),P])]),[[pn,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),I&&w(Oa,{for:p.value,onClick:S},{default:()=>[I]})])}),{isFocused:g,input:m}}}),aT=j({indeterminate:Boolean,indeterminateIcon:{type:Pe,default:"$checkboxIndeterminate"},...Iu({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Mi=ie()({name:"VCheckboxBtn",props:aT(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"indeterminate"),s=Re(e,"modelValue");function r(l){i.value&&(i.value=!1)}const a=U(()=>i.value?e.indeterminateIcon:e.falseIcon),o=U(()=>i.value?e.indeterminateIcon:e.trueIcon);return oe(()=>{const l=Qe(Is.filterProps(e),["modelValue"]);return w(Is,ne(l,{modelValue:s.value,"onUpdate:modelValue":[u=>s.value=u,r],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:a.value,trueIcon:o.value,"aria-checked":i.value?"mixed":void 0}),n)}),{}}});function oT(e){const{t}=nt();function n(i){let{name:s,color:r,...a}=i;const o={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[s],l=e[`onClick:${s}`];function u(d){d.key!=="Enter"&&d.key!==" "||(d.preventDefault(),d.stopPropagation(),bu(l,new PointerEvent("click",d)))}const c=l&&o?t(`$vuetify.input.${o}`,e.label??""):void 0;return w(Ye,ne({icon:e[`${s}Icon`],"aria-label":c,onClick:l,onKeydown:u,color:r},a),null)}return{InputIcon:n}}const DU=j({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Ce(),...mi({transition:{component:om,leaveAbsolute:!0,group:!0}})},"VMessages"),lT=ie()({name:"VMessages",props:DU(),setup(e,t){let{slots:n}=t;const i=C(()=>bt(e.messages)),{textColorClasses:s,textColorStyles:r}=Qt(()=>e.color);return oe(()=>w(vn,{transition:e.transition,tag:"div",class:se(["v-messages",s.value,e.class]),style:pe([r.value,e.style])},{default:()=>[e.active&&i.value.map((a,o)=>A("div",{class:"v-messages__message",key:`${o}-${i.value}`},[n.message?n.message({message:a}):a]))]})),{}}}),dl=j({focused:Boolean,"onUpdate:focused":Gt()},"focus");function rs(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ni();const n=Re(e,"focused"),i=U(()=>({[`${t}--focused`]:n.value}));function s(){n.value=!0}function r(){n.value=!1}return{focusClasses:i,isFocused:n,focus:s,blur:r}}const cT=Symbol.for("vuetify:form"),NU=j({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function BU(e){const t=Re(e,"modelValue"),n=U(()=>e.disabled),i=U(()=>e.readonly),s=he(!1),r=le([]),a=le([]);async function o(){const c=[];let d=!0;a.value=[],s.value=!0;for(const f of r.value){const h=await f.validate();if(h.length>0&&(d=!1,c.push({id:f.id,errorMessages:h})),!d&&e.fastFail)break}return a.value=c,s.value=!1,{valid:d,errors:a.value}}function l(){r.value.forEach(c=>c.reset())}function u(){r.value.forEach(c=>c.resetValidation())}return me(r,()=>{let c=0,d=0;const f=[];for(const h of r.value)h.isValid===!1?(d++,f.push({id:h.id,errorMessages:h.errorMessages})):h.isValid===!0&&c++;a.value=f,t.value=d>0?!1:c===r.value.length?!0:null},{deep:!0,flush:"post"}),dt(cT,{register:c=>{let{id:d,vm:f,validate:h,reset:g,resetValidation:v}=c;r.value.some(m=>m.id===d),r.value.push({id:d,validate:h,reset:g,resetValidation:v,vm:Eb(f),isValid:null,errorMessages:[]})},unregister:c=>{r.value=r.value.filter(d=>d.id!==c)},update:(c,d,f)=>{const h=r.value.find(g=>g.id===c);h&&(h.isValid=d,h.errorMessages=f)},isDisabled:n,isReadonly:i,isValidating:s,isValid:t,items:r,validateOn:U(()=>e.validateOn)}),{errors:a,isDisabled:n,isReadonly:i,isValidating:s,isValid:t,items:r,validate:o,reset:l,resetValidation:u}}function fl(e){const t=He(cT,null);return{...t,isReadonly:C(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:C(()=>!!(e?.disabled??t?.isDisabled.value))}}const FU=Symbol.for("vuetify:rules");function VU(e){const t=He(FU,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return t?.resolve(e)??U(e)}const uT=j({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...dl()},"validation");function dT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ni(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yn();const i=Re(e,"modelValue"),s=C(()=>e.validationValue===void 0?i.value:e.validationValue),r=fl(e),a=VU(()=>e.rules),o=le([]),l=he(!0),u=C(()=>!!(bt(i.value===""?null:i.value).length||bt(s.value===""?null:s.value).length)),c=C(()=>e.errorMessages?.length?bt(e.errorMessages).concat(o.value).slice(0,Math.max(0,Number(e.maxErrors))):o.value),d=C(()=>{let b=(e.validateOn??r.validateOn?.value)||"input";b==="lazy"&&(b="input lazy"),b==="eager"&&(b="input eager");const S=new Set(b?.split(" ")??[]);return{input:S.has("input"),blur:S.has("blur")||S.has("input")||S.has("invalid-input"),invalidInput:S.has("invalid-input"),lazy:S.has("lazy"),eager:S.has("eager")}}),f=C(()=>e.error||e.errorMessages?.length?!1:e.rules.length?l.value?o.value.length||d.value.lazy?null:!0:!o.value.length:!0),h=he(!1),g=C(()=>({[`${t}--error`]:f.value===!1,[`${t}--dirty`]:u.value,[`${t}--disabled`]:r.isDisabled.value,[`${t}--readonly`]:r.isReadonly.value})),v=At("validation"),m=C(()=>e.name??En(n));ka(()=>{r.register?.({id:m.value,vm:v,validate:_,reset:p,resetValidation:y})}),Ht(()=>{r.unregister?.(m.value)}),Wt(async()=>{d.value.lazy||await _(!d.value.eager),r.update?.(m.value,f.value,c.value)}),en(()=>d.value.input||d.value.invalidInput&&f.value===!1,()=>{me(s,()=>{if(s.value!=null)_();else if(e.focused){const b=me(()=>e.focused,S=>{S||_(),b()})}})}),en(()=>d.value.blur,()=>{me(()=>e.focused,b=>{b||_()})}),me([f,c],()=>{r.update?.(m.value,f.value,c.value)});async function p(){i.value=null,await je(),await y()}async function y(){l.value=!0,d.value.lazy?o.value=[]:await _(!d.value.eager)}async function _(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const S=[];h.value=!0;for(const x of a.value){if(S.length>=Number(e.maxErrors??1))break;const T=await(typeof x=="function"?x:()=>x)(s.value);if(T!==!0){if(T!==!1&&typeof T!="string"){console.warn(`${T} is not a valid value. Rule functions must return boolean true or a string.`);continue}S.push(T||"")}}return o.value=S,h.value=!1,l.value=b,o.value}return{errorMessages:c,isDirty:u,isDisabled:r.isDisabled,isReadonly:r.isReadonly,isPristine:l,isValid:f,isValidating:h,reset:p,resetValidation:y,validate:_,validationClasses:g}}const as=j({id:String,appendIcon:Pe,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:Pe,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Gt(),"onClick:append":Gt(),...Ce(),...Vt(),...In(It(),["maxWidth","minWidth","width"]),...Xe(),...uT()},"VInput"),tn=ie()({name:"VInput",props:{...as()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i,emit:s}=t;const{densityClasses:r}=_n(e),{dimensionStyles:a}=Pt(e),{themeClasses:o}=Ze(e),{rtlClasses:l}=Mt(),{InputIcon:u}=oT(e),c=yn(),d=C(()=>e.id||`input-${c}`),{errorMessages:f,isDirty:h,isDisabled:g,isReadonly:v,isPristine:m,isValid:p,isValidating:y,reset:_,resetValidation:b,validate:S,validationClasses:x}=dT(e,"v-input",d),I=C(()=>e.errorMessages?.length||!m.value&&f.value.length?f.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages),T=U(()=>I.value.length>0),k=U(()=>!e.hideDetails||e.hideDetails==="auto"&&(T.value||!!i.details)),P=C(()=>k.value?`${d.value}-messages`:void 0),D=C(()=>({id:d,messagesId:P,isDirty:h,isDisabled:g,isReadonly:v,isPristine:m,isValid:p,isValidating:y,hasDetails:k,reset:_,resetValidation:b,validate:S})),E=U(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),O=U(()=>{if(e.iconColor)return e.iconColor===!0?E.value:e.iconColor});return oe(()=>{const N=!!(i.prepend||e.prependIcon),L=!!(i.append||e.appendIcon);return A("div",{class:se(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},r.value,o.value,l.value,x.value,e.class]),style:pe([a.value,e.style])},[N&&A("div",{key:"prepend",class:"v-input__prepend"},[i.prepend?.(D.value),e.prependIcon&&w(u,{key:"prepend-icon",name:"prepend",color:O.value},null)]),i.default&&A("div",{class:"v-input__control"},[i.default?.(D.value)]),L&&A("div",{key:"append",class:"v-input__append"},[e.appendIcon&&w(u,{key:"append-icon",name:"append",color:O.value},null),i.append?.(D.value)]),k.value&&A("div",{id:P.value,class:"v-input__details",role:"alert","aria-live":"polite"},[w(lT,{active:T.value,messages:I.value},{message:i.message}),i.details?.(D.value)])])}),{reset:_,resetValidation:b,validate:S,isValid:p,errorMessages:f}}}),Xd=Symbol("Forwarded refs");function Yd(e,t){let n=e;for(;n;){const i=Reflect.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function Xt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e[Xd]=n,new Proxy(e,{get(s,r){if(Reflect.has(s,r))return Reflect.get(s,r);if(!(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))){for(const a of n)if(a.value&&Reflect.has(a.value,r)){const o=Reflect.get(a.value,r);return typeof o=="function"?o.bind(a.value):o}}},has(s,r){if(Reflect.has(s,r))return!0;if(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))return!1;for(const a of n)if(a.value&&Reflect.has(a.value,r))return!0;return!1},set(s,r,a){if(Reflect.has(s,r))return Reflect.set(s,r,a);if(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,r))return Reflect.set(o.value,r,a);return!1},getOwnPropertyDescriptor(s,r){const a=Reflect.getOwnPropertyDescriptor(s,r);if(a)return a;if(!(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))){for(const o of n){if(!o.value)continue;const l=Yd(o.value,r)??("_"in o.value?Yd(o.value._?.setupState,r):void 0);if(l)return l}for(const o of n){const l=o.value&&o.value[Xd];if(!l)continue;const u=l.slice();for(;u.length;){const c=u.shift(),d=Yd(c.value,r);if(d)return d;const f=c.value&&c.value[Xd];f&&u.push(...f)}}}}})}const LU=j({...as(),...Qe(aT(),["inline"])},"VCheckbox"),UU=ie()({name:"VCheckbox",inheritAttrs:!1,props:LU(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const s=Re(e,"modelValue"),{isFocused:r,focus:a,blur:o}=rs(e),l=le(),u=yn();return oe(()=>{const[c,d]=Ms(n),f=tn.filterProps(e),h=Mi.filterProps(e);return w(tn,ne({ref:l,class:["v-checkbox",e.class]},c,f,{modelValue:s.value,"onUpdate:modelValue":g=>s.value=g,id:e.id||`checkbox-${u}`,focused:r.value,style:e.style}),{...i,default:g=>{let{id:v,messagesId:m,isDisabled:p,isReadonly:y,isValid:_}=g;return w(Mi,ne(h,{id:v.value,"aria-describedby":m.value,disabled:p.value,readonly:y.value},d,{error:_.value===!1,modelValue:s.value,"onUpdate:modelValue":b=>s.value=b,onFocus:a,onBlur:o}),i)}})}),Xt({},l)}});function $U(e){let{selectedElement:t,containerElement:n,isRtl:i,isHorizontal:s}=e;const r=Uo(s,n),a=fT(s,i,n),o=Uo(s,t),l=hT(s,t),u=o*.4;return a>l?l-u:a+r<l+o?l-r+o+u:a}function zU(e){let{selectedElement:t,containerElement:n,isHorizontal:i}=e;const s=Uo(i,n),r=hT(i,t),a=Uo(i,t);return r-s/2+a/2}function U_(e,t){return t?.[e?"scrollWidth":"scrollHeight"]||0}function WU(e,t){return t?.[e?"clientWidth":"clientHeight"]||0}function fT(e,t,n){if(!n)return 0;const{scrollLeft:i,offsetWidth:s,scrollWidth:r}=n;return e?t?r-s+i:i:n.scrollTop}function Uo(e,t){return t?.[e?"offsetWidth":"offsetHeight"]||0}function hT(e,t){return t?.[e?"offsetLeft":"offsetTop"]||0}const gT=Symbol.for("vuetify:v-slide-group"),fm=j({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:gT},nextIcon:{type:Pe,default:"$next"},prevIcon:{type:Pe,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Ce(),...br({mobile:null}),...Ne(),...Ar({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),$o=ie()({name:"VSlideGroup",props:fm(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:i}=Mt(),{displayClasses:s,mobile:r}=ni(e),a=Ds(e,e.symbol),o=he(!1),l=he(0),u=he(0),c=he(0),d=C(()=>e.direction==="horizontal"),{resizeRef:f,contentRect:h}=ei(),{resizeRef:g,contentRect:v}=ei(),m=g6(),p=C(()=>({container:f.el,duration:200,easing:"easeOutQuart"})),y=C(()=>a.selected.value.length?a.items.value.findIndex(X=>X.id===a.selected.value[0]):-1),_=C(()=>a.selected.value.length?a.items.value.findIndex(X=>X.id===a.selected.value[a.selected.value.length-1]):-1);if(qe){let X=-1;me(()=>[a.selected.value,h.value,v.value,d.value],()=>{cancelAnimationFrame(X),X=requestAnimationFrame(()=>{if(h.value&&v.value){const re=d.value?"width":"height";u.value=h.value[re],c.value=v.value[re],o.value=u.value+1<c.value}if(y.value>=0&&g.el){const re=g.el.children[_.value];S(re,e.centerActive)}})})}const b=he(!1);function S(X,re){let ge=0;re?ge=zU({containerElement:f.el,isHorizontal:d.value,selectedElement:X}):ge=$U({containerElement:f.el,isHorizontal:d.value,isRtl:i.value,selectedElement:X}),x(ge)}function x(X){if(!qe||!f.el)return;const re=Uo(d.value,f.el),ge=fT(d.value,i.value,f.el);if(!(U_(d.value,f.el)<=re||Math.abs(X-ge)<16)){if(d.value&&i.value&&f.el){const{scrollWidth:ye,offsetWidth:ee}=f.el;X=ye-ee-X}d.value?m.horizontal(X,p.value):m(X,p.value)}}function I(X){const{scrollTop:re,scrollLeft:ge}=X.target;l.value=d.value?ge:re}function T(X){if(b.value=!0,!(!o.value||!g.el)){for(const re of X.composedPath())for(const ge of g.el.children)if(ge===re){S(ge);return}}}function k(X){b.value=!1}let P=!1;function D(X){!P&&!b.value&&!(X.relatedTarget&&g.el?.contains(X.relatedTarget))&&L(),P=!1}function E(){P=!0}function O(X){if(!g.el)return;function re(ge){X.preventDefault(),L(ge)}d.value?X.key==="ArrowRight"?re(i.value?"prev":"next"):X.key==="ArrowLeft"&&re(i.value?"next":"prev"):X.key==="ArrowDown"?re("next"):X.key==="ArrowUp"&&re("prev"),X.key==="Home"?re("first"):X.key==="End"&&re("last")}function N(X,re){if(!X)return;let ge=X;do ge=ge?.[re==="next"?"nextElementSibling":"previousElementSibling"];while(ge?.hasAttribute("disabled"));return ge}function L(X){if(!g.el)return;let re;if(!X)re=Ro(g.el)[0];else if(X==="next"){if(re=N(g.el.querySelector(":focus"),X),!re)return L("first")}else if(X==="prev"){if(re=N(g.el.querySelector(":focus"),X),!re)return L("last")}else X==="first"?(re=g.el.firstElementChild,re?.hasAttribute("disabled")&&(re=N(re,"next"))):X==="last"&&(re=g.el.lastElementChild,re?.hasAttribute("disabled")&&(re=N(re,"prev")));re&&re.focus({preventScroll:!0})}function H(X){const re=d.value&&i.value?-1:1,ge=(X==="prev"?-re:re)*u.value;let de=l.value+ge;if(d.value&&i.value&&f.el){const{scrollWidth:ye,offsetWidth:ee}=f.el;de+=ye-ee}x(de)}const G=C(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),z=C(()=>o.value||Math.abs(l.value)>0),$=C(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!r.value;case!0:return z.value;case"mobile":return r.value||z.value;default:return!r.value&&z.value}}),B=C(()=>Math.abs(l.value)>1),W=C(()=>{if(!f.value||!z.value)return!1;const X=U_(d.value,f.el),re=WU(d.value,f.el);return X-re-Math.abs(l.value)>1});return oe(()=>w(e.tag,{class:se(["v-slide-group",{"v-slide-group--vertical":!d.value,"v-slide-group--has-affixes":$.value,"v-slide-group--is-overflowing":o.value},s.value,e.class]),style:pe(e.style),tabindex:b.value||a.selected.value.length?-1:0,onFocus:D},{default:()=>[$.value&&A("div",{key:"prev",class:se(["v-slide-group__prev",{"v-slide-group__prev--disabled":!B.value}]),onMousedown:E,onClick:()=>B.value&&H("prev")},[n.prev?.(G.value)??w(Fo,null,{default:()=>[w(Ye,{icon:i.value?e.nextIcon:e.prevIcon},null)]})]),A("div",{key:"container",ref:f,class:se(["v-slide-group__container",e.contentClass]),onScroll:I},[A("div",{ref:g,class:"v-slide-group__content",onFocusin:T,onFocusout:k,onKeydown:O},[n.default?.(G.value)])]),$.value&&A("div",{key:"next",class:se(["v-slide-group__next",{"v-slide-group__next--disabled":!W.value}]),onMousedown:E,onClick:()=>W.value&&H("next")},[n.next?.(G.value)??w(Fo,null,{default:()=>[w(Ye,{icon:i.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:a.selected,scrollTo:H,scrollOffset:l,focus:L,hasPrev:B,hasNext:W}}}),mT=Symbol.for("vuetify:v-chip-group"),HU=j({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:$t},...fm(),...Ce(),...Ar({selectedClass:"v-chip--selected"}),...Ne(),...Xe(),...ii({variant:"tonal"})},"VChipGroup"),jU=ie()({name:"VChipGroup",props:HU(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ze(e),{isSelected:s,select:r,next:a,prev:o,selected:l}=Ds(e,mT);return wt({VChip:{baseColor:U(()=>e.baseColor),color:U(()=>e.color),disabled:U(()=>e.disabled),filter:U(()=>e.filter),variant:U(()=>e.variant)}}),oe(()=>{const u=$o.filterProps(e);return w($o,ne(u,{class:["v-chip-group",{"v-chip-group--column":e.column},i.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:s,select:r,next:a,prev:o,selected:l.value})]})}),{}}}),XU=j({activeClass:String,appendAvatar:String,appendIcon:Pe,baseColor:String,closable:Boolean,closeIcon:{type:Pe,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:Pe,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Pe,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Gt(),onClickOnce:Gt(),...An(),...Ce(),...Vt(),...Ot(),...Cr(),...gt(),...ul(),...Bi(),...Ne({tag:"span"}),...Xe(),...ii({variant:"tonal"})},"VChip"),Da=ie()({name:"VChip",directives:{vRipple:pn},props:XU(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const{t:r}=nt(),{borderClasses:a}=Pn(e),{densityClasses:o}=_n(e),{elevationClasses:l}=jt(e),{roundedClasses:u}=xt(e),{sizeClasses:c}=Pa(e),{themeClasses:d}=Ze(e),f=Re(e,"modelValue"),h=kr(e,mT,!1),g=cl(e,n),v=U(()=>e.link!==!1&&g.isLink.value),m=C(()=>!e.disabled&&e.link!==!1&&(!!h||e.link||g.isClickable.value)),p=U(()=>({"aria-label":r(e.closeLabel),disabled:e.disabled,onClick(I){I.preventDefault(),I.stopPropagation(),f.value=!1,i("click:close",I)}})),{colorClasses:y,colorStyles:_,variantClasses:b}=Tr(()=>({color:!h||h.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function S(I){i("click",I),m.value&&(g.navigate?.(I),h?.toggle())}function x(I){(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),S(I))}return()=>{const I=g.isLink.value?"a":e.tag,T=!!(e.appendIcon||e.appendAvatar),k=!!(T||s.append),P=!!(s.close||e.closable),D=!!(s.filter||e.filter)&&h,E=!!(e.prependIcon||e.prependAvatar),O=!!(E||s.prepend);return f.value&&_t(w(I,ne({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":m.value,"v-chip--filter":D,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&g.isActive?.value},d.value,a.value,y.value,o.value,l.value,u.value,c.value,b.value,h?.selectedClass.value,e.class],style:[_.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:m.value?0:void 0,onClick:S,onKeydown:m.value&&!v.value&&x},g.linkProps),{default:()=>[Os(m.value,"v-chip"),D&&w(lm,{key:"filter"},{default:()=>[_t(A("div",{class:"v-chip__filter"},[s.filter?w(Be,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},s.filter):w(Ye,{key:"filter-icon",icon:e.filterIcon},null)]),[[hi,h.isSelected.value]])]}),O&&A("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?w(Be,{key:"prepend-defaults",disabled:!E,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},s.prepend):A(Ae,null,[e.prependIcon&&w(Ye,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&w(Wn,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),A("div",{class:"v-chip__content","data-no-activator":""},[s.default?.({isSelected:h?.isSelected.value,selectedClass:h?.selectedClass.value,select:h?.select,toggle:h?.toggle,value:h?.value.value,disabled:e.disabled})??cn(e.text)]),k&&A("div",{key:"append",class:"v-chip__append"},[s.append?w(Be,{key:"append-defaults",disabled:!T,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},s.append):A(Ae,null,[e.appendIcon&&w(Ye,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&w(Wn,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),P&&A("button",ne({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},p.value),[s.close?w(Be,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},s.close):w(Ye,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[pn,m.value&&e.ripple,null]])}}}),YU=j({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Ce(),...Xe()},"VDivider"),$n=ie()({name:"VDivider",props:YU(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:s}=Ze(e),{textColorClasses:r,textColorStyles:a}=Qt(()=>e.color),o=C(()=>{const l={};return e.length&&(l[e.vertical?"height":"width"]=we(e.length)),e.thickness&&(l[e.vertical?"borderRightWidth":"borderTopWidth"]=we(e.thickness)),l});return oe(()=>{const l=A("hr",{class:se([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},s.value,r.value,e.class]),style:pe([o.value,a.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return i.default?A("div",{class:se(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[l,A("div",{class:"v-divider__content"},[i.default()]),l]):l}),{}}}),rh=Symbol.for("vuetify:list");function vT(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const t=He(rh,{filterable:!1,hasPrepend:he(!1),updateHasPrepend:()=>null}),n={filterable:t.filterable||e,hasPrepend:he(!1),updateHasPrepend:i=>{i&&(n.hasPrepend.value=i)}};return dt(rh,n),t}function pT(){return He(rh,null)}const hm=e=>{const t={activate:n=>{let{id:i,value:s,activated:r}=n;return i=Oe(i),e&&!s&&r.size===1&&r.has(i)||(s?r.add(i):r.delete(i)),r},in:(n,i,s)=>{let r=new Set;if(n!=null)for(const a of bt(n))r=t.activate({id:a,value:!0,activated:new Set(r),children:i,parents:s});return r},out:n=>Array.from(n)};return t},yT=e=>{const t=hm(e);return{activate:i=>{let{activated:s,id:r,...a}=i;r=Oe(r);const o=s.has(r)?new Set([r]):new Set;return t.activate({...a,id:r,activated:o})},in:(i,s,r)=>{let a=new Set;if(i!=null){const o=bt(i);o.length&&(a=t.in(o.slice(0,1),s,r))}return a},out:(i,s,r)=>t.out(i,s,r)}},KU=e=>{const t=hm(e);return{activate:i=>{let{id:s,activated:r,children:a,...o}=i;return s=Oe(s),a.has(s)?r:t.activate({id:s,activated:r,children:a,...o})},in:t.in,out:t.out}},qU=e=>{const t=yT(e);return{activate:i=>{let{id:s,activated:r,children:a,...o}=i;return s=Oe(s),a.has(s)?r:t.activate({id:s,activated:r,children:a,...o})},in:t.in,out:t.out}},ZU={open:e=>{let{id:t,value:n,opened:i,parents:s}=e;if(n){const r=new Set;r.add(t);let a=s.get(t);for(;a!=null;)r.add(a),a=s.get(a);return r}else return i.delete(t),i},select:()=>null},_T={open:e=>{let{id:t,value:n,opened:i,parents:s}=e;if(n){let r=s.get(t);for(i.add(t);r!=null&&r!==t;)i.add(r),r=s.get(r);return i}else i.delete(t);return i},select:()=>null},GU={open:_T.open,select:e=>{let{id:t,value:n,opened:i,parents:s}=e;if(!n)return i;const r=[];let a=s.get(t);for(;a!=null;)r.push(a),a=s.get(a);return new Set(r)}},gm=e=>{const t={select:n=>{let{id:i,value:s,selected:r}=n;if(i=Oe(i),e&&!s){const a=Array.from(r.entries()).reduce((o,l)=>{let[u,c]=l;return c==="on"&&o.push(u),o},[]);if(a.length===1&&a[0]===i)return r}return r.set(i,s?"on":"off"),r},in:(n,i,s,r)=>{const a=new Map;for(const o of n||[])t.select({id:o,value:!0,selected:a,children:i,parents:s,disabled:r});return a},out:n=>{const i=[];for(const[s,r]of n.entries())r==="on"&&i.push(s);return i}};return t},bT=e=>{const t=gm(e);return{select:i=>{let{selected:s,id:r,...a}=i;r=Oe(r);const o=s.has(r)?new Map([[r,s.get(r)]]):new Map;return t.select({...a,id:r,selected:o})},in:(i,s,r,a)=>i?.length?t.in(i.slice(0,1),s,r,a):new Map,out:(i,s,r)=>t.out(i,s,r)}},QU=e=>{const t=gm(e);return{select:i=>{let{id:s,selected:r,children:a,...o}=i;return s=Oe(s),a.has(s)?r:t.select({id:s,selected:r,children:a,...o})},in:t.in,out:t.out}},JU=e=>{const t=bT(e);return{select:i=>{let{id:s,selected:r,children:a,...o}=i;return s=Oe(s),a.has(s)?r:t.select({id:s,selected:r,children:a,...o})},in:t.in,out:t.out}},wT=e=>{const t={select:n=>{let{id:i,value:s,selected:r,children:a,parents:o,disabled:l}=n;i=Oe(i);const u=new Map(r),c=[i];for(;c.length;){const f=c.shift();l.has(f)||r.set(Oe(f),s?"on":"off"),a.has(f)&&c.push(...a.get(f))}let d=Oe(o.get(i));for(;d;){let f=!0,h=!0;for(const g of a.get(d)){const v=Oe(g);if(!l.has(v)&&(r.get(v)!=="on"&&(f=!1),r.has(v)&&r.get(v)!=="off"&&(h=!1),!f&&!h))break}r.set(d,f?"on":h?"off":"indeterminate"),d=Oe(o.get(d))}return e&&!s&&Array.from(r.entries()).reduce((h,g)=>{let[v,m]=g;return m==="on"&&h.push(v),h},[]).length===0?u:r},in:(n,i,s,r)=>{let a=new Map;for(const o of n||[])a=t.select({id:o,value:!0,selected:a,children:i,parents:s,disabled:r});return a},out:(n,i)=>{const s=[];for(const[r,a]of n.entries())a==="on"&&!i.has(r)&&s.push(r);return s}};return t},e$=e=>{const t=wT(e);return{select:t.select,in:t.in,out:(i,s,r)=>{const a=[];for(const[o,l]of i.entries())if(l==="on"){if(r.has(o)){const u=r.get(o);if(i.get(u)==="on")continue}a.push(o)}return a}}},zo=Symbol.for("vuetify:nested"),xT={id:he(),root:{register:()=>null,unregister:()=>null,children:le(new Map),parents:le(new Map),disabled:le(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:le(!1),selectable:le(!1),opened:le(new Set),activated:le(new Set),selected:le(new Map),selectedValues:le([]),getPath:()=>[]}},t$=j({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),n$=e=>{let t=!1;const n=he(new Map),i=he(new Map),s=he(new Set),r=Re(e,"opened",e.opened,v=>new Set(Array.isArray(v)?v.map(m=>Oe(m)):v),v=>[...v.values()]),a=C(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return KU(e.mandatory);case"single-leaf":return qU(e.mandatory);case"independent":return hm(e.mandatory);case"single-independent":default:return yT(e.mandatory)}}),o=C(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return JU(e.mandatory);case"leaf":return QU(e.mandatory);case"independent":return gm(e.mandatory);case"single-independent":return bT(e.mandatory);case"trunk":return e$(e.mandatory);case"classic":default:return wT(e.mandatory)}}),l=C(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return GU;case"single":return ZU;case"multiple":default:return _T}}),u=Re(e,"activated",e.activated,v=>a.value.in(v,n.value,i.value),v=>a.value.out(v,n.value,i.value)),c=Re(e,"selected",e.selected,v=>o.value.in(v,n.value,i.value,s.value),v=>o.value.out(v,n.value,i.value));Ht(()=>{t=!0});function d(v){const m=[];let p=Oe(v);for(;p!==void 0;)m.unshift(p),p=i.value.get(p);return m}const f=At("nested"),h=new Set,g={id:he(),root:{opened:r,activatable:U(()=>e.activatable),selectable:U(()=>e.selectable),activated:u,selected:c,selectedValues:C(()=>{const v=[];for(const[m,p]of c.value.entries())p==="on"&&v.push(m);return v}),register:(v,m,p,y)=>{if(h.has(v)){d(v).map(String).join(" -> "),d(m).concat(v).map(String).join(" -> ");return}else h.add(v);m&&v!==m&&i.value.set(v,m),p&&s.value.add(v),y&&n.value.set(v,[]),m!=null&&n.value.set(m,[...n.value.get(m)||[],v])},unregister:v=>{if(t)return;h.delete(v),n.value.delete(v),s.value.delete(v);const m=i.value.get(v);if(m){const p=n.value.get(m)??[];n.value.set(m,p.filter(y=>y!==v))}i.value.delete(v)},open:(v,m,p)=>{f.emit("click:open",{id:v,value:m,path:d(v),event:p});const y=l.value.open({id:v,value:m,opened:new Set(r.value),children:n.value,parents:i.value,event:p});y&&(r.value=y)},openOnSelect:(v,m,p)=>{const y=l.value.select({id:v,value:m,selected:new Map(c.value),opened:new Set(r.value),children:n.value,parents:i.value,event:p});y&&(r.value=y)},select:(v,m,p)=>{f.emit("click:select",{id:v,value:m,path:d(v),event:p});const y=o.value.select({id:v,value:m,selected:new Map(c.value),children:n.value,parents:i.value,disabled:s.value,event:p});y&&(c.value=y),g.root.openOnSelect(v,m,p)},activate:(v,m,p)=>{if(!e.activatable)return g.root.select(v,!0,p);f.emit("click:activate",{id:v,value:m,path:d(v),event:p});const y=a.value.activate({id:v,value:m,activated:new Set(u.value),children:n.value,parents:i.value,event:p});if(y.size!==u.value.size)u.value=y;else{for(const _ of y)if(!u.value.has(_)){u.value=y;return}for(const _ of u.value)if(!y.has(_)){u.value=y;return}}},children:n,parents:i,disabled:s,getPath:d}};return dt(zo,g),g.root},ST=(e,t,n)=>{const i=He(zo,xT),s=Symbol("nested item"),r=C(()=>{const o=Oe(zn(e));return o!==void 0?o:s}),a={...i,id:r,open:(o,l)=>i.root.open(r.value,o,l),openOnSelect:(o,l)=>i.root.openOnSelect(r.value,o,l),isOpen:C(()=>i.root.opened.value.has(r.value)),parent:C(()=>i.root.parents.value.get(r.value)),activate:(o,l)=>i.root.activate(r.value,o,l),isActivated:C(()=>i.root.activated.value.has(r.value)),select:(o,l)=>i.root.select(r.value,o,l),isSelected:C(()=>i.root.selected.value.get(r.value)==="on"),isIndeterminate:C(()=>i.root.selected.value.get(r.value)==="indeterminate"),isLeaf:C(()=>!i.root.children.value.get(r.value)),isGroupActivator:i.isGroupActivator};return ka(()=>{i.isGroupActivator||i.root.register(r.value,i.id.value,zn(t),n)}),Ht(()=>{i.isGroupActivator||i.root.unregister(r.value)}),n&&dt(zo,a),a},i$=()=>{const e=He(zo,xT);dt(zo,{...e,isGroupActivator:!0})},s$=Hn({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return i$(),()=>n.default?.()}}),TT=j({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Pe,default:"$collapse"},disabled:Boolean,expandIcon:{type:Pe,default:"$expand"},rawId:[String,Number],prependIcon:Pe,appendIcon:Pe,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Ce(),...Ne()},"VListGroup"),Wo=ie()({name:"VListGroup",props:TT(),setup(e,t){let{slots:n}=t;const{isOpen:i,open:s,id:r}=ST(()=>e.value,()=>e.disabled,!0),a=C(()=>`v-list-group--id-${String(e.rawId??r.value)}`),o=pT(),{isBooted:l}=Sr();function u(h){["INPUT","TEXTAREA"].includes(h.target?.tagName)||s(!i.value,h)}const c=C(()=>({onClick:u,class:"v-list-group__header",id:a.value})),d=C(()=>i.value?e.collapseIcon:e.expandIcon),f=C(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&d.value,appendIcon:e.appendIcon||!e.subgroup&&d.value,title:e.title,value:e.value}}));return oe(()=>w(e.tag,{class:se(["v-list-group",{"v-list-group--prepend":o?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":i.value},e.class]),style:pe(e.style)},{default:()=>[n.activator&&w(Be,{defaults:f.value},{default:()=>[w(s$,null,{default:()=>[n.activator({props:c.value,isOpen:i.value})]})]}),w(vn,{transition:{component:Au},disabled:!l.value},{default:()=>[_t(A("div",{class:"v-list-group__items",role:"group","aria-labelledby":a.value},[n.default?.()]),[[hi,i.value]])]})]})),{isOpen:i}}}),r$=j({opacity:[Number,String],...Ce(),...Ne()},"VListItemSubtitle"),AT=ie()({name:"VListItemSubtitle",props:r$(),setup(e,t){let{slots:n}=t;return oe(()=>w(e.tag,{class:se(["v-list-item-subtitle",e.class]),style:pe([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),CT=is("v-list-item-title"),kT=j({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Pe,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Pe,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Gt(),onClickOnce:Gt(),...An(),...Ce(),...Vt(),...It(),...Ot(),...gt(),...ul(),...Ne(),...Xe(),...ii({variant:"text"})},"VListItem"),fi=ie()({name:"VListItem",directives:{vRipple:pn},props:kT(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:i,emit:s}=t;const r=cl(e,n),a=C(()=>e.value===void 0?r.href.value:e.value),{activate:o,isActivated:l,select:u,isOpen:c,isSelected:d,isIndeterminate:f,isGroupActivator:h,root:g,parent:v,openOnSelect:m,id:p}=ST(a,()=>e.disabled,!1),y=pT(),_=C(()=>e.active!==!1&&(e.active||r.isActive?.value||(g.activatable.value?l.value:d.value))),b=U(()=>e.link!==!1&&r.isLink.value),S=C(()=>!!y&&(g.selectable.value||g.activatable.value||e.value!=null)),x=C(()=>!e.disabled&&e.link!==!1&&(e.link||r.isClickable.value||S.value)),I=C(()=>y?S.value?"option":"listitem":void 0),T=C(()=>{if(S.value)return g.activatable.value?l.value:g.selectable.value?d.value:_.value}),k=U(()=>e.rounded||e.nav),P=U(()=>e.color??e.activeColor),D=U(()=>({color:_.value?P.value??e.baseColor:e.baseColor,variant:e.variant}));me(()=>r.isActive?.value,ee=>{ee&&E()}),ka(()=>{r.isActive?.value&&E()});function E(){v.value!=null&&g.open(v.value,!0),m(!0)}const{themeClasses:O}=Ze(e),{borderClasses:N}=Pn(e),{colorClasses:L,colorStyles:H,variantClasses:G}=Tr(D),{densityClasses:z}=_n(e),{dimensionStyles:$}=Pt(e),{elevationClasses:B}=jt(e),{roundedClasses:W}=xt(k),X=U(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),re=U(()=>e.ripple!==void 0&&e.ripple&&y?.filterable?{keys:["Enter"]}:e.ripple),ge=C(()=>({isActive:_.value,select:u,isOpen:c.value,isSelected:d.value,isIndeterminate:f.value}));function de(ee){s("click",ee),!["INPUT","TEXTAREA"].includes(ee.target?.tagName)&&x.value&&(r.navigate?.(ee),!h&&(g.activatable.value?o(!l.value,ee):(g.selectable.value||e.value!=null)&&u(!d.value,ee)))}function ye(ee){const _e=ee.target;["INPUT","TEXTAREA"].includes(_e.tagName)||(ee.key==="Enter"||ee.key===" "&&!y?.filterable)&&(ee.preventDefault(),ee.stopPropagation(),ee.target.dispatchEvent(new MouseEvent("click",ee)))}return oe(()=>{const ee=b.value?"a":e.tag,_e=i.title||e.title!=null,ke=i.subtitle||e.subtitle!=null,ce=!!(e.appendAvatar||e.appendIcon),Ee=!!(ce||i.append),R=!!(e.prependAvatar||e.prependIcon),F=!!(R||i.prepend);return y?.updateHasPrepend(F),e.activeColor&&gS("active-color",["color","base-color"]),_t(w(ee,ne({class:["v-list-item",{"v-list-item--active":_.value,"v-list-item--disabled":e.disabled,"v-list-item--link":x.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!F&&y?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&_.value},O.value,N.value,L.value,z.value,B.value,X.value,W.value,G.value,e.class],style:[H.value,$.value,e.style],tabindex:x.value?y?-2:0:void 0,"aria-selected":T.value,role:I.value,onClick:de,onKeydown:x.value&&!b.value&&ye},r.linkProps),{default:()=>[Os(x.value||_.value,"v-list-item"),F&&A("div",{key:"prepend",class:"v-list-item__prepend"},[i.prepend?w(Be,{key:"prepend-defaults",disabled:!R,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[i.prepend?.(ge.value)]}):A(Ae,null,[e.prependAvatar&&w(Wn,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&w(Ye,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),A("div",{class:"v-list-item__spacer"},null)]),A("div",{class:"v-list-item__content","data-no-activator":""},[_e&&w(CT,{key:"title"},{default:()=>[i.title?.({title:e.title})??cn(e.title)]}),ke&&w(AT,{key:"subtitle"},{default:()=>[i.subtitle?.({subtitle:e.subtitle})??cn(e.subtitle)]}),i.default?.(ge.value)]),Ee&&A("div",{key:"append",class:"v-list-item__append"},[i.append?w(Be,{key:"append-defaults",disabled:!ce,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[i.append?.(ge.value)]}):A(Ae,null,[e.appendIcon&&w(Ye,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&w(Wn,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),A("div",{class:"v-list-item__spacer"},null)])]}),[[pn,x.value&&re.value]])}),{activate:o,isActivated:l,isGroupActivator:h,isSelected:d,list:y,select:u,root:g,id:p,link:r}}}),a$=j({color:String,inset:Boolean,sticky:Boolean,title:String,...Ce(),...Ne()},"VListSubheader"),Na=ie()({name:"VListSubheader",props:a$(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:s}=Qt(()=>e.color);return oe(()=>{const r=!!(n.default||e.title);return w(e.tag,{class:se(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},i.value,e.class]),style:pe([{textColorStyles:s},e.style])},{default:()=>[r&&A("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),o$=j({items:Array,returnObject:Boolean},"VListChildren"),ET=ie()({name:"VListChildren",props:o$(),setup(e,t){let{slots:n}=t;return vT(),()=>n.default?.()??e.items?.map(i=>{let{children:s,props:r,type:a,raw:o}=i;if(a==="divider")return n.divider?.({props:r})??w($n,r,null);if(a==="subheader")return n.subheader?.({props:r})??w(Na,r,null);const l={subtitle:n.subtitle?c=>n.subtitle?.({...c,item:o}):void 0,prepend:n.prepend?c=>n.prepend?.({...c,item:o}):void 0,append:n.append?c=>n.append?.({...c,item:o}):void 0,title:n.title?c=>n.title?.({...c,item:o}):void 0},u=Wo.filterProps(r);return s?w(Wo,ne(u,{value:e.returnObject?o:r?.value,rawId:r?.value}),{activator:c=>{let{props:d}=c;const f=ne(r,d,{value:e.returnObject?o:r.value});return n.header?n.header({props:f}):w(fi,f,l)},default:()=>w(ET,{items:s,returnObject:e.returnObject},n)}):n.item?n.item({props:r}):w(fi,ne(r,{value:e.returnObject?o:r.value}),l)})}}),IT=j({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),l$=new Set(["item","divider","subheader"]);function ai(e,t){const n=Et(t,e.itemTitle,t),i=Et(t,e.itemValue,n),s=Et(t,e.itemChildren),r=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?Qe(t,["children"]):t:void 0:Et(t,e.itemProps);let a=Et(t,e.itemType,"item");l$.has(a)||(a="item");const o={title:n,value:i,...r};return{type:a,title:String(o.title??""),value:o.value,props:o,children:a==="item"&&Array.isArray(s)?PT(e,s):void 0,raw:t}}ai.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function PT(e,t){const n=In(e,ai.neededProps),i=[];for(const s of t)i.push(ai(n,s));return i}function mm(e){const t=C(()=>PT(e,e.items)),n=C(()=>t.value.some(o=>o.value===null)),i=he(new Map),s=he([]);ht(()=>{const o=t.value,l=new Map,u=[];for(let c=0;c<o.length;c++){const d=o[c];if(jf(d.value)||d.value===null){let f=l.get(d.value);f||(f=[],l.set(d.value,f)),f.push(d)}else u.push(d)}i.value=l,s.value=u});function r(o){const l=i.value,u=t.value,c=s.value,d=n.value,f=e.returnObject,h=!!e.valueComparator,g=e.valueComparator||$t,v=In(e,ai.neededProps),m=[];e:for(const p of o){if(!d&&p===null)continue;if(f&&typeof p=="string"){m.push(ai(v,p));continue}const y=l.get(p);if(h||!y){for(const _ of h?u:c)if(g(p,_.value)){m.push(_);continue e}m.push(ai(v,p));continue}m.push(...y)}return m}function a(o){return e.returnObject?o.map(l=>{let{raw:u}=l;return u}):o.map(l=>{let{value:u}=l;return u})}return{items:t,transformIn:r,transformOut:a}}const c$=new Set(["item","divider","subheader"]);function u$(e,t){const n=jf(t)?t:Et(t,e.itemTitle),i=jf(t)?t:Et(t,e.itemValue,void 0),s=Et(t,e.itemChildren),r=e.itemProps===!0?Qe(t,["children"]):Et(t,e.itemProps);let a=Et(t,e.itemType,"item");c$.has(a)||(a="item");const o={title:n,value:i,...r};return{type:a,title:o.title,value:o.value,props:o,children:a==="item"&&s?RT(e,s):void 0,raw:t}}function RT(e,t){const n=[];for(const i of t)n.push(u$(e,i));return n}function MT(e){return{items:C(()=>RT(e,e.items))}}const OT=j({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:Pe,collapseIcon:Pe,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Gt(),"onClick:select":Gt(),"onUpdate:opened":Gt(),...t$({selectStrategy:"single-leaf",openStrategy:"list"}),...An(),...Ce(),...Vt(),...It(),...Ot(),...IT(),...gt(),...Ne(),...Xe(),...ii({variant:"text"})},"VList"),xa=ie()({name:"VList",props:OT(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:i}=MT(e),{themeClasses:s}=Ze(e),{backgroundColorClasses:r,backgroundColorStyles:a}=Ge(()=>e.bgColor),{borderClasses:o}=Pn(e),{densityClasses:l}=_n(e),{dimensionStyles:u}=Pt(e),{elevationClasses:c}=jt(e),{roundedClasses:d}=xt(e),{children:f,open:h,parents:g,select:v,getPath:m}=n$(e),p=U(()=>e.lines?`v-list--${e.lines}-line`:void 0),y=U(()=>e.activeColor),_=U(()=>e.baseColor),b=U(()=>e.color),S=U(()=>e.selectable||e.activatable);vT({filterable:e.filterable}),wt({VListGroup:{activeColor:y,baseColor:_,color:b,expandIcon:U(()=>e.expandIcon),collapseIcon:U(()=>e.collapseIcon)},VListItem:{activeClass:U(()=>e.activeClass),activeColor:y,baseColor:_,color:b,density:U(()=>e.density),disabled:U(()=>e.disabled),lines:U(()=>e.lines),nav:U(()=>e.nav),slim:U(()=>e.slim),variant:U(()=>e.variant)}});const x=he(!1),I=le();function T(N){x.value=!0}function k(N){x.value=!1}function P(N){!x.value&&!(N.relatedTarget&&I.value?.contains(N.relatedTarget))&&O()}function D(N){const L=N.target;if(!(!I.value||L.tagName==="INPUT"&&["Home","End"].includes(N.key)||L.tagName==="TEXTAREA")){if(N.key==="ArrowDown")O("next");else if(N.key==="ArrowUp")O("prev");else if(N.key==="Home")O("first");else if(N.key==="End")O("last");else return;N.preventDefault()}}function E(N){x.value=!0}function O(N){if(I.value)return tr(I.value,N)}return oe(()=>w(e.tag,{ref:I,class:se(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},s.value,r.value,o.value,l.value,c.value,p.value,d.value,e.class]),style:pe([a.value,u.value,e.style]),tabindex:e.disabled?-1:0,role:S.value?"listbox":"list","aria-activedescendant":void 0,onFocusin:T,onFocusout:k,onFocus:P,onKeydown:D,onMousedown:E},{default:()=>[w(ET,{items:i.value,returnObject:e.returnObject},n)]})),{open:h,select:v,focus:O,children:f,parents:g,getPath:m}}}),d$=is("v-list-img"),f$=j({start:Boolean,end:Boolean,...Ce(),...Ne()},"VListItemAction"),vm=ie()({name:"VListItemAction",props:f$(),setup(e,t){let{slots:n}=t;return oe(()=>w(e.tag,{class:se(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:pe(e.style)},n)),{}}}),h$=j({start:Boolean,end:Boolean,...Ce(),...Ne()},"VListItemMedia"),g$=ie()({name:"VListItemMedia",props:h$(),setup(e,t){let{slots:n}=t;return oe(()=>w(e.tag,{class:se(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:pe(e.style)},n)),{}}});function Kd(e,t){return{x:e.x+t.x,y:e.y+t.y}}function m$(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $_(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:i}=e,s=i==="left"?0:i==="center"?t.width/2:i==="right"?t.width:i,r=n==="top"?0:n==="bottom"?t.height:n;return Kd({x:s,y:r},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:i}=e,s=n==="left"?0:n==="right"?t.width:n,r=i==="top"?0:i==="center"?t.height/2:i==="bottom"?t.height:i;return Kd({x:s,y:r},t)}return Kd({x:t.width/2,y:t.height/2},t)}const DT={static:y$,connected:b$},v$=j({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in DT},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array],stickToTarget:Boolean},"VOverlay-location-strategies");function p$(e,t){const n=le({}),i=le();qe&&en(()=>!!(t.isActive.value&&e.locationStrategy),o=>{me(()=>e.locationStrategy,o),Ft(()=>{window.removeEventListener("resize",s),visualViewport?.removeEventListener("resize",r),visualViewport?.removeEventListener("scroll",a),i.value=void 0}),window.addEventListener("resize",s,{passive:!0}),visualViewport?.addEventListener("resize",r,{passive:!0}),visualViewport?.addEventListener("scroll",a,{passive:!0}),typeof e.locationStrategy=="function"?i.value=e.locationStrategy(t,e,n)?.updateLocation:i.value=DT[e.locationStrategy](t,e,n)?.updateLocation});function s(o){i.value?.(o)}function r(o){i.value?.(o)}function a(o){i.value?.(o)}return{contentStyles:n,updateLocation:i}}function y$(){}function _$(e,t){const n=Yg(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function b$(e,t,n){(Array.isArray(e.target.value)||pL(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:s,preferredOrigin:r}=Xg(()=>{const p=Xf(t.location,e.isRtl.value),y=t.origin==="overlap"?p:t.origin==="auto"?Ud(p):Xf(t.origin,e.isRtl.value);return p.side===y.side&&p.align===$d(y).align?{preferredAnchor:r_(p),preferredOrigin:r_(y)}:{preferredAnchor:p,preferredOrigin:y}}),[a,o,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(p=>C(()=>{const y=parseFloat(t[p]);return isNaN(y)?1/0:y})),c=C(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const p=t.offset.split(" ").map(parseFloat);return p.length<2&&p.push(0),p}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let d=!1,f=-1;const h=new lS(4),g=new ResizeObserver(()=>{if(!d)return;if(requestAnimationFrame(y=>{y!==f&&h.clear(),requestAnimationFrame(_=>{f=_})}),h.isFull){const y=h.values();if($t(y.at(-1),y.at(-3))&&!$t(y.at(-1),y.at(-2)))return}const p=m();p&&h.push(p.flipped)});let v=new Ii({x:0,y:0,width:0,height:0});me(e.target,(p,y)=>{y&&!Array.isArray(y)&&g.unobserve(y),Array.isArray(p)?$t(p,y)||m():p&&g.observe(p)},{immediate:!0}),me(e.contentEl,(p,y)=>{y&&g.unobserve(y),p&&g.observe(p)},{immediate:!0}),Ft(()=>{g.disconnect()});function m(){if(d=!1,requestAnimationFrame(()=>d=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(v=hS(e.target.value));const p=_$(e.contentEl.value,e.isRtl.value),y=zc(e.contentEl.value),_=12;y.length||(y.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(p.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),p.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const b=y.reduce((O,N)=>{const L=UV(N);return O?new Ii({x:Math.max(O.left,L.left),y:Math.max(O.top,L.top),width:Math.min(O.right,L.right)-Math.max(O.left,L.left),height:Math.min(O.bottom,L.bottom)-Math.max(O.top,L.top)}):L},void 0);b.x+=_,b.y+=_,b.width-=_*2,b.height-=_*2;let S={anchor:s.value,origin:r.value};function x(O){const N=new Ii(p),L=$_(O.anchor,v),H=$_(O.origin,N);let{x:G,y:z}=m$(L,H);switch(O.anchor.side){case"top":z-=c.value[0];break;case"bottom":z+=c.value[0];break;case"left":G-=c.value[0];break;case"right":G+=c.value[0];break}switch(O.anchor.align){case"top":z-=c.value[1];break;case"bottom":z+=c.value[1];break;case"left":G-=c.value[1];break;case"right":G+=c.value[1];break}return N.x+=G,N.y+=z,N.width=Math.min(N.width,l.value),N.height=Math.min(N.height,u.value),{overflows:o_(N,b),x:G,y:z}}let I=0,T=0;const k={x:0,y:0},P={x:!1,y:!1};let D=-1;for(;!(D++>10);){const{x:O,y:N,overflows:L}=x(S);I+=O,T+=N,p.x+=O,p.y+=N;{const H=a_(S.anchor),G=L.x.before||L.x.after,z=L.y.before||L.y.after;let $=!1;if(["x","y"].forEach(B=>{if(B==="x"&&G&&!P.x||B==="y"&&z&&!P.y){const W={anchor:{...S.anchor},origin:{...S.origin}},X=B==="x"?H==="y"?$d:Ud:H==="y"?Ud:$d;W.anchor=X(W.anchor),W.origin=X(W.origin);const{overflows:re}=x(W);(re[B].before<=L[B].before&&re[B].after<=L[B].after||re[B].before+re[B].after<(L[B].before+L[B].after)/2)&&(S=W,$=P[B]=!0)}}),$)continue}L.x.before&&(t.stickToTarget||(I+=L.x.before),p.x+=L.x.before),L.x.after&&(t.stickToTarget||(I-=L.x.after),p.x-=L.x.after),L.y.before&&(t.stickToTarget||(T+=L.y.before),p.y+=L.y.before),L.y.after&&(t.stickToTarget||(T-=L.y.after),p.y-=L.y.after);{const H=o_(p,b);k.x=b.width-H.x.before-H.x.after,k.y=b.height-H.y.before-H.y.after,t.stickToTarget||(I+=H.x.before),p.x+=H.x.before,t.stickToTarget||(T+=H.y.before),p.y+=H.y.before}break}const E=a_(S.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${S.anchor.side} ${S.anchor.align}`,transformOrigin:`${S.origin.side} ${S.origin.align}`,top:we(qd(T)),left:e.isRtl.value?void 0:we(qd(I)),right:e.isRtl.value?we(qd(-I)):void 0,minWidth:we(E==="y"?Math.min(a.value,v.width):a.value),maxWidth:we(z_(at(k.x,a.value===1/0?0:a.value,l.value))),maxHeight:we(z_(at(k.y,o.value===1/0?0:o.value,u.value)))}),{available:k,contentBox:p,flipped:P}}return me(()=>[s.value,r.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>m()),je(()=>{const p=m();if(!p)return;const{available:y,contentBox:_}=p;_.height>y.y&&requestAnimationFrame(()=>{m(),requestAnimationFrame(()=>{m()})})}),{updateLocation:m}}function qd(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function z_(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let ah=!0;const Yc=[];function w$(e){!ah||Yc.length?(Yc.push(e),oh()):(ah=!1,e(),oh())}let W_=-1;function oh(){cancelAnimationFrame(W_),W_=requestAnimationFrame(()=>{const e=Yc.shift();e&&e(),Yc.length?oh():ah=!0})}const NT={none:null,close:T$,block:A$,reposition:C$},x$=j({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in NT}},"VOverlay-scroll-strategies");function S$(e,t){if(!qe)return;let n;ht(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=oa(),await new Promise(i=>setTimeout(i)),n.active&&n.run(()=>{typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):NT[e.scrollStrategy]?.(t,e,n)}))}),Ft(()=>{n?.stop()})}function T$(e){function t(n){e.isActive.value=!1}BT(pm(e.target.value,e.contentEl.value),t)}function A$(e,t){const n=e.root.value?.offsetParent,i=pm(e.target.value,e.contentEl.value),s=[...new Set([...zc(i,t.contained?n:void 0),...zc(e.contentEl.value,t.contained?n:void 0)])].filter(o=>!o.classList.contains("v-overlay-scroll-blocked")),r=window.innerWidth-document.documentElement.offsetWidth,a=(o=>Qg(o)&&o)(n||document.documentElement);a&&e.root.value.classList.add("v-overlay--scroll-blocked"),s.forEach((o,l)=>{o.style.setProperty("--v-body-scroll-x",we(-o.scrollLeft)),o.style.setProperty("--v-body-scroll-y",we(-o.scrollTop)),o!==document.documentElement&&o.style.setProperty("--v-scrollbar-offset",we(r)),o.classList.add("v-overlay-scroll-blocked")}),Ft(()=>{s.forEach((o,l)=>{const u=parseFloat(o.style.getPropertyValue("--v-body-scroll-x")),c=parseFloat(o.style.getPropertyValue("--v-body-scroll-y")),d=o.style.scrollBehavior;o.style.scrollBehavior="auto",o.style.removeProperty("--v-body-scroll-x"),o.style.removeProperty("--v-body-scroll-y"),o.style.removeProperty("--v-scrollbar-offset"),o.classList.remove("v-overlay-scroll-blocked"),o.scrollLeft=-u,o.scrollTop=-c,o.style.scrollBehavior=d}),a&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function C$(e,t,n){let i=!1,s=-1,r=-1;function a(o){w$(()=>{const l=performance.now();e.updateLocation.value?.(o),i=(performance.now()-l)/(1e3/60)>2})}r=(typeof requestIdleCallback>"u"?o=>o():requestIdleCallback)(()=>{n.run(()=>{BT(pm(e.target.value,e.contentEl.value),o=>{i?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{a(o)})})):a(o)})})}),Ft(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(r),cancelAnimationFrame(s)})}function pm(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(n=>!t?.contains(n)):e??t}function BT(e,t){const n=[document,...zc(e)];n.forEach(i=>{i.addEventListener("scroll",t,{passive:!0})}),Ft(()=>{n.forEach(i=>{i.removeEventListener("scroll",t)})})}const lh=Symbol.for("vuetify:v-menu"),ym=j({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function _m(e,t){let n=()=>{};function i(a){n?.();const o=Number(a?e.openDelay:e.closeDelay);return new Promise(l=>{n=DV(o,()=>{t?.(a),l(a)})})}function s(){return i(!0)}function r(){return i(!1)}return{clearDelay:n,runOpenDelay:s,runCloseDelay:r}}const k$=j({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...ym()},"VOverlay-activator");function E$(e,t){let{isActive:n,isTop:i,contentEl:s}=t;const r=At("useActivator"),a=le();let o=!1,l=!1,u=!0;const c=C(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),d=C(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!c.value),{runOpenDelay:f,runCloseDelay:h}=_m(e,T=>{T===(e.openOnHover&&o||c.value&&l)&&!(e.openOnHover&&n.value&&!i.value)&&(n.value!==T&&(u=!0),n.value=T)}),g=le(),v={onClick:T=>{T.stopPropagation(),a.value=T.currentTarget||T.target,n.value||(g.value=[T.clientX,T.clientY]),n.value=!n.value},onMouseenter:T=>{T.sourceCapabilities?.firesTouchEvents||(o=!0,a.value=T.currentTarget||T.target,f())},onMouseleave:T=>{o=!1,h()},onFocus:T=>{ya(T.target,":focus-visible")!==!1&&(l=!0,T.stopPropagation(),a.value=T.currentTarget||T.target,f())},onBlur:T=>{l=!1,T.stopPropagation(),h()}},m=C(()=>{const T={};return d.value&&(T.onClick=v.onClick),e.openOnHover&&(T.onMouseenter=v.onMouseenter,T.onMouseleave=v.onMouseleave),c.value&&(T.onFocus=v.onFocus,T.onBlur=v.onBlur),T}),p=C(()=>{const T={};if(e.openOnHover&&(T.onMouseenter=()=>{o=!0,f()},T.onMouseleave=()=>{o=!1,h()}),c.value&&(T.onFocusin=()=>{l=!0,f()},T.onFocusout=()=>{l=!1,h()}),e.closeOnContentClick){const k=He(lh,null);T.onClick=()=>{n.value=!1,k?.closeParents()}}return T}),y=C(()=>{const T={};return e.openOnHover&&(T.onMouseenter=()=>{u&&(o=!0,u=!1,f())},T.onMouseleave=()=>{o=!1,h()}),T});me(i,T=>{T&&(e.openOnHover&&!o&&(!c.value||!l)||c.value&&!l&&(!e.openOnHover||!o))&&!s.value?.contains(document.activeElement)&&(n.value=!1)}),me(n,T=>{T||setTimeout(()=>{g.value=void 0})},{flush:"post"});const _=Lc();ht(()=>{_.value&&je(()=>{a.value=_.el})});const b=Lc(),S=C(()=>e.target==="cursor"&&g.value?g.value:b.value?b.el:FT(e.target,r)||a.value),x=C(()=>Array.isArray(S.value)?void 0:S.value);let I;return me(()=>!!e.activator,T=>{T&&qe?(I=oa(),I.run(()=>{I$(e,r,{activatorEl:a,activatorEvents:m})})):I&&I.stop()},{flush:"post",immediate:!0}),Ft(()=>{I?.stop()}),{activatorEl:a,activatorRef:_,target:S,targetEl:x,targetRef:b,activatorEvents:m,contentEvents:p,scrimEvents:y}}function I$(e,t,n){let{activatorEl:i,activatorEvents:s}=n;me(()=>e.activator,(l,u)=>{if(u&&l!==u){const c=o(u);c&&a(c)}l&&je(()=>r())},{immediate:!0}),me(()=>e.activatorProps,()=>{r()}),Ft(()=>{a()});function r(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;l&&$V(l,ne(s.value,u))}function a(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;l&&zV(l,ne(s.value,u))}function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const u=FT(l,t);return i.value=u?.nodeType===Node.ELEMENT_NODE?u:void 0,i.value}}function FT(e,t){if(!e)return;let n;if(e==="parent"){let i=t?.proxy?.$el?.parentNode;for(;i?.hasAttribute("data-no-activator");)i=i.parentNode;n=i}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function VT(){if(!qe)return he(!1);const{ssr:e}=ni();if(e){const t=he(!1);return Wt(()=>{t.value=!0}),t}else return he(!0)}const bm=j({eager:Boolean},"lazy");function wm(e,t){const n=he(!1),i=U(()=>n.value||e.eager||t.value);me(t,()=>n.value=!0);function s(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:i,onAfterLeave:s}}function Ir(){const t=At("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const H_=Symbol.for("vuetify:stack"),Ya=qt([]);function P$(e,t,n){const i=At("useStack"),s=!n,r=He(H_,void 0),a=qt({activeChildren:new Set});dt(H_,a);const o=he(Number(zn(t)));en(e,()=>{const c=Ya.at(-1)?.[1];o.value=c?c+10:Number(zn(t)),s&&Ya.push([i.uid,o.value]),r?.activeChildren.add(i.uid),Ft(()=>{if(s){const d=Oe(Ya).findIndex(f=>f[0]===i.uid);Ya.splice(d,1)}r?.activeChildren.delete(i.uid)})});const l=he(!0);s&&ht(()=>{const c=Ya.at(-1)?.[0]===i.uid;setTimeout(()=>l.value=c)});const u=U(()=>!a.activeChildren.size);return{globalTop:Aa(l),localTop:u,stackStyles:U(()=>({zIndex:o.value}))}}function R$(e){return{teleportTarget:C(()=>{const n=e();if(n===!0||!qe)return;const i=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(i==null)return;let s=[...i.children].find(r=>r.matches(".v-overlay-container"));return s||(s=document.createElement("div"),s.className="v-overlay-container",i.appendChild(s)),s})}}function M$(){return!0}function LT(e,t,n){if(!e||UT(e,n)===!1)return!1;const i=TS(t);if(typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&i.host===e.target)return!1;const s=(typeof n.value=="object"&&n.value.include||(()=>[]))();return s.push(t),!s.some(r=>r?.contains(e.target))}function UT(e,t){return(typeof t.value=="object"&&t.value.closeConditional||M$)(e)}function O$(e,t,n){const i=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&LT(e,t,n)&&setTimeout(()=>{UT(e,n)&&i&&i(e)},0)}function j_(e,t){const n=TS(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const ch={mounted(e,t){const n=s=>O$(s,e,t),i=s=>{e._clickOutside.lastMousedownWasOutside=LT(s,e,t)};j_(e,s=>{s.addEventListener("click",n,!0),s.addEventListener("mousedown",i,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:i}},beforeUnmount(e,t){e._clickOutside&&(j_(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:i,onMousedown:s}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",s,!0)}),delete e._clickOutside[t.instance.$.uid])}};function D$(e){const{modelValue:t,color:n,...i}=e;return w(Cs,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&A("div",ne({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},i),null)]})}const hl=j({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...k$(),...Ce(),...It(),...bm(),...v$(),...x$(),...Xe(),...mi()},"VOverlay"),Oi=ie()({name:"VOverlay",directives:{vClickOutside:ch},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...hl()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:i,emit:s}=t;const r=At("VOverlay"),a=le(),o=le(),l=le(),u=Re(e,"modelValue"),c=C({get:()=>u.value,set:ee=>{ee&&e.disabled||(u.value=ee)}}),{themeClasses:d}=Ze(e),{rtlClasses:f,isRtl:h}=Mt(),{hasContent:g,onAfterLeave:v}=wm(e,c),m=Ge(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:p,localTop:y,stackStyles:_}=P$(c,()=>e.zIndex,e._disableGlobalStack),{activatorEl:b,activatorRef:S,target:x,targetEl:I,targetRef:T,activatorEvents:k,contentEvents:P,scrimEvents:D}=E$(e,{isActive:c,isTop:y,contentEl:l}),{teleportTarget:E}=R$(()=>{const ee=e.attach||e.contained;if(ee)return ee;const _e=b?.value?.getRootNode()||r.proxy?.$el?.getRootNode();return _e instanceof ShadowRoot?_e:!1}),{dimensionStyles:O}=Pt(e),N=VT(),{scopeId:L}=Ir();me(()=>e.disabled,ee=>{ee&&(c.value=!1)});const{contentStyles:H,updateLocation:G}=p$(e,{isRtl:h,contentEl:l,target:x,isActive:c});S$(e,{root:a,contentEl:l,targetEl:I,target:x,isActive:c,updateLocation:G});function z(ee){s("click:outside",ee),e.persistent?ge():c.value=!1}function $(ee){return c.value&&p.value&&(!e.scrim||ee.target===o.value||ee instanceof MouseEvent&&ee.shadowTarget===o.value)}qe&&me(c,ee=>{ee?window.addEventListener("keydown",B):window.removeEventListener("keydown",B)},{immediate:!0}),Ht(()=>{qe&&window.removeEventListener("keydown",B)});function B(ee){ee.key==="Escape"&&p.value&&(l.value?.contains(document.activeElement)||s("keydown",ee),e.persistent?ge():(c.value=!1,l.value?.contains(document.activeElement)&&b.value?.focus()))}function W(ee){ee.key==="Escape"&&!p.value||s("keydown",ee)}const X=qS();en(()=>e.closeOnBack,()=>{mU(X,ee=>{p.value&&c.value?(ee(!1),e.persistent?ge():c.value=!1):ee()})});const re=le();me(()=>c.value&&(e.absolute||e.contained)&&E.value==null,ee=>{if(ee){const _e=Gg(a.value);_e&&_e!==document.scrollingElement&&(re.value=_e.scrollTop)}});function ge(){e.noClickAnimation||l.value&&Wi(l.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Mo})}function de(){s("afterEnter")}function ye(){v(),s("afterLeave")}return oe(()=>A(Ae,null,[n.activator?.({isActive:c.value,targetRef:T,props:ne({ref:S},k.value,e.activatorProps)}),N.value&&g.value&&w(wC,{disabled:!E.value,to:E.value},{default:()=>[A("div",ne({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":c.value,"v-overlay--contained":e.contained},d.value,f.value,e.class],style:[_.value,{"--v-overlay-opacity":e.opacity,top:we(re.value)},e.style],ref:a,onKeydown:W},L,i),[w(D$,ne({color:m,modelValue:c.value&&!!e.scrim,ref:o},D.value),null),w(vn,{appear:!0,persisted:!0,transition:e.transition,target:x.value,onAfterEnter:de,onAfterLeave:ye},{default:()=>[_t(A("div",ne({ref:l,class:["v-overlay__content",e.contentClass],style:[O.value,H.value]},P.value,e.contentProps),[n.default?.({isActive:c})]),[[hi,c.value],[ch,{handler:z,closeConditional:$,include:()=>[b.value]}]])]})])]})])),{activatorEl:b,scrimEl:o,target:x,animateClick:ge,contentEl:l,globalTop:p,localTop:y,updateLocation:G}}}),$T=j({id:String,submenu:Boolean,disableInitialFocus:Boolean,...Qe(hl({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",stickToTarget:!0,transition:{component:Tu}}),["absolute"])},"VMenu"),Sa=ie()({name:"VMenu",props:$T(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"modelValue"),{scopeId:s}=Ir(),{isRtl:r}=Mt(),a=yn(),o=U(()=>e.id||`v-menu-${a}`),l=le(),u=He(lh,null),c=he(new Set);dt(lh,{register(){c.value.add(a)},unregister(){c.value.delete(a)},closeParents(m){setTimeout(()=>{!c.value.size&&!e.persistent&&(m==null||l.value?.contentEl&&!NV(m,l.value.contentEl))&&(i.value=!1,u?.closeParents())},40)}}),Ht(()=>{u?.unregister(),document.removeEventListener("focusin",d)}),Wh(()=>i.value=!1);async function d(m){const p=m.relatedTarget,y=m.target;await je(),i.value&&p!==y&&l.value?.contentEl&&l.value?.globalTop&&![document,l.value.contentEl].includes(y)&&!l.value.contentEl.contains(y)&&Ro(l.value.contentEl)[0]?.focus()}me(i,m=>{m?(u?.register(),qe&&!e.disableInitialFocus&&document.addEventListener("focusin",d,{once:!0})):(u?.unregister(),qe&&document.removeEventListener("focusin",d))},{immediate:!0});function f(m){u?.closeParents(m)}function h(m){if(!e.disabled)if(m.key==="Tab"||m.key==="Enter"&&!e.closeOnContentClick){if(m.key==="Enter"&&(m.target instanceof HTMLTextAreaElement||m.target instanceof HTMLInputElement&&m.target.closest("form")))return;m.key==="Enter"&&m.preventDefault(),uS(Ro(l.value?.contentEl,!1),m.shiftKey?"prev":"next",y=>y.tabIndex>=0)||(i.value=!1,l.value?.activatorEl?.focus())}else e.submenu&&m.key===(r.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,l.value?.activatorEl?.focus())}function g(m){if(e.disabled)return;const p=l.value?.contentEl;p&&i.value?m.key==="ArrowDown"?(m.preventDefault(),m.stopImmediatePropagation(),tr(p,"next")):m.key==="ArrowUp"?(m.preventDefault(),m.stopImmediatePropagation(),tr(p,"prev")):e.submenu&&(m.key===(r.value?"ArrowRight":"ArrowLeft")?i.value=!1:m.key===(r.value?"ArrowLeft":"ArrowRight")&&(m.preventDefault(),tr(p,"first"))):(e.submenu?m.key===(r.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(m.key))&&(i.value=!0,m.preventDefault(),setTimeout(()=>setTimeout(()=>g(m))))}const v=C(()=>ne({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-controls":o.value,onKeydown:g},e.activatorProps));return oe(()=>{const m=Oi.filterProps(e);return w(Oi,ne({ref:l,id:o.value,class:["v-menu",e.class],style:e.style},m,{modelValue:i.value,"onUpdate:modelValue":p=>i.value=p,absolute:!0,activatorProps:v.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":f,onKeydown:h},s),{activator:n.activator,default:function(){for(var p=arguments.length,y=new Array(p),_=0;_<p;_++)y[_]=arguments[_];return w(Be,{root:"VMenu"},{default:()=>[n.default?.(...y)]})}})}),Xt({id:o,openChildren:c},l)}}),N$=j({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Ce(),...mi({transition:{component:om}})},"VCounter"),Pu=ie()({name:"VCounter",functional:!0,props:N$(),setup(e,t){let{slots:n}=t;const i=U(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return oe(()=>w(vn,{transition:e.transition},{default:()=>[_t(A("div",{class:se(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:pe(e.style)},[n.default?n.default({counter:i.value,max:e.max,value:e.value}):i.value]),[[hi,e.active]])]})),{}}}),B$=j({floating:Boolean,...Ce()},"VFieldLabel"),eo=ie()({name:"VFieldLabel",props:B$(),setup(e,t){let{slots:n}=t;return oe(()=>w(Oa,{class:se(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:pe(e.style)},n)),{}}}),F$=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],gl=j({appendInnerIcon:Pe,bgColor:String,clearable:Boolean,clearIcon:{type:Pe,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:Pe,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>F$.includes(e)},"onClick:clear":Gt(),"onClick:appendInner":Gt(),"onClick:prependInner":Gt(),...Ce(),...ku(),...gt(),...Xe()},"VField"),Ps=ie()({name:"VField",inheritAttrs:!1,props:{id:String,...dl(),...gl()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const{themeClasses:r}=Ze(e),{loaderClasses:a}=ol(e),{focusClasses:o,isFocused:l,focus:u,blur:c}=rs(e),{InputIcon:d}=oT(e),{roundedClasses:f}=xt(e),{rtlClasses:h}=Mt(),g=U(()=>e.dirty||e.active),v=U(()=>!!(e.label||s.label)),m=U(()=>!e.singleLine&&v.value),p=yn(),y=C(()=>e.id||`input-${p}`),_=U(()=>e.details?`${y.value}-messages`:void 0),b=le(),S=le(),x=le(),I=C(()=>["plain","underlined"].includes(e.variant)),T=C(()=>e.error||e.disabled?void 0:g.value&&l.value?e.color:e.baseColor),k=C(()=>{if(!(!e.iconColor||e.glow&&!l.value))return e.iconColor===!0?T.value:e.iconColor}),{backgroundColorClasses:P,backgroundColorStyles:D}=Ge(()=>e.bgColor),{textColorClasses:E,textColorStyles:O}=Qt(T);me(g,H=>{if(m.value&&!Qi()){const G=b.value.$el,z=S.value.$el;requestAnimationFrame(()=>{const $=Yg(G),B=z.getBoundingClientRect(),W=B.x-$.x,X=B.y-$.y-($.height/2-B.height/2),re=B.width/.75,ge=Math.abs(re-$.width)>1?{maxWidth:we(re)}:void 0,de=getComputedStyle(G),ye=getComputedStyle(z),ee=parseFloat(de.transitionDuration)*1e3||150,_e=parseFloat(ye.getPropertyValue("--v-field-label-scale")),ke=ye.getPropertyValue("color");G.style.visibility="visible",z.style.visibility="hidden",Wi(G,{transform:`translate(${W}px, ${X}px) scale(${_e})`,color:ke,...ge},{duration:ee,easing:Mo,direction:H?"normal":"reverse"}).finished.then(()=>{G.style.removeProperty("visibility"),z.style.removeProperty("visibility")})})}},{flush:"post"});const N=C(()=>({isActive:g,isFocused:l,controlRef:x,blur:c,focus:u}));function L(H){H.target!==document.activeElement&&H.preventDefault()}return oe(()=>{const H=e.variant==="outlined",G=!!(s["prepend-inner"]||e.prependInnerIcon),z=!!(e.clearable||s.clear)&&!e.disabled,$=!!(s["append-inner"]||e.appendInnerIcon||z),B=()=>s.label?s.label({...N.value,label:e.label,props:{for:y.value}}):e.label;return A("div",ne({class:["v-field",{"v-field--active":g.value,"v-field--appended":$,"v-field--center-affix":e.centerAffix??!I.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":G,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!B(),[`v-field--variant-${e.variant}`]:!0},r.value,P.value,o.value,a.value,f.value,h.value,e.class],style:[D.value,e.style],onClick:L},n),[A("div",{class:"v-field__overlay"},null),w(ll,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:s.loader}),G&&A("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&w(d,{key:"prepend-icon",name:"prependInner",color:k.value},null),s["prepend-inner"]?.(N.value)]),A("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&m.value&&w(eo,{key:"floating-label",ref:S,class:se([E.value]),floating:!0,for:y.value,"aria-hidden":!g.value,style:pe(O.value)},{default:()=>[B()]}),v.value&&w(eo,{key:"label",ref:b,for:y.value},{default:()=>[B()]}),s.default?.({...N.value,props:{id:y.value,class:"v-field__input","aria-describedby":_.value},focus:u,blur:c})??A("div",{id:y.value,class:"v-field__input","aria-describedby":_.value},null)]),z&&w(lm,{key:"clear"},{default:()=>[_t(A("div",{class:"v-field__clearable",onMousedown:W=>{W.preventDefault(),W.stopPropagation()}},[w(Be,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[s.clear?s.clear({...N.value,props:{onFocus:u,onBlur:c,onClick:e["onClick:clear"],tabindex:-1}}):w(d,{name:"clear",onFocus:u,onBlur:c,tabindex:-1},null)]})]),[[hi,e.dirty]])]}),$&&A("div",{key:"append",class:"v-field__append-inner"},[s["append-inner"]?.(N.value),e.appendInnerIcon&&w(d,{key:"append-icon",name:"appendInner",color:k.value},null)]),A("div",{class:se(["v-field__outline",E.value]),style:pe(O.value)},[H&&A(Ae,null,[A("div",{class:"v-field__outline__start"},null),m.value&&A("div",{class:"v-field__outline__notch"},[w(eo,{ref:S,floating:!0,for:y.value,"aria-hidden":!g.value},{default:()=>[B()]})]),A("div",{class:"v-field__outline__end"},null)]),I.value&&m.value&&w(eo,{ref:S,floating:!0,for:y.value,"aria-hidden":!g.value},{default:()=>[B()]})])])}),{controlRef:x,fieldIconColor:k}}}),zT=j({autocomplete:String},"autocomplete");function WT(e){const t=yn(),n=he(0),i=U(()=>e.autocomplete==="suppress"),s=U(()=>i.value?`${e.name}-${t}-${n.value}`:e.name),r=U(()=>i.value?"off":e.autocomplete);return{isSuppressing:i,fieldAutocomplete:r,fieldName:s,update:()=>n.value=new Date().getTime()}}function HT(e){function t(n,i){!e.autofocus||!n||i[0].target?.focus?.()}return{onIntersect:t}}const V$=["color","file","time","date","datetime-local","week","month"],ml=j({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...zT(),...as(),...gl()},"VTextField"),es=ie()({name:"VTextField",directives:{vIntersect:di},inheritAttrs:!1,props:ml(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const r=Re(e,"modelValue"),{isFocused:a,focus:o,blur:l}=rs(e),{onIntersect:u}=HT(e),c=C(()=>typeof e.counterValue=="function"?e.counterValue(r.value):typeof e.counterValue=="number"?e.counterValue:(r.value??"").toString().length),d=C(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),f=C(()=>["plain","underlined"].includes(e.variant)),h=le(),g=le(),v=le(),m=WT(e),p=C(()=>V$.includes(e.type)||e.persistentPlaceholder||a.value||e.active);function y(){m.isSuppressing.value&&m.update(),a.value||o(),je(()=>{v.value!==document.activeElement&&v.value?.focus()})}function _(I){i("mousedown:control",I),I.target!==v.value&&(y(),I.preventDefault())}function b(I){i("click:control",I)}function S(I,T){I.stopPropagation(),y(),je(()=>{r.value=null,T(),bu(e["onClick:clear"],I)})}function x(I){const T=I.target;if(r.value=T.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const k=[T.selectionStart,T.selectionEnd];je(()=>{T.selectionStart=k[0],T.selectionEnd=k[1]})}}return oe(()=>{const I=!!(s.counter||e.counter!==!1&&e.counter!=null),T=!!(I||s.details),[k,P]=Ms(n),{modelValue:D,...E}=tn.filterProps(e),O=Ps.filterProps(e);return w(tn,ne({ref:h,modelValue:r.value,"onUpdate:modelValue":N=>r.value=N,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":f.value},e.class],style:e.style},k,E,{centerAffix:!f.value,focused:a.value}),{...s,default:N=>{let{id:L,isDisabled:H,isDirty:G,isReadonly:z,isValid:$,hasDetails:B,reset:W}=N;return w(Ps,ne({ref:g,onMousedown:_,onClick:b,"onClick:clear":X=>S(X,W),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},Qe(O,["onClick:clear"]),{id:L.value,active:p.value||G.value,dirty:G.value||e.dirty,disabled:H.value,focused:a.value,details:B.value,error:$.value===!1}),{...s,default:X=>{let{props:{class:re,...ge}}=X;const de=_t(A("input",ne({ref:v,value:r.value,onInput:x,autofocus:e.autofocus,readonly:z.value,disabled:H.value,name:m.fieldName.value,autocomplete:m.fieldAutocomplete.value,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:o,onBlur:l},ge,P),null),[[di,{handler:u},null,{once:!0}]]);return A(Ae,null,[e.prefix&&A("span",{class:"v-text-field__prefix"},[A("span",{class:"v-text-field__prefix__text"},[e.prefix])]),s.default?A("div",{class:se(re),"data-no-activator":""},[s.default(),de]):qi(de,{class:re}),e.suffix&&A("span",{class:"v-text-field__suffix"},[A("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:T?N=>A(Ae,null,[s.details?.(N),I&&A(Ae,null,[A("span",null,null),w(Pu,{active:e.persistentCounter||a.value,value:c.value,max:d.value,disabled:e.disabled},s.counter)])]):void 0})}),Xt({},h,g,v)}}),L$=j({renderless:Boolean,...Ce()},"VVirtualScrollItem"),jT=ie()({name:"VVirtualScrollItem",inheritAttrs:!1,props:L$(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const{resizeRef:r,contentRect:a}=ei(void 0,"border");me(()=>a.value?.height,o=>{o!=null&&i("update:height",o)}),oe(()=>e.renderless?A(Ae,null,[s.default?.({itemRef:r})]):A("div",ne({ref:r,class:["v-virtual-scroll__item",e.class],style:e.style},n),[s.default?.()]))}}),U$=-1,$$=1,Zd=100,XT=j({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function YT(e,t){const n=ni(),i=he(0);ht(()=>{i.value=parseFloat(e.itemHeight||0)});const s=he(0),r=he(Math.ceil((parseInt(e.height)||n.height.value)/(i.value||16))||1),a=he(0),o=he(0),l=le(),u=le();let c=0;const{resizeRef:d,contentRect:f}=ei();ht(()=>{d.value=l.value});const h=C(()=>l.value===document.documentElement?n.height.value:f.value?.height||parseInt(e.height)||0),g=C(()=>!!(l.value&&u.value&&h.value&&i.value));let v=Array.from({length:t.value.length}),m=Array.from({length:t.value.length});const p=he(0);let y=-1;function _(B){return v[B]||i.value}const b=aS(()=>{const B=performance.now();m[0]=0;const W=t.value.length;for(let X=1;X<=W-1;X++)m[X]=(m[X-1]||0)+_(X-1);p.value=Math.max(p.value,performance.now()-B)},p),S=me(g,B=>{B&&(S(),c=u.value.offsetTop,b.immediate(),H(),~y&&je(()=>{qe&&window.requestAnimationFrame(()=>{z(y),y=-1})}))});Ft(()=>{b.clear()});function x(B,W){const X=v[B],re=i.value;i.value=re?Math.min(i.value,W):W,(X!==W||re!==i.value)&&(v[B]=W,b())}function I(B){B=at(B,0,t.value.length-1);const W=Math.floor(B),X=B%1,re=W+1,ge=m[W]||0,de=m[re]||ge;return ge+(de-ge)*X}function T(B){return z$(m,B)}let k=0,P=0,D=0;me(h,(B,W)=>{W&&(H(),B<W&&requestAnimationFrame(()=>{P=0,H()}))});let E=-1;function O(){if(!l.value||!u.value)return;const B=l.value.scrollTop,W=performance.now();W-D>500?(P=Math.sign(B-k),c=u.value.offsetTop):P=B-k,k=B,D=W,window.clearTimeout(E),E=window.setTimeout(N,500),H()}function N(){!l.value||!u.value||(P=0,D=0,window.clearTimeout(E),H())}let L=-1;function H(){cancelAnimationFrame(L),L=requestAnimationFrame(G)}function G(){if(!l.value||!h.value||!i.value)return;const B=k-c,W=Math.sign(P),X=Math.max(0,B-Zd),re=at(T(X),0,t.value.length),ge=B+h.value+Zd,de=at(T(ge)+1,re+1,t.value.length);if((W!==U$||re<s.value)&&(W!==$$||de>r.value)){const ye=I(s.value)-I(re),ee=I(de)-I(r.value);Math.max(ye,ee)>Zd?(s.value=re,r.value=de):(re<=0&&(s.value=re),de>=t.value.length&&(r.value=de))}a.value=I(s.value),o.value=I(t.value.length)-I(r.value)}function z(B){const W=I(B);!l.value||B&&!W?y=B:l.value.scrollTop=W}const $=C(()=>t.value.slice(s.value,r.value).map((B,W)=>{const X=W+s.value;return{raw:B,index:X,key:Et(B,e.itemKey,X)}}));return me(t,()=>{v=Array.from({length:t.value.length}),m=Array.from({length:t.value.length}),b.immediate(),H()},{deep:1}),{calculateVisibleItems:H,containerRef:l,markerRef:u,computedItems:$,paddingTop:a,paddingBottom:o,scrollToIndex:z,handleScroll:O,handleScrollend:N,handleItemResize:x}}function z$(e,t){let n=e.length-1,i=0,s=0,r=null,a=-1;if(e[n]<t)return n;for(;i<=n;)if(s=i+n>>1,r=e[s],r>t)n=s-1;else if(r<t)a=s,i=s+1;else return r===t?s:i;return a}const W$=j({items:{type:Array,default:()=>[]},renderless:Boolean,...XT(),...Ce(),...It()},"VVirtualScroll"),Ru=ie()({name:"VVirtualScroll",props:W$(),setup(e,t){let{slots:n}=t;const i=At("VVirtualScroll"),{dimensionStyles:s}=Pt(e),{calculateVisibleItems:r,containerRef:a,markerRef:o,handleScroll:l,handleScrollend:u,handleItemResize:c,scrollToIndex:d,paddingTop:f,paddingBottom:h,computedItems:g}=YT(e,U(()=>e.items));return en(()=>e.renderless,()=>{function v(){const p=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";a.value===document.documentElement?(document[p]("scroll",l,{passive:!0}),document[p]("scrollend",u)):(a.value?.[p]("scroll",l,{passive:!0}),a.value?.[p]("scrollend",u))}Wt(()=>{a.value=Gg(i.vnode.el,!0),v(!0)}),Ft(v)}),oe(()=>{const v=g.value.map(m=>w(jT,{key:m.key,renderless:e.renderless,"onUpdate:height":p=>c(m.index,p)},{default:p=>n.default?.({item:m.raw,index:m.index,...p})}));return e.renderless?A(Ae,null,[A("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:we(f.value)}},null),v,A("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:we(h.value)}},null)]):A("div",{ref:a,class:se(["v-virtual-scroll",e.class]),onScrollPassive:l,onScrollend:u,style:pe([s.value,e.style])},[A("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:we(f.value),paddingBottom:we(h.value)}},[v])])}),{calculateVisibleItems:r,scrollToIndex:d}}});function xm(e,t){const n=he(!1);let i;function s(o){cancelAnimationFrame(i),n.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{n.value=!1})})}async function r(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(n.value){const l=me(n,()=>{l(),o()})}else o()})}async function a(o){if(o.key==="Tab"&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(o.key))return;const l=e.value?.$el;if(!l)return;(o.key==="Home"||o.key==="End")&&l.scrollTo({top:o.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await r();const u=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const c=l.getBoundingClientRect().top;for(const d of u)if(d.getBoundingClientRect().top>=c){d.focus();break}}else{const c=l.getBoundingClientRect().bottom;for(const d of[...u].reverse())if(d.getBoundingClientRect().bottom<=c){d.focus();break}}}return{onScrollPassive:s,onKeydown:a}}const Sm=j({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Pe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...IT({itemChildren:!1})},"Select"),H$=j({...Sm(),...Qe(ml({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...mi({transition:{component:Tu}})},"VSelect"),Tm=ie()({name:"VSelect",props:H$(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=nt(),s=le(),r=le(),a=le(),{items:o,transformIn:l,transformOut:u}=mm(e),c=Re(e,"modelValue",[],B=>l(B===null?[null]:bt(B)),B=>{const W=u(B);return e.multiple?W:W[0]??null}),d=C(()=>typeof e.counterValue=="function"?e.counterValue(c.value):typeof e.counterValue=="number"?e.counterValue:c.value.length),f=fl(e),h=C(()=>c.value.map(B=>B.value)),g=he(!1);let v="",m=-1,p;const y=C(()=>e.hideSelected?o.value.filter(B=>!c.value.some(W=>(e.valueComparator||$t)(W,B))):o.value),_=C(()=>e.hideNoData&&!y.value.length||f.isReadonly.value||f.isDisabled.value),b=Re(e,"menu"),S=C({get:()=>b.value,set:B=>{b.value&&!B&&r.value?.openChildren.size||B&&_.value||(b.value=B)}}),x=U(()=>S.value?e.closeText:e.openText),I=C(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),T=le(),k=xm(T,s);function P(B){e.openOnClear&&(S.value=!0)}function D(){_.value||(S.value=!S.value)}function E(B){_a(B)&&O(B)}function O(B){if(!B.key||f.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(B.key)&&B.preventDefault(),["Enter","ArrowDown"," "].includes(B.key)&&(S.value=!0),["Escape","Tab"].includes(B.key)&&(S.value=!1),B.key==="Home"?T.value?.focus("first"):B.key==="End"&&T.value?.focus("last");const W=1e3;if(!_a(B))return;const X=performance.now();X-p>W&&(v="",m=-1),v+=B.key.toLowerCase(),p=X;const re=y.value;function ge(){let ke=de();return ke||v.at(-1)===v.at(-2)&&(v=v.slice(0,-1),ke=de(),ke)||(m=-1,ke=de(),ke)?ke:(v=B.key.toLowerCase(),de())}function de(){for(let ke=m+1;ke<re.length;ke++){const ce=re[ke];if(ce.title.toLowerCase().startsWith(v))return[ce,ke]}}const ye=ge();if(!ye)return;const[ee,_e]=ye;m=_e,T.value?.focus(_e),e.multiple||(c.value=[ee])}function N(B){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!B.props.disabled)if(e.multiple){const X=c.value.findIndex(ge=>(e.valueComparator||$t)(ge.value,B.value)),re=W??!~X;if(~X){const ge=re?[...c.value,B]:[...c.value];ge.splice(X,1),c.value=ge}else re&&(c.value=[...c.value,B])}else{const X=W!==!1;c.value=X?[B]:[],je(()=>{S.value=!1})}}function L(B){T.value?.$el.contains(B.relatedTarget)||(S.value=!1)}function H(){e.eager&&a.value?.calculateVisibleItems()}function G(){g.value&&s.value?.focus()}function z(B){g.value=!0}function $(B){if(B==null)c.value=[];else if(ya(s.value,":autofill")||ya(s.value,":-webkit-autofill")){const W=o.value.find(X=>X.title===B);W&&N(W)}else s.value&&(s.value.value="")}return me(S,()=>{if(!e.hideSelected&&S.value&&c.value.length){const B=y.value.findIndex(W=>c.value.some(X=>(e.valueComparator||$t)(X.value,W.value)));qe&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{B>=0&&a.value?.scrollToIndex(B)})}}),me(()=>e.items,(B,W)=>{S.value||g.value&&e.hideNoData&&!W.length&&B.length&&(S.value=!0)}),oe(()=>{const B=!!(e.chips||n.chip),W=!!(!e.hideNoData||y.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),X=c.value.length>0,re=es.filterProps(e),ge=X||!g.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return w(es,ne({ref:s},re,{modelValue:c.value.map(de=>de.props.value).join(", "),"onUpdate:modelValue":$,focused:g.value,"onUpdate:focused":de=>g.value=de,validationValue:c.externalValue,counterValue:d.value,dirty:X,class:["v-select",{"v-select--active-menu":S.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":c.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:ge,"onClick:clear":P,"onMousedown:control":D,onBlur:L,onKeydown:O,"aria-label":i(x.value),title:i(x.value)}),{...n,default:()=>A(Ae,null,[w(Sa,ne({ref:r,modelValue:S.value,"onUpdate:modelValue":de=>S.value=de,activator:"parent",contentClass:"v-select__content",disabled:_.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:H,onAfterLeave:G},I.value),{default:()=>[W&&w(xa,ne({ref:T,selected:h.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:de=>de.preventDefault(),onKeydown:E,onFocusin:z,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},k,e.listProps),{default:()=>[n["prepend-item"]?.(),!y.value.length&&!e.hideNoData&&(n["no-data"]?.()??w(fi,{key:"no-data",title:i(e.noDataText)},null)),w(Ru,{ref:a,renderless:!0,items:y.value,itemKey:"value"},{default:de=>{let{item:ye,index:ee,itemRef:_e}=de;const ke=FV(ye.props),ce=ne(ye.props,{ref:_e,key:ye.value,onClick:()=>N(ye,null)});return ye.type==="divider"?n.divider?.({props:ye.raw,index:ee})??w($n,ne(ye.props,{key:`divider-${ee}`}),null):ye.type==="subheader"?n.subheader?.({props:ye.raw,index:ee})??w(Na,ne(ye.props,{key:`subheader-${ee}`}),null):n.item?.({item:ye,index:ee,props:ce})??w(fi,ne(ce,{role:"option"}),{prepend:Ee=>{let{isSelected:R}=Ee;return A(Ae,null,[e.multiple&&!e.hideSelected?w(Mi,{key:ye.value,modelValue:R,ripple:!1,tabindex:"-1"},null):void 0,ke.prependAvatar&&w(Wn,{image:ke.prependAvatar},null),ke.prependIcon&&w(Ye,{icon:ke.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),c.value.map((de,ye)=>{function ee(Ee){Ee.stopPropagation(),Ee.preventDefault(),N(de,!1)}const _e={"onClick:close":ee,onKeydown(Ee){Ee.key!=="Enter"&&Ee.key!==" "||(Ee.preventDefault(),Ee.stopPropagation(),ee(Ee))},onMousedown(Ee){Ee.preventDefault(),Ee.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ke=B?!!n.chip:!!n.selection,ce=ke?wu(B?n.chip({item:de,index:ye,props:_e}):n.selection({item:de,index:ye})):void 0;if(!(ke&&!ce))return A("div",{key:de.value,class:"v-select__selection"},[B?n.chip?w(Be,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:de.title}}},{default:()=>[ce]}):w(Da,ne({key:"chip",closable:e.closableChips,size:"small",text:de.title,disabled:de.props.disabled},_e),null):ce??A("span",{class:"v-select__selection-text"},[de.title,e.multiple&&ye<c.value.length-1&&A("span",{class:"v-select__selection-comma"},[Kt(",")])])])})]),"append-inner":function(){for(var de=arguments.length,ye=new Array(de),ee=0;ee<de;ee++)ye[ee]=arguments[ee];return A(Ae,null,[n["append-inner"]?.(...ye),e.menuIcon?w(Ye,{class:"v-select__menu-icon",color:s.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Xt({isFocused:g,menu:S,select:N},s)}}),j$=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const i=[];let s=e.indexOf(t);for(;~s;)i.push([s,s+t.length]),s=e.indexOf(t,s+t.length);return i.length?i:-1};function Gd(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const Ba=j({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function X$(e,t,n){const i=[],s=n?.default??j$,r=n?.filterKeys?bt(n.filterKeys):!1,a=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return i;let o=null;e:for(let l=0;l<e.length;l++){const[u,c=u]=bt(e[l]),d={},f={};let h=-1;if((t||a>0)&&!n?.noFilter){let g=!1;if(typeof u=="object"){if(u.type==="divider"||u.type==="subheader"){o?.type==="divider"&&u.type==="subheader"&&i.push(o),o={index:l,matches:{},type:u.type};continue}const p=r||Object.keys(c);g=p.length===a;for(const y of p){const _=Et(c,y),b=n?.customKeyFilter?.[y];if(h=b?b(_,t,u):s(_,t,u),h!==-1&&h!==!1)b?d[y]=Gd(h,t):f[y]=Gd(h,t);else if(n?.filterMode==="every")continue e}}else h=s(u,t,u),h!==-1&&h!==!1&&(f.title=Gd(h,t));const v=Object.keys(f).length,m=Object.keys(d).length;if(!v&&!m||n?.filterMode==="union"&&m!==a&&!v||n?.filterMode==="intersection"&&(m!==a||!v&&a>0&&!g))continue}o&&(i.push(o),o=null),i.push({index:l,matches:{...f,...d}})}return i}function Fa(e,t,n,i){const s=he([]),r=he(new Map),a=C(()=>i?.transform?En(t).map(l=>[l,i.transform(l)]):En(t));ht(()=>{const l=typeof n=="function"?n():En(n),u=typeof l!="string"&&typeof l!="number"?"":String(l),c=X$(a.value,u,{customKeyFilter:{...e.customKeyFilter,...En(i?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=En(t),f=[],h=new Map;c.forEach(g=>{let{index:v,matches:m}=g;const p=d[v];f.push(p),h.set(p.value,m)}),s.value=f,r.value=h});function o(l){return r.value.get(l.value)}return{filteredItems:s,filteredMatches:r,getMatches:o}}function KT(e,t,n){return n==null||!n.length?t:n.map((i,s)=>{const r=s===0?0:n[s-1][1],a=[A("span",{class:se(`${e}__unmask`)},[t.slice(r,i[0])]),A("span",{class:se(`${e}__mask`)},[t.slice(i[0],i[1])])];return s===n.length-1&&a.push(A("span",{class:se(`${e}__unmask`)},[t.slice(i[1])])),A(Ae,null,[a])})}const Y$=j({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Ba({filterKeys:["title"]}),...Sm(),...Qe(ml({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...mi({transition:!1})},"VAutocomplete"),K$=ie()({name:"VAutocomplete",props:Y$(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=nt(),s=le(),r=he(!1),a=he(!0),o=he(!1),l=le(),u=le(),c=he(-1),{items:d,transformIn:f,transformOut:h}=mm(e),{textColorClasses:g,textColorStyles:v}=Qt(()=>s.value?.color),m=Re(e,"search",""),p=Re(e,"modelValue",[],ce=>f(ce===null?[null]:bt(ce)),ce=>{const Ee=h(ce);return e.multiple?Ee:Ee[0]??null}),y=C(()=>typeof e.counterValue=="function"?e.counterValue(p.value):typeof e.counterValue=="number"?e.counterValue:p.value.length),_=fl(e),{filteredItems:b,getMatches:S}=Fa(e,d,()=>a.value?"":m.value),x=C(()=>e.hideSelected?b.value.filter(ce=>!p.value.some(Ee=>Ee.value===ce.value)):b.value),I=C(()=>!!(e.chips||n.chip)),T=C(()=>I.value||!!n.selection),k=C(()=>p.value.map(ce=>ce.props.value)),P=C(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&m.value===x.value[0]?.title)&&x.value.length>0&&!a.value&&!o.value),D=C(()=>e.hideNoData&&!x.value.length||_.isReadonly.value||_.isDisabled.value),E=Re(e,"menu"),O=C({get:()=>E.value,set:ce=>{E.value&&!ce&&l.value?.openChildren.size||ce&&D.value||(E.value=ce)}}),N=C(()=>O.value?e.closeText:e.openText),L=le(),H=xm(L,s);function G(ce){e.openOnClear&&(O.value=!0),m.value=""}function z(){D.value||(O.value=!0)}function $(ce){D.value||(r.value&&(ce.preventDefault(),ce.stopPropagation()),O.value=!O.value)}function B(ce){(_a(ce)||ce.key==="Backspace")&&s.value?.focus()}function W(ce){if(_.isReadonly.value)return;const Ee=s.value?.selectionStart,R=p.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(ce.key)&&ce.preventDefault(),["Enter","ArrowDown"].includes(ce.key)&&(O.value=!0),["Escape"].includes(ce.key)&&(O.value=!1),P.value&&["Enter","Tab"].includes(ce.key)&&!p.value.some(F=>{let{value:Y}=F;return Y===x.value[0].value})&&ke(x.value[0]),ce.key==="ArrowDown"&&P.value&&L.value?.focus("next"),["Backspace","Delete"].includes(ce.key)){if(!e.multiple&&T.value&&p.value.length>0&&!m.value)return ke(p.value[0],!1);if(~c.value){ce.preventDefault();const F=c.value;ke(p.value[c.value],!1),c.value=F>=R-1?R-2:F}else ce.key==="Backspace"&&!m.value&&(c.value=R-1);return}if(e.multiple)if(ce.key==="ArrowLeft"){if(c.value<0&&Ee&&Ee>0)return;const F=c.value>-1?c.value-1:R-1;if(p.value[F])c.value=F;else{const Y=m.value?.length??null;c.value=-1,s.value?.setSelectionRange(Y,Y)}}else if(ce.key==="ArrowRight"){if(c.value<0)return;const F=c.value+1;p.value[F]?c.value=F:(c.value=-1,s.value?.setSelectionRange(0,0))}else~c.value&&_a(ce)&&(c.value=-1)}function X(ce){if(ya(s.value,":autofill")||ya(s.value,":-webkit-autofill")){const Ee=d.value.find(R=>R.title===ce.target.value);Ee&&ke(Ee)}}function re(){e.eager&&u.value?.calculateVisibleItems()}function ge(){r.value&&(a.value=!0,s.value?.focus())}function de(ce){r.value=!0,setTimeout(()=>{o.value=!0})}function ye(ce){o.value=!1}function ee(ce){(ce==null||ce===""&&!e.multiple&&!T.value)&&(p.value=[])}const _e=he(!1);function ke(ce){let Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!ce||ce.props.disabled))if(e.multiple){const R=p.value.findIndex(Y=>(e.valueComparator||$t)(Y.value,ce.value)),F=Ee??!~R;if(~R){const Y=F?[...p.value,ce]:[...p.value];Y.splice(R,1),p.value=Y}else F&&(p.value=[...p.value,ce]);e.clearOnSelect&&(m.value="")}else{const R=Ee!==!1;p.value=R?[ce]:[],m.value=R&&!T.value?ce.title:"",je(()=>{O.value=!1,a.value=!0})}}return me(r,(ce,Ee)=>{ce!==Ee&&(ce?(_e.value=!0,m.value=e.multiple||T.value?"":String(p.value.at(-1)?.props.title??""),a.value=!0,je(()=>_e.value=!1)):(!e.multiple&&m.value==null&&(p.value=[]),O.value=!1,(e.multiple||T.value)&&(m.value=""),c.value=-1))}),me(m,ce=>{!r.value||_e.value||(ce&&(O.value=!0),a.value=!ce)}),me(O,()=>{if(!e.hideSelected&&O.value&&p.value.length){const ce=x.value.findIndex(Ee=>p.value.some(R=>Ee.value===R.value));qe&&window.requestAnimationFrame(()=>{ce>=0&&u.value?.scrollToIndex(ce)})}}),me(()=>e.items,(ce,Ee)=>{O.value||r.value&&!Ee.length&&ce.length&&(O.value=!0)}),oe(()=>{const ce=!!(!e.hideNoData||x.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),Ee=p.value.length>0,R=es.filterProps(e);return w(es,ne({ref:s},R,{modelValue:m.value,"onUpdate:modelValue":[F=>m.value=F,ee],focused:r.value,"onUpdate:focused":F=>r.value=F,validationValue:p.externalValue,counterValue:y.value,dirty:Ee,onChange:X,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":O.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!T.value,"v-autocomplete--selecting-index":c.value>-1},e.class],style:e.style,readonly:_.isReadonly.value,placeholder:Ee?void 0:e.placeholder,"onClick:clear":G,"onMousedown:control":z,onKeydown:W}),{...n,default:()=>A(Ae,null,[w(Sa,ne({ref:l,modelValue:O.value,"onUpdate:modelValue":F=>O.value=F,activator:"parent",contentClass:"v-autocomplete__content",disabled:D.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:re,onAfterLeave:ge},e.menuProps),{default:()=>[ce&&w(xa,ne({ref:L,filterable:!0,selected:k.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:F=>F.preventDefault(),onKeydown:B,onFocusin:de,onFocusout:ye,tabindex:"-1",selectable:!0,"aria-live":"polite",color:e.itemColor??e.color},H,e.listProps),{default:()=>[n["prepend-item"]?.(),!x.value.length&&!e.hideNoData&&(n["no-data"]?.()??w(fi,{key:"no-data",title:i(e.noDataText)},null)),w(Ru,{ref:u,renderless:!0,items:x.value,itemKey:"value"},{default:F=>{let{item:Y,index:te,itemRef:ae}=F;const ue=ne(Y.props,{ref:ae,key:Y.value,active:P.value&&te===0?!0:void 0,onClick:()=>ke(Y,null)});return Y.type==="divider"?n.divider?.({props:Y.raw,index:te})??w($n,ne(Y.props,{key:`divider-${te}`}),null):Y.type==="subheader"?n.subheader?.({props:Y.raw,index:te})??w(Na,ne(Y.props,{key:`subheader-${te}`}),null):n.item?.({item:Y,index:te,props:ue})??w(fi,ne(ue,{role:"option"}),{prepend:Se=>{let{isSelected:be}=Se;return A(Ae,null,[e.multiple&&!e.hideSelected?w(Mi,{key:Y.value,modelValue:be,ripple:!1,tabindex:"-1"},null):void 0,Y.props.prependAvatar&&w(Wn,{image:Y.props.prependAvatar},null),Y.props.prependIcon&&w(Ye,{icon:Y.props.prependIcon},null)])},title:()=>a.value?Y.title:KT("v-autocomplete",Y.title,S(Y)?.title)})}}),n["append-item"]?.()]})]}),p.value.map((F,Y)=>{function te(be){be.stopPropagation(),be.preventDefault(),ke(F,!1)}const ae={"onClick:close":te,onKeydown(be){be.key!=="Enter"&&be.key!==" "||(be.preventDefault(),be.stopPropagation(),te(be))},onMousedown(be){be.preventDefault(),be.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ue=I.value?!!n.chip:!!n.selection,Se=ue?wu(I.value?n.chip({item:F,index:Y,props:ae}):n.selection({item:F,index:Y})):void 0;if(!(ue&&!Se))return A("div",{key:F.value,class:se(["v-autocomplete__selection",Y===c.value&&["v-autocomplete__selection--selected",g.value]]),style:pe(Y===c.value?v.value:{})},[I.value?n.chip?w(Be,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:F.title}}},{default:()=>[Se]}):w(Da,ne({key:"chip",closable:e.closableChips,size:"small",text:F.title,disabled:F.props.disabled},ae),null):Se??A("span",{class:"v-autocomplete__selection-text"},[F.title,e.multiple&&Y<p.value.length-1&&A("span",{class:"v-autocomplete__selection-comma"},[Kt(",")])])])})]),"append-inner":function(){for(var F=arguments.length,Y=new Array(F),te=0;te<F;te++)Y[te]=arguments[te];return A(Ae,null,[n["append-inner"]?.(...Y),e.menuIcon?w(Ye,{class:"v-autocomplete__menu-icon",color:s.value?.fieldIconColor,icon:e.menuIcon,onMousedown:$,onClick:dS,"aria-label":i(N.value),title:i(N.value),tabindex:"-1"},null):void 0])}})}),Xt({isFocused:r,isPristine:a,menu:O,search:m,filteredItems:b,select:ke},s)}}),q$=j({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Pe,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Ce(),...ss({location:"top end"}),...gt(),...Ne(),...Xe(),...mi({transition:"scale-rotate-transition"}),...It()},"VBadge"),Z$=ie()({name:"VBadge",inheritAttrs:!1,props:q$(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:i}=Ge(()=>e.color),{roundedClasses:s}=xt(e),{t:r}=nt(),{textColorClasses:a,textColorStyles:o}=Qt(()=>e.textColor),{themeClasses:l}=sm(),{locationStyles:u}=Er(e,!0,d=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(d)?Number(e.offsetY??0):["left","right"].includes(d)?Number(e.offsetX??0):0)),{dimensionStyles:c}=Pt(e);return oe(()=>{const d=Number(e.content),f=!e.max||isNaN(d)?e.content:d<=Number(e.max)?d:`${e.max}+`,[h,g]=Hf(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return w(e.tag,ne({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},g,{style:e.style}),{default:()=>[A("div",{class:"v-badge__wrapper"},[t.slots.default?.(),w(vn,{transition:e.transition},{default:()=>[_t(A("span",ne({class:["v-badge__badge",l.value,n.value,s.value,a.value],style:[i.value,o.value,c.value,e.inline?{}:u.value],"aria-atomic":"true","aria-label":r(e.label,d),"aria-live":"polite",role:"status"},h),[e.dot?void 0:t.slots.badge?t.slots.badge?.():e.icon?w(Ye,{icon:e.icon},null):f]),[[hi,e.modelValue]])]})])]})}),{}}}),G$=j({color:String,density:String,...Ce()},"VBannerActions"),qT=ie()({name:"VBannerActions",props:G$(),setup(e,t){let{slots:n}=t;return wt({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),oe(()=>A("div",{class:se(["v-banner-actions",e.class]),style:pe(e.style)},[n.default?.()])),{}}}),ZT=is("v-banner-text"),Q$=j({avatar:String,bgColor:String,color:String,icon:Pe,lines:String,stacked:Boolean,sticky:Boolean,text:String,...An(),...Ce(),...Vt(),...It(),...br({mobile:null}),...Ot(),...ss(),...Ra(),...gt(),...Ne(),...Xe()},"VBanner"),J$=ie()({name:"VBanner",props:Q$(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:s}=Ge(()=>e.bgColor),{borderClasses:r}=Pn(e),{densityClasses:a}=_n(e),{displayClasses:o,mobile:l}=ni(e),{dimensionStyles:u}=Pt(e),{elevationClasses:c}=jt(e),{locationStyles:d}=Er(e),{positionClasses:f}=Ma(e),{roundedClasses:h}=xt(e),{themeClasses:g}=Ze(e),v=U(()=>e.color),m=U(()=>e.density);wt({VBannerActions:{color:v,density:m}}),oe(()=>{const p=!!(e.text||n.text),y=!!(e.avatar||e.icon),_=!!(y||n.prepend);return w(e.tag,{class:se(["v-banner",{"v-banner--stacked":e.stacked||l.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},g.value,i.value,r.value,a.value,o.value,c.value,f.value,h.value,e.class]),style:pe([s.value,u.value,d.value,e.style]),role:"banner"},{default:()=>[_&&A("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?w(Be,{key:"prepend-defaults",disabled:!y,defaults:{VAvatar:{color:v.value,density:m.value,icon:e.icon,image:e.avatar}}},n.prepend):w(Wn,{key:"prepend-avatar",color:v.value,density:m.value,icon:e.icon,image:e.avatar},null)]),A("div",{class:"v-banner__content"},[p&&w(ZT,{key:"text"},{default:()=>[n.text?.()??e.text]}),n.default?.()]),n.actions&&w(qT,{key:"actions"},n.actions)]})})}}),e8=j({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...An(),...Ce(),...Vt(),...Ot(),...gt(),...wr({name:"bottom-navigation"}),...Ne({tag:"header"}),...Ar({selectedClass:"v-btn--selected"}),...Xe()},"VBottomNavigation"),t8=ie()({name:"VBottomNavigation",props:e8(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=sm(),{borderClasses:s}=Pn(e),{backgroundColorClasses:r,backgroundColorStyles:a}=Ge(()=>e.bgColor),{densityClasses:o}=_n(e),{elevationClasses:l}=jt(e),{roundedClasses:u}=xt(e),{ssrBootStyles:c}=Sr(),d=C(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),f=Re(e,"active",e.active),{layoutItemStyles:h}=xr({id:e.name,order:C(()=>parseInt(e.order,10)),position:U(()=>"bottom"),layoutSize:U(()=>f.value?d.value:0),elementSize:d,active:f,absolute:U(()=>e.absolute)});return Ds(e,um),wt({VBtn:{baseColor:U(()=>e.baseColor),color:U(()=>e.color),density:U(()=>e.density),stacked:U(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),oe(()=>w(e.tag,{class:se(["v-bottom-navigation",{"v-bottom-navigation--active":f.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},i.value,r.value,s.value,o.value,l.value,u.value,e.class]),style:pe([a.value,h.value,{height:we(d.value)},c.value,e.style])},{default:()=>[n.default&&A("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),GT=j({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...hl({origin:"center center",scrollStrategy:"block",transition:{component:Tu},zIndex:2400})},"VDialog"),uh=ie()({name:"VDialog",props:GT(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:i}=t;const s=Re(e,"modelValue"),{scopeId:r}=Ir(),a=le();function o(c){const d=c.relatedTarget,f=c.target;if(d!==f&&a.value?.contentEl&&a.value?.globalTop&&![document,a.value.contentEl].includes(f)&&!a.value.contentEl.contains(f)){const h=Ro(a.value.contentEl);if(!h.length)return;const g=h[0],v=h[h.length-1];d===g?v.focus():g.focus()}}Ht(()=>{document.removeEventListener("focusin",o)}),qe&&me(()=>s.value&&e.retainFocus,c=>{c?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0});function l(){n("afterEnter"),(e.scrim||e.retainFocus)&&a.value?.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function u(){n("afterLeave")}return me(s,async c=>{c||(await je(),a.value.activatorEl?.focus({preventScroll:!0}))}),oe(()=>{const c=Oi.filterProps(e),d=ne({"aria-haspopup":"dialog"},e.activatorProps),f=ne({tabindex:-1},e.contentProps);return w(Oi,ne({ref:a,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},c,{modelValue:s.value,"onUpdate:modelValue":h=>s.value=h,"aria-modal":"true",activatorProps:d,contentProps:f,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:l,onAfterLeave:u},r),{activator:i.activator,default:function(){for(var h=arguments.length,g=new Array(h),v=0;v<h;v++)g[v]=arguments[v];return w(Be,{root:"VDialog"},{default:()=>[i.default?.(...g)]})}})}),Xt({},a)}}),n8=j({inset:Boolean,...GT({transition:"bottom-sheet-transition"})},"VBottomSheet"),i8=ie()({name:"VBottomSheet",props:n8(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"modelValue");return oe(()=>{const s=uh.filterProps(e);return w(uh,ne(s,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:i.value,"onUpdate:modelValue":r=>i.value=r,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),s8=j({divider:[Number,String],...Ce()},"VBreadcrumbsDivider"),QT=ie()({name:"VBreadcrumbsDivider",props:s8(),setup(e,t){let{slots:n}=t;return oe(()=>A("li",{"aria-hidden":"true",class:se(["v-breadcrumbs-divider",e.class]),style:pe(e.style)},[n?.default?.()??e.divider])),{}}}),r8=j({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Ce(),...ul(),...Ne({tag:"li"})},"VBreadcrumbsItem"),JT=ie()({name:"VBreadcrumbsItem",props:r8(),setup(e,t){let{slots:n,attrs:i}=t;const s=cl(e,i),r=C(()=>e.active||s.isActive?.value),{textColorClasses:a,textColorStyles:o}=Qt(()=>r.value?e.activeColor:e.color);return oe(()=>w(e.tag,{class:se(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":r.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:r.value&&e.activeClass},a.value,e.class]),style:pe([o.value,e.style]),"aria-current":r.value?"page":void 0},{default:()=>[s.isLink.value?A("a",ne({class:"v-breadcrumbs-item--link",onClick:s.navigate},s.linkProps),[n.default?.()??e.title]):n.default?.()??e.title]})),{}}}),a8=j({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:Pe,items:{type:Array,default:()=>[]},...Ce(),...Vt(),...gt(),...Ne({tag:"ul"})},"VBreadcrumbs"),o8=ie()({name:"VBreadcrumbs",props:a8(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:s}=Ge(()=>e.bgColor),{densityClasses:r}=_n(e),{roundedClasses:a}=xt(e);wt({VBreadcrumbsDivider:{divider:U(()=>e.divider)},VBreadcrumbsItem:{activeClass:U(()=>e.activeClass),activeColor:U(()=>e.activeColor),color:U(()=>e.color),disabled:U(()=>e.disabled)}});const o=C(()=>e.items.map(l=>typeof l=="string"?{item:{title:l},raw:l}:{item:l,raw:l}));return oe(()=>{const l=!!(n.prepend||e.icon);return w(e.tag,{class:se(["v-breadcrumbs",i.value,r.value,a.value,e.class]),style:pe([s.value,e.style])},{default:()=>[l&&A("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?w(Be,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):w(Ye,{key:"prepend-icon",start:!0,icon:e.icon},null)]),o.value.map((u,c,d)=>{let{item:f,raw:h}=u;return A(Ae,null,[n.item?.({item:f,index:c})??w(JT,ne({key:c,disabled:c>=d.length-1},typeof f=="string"?{title:f}:f),{default:n.title?()=>n.title?.({item:f,index:c}):void 0}),c<d.length-1&&w(QT,null,{default:n.divider?()=>n.divider?.({item:h,index:c}):void 0})])}),n.default?.()]})}),{}}}),l8=j({...Ce(),...Ne()},"VCardActions"),e1=ie()({name:"VCardActions",props:l8(),setup(e,t){let{slots:n}=t;return wt({VBtn:{slim:!0,variant:"text"}}),oe(()=>w(e.tag,{class:se(["v-card-actions",e.class]),style:pe(e.style)},n)),{}}}),c8=j({opacity:[Number,String],...Ce(),...Ne()},"VCardSubtitle"),t1=ie()({name:"VCardSubtitle",props:c8(),setup(e,t){let{slots:n}=t;return oe(()=>w(e.tag,{class:se(["v-card-subtitle",e.class]),style:pe([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),n1=is("v-card-title"),u8=j({appendAvatar:String,appendIcon:Pe,prependAvatar:String,prependIcon:Pe,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Ce(),...Vt(),...Ne()},"VCardItem"),i1=ie()({name:"VCardItem",props:u8(),setup(e,t){let{slots:n}=t;return oe(()=>{const i=!!(e.prependAvatar||e.prependIcon),s=!!(i||n.prepend),r=!!(e.appendAvatar||e.appendIcon),a=!!(r||n.append),o=!!(e.title!=null||n.title),l=!!(e.subtitle!=null||n.subtitle);return w(e.tag,{class:se(["v-card-item",e.class]),style:pe(e.style)},{default:()=>[s&&A("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?w(Be,{key:"prepend-defaults",disabled:!i,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):A(Ae,null,[e.prependAvatar&&w(Wn,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&w(Ye,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),A("div",{class:"v-card-item__content"},[o&&w(n1,{key:"title"},{default:()=>[n.title?.()??cn(e.title)]}),l&&w(t1,{key:"subtitle"},{default:()=>[n.subtitle?.()??cn(e.subtitle)]}),n.default?.()]),a&&A("div",{key:"append",class:"v-card-item__append"},[n.append?w(Be,{key:"append-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):A(Ae,null,[e.appendIcon&&w(Ye,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&w(Wn,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])]})}),{}}}),d8=j({opacity:[Number,String],...Ce(),...Ne()},"VCardText"),s1=ie()({name:"VCardText",props:d8(),setup(e,t){let{slots:n}=t;return oe(()=>w(e.tag,{class:se(["v-card-text",e.class]),style:pe([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),f8=j({appendAvatar:String,appendIcon:Pe,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Pe,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...An(),...Ce(),...Vt(),...It(),...Ot(),...ku(),...ss(),...Ra(),...gt(),...ul(),...Ne(),...Xe(),...ii({variant:"elevated"})},"VCard"),h8=ie()({name:"VCard",directives:{vRipple:pn},props:f8(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:s}=Ze(e),{borderClasses:r}=Pn(e),{colorClasses:a,colorStyles:o,variantClasses:l}=Tr(e),{densityClasses:u}=_n(e),{dimensionStyles:c}=Pt(e),{elevationClasses:d}=jt(e),{loaderClasses:f}=ol(e),{locationStyles:h}=Er(e),{positionClasses:g}=Ma(e),{roundedClasses:v}=xt(e),m=cl(e,n);return oe(()=>{const p=e.link!==!1&&m.isLink.value,y=!e.disabled&&e.link!==!1&&(e.link||m.isClickable.value),_=p?"a":e.tag,b=!!(i.title||e.title!=null),S=!!(i.subtitle||e.subtitle!=null),x=b||S,I=!!(i.append||e.appendAvatar||e.appendIcon),T=!!(i.prepend||e.prependAvatar||e.prependIcon),k=!!(i.image||e.image),P=x||T||I,D=!!(i.text||e.text!=null);return _t(w(_,ne({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":y},s.value,r.value,a.value,u.value,d.value,f.value,g.value,v.value,l.value,e.class],style:[o.value,c.value,h.value,e.style],onClick:y&&m.navigate,tabindex:e.disabled?-1:void 0},m.linkProps),{default:()=>[k&&A("div",{key:"image",class:"v-card__image"},[i.image?w(Be,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},i.image):w(Ji,{key:"image-img",cover:!0,src:e.image},null)]),w(ll,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:i.loader}),P&&w(i1,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:i.item,prepend:i.prepend,title:i.title,subtitle:i.subtitle,append:i.append}),D&&w(s1,{key:"text"},{default:()=>[i.text?.()??e.text]}),i.default?.(),i.actions&&w(e1,null,{default:i.actions}),Os(y,"v-card")]}),[[pn,y&&e.ripple]])}),{}}}),g8=e=>{const{touchstartX:t,touchendX:n,touchstartY:i,touchendY:s}=e,r=.5,a=16;e.offsetX=n-t,e.offsetY=s-i,Math.abs(e.offsetY)<r*Math.abs(e.offsetX)&&(e.left&&n<t-a&&e.left(e),e.right&&n>t+a&&e.right(e)),Math.abs(e.offsetX)<r*Math.abs(e.offsetY)&&(e.up&&s<i-a&&e.up(e),e.down&&s>i+a&&e.down(e))};function m8(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function v8(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),g8(t)}function p8(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function y8(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>m8(n,t),touchend:n=>v8(n,t),touchmove:n=>p8(n,t)}}function _8(e,t){const n=t.value,i=n?.parent?e.parentElement:e,s=n?.options??{passive:!0},r=t.instance?.$.uid;if(!i||r===void 0)return;const a=y8(t.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[r]=a,sS(a).forEach(o=>{i.addEventListener(o,a[o],s)})}function b8(e,t){const n=t.value?.parent?e.parentElement:e,i=t.instance?.$.uid;if(!n?._touchHandlers||i===void 0)return;const s=n._touchHandlers[i];sS(s).forEach(r=>{n.removeEventListener(r,s[r])}),delete n._touchHandlers[i]}const Kc={mounted:_8,unmounted:b8},r1=Symbol.for("vuetify:v-window"),a1=Symbol.for("vuetify:v-window-group"),Mu=j({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},crossfade:Boolean,transitionDuration:Number,...Ce(),...Ne(),...Xe()},"VWindow"),ur=ie()({name:"VWindow",directives:{vTouch:Kc},props:Mu(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ze(e),{isRtl:s}=Mt(),{t:r}=nt(),a=Ds(e,a1),o=le(),l=C(()=>s.value?!e.reverse:e.reverse),u=he(!1),c=C(()=>{if(e.crossfade)return"v-window-crossfade-transition";const b=e.direction==="vertical"?"y":"x",x=(l.value?!u.value:u.value)?"-reverse":"";return`v-window-${b}${x}-transition`}),d=he(0),f=le(void 0),h=C(()=>a.items.value.findIndex(b=>a.selected.value.includes(b.id)));me(h,(b,S)=>{const x=a.items.value.length,I=x-1;x<=2?u.value=b<S:b===I&&S===0?u.value=!0:b===0&&S===I?u.value=!1:u.value=b<S}),dt(r1,{transition:c,isReversed:u,transitionCount:d,transitionHeight:f,rootRef:o});const g=U(()=>e.continuous||h.value!==0),v=U(()=>e.continuous||h.value!==a.items.value.length-1);function m(){g.value&&a.prev()}function p(){v.value&&a.next()}const y=C(()=>{const b=[],S={icon:s.value?e.nextIcon:e.prevIcon,class:`v-window__${l.value?"right":"left"}`,onClick:a.prev,"aria-label":r("$vuetify.carousel.prev")};b.push(g.value?n.prev?n.prev({props:S}):w(We,S,null):A("div",null,null));const x={icon:s.value?e.prevIcon:e.nextIcon,class:`v-window__${l.value?"left":"right"}`,onClick:a.next,"aria-label":r("$vuetify.carousel.next")};return b.push(v.value?n.next?n.next({props:x}):w(We,x,null):A("div",null,null)),b}),_=C(()=>e.touch===!1?e.touch:{...{left:()=>{l.value?m():p()},right:()=>{l.value?p():m()},start:S=>{let{originalEvent:x}=S;x.stopPropagation()}},...e.touch===!0?{}:e.touch});return oe(()=>_t(w(e.tag,{ref:o,class:se(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows,"v-window--crossfade":!!e.crossfade},i.value,e.class]),style:pe([e.style,e.transitionDuration&&!Qi?{"--v-window-transition-duration":we(e.transitionDuration,"ms")}:void 0])},{default:()=>[A("div",{class:"v-window__container",style:{height:f.value}},[n.default?.({group:a}),e.showArrows!==!1&&A("div",{class:se(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[y.value])]),n.additional?.({group:a})]}),[[Kc,_.value]])),{group:a}}}),w8=j({color:String,cycle:Boolean,delimiterIcon:{type:Pe,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...Mu({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),x8=ie()({name:"VCarousel",props:w8(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"modelValue"),{t:s}=nt(),r=le();let a=-1;me(i,l),me(()=>e.interval,l),me(()=>e.cycle,u=>{u?l():window.clearTimeout(a)}),Wt(o);function o(){!e.cycle||!r.value||(a=window.setTimeout(r.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function l(){window.clearTimeout(a),window.requestAnimationFrame(o)}return oe(()=>{const u=ur.filterProps(e);return w(ur,ne({ref:r},u,{modelValue:i.value,"onUpdate:modelValue":c=>i.value=c,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:we(e.height)},e.style]}),{default:n.default,additional:c=>{let{group:d}=c;return A(Ae,null,[!e.hideDelimiters&&A("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[d.items.value.length>0&&w(Be,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[d.items.value.map((f,h)=>{const g={id:`carousel-item-${f.id}`,"aria-label":s("$vuetify.carousel.ariaLabel.delimiter",h+1,d.items.value.length),class:["v-carousel__controls__item",d.isSelected(f.id)&&"v-btn--active"],onClick:()=>d.select(f.id,!0)};return n.item?n.item({props:g,item:f}):w(We,ne(f,g),null)})]})]),e.progress&&w(Cu,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(d.getItemIndex(i.value)+1)/d.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),Ou=j({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ce(),...Cr(),...bm()},"VWindowItem"),dr=ie()({name:"VWindowItem",directives:{vTouch:Kc},props:Ou(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=He(r1),s=kr(e,a1),{isBooted:r}=Sr();if(!i||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const a=he(!1),o=C(()=>r.value&&(i.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function l(){!a.value||!i||(a.value=!1,i.transitionCount.value>0&&(i.transitionCount.value-=1,i.transitionCount.value===0&&(i.transitionHeight.value=void 0)))}function u(){a.value||!i||(a.value=!0,i.transitionCount.value===0&&(i.transitionHeight.value=we(i.rootRef.value?.clientHeight)),i.transitionCount.value+=1)}function c(){l()}function d(g){a.value&&je(()=>{!o.value||!a.value||!i||(i.transitionHeight.value=we(g.clientHeight))})}const f=C(()=>{const g=i.isReversed.value?e.reverseTransition:e.transition;return o.value?{name:typeof g!="string"?i.transition.value:g,onBeforeEnter:u,onAfterEnter:l,onEnterCancelled:c,onBeforeLeave:u,onAfterLeave:l,onLeaveCancelled:c,onEnter:d}:!1}),{hasContent:h}=wm(e,s.isSelected);return oe(()=>w(vn,{transition:f.value,disabled:!r.value},{default:()=>[_t(A("div",{class:se(["v-window-item",s.selectedClass.value,e.class]),style:pe(e.style)},[h.value&&n.default?.()]),[[hi,s.isSelected.value]])]})),{groupItem:s}}}),S8=j({...jS(),...Ou()},"VCarouselItem"),T8=ie()({name:"VCarouselItem",inheritAttrs:!1,props:S8(),setup(e,t){let{slots:n,attrs:i}=t;oe(()=>{const s=Ji.filterProps(e),r=dr.filterProps(e);return w(dr,ne({class:["v-carousel-item",e.class]},r),{default:()=>[w(Ji,ne(i,s),n)]})})}}),A8=is("v-code","code"),C8=j({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Ce()},"VColorPickerCanvas"),k8=Hn({name:"VColorPickerCanvas",props:C8(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const i=he(!1),s=le(),r=he(parseFloat(e.width)),a=he(parseFloat(e.height)),o=le({x:0,y:0}),l=C({get:()=>o.value,set(m){if(!s.value)return;const{x:p,y}=m;o.value=m,n("update:color",{h:e.color?.h??0,s:at(p,0,r.value)/r.value,v:1-at(y,0,a.value)/a.value,a:e.color?.a??1})}}),u=C(()=>{const{x:m,y:p}=l.value,y=parseInt(e.dotSize,10)/2;return{width:we(e.dotSize),height:we(e.dotSize),transform:`translate(${we(m-y)}, ${we(p-y)})`}}),{resizeRef:c}=ei(m=>{if(!c.el?.offsetParent)return;const{width:p,height:y}=m[0].contentRect;r.value=p,a.value=y});function d(m,p,y){const{left:_,top:b,width:S,height:x}=y;l.value={x:at(m-_,0,S),y:at(p-b,0,x)}}function f(m){m.type==="mousedown"&&m.preventDefault(),!e.disabled&&(h(m),window.addEventListener("mousemove",h),window.addEventListener("mouseup",g),window.addEventListener("touchmove",h),window.addEventListener("touchend",g))}function h(m){if(e.disabled||!s.value)return;i.value=!0;const p=OV(m);d(p.clientX,p.clientY,s.value.getBoundingClientRect())}function g(){window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",g),window.removeEventListener("touchmove",h),window.removeEventListener("touchend",g)}function v(){if(!s.value)return;const m=s.value,p=m.getContext("2d");if(!p)return;const y=p.createLinearGradient(0,0,m.width,0);y.addColorStop(0,"hsla(0, 0%, 100%, 1)"),y.addColorStop(1,`hsla(${e.color?.h??0}, 100%, 50%, 1)`),p.fillStyle=y,p.fillRect(0,0,m.width,m.height);const _=p.createLinearGradient(0,0,0,m.height);_.addColorStop(0,"hsla(0, 0%, 0%, 0)"),_.addColorStop(1,"hsla(0, 0%, 0%, 1)"),p.fillStyle=_,p.fillRect(0,0,m.width,m.height)}return me(()=>e.color?.h,v,{immediate:!0}),me(()=>[r.value,a.value],(m,p)=>{v(),o.value={x:l.value.x*m[0]/p[0],y:l.value.y*m[1]/p[1]}},{flush:"post"}),me(()=>e.color,()=>{if(i.value){i.value=!1;return}o.value=e.color?{x:e.color.s*r.value,y:(1-e.color.v)*a.value}:{x:0,y:0}},{deep:!0,immediate:!0}),Wt(()=>v()),oe(()=>A("div",{ref:c,class:se(["v-color-picker-canvas",e.class]),style:pe(e.style),onMousedown:f,onTouchstartPassive:f},[A("canvas",{ref:s,width:r.value,height:a.value},null),e.color&&A("div",{class:se(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:pe(u.value)},null)])),{}}});function E8(e,t){if(t){const{a:n,...i}=e;return i}return e}function I8(e,t){if(t==null||typeof t=="string"){const n=e.a!==1;if(t?.startsWith("rgb(")){const{r:s,g:r,b:a,a:o}=Ri(e);return`rgb(${s} ${r} ${a}`+(n?` / ${o})`:")")}else if(t?.startsWith("hsl(")){const{h:s,s:r,l:a,a:o}=qf(e);return`hsl(${s} ${Math.round(r*100)} ${Math.round(a*100)}`+(n?` / ${o})`:")")}const i=xS(e);return e.a===1?i.slice(0,7):i}if(typeof t=="object"){let n;return Ys(t,["r","g","b"])?n=Ri(e):Ys(t,["h","s","l"])?n=qf(e):Ys(t,["h","s","v"])&&(n=e),E8(n,!Ys(t,["a"])&&e.a===1)}return e}const Qr={h:0,s:0,v:0,a:1},dh={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:Ri,from:il},P8={...dh,inputs:dh.inputs?.slice(0,3)},fh={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:qf,from:qg},R8={...fh,inputs:fh.inputs.slice(0,3)},o1={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t,localeKey:"hexaInput"}],to:xS,from:sL},M8={...o1,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t,localeKey:"hexInput"}]},ir={rgb:P8,rgba:dh,hsl:R8,hsla:fh,hex:M8,hexa:o1},O8=e=>{let{label:t,...n}=e;return A("div",{class:"v-color-picker-edit__input"},[A("input",UA(m0(n)),null),A("span",null,[t])])},D8=j({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(ir).includes(e)},modes:{type:Array,default:()=>Object.keys(ir),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(ir).includes(t))},...Ce()},"VColorPickerEdit"),N8=Hn({name:"VColorPickerEdit",props:D8(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const{t:i}=nt(),s=C(()=>e.modes.map(a=>({...ir[a],name:a}))),r=C(()=>{const a=s.value.find(l=>l.name===e.mode);if(!a)return[];const o=e.color?a.to(e.color):null;return a.inputs?.map(l=>{let{getValue:u,getColor:c,localeKey:d,...f}=l;return{...a.inputProps,...f,ariaLabel:i(`$vuetify.colorPicker.ariaLabel.${d}`),disabled:e.disabled,value:o&&u(o),onChange:h=>{const g=h.target;g&&n("update:color",a.from(c(o??a.to(Qr),g.value)))}}})});return oe(()=>A("div",{class:se(["v-color-picker-edit",e.class]),style:pe(e.style)},[r.value?.map(a=>w(O8,a,null)),s.value.length>1&&w(We,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":i("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const a=s.value.findIndex(o=>o.name===e.mode);n("update:mode",s.value[(a+1)%s.value.length].name)}},null)])),{}}}),Am=Symbol.for("vuetify:v-slider");function hh(e,t,n){const i=n==="vertical",s=t.getBoundingClientRect(),r="touches"in e?e.touches[0]:e;return i?r.clientY-(s.top+s.height/2):r.clientX-(s.left+s.width/2)}function B8(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const l1=j({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...gt(),...Ot({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),c1=e=>{const t=C(()=>parseFloat(e.min)),n=C(()=>parseFloat(e.max)),i=C(()=>Number(e.step)>0?parseFloat(e.step):0),s=C(()=>Math.max(e_(i.value),e_(t.value)));function r(a){if(a=parseFloat(a),i.value<=0)return a;const o=at(a,t.value,n.value),l=t.value%i.value;let u=Math.round((o-l)/i.value)*i.value+l;return o>u&&u+i.value>n.value&&(u=n.value),parseFloat(Math.min(u,n.value).toFixed(s.value))}return{min:t,max:n,step:i,decimals:s,roundValue:r}},u1=e=>{let{props:t,steps:n,onSliderStart:i,onSliderMove:s,onSliderEnd:r,getActiveThumb:a}=e;const{isRtl:o}=Mt(),l=U(()=>t.reverse),u=C(()=>t.direction==="vertical"),c=C(()=>u.value!==l.value),{min:d,max:f,step:h,decimals:g,roundValue:v}=n,m=C(()=>parseInt(t.thumbSize,10)),p=C(()=>parseInt(t.tickSize,10)),y=C(()=>parseInt(t.trackSize,10)),_=C(()=>(f.value-d.value)/h.value),b=U(()=>t.disabled),S=C(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),x=C(()=>t.error||t.disabled?void 0:t.thumbColor),I=C(()=>t.error||t.disabled?void 0:t.trackColor??t.color),T=C(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),k=he(!1),P=he(0),D=le(),E=le();function O(ee){const _e=D.value?.$el;if(!_e)return;const ke=t.direction==="vertical",ce=ke?"top":"left",Ee=ke?"height":"width",R=ke?"clientY":"clientX",{[ce]:F,[Ee]:Y}=_e.getBoundingClientRect(),te=B8(ee,R);let ae=at((te-F-P.value)/Y)||0;return(ke?c.value:c.value!==o.value)&&(ae=1-ae),v(d.value+ae*(f.value-d.value))}const N=ee=>{const _e=O(ee);_e!=null&&r({value:_e}),k.value=!1,P.value=0},L=ee=>{const _e=O(ee);E.value=a(ee),E.value&&(k.value=!0,E.value.contains(ee.target)?P.value=hh(ee,E.value,t.direction):(P.value=0,_e!=null&&s({value:_e})),_e!=null&&i({value:_e}),je(()=>E.value?.focus()))},H={passive:!0,capture:!0};function G(ee){const _e=O(ee);_e!=null&&s({value:_e})}function z(ee){ee.stopPropagation(),ee.preventDefault(),N(ee),window.removeEventListener("mousemove",G,H),window.removeEventListener("mouseup",z)}function $(ee){N(ee),window.removeEventListener("touchmove",G,H),ee.target?.removeEventListener("touchend",$)}function B(ee){L(ee),window.addEventListener("touchmove",G,H),ee.target?.addEventListener("touchend",$,{passive:!1})}function W(ee){ee.button===0&&(ee.preventDefault(),L(ee),window.addEventListener("mousemove",G,H),window.addEventListener("mouseup",z,{passive:!1}))}const X=ee=>{const _e=(ee-d.value)/(f.value-d.value)*100;return at(isNaN(_e)?0:_e,0,100)},re=U(()=>t.showTicks),ge=C(()=>re.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(ee=>({value:ee,position:X(ee),label:ee.toString()})):Object.keys(t.ticks).map(ee=>({value:parseFloat(ee),position:X(parseFloat(ee)),label:t.ticks[ee]})):_.value!==1/0?Ln(_.value+1).map(ee=>{const _e=d.value+ee*h.value;return{value:_e,position:X(_e)}}):[]:[]),de=C(()=>ge.value.some(ee=>{let{label:_e}=ee;return!!_e})),ye={activeThumbRef:E,color:U(()=>t.color),decimals:g,disabled:b,direction:U(()=>t.direction),elevation:U(()=>t.elevation),hasLabels:de,isReversed:l,indexFromEnd:c,min:d,max:f,mousePressed:k,noKeyboard:U(()=>t.noKeyboard),numTicks:_,onSliderMousedown:W,onSliderTouchstart:B,parsedTicks:ge,parseMouseMove:O,position:X,readonly:U(()=>t.readonly),rounded:U(()=>t.rounded),roundValue:v,showTicks:re,startOffset:P,step:h,thumbSize:m,thumbColor:S,thumbLabelColor:x,thumbLabel:U(()=>t.thumbLabel),ticks:U(()=>t.ticks),tickSize:p,trackColor:I,trackContainerRef:D,trackFillColor:T,trackSize:y,vertical:u};return dt(Am,ye),ye},F8=j({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...Ce()},"VSliderThumb"),gh=ie()({name:"VSliderThumb",directives:{vRipple:pn},props:F8(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:i}=t;const s=He(Am),{isRtl:r,rtlClasses:a}=Mt();if(!s)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:o,max:l,thumbColor:u,thumbLabelColor:c,step:d,disabled:f,thumbSize:h,thumbLabel:g,direction:v,isReversed:m,vertical:p,readonly:y,elevation:_,mousePressed:b,decimals:S,indexFromEnd:x}=s,I=C(()=>f.value?void 0:_.value),{elevationClasses:T}=jt(I),{textColorClasses:k,textColorStyles:P}=Qt(u),{backgroundColorClasses:D,backgroundColorStyles:E}=Ge(c),{pageup:O,pagedown:N,end:L,home:H,left:G,right:z,down:$,up:B}=Wf,W=[O,N,L,H,G,z,$,B],X=C(()=>d.value?[1,2,3]:[1,5,10]);function re(de,ye){if(e.noKeyboard||!W.includes(de.key))return;de.preventDefault();const ee=d.value||.1,_e=(l.value-o.value)/ee;if([G,z,$,B].includes(de.key)){const ce=(p.value?[r.value?G:z,m.value?$:B]:x.value!==r.value?[G,B]:[z,B]).includes(de.key)?1:-1,Ee=de.shiftKey?2:de.ctrlKey?1:0;ce===-1&&ye===l.value&&!Ee&&!Number.isInteger(_e)?ye=ye-_e%1*ee:ye=ye+ce*ee*X.value[Ee]}else if(de.key===H)ye=o.value;else if(de.key===L)ye=l.value;else{const ke=de.key===N?1:-1;ye=ye-ke*ee*(_e>100?_e/10:10)}return Math.max(e.min,Math.min(e.max,ye))}function ge(de){const ye=re(de,e.modelValue);ye!=null&&i("update:modelValue",ye)}return oe(()=>{const de=we(x.value?100-e.position:e.position,"%");return A("div",{class:se(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&b.value},e.class,a.value]),style:pe([{"--v-slider-thumb-position":de,"--v-slider-thumb-size":we(h.value)},e.style]),role:"slider",tabindex:f.value?-1:0,"aria-label":e.name,"aria-valuemin":o.value,"aria-valuemax":l.value,"aria-valuenow":e.modelValue,"aria-readonly":!!y.value,"aria-orientation":v.value,onKeydown:y.value?void 0:ge},[A("div",{class:se(["v-slider-thumb__surface",k.value,T.value]),style:pe(P.value)},null),_t(A("div",{class:se(["v-slider-thumb__ripple",k.value]),style:pe(P.value)},null),[[pn,e.ripple,null,{circle:!0,center:!0}]]),w(am,{origin:"bottom center"},{default:()=>[_t(A("div",{class:"v-slider-thumb__label-container"},[A("div",{class:se(["v-slider-thumb__label",D.value]),style:pe(E.value)},[A("div",null,[n["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(d.value?S.value:1)]),A("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[hi,g.value&&e.focused||g.value==="always"]])]})])}),{}}}),V8=j({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Ce()},"VSliderTrack"),d1=ie()({name:"VSliderTrack",props:V8(),emits:{},setup(e,t){let{slots:n}=t;const i=He(Am);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:s,parsedTicks:r,rounded:a,showTicks:o,tickSize:l,trackColor:u,trackFillColor:c,trackSize:d,vertical:f,min:h,max:g,indexFromEnd:v}=i,{roundedClasses:m}=xt(a),{backgroundColorClasses:p,backgroundColorStyles:y}=Ge(c),{backgroundColorClasses:_,backgroundColorStyles:b}=Ge(u),S=C(()=>`inset-${f.value?"block":"inline"}-${v.value?"end":"start"}`),x=C(()=>f.value?"height":"width"),I=C(()=>({[S.value]:"0%",[x.value]:"100%"})),T=C(()=>e.stop-e.start),k=C(()=>({[S.value]:we(e.start,"%"),[x.value]:we(T.value,"%")})),P=C(()=>o.value?(f.value?r.value.slice().reverse():r.value).map((E,O)=>{const N=E.value!==h.value&&E.value!==g.value?we(E.position,"%"):void 0;return A("div",{key:E.value,class:se(["v-slider-track__tick",{"v-slider-track__tick--filled":E.position>=e.start&&E.position<=e.stop,"v-slider-track__tick--first":E.value===h.value,"v-slider-track__tick--last":E.value===g.value}]),style:{[S.value]:N}},[(E.label||n["tick-label"])&&A("div",{class:"v-slider-track__tick-label"},[n["tick-label"]?.({tick:E,index:O})??E.label])])}):[]);return oe(()=>A("div",{class:se(["v-slider-track",m.value,e.class]),style:pe([{"--v-slider-track-size":we(d.value),"--v-slider-tick-size":we(l.value)},e.style])},[A("div",{class:se(["v-slider-track__background",_.value,{"v-slider-track__background--opacity":!!s.value||!c.value}]),style:{...I.value,...b.value}},null),A("div",{class:se(["v-slider-track__fill",p.value]),style:{...k.value,...y.value}},null),o.value&&A("div",{class:se(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":o.value==="always"}])},[P.value])])),{}}}),L8=j({...dl(),...l1(),...as(),modelValue:{type:[Number,String],default:0}},"VSlider"),mh=ie()({name:"VSlider",props:L8(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const s=le(),r=le(),{rtlClasses:a}=Mt(),o=c1(e),l=Re(e,"modelValue",void 0,T=>o.roundValue(T??o.min.value)),{min:u,max:c,mousePressed:d,roundValue:f,onSliderMousedown:h,onSliderTouchstart:g,trackContainerRef:v,position:m,hasLabels:p,readonly:y,noKeyboard:_}=u1({props:e,steps:o,onSliderStart:()=>{i("start",l.value)},onSliderEnd:T=>{let{value:k}=T;const P=f(k);l.value=P,i("end",P)},onSliderMove:T=>{let{value:k}=T;return l.value=f(k)},getActiveThumb:()=>s.value?.$el}),{isFocused:b,focus:S,blur:x}=rs(e),I=C(()=>m(l.value));return oe(()=>{const T=tn.filterProps(e),k=!!(e.label||n.label||n.prepend);return w(tn,ne({ref:r,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||p.value,"v-slider--focused":b.value,"v-slider--pressed":d.value,"v-slider--disabled":e.disabled},a.value,e.class],style:e.style},T,{focused:b.value}),{...n,prepend:k?P=>A(Ae,null,[n.label?.(P)??(e.label?w(Oa,{id:P.id.value,class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(P)]):void 0,default:P=>{let{id:D,messagesId:E}=P;return A("div",{class:"v-slider__container",onMousedown:y.value?void 0:h,onTouchstartPassive:y.value?void 0:g},[A("input",{id:D.value,name:e.name||D.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:l.value},null),w(d1,{ref:v,start:0,stop:I.value},{"tick-label":n["tick-label"]}),w(gh,{ref:s,"aria-describedby":E.value,focused:b.value,noKeyboard:_.value,min:u.value,max:c.value,modelValue:l.value,"onUpdate:modelValue":O=>l.value=O,position:I.value,elevation:e.elevation,onFocus:S,onBlur:x,ripple:e.ripple,name:e.name},{"thumb-label":n["thumb-label"]})])}})}),Xt({focus:()=>s.value?.$el.focus()},r)}}),f1=j({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,hideEyeDropper:Boolean,eyeDropperIcon:{type:Pe,default:"$eyeDropper"},...Ce()},"VColorPickerPreview"),U8=Hn({name:"VColorPickerPreview",props:f1(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const{t:i}=nt(),s=new AbortController;jh(()=>s.abort());async function r(){if(!Zy||e.disabled)return;const a=new window.EyeDropper;try{const o=await a.open({signal:s.signal}),l=il(Un(o.sRGBHex));n("update:color",{...e.color??Qr,...l})}catch{}}return oe(()=>A("div",{class:se(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:pe(e.style)},[Zy&&!e.hideEyeDropper&&A("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[w(We,{"aria-label":i("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:e.eyeDropperIcon,variant:"plain",onClick:r},null)]),A("div",{class:"v-color-picker-preview__dot"},[A("div",{style:{background:_S(e.color??Qr)}},null)]),A("div",{class:"v-color-picker-preview__sliders"},[w(mh,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:i("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:e.color?.h,"onUpdate:modelValue":a=>n("update:color",{...e.color??Qr,h:a}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&w(mh,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:i("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:e.color?.a??1,"onUpdate:modelValue":a=>n("update:color",{...e.color??Qr,a}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])),{}}}),$8={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},z8={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},W8={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},H8={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},j8={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},X8={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Y8={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},K8={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},q8={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},Z8={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},G8={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Q8={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},J8={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},e5={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},t5={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},n5={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},i5={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},s5={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},r5={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},a5={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},o5={red:$8,pink:z8,purple:W8,deepPurple:H8,indigo:j8,blue:X8,lightBlue:Y8,cyan:K8,teal:q8,green:Z8,lightGreen:G8,lime:Q8,yellow:J8,amber:e5,orange:t5,deepOrange:n5,brown:i5,blueGrey:s5,grey:r5,shades:a5},l5=j({swatches:{type:Array,default:()=>c5(o5)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Ce()},"VColorPickerSwatches");function c5(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const u5=Hn({name:"VColorPickerSwatches",props:l5(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return oe(()=>A("div",{class:se(["v-color-picker-swatches",e.class]),style:pe([{maxHeight:we(e.maxHeight)},e.style])},[A("div",null,[e.swatches.map(i=>A("div",{class:"v-color-picker-swatches__swatch"},[i.map(s=>{const r=Un(s),a=il(r),o=yS(r);return A("div",{class:"v-color-picker-swatches__color",onClick:()=>a&&n("update:color",a)},[A("div",{style:{background:o}},[e.color&&$t(e.color,a)?w(Ye,{size:"x-small",icon:"$success",color:lL(s,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),d5=is("v-picker-title"),Cm=j({color:String,...An(),...Ce(),...It(),...Ot(),...ss(),...Ra(),...gt(),...Ne(),...Xe()},"VSheet"),Ho=ie()({name:"VSheet",props:Cm(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ze(e),{backgroundColorClasses:s,backgroundColorStyles:r}=Ge(()=>e.color),{borderClasses:a}=Pn(e),{dimensionStyles:o}=Pt(e),{elevationClasses:l}=jt(e),{locationStyles:u}=Er(e),{positionClasses:c}=Ma(e),{roundedClasses:d}=xt(e);return oe(()=>w(e.tag,{class:se(["v-sheet",i.value,s.value,a.value,l.value,c.value,d.value,e.class]),style:pe([r.value,o.value,u.value,e.style])},n)),{}}}),Du=j({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...Cm()},"VPicker"),Ta=ie()({name:"VPicker",props:Du(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:s}=Ge(()=>e.color);return oe(()=>{const r=Ho.filterProps(e),a=!e.hideTitle&&!!(e.title||n.title);return w(Ho,ne(r,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&A("div",{key:"header",class:se([i.value]),style:pe([s.value])},[a&&w(d5,{key:"picker-title"},{default:()=>[n.title?.()??e.title]}),n.header&&A("div",{class:"v-picker__header"},[n.header()])]),A("div",{class:"v-picker__body"},[n.default?.()]),n.actions&&w(Be,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[A("div",{class:"v-picker__actions"},[n.actions()])]})]})}),{}}}),f5=j({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(ir).includes(e)},modes:{type:Array,default:()=>Object.keys(ir),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(ir).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...Du({hideHeader:!0}),...In(f1(),["hideEyeDropper","eyeDropperIcon"])},"VColorPicker"),h5=Hn({name:"VColorPicker",props:f5(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"mode"),s=le(null),r=Re(e,"modelValue",void 0,c=>{if(c==null||c==="")return null;let d;try{d=il(Un(c))}catch{return null}return d},c=>c?I8(c,e.modelValue):null),a=C(()=>r.value?{...r.value,h:s.value??r.value.h}:null),{rtlClasses:o}=Mt();let l=!0;me(r,c=>{if(!l){l=!0;return}c&&(s.value=c.h)},{immediate:!0});const u=c=>{l=!1,s.value=c.h,r.value=c};return ka(()=>{e.modes.includes(i.value)||(i.value=e.modes[0])}),wt({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),oe(()=>{const c=Ta.filterProps(e);return w(Ta,ne(c,{class:["v-color-picker",o.value,e.class],style:[{"--v-color-picker-color-hsv":_S({...a.value??Qr,a:1})},e.style]}),{...n,default:()=>A(Ae,null,[!e.hideCanvas&&w(k8,{key:"canvas",color:a.value,"onUpdate:color":u,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&A("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&w(U8,{key:"preview",color:a.value,"onUpdate:color":u,hideAlpha:!i.value.endsWith("a"),disabled:e.disabled,hideEyeDropper:e.hideEyeDropper,eyeDropperIcon:e.eyeDropperIcon},null),!e.hideInputs&&w(N8,{key:"edit",modes:e.modes,mode:i.value,"onUpdate:mode":d=>i.value=d,color:a.value,"onUpdate:color":u,disabled:e.disabled},null)]),e.showSwatches&&w(u5,{key:"swatches",color:a.value,"onUpdate:color":u,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),g5=j({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Ba({filterKeys:["title"]}),...Sm({hideNoData:!0,returnObject:!0}),...Qe(ml({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...mi({transition:!1})},"VCombobox"),m5=ie()({name:"VCombobox",props:g5(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:s}=nt(),r=le(),a=he(!1),o=he(!0),l=he(!1),u=he(!1),c=le(),d=le(),f=he(-1);let h=!1;const{items:g,transformIn:v,transformOut:m}=mm(e),{textColorClasses:p,textColorStyles:y}=Qt(()=>r.value?.color),_=Re(e,"modelValue",[],R=>v(bt(R)),R=>{const F=m(R);return e.multiple?F:F[0]??null}),b=fl(e),S=C(()=>!!(e.chips||i.chip)),x=C(()=>S.value||!!i.selection),I=he(!e.multiple&&!x.value?_.value[0]?.title??"":""),T=C({get:()=>I.value,set:async R=>{if(I.value=R??"",!e.multiple&&!x.value&&(_.value=[ai(e,R)],je(()=>d.value?.scrollToIndex(0))),R&&e.multiple&&e.delimiters?.length){const F=e.delimiters.map(Uc).join("|"),Y=R.split(new RegExp(`(?:${F})+`));if(Y.length>1){for(let te of Y)te=te.trim(),te&&(_e(ai(e,te)),await je());I.value=""}}R||(f.value=-1),o.value=!R}}),k=C(()=>typeof e.counterValue=="function"?e.counterValue(_.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?_.value.length:T.value.length),{filteredItems:P,getMatches:D}=Fa(e,g,()=>o.value?"":T.value),E=C(()=>e.hideSelected?P.value.filter(R=>!_.value.some(F=>F.value===R.value)):P.value.length===0&&u.value?g.value:P.value),O=C(()=>e.hideNoData&&!E.value.length||b.isReadonly.value||b.isDisabled.value),N=Re(e,"menu"),L=C({get:()=>N.value,set:R=>{N.value&&!R&&c.value?.openChildren.size||R&&O.value||(N.value=R)}}),H=U(()=>L.value?e.closeText:e.openText);me(I,R=>{u.value=!1,h?je(()=>h=!1):a.value&&!L.value&&(L.value=!0),o.value=!R,n("update:search",R)}),me(_,R=>{!e.multiple&&!x.value&&(I.value=R[0]?.title??"")});const G=C(()=>_.value.map(R=>R.value)),z=C(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&T.value===E.value[0]?.title)&&E.value.length>0&&!o.value&&!l.value),$=le(),B=xm($,r);function W(R){h=!0,e.openOnClear&&(L.value=!0)}function X(){O.value||(L.value=!0)}function re(R){O.value||(a.value&&(R.preventDefault(),R.stopPropagation()),L.value=!L.value)}function ge(R){(_a(R)||R.key==="Backspace")&&r.value?.focus()}function de(R){if(RV(R)||b.isReadonly.value)return;const F=r.value?.selectionStart,Y=_.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(R.key)&&R.preventDefault(),["Enter","ArrowDown"].includes(R.key)&&(L.value=!0),["Escape"].includes(R.key)&&(L.value=!1),["Enter","Escape","Tab"].includes(R.key)&&(z.value&&["Enter","Tab"].includes(R.key)&&!_.value.some(te=>{let{value:ae}=te;return ae===E.value[0].value})&&_e(P.value[0]),o.value=!0),R.key==="ArrowDown"&&z.value&&$.value?.focus("next"),R.key==="Enter"&&T.value&&(_e(ai(e,T.value)),x.value&&(I.value="")),["Backspace","Delete"].includes(R.key)){if(!e.multiple&&x.value&&_.value.length>0&&!T.value)return _e(_.value[0],!1);if(~f.value){R.preventDefault();const te=f.value;_e(_.value[f.value],!1),f.value=te>=Y-1?Y-2:te}else R.key==="Backspace"&&!T.value&&(f.value=Y-1);return}if(e.multiple)if(R.key==="ArrowLeft"){if(f.value<0&&F&&F>0)return;const te=f.value>-1?f.value-1:Y-1;_.value[te]?f.value=te:(f.value=-1,r.value?.setSelectionRange(T.value.length,T.value.length))}else if(R.key==="ArrowRight"){if(f.value<0)return;const te=f.value+1;_.value[te]?f.value=te:(f.value=-1,r.value?.setSelectionRange(0,0))}else~f.value&&_a(R)&&(f.value=-1)}function ye(){e.eager&&d.value?.calculateVisibleItems()}function ee(){a.value&&(o.value=!0,r.value?.focus())}function _e(R){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!R||R.props.disabled))if(e.multiple){const Y=_.value.findIndex(ae=>(e.valueComparator||$t)(ae.value,R.value)),te=F??!~Y;if(~Y){const ae=te?[..._.value,R]:[..._.value];ae.splice(Y,1),_.value=ae}else te&&(_.value=[..._.value,R]);e.clearOnSelect&&(T.value="")}else{const Y=F!==!1;_.value=Y?[R]:[],I.value=Y&&!x.value?R.title:"",je(()=>{L.value=!1,o.value=!0})}}function ke(R){a.value=!0,setTimeout(()=>{l.value=!0})}function ce(R){l.value=!1}function Ee(R){(R==null||R===""&&!e.multiple&&!x.value)&&(_.value=[])}return me(a,(R,F)=>{if(!(R||R===F)&&(f.value=-1,L.value=!1,T.value)){if(e.multiple){_e(ai(e,T.value));return}if(!x.value)return;_.value.some(Y=>{let{title:te}=Y;return te===T.value})?I.value="":_e(ai(e,T.value))}}),me(L,R=>{if(!e.hideSelected&&R&&_.value.length){const F=E.value.findIndex(Y=>_.value.some(te=>(e.valueComparator||$t)(te.value,Y.value)));qe&&window.requestAnimationFrame(()=>{F>=0&&d.value?.scrollToIndex(F)})}R&&T.value&&P.value.length===0&&(u.value=!0),o.value=!T.value},{immediate:!0}),me(()=>e.items,(R,F)=>{L.value||a.value&&!F.length&&R.length&&(L.value=!0)}),oe(()=>{const R=!!(!e.hideNoData||E.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),F=_.value.length>0,Y=es.filterProps(e);return w(es,ne({ref:r},Y,{modelValue:T.value,"onUpdate:modelValue":[te=>T.value=te,Ee],focused:a.value,"onUpdate:focused":te=>a.value=te,validationValue:_.externalValue,counterValue:k.value,dirty:F,class:["v-combobox",{"v-combobox--active-menu":L.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!x.value,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:b.isReadonly.value,placeholder:F?void 0:e.placeholder,"onClick:clear":W,"onMousedown:control":X,onKeydown:de}),{...i,default:()=>A(Ae,null,[w(Sa,ne({ref:c,modelValue:L.value,"onUpdate:modelValue":te=>L.value=te,activator:"parent",contentClass:"v-combobox__content",disabled:O.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:ye,onAfterLeave:ee},e.menuProps),{default:()=>[R&&w(xa,ne({ref:$,filterable:!0,selected:G.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:te=>te.preventDefault(),selectable:!0,onKeydown:ge,onFocusin:ke,onFocusout:ce,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},B,e.listProps),{default:()=>[i["prepend-item"]?.(),!E.value.length&&!e.hideNoData&&(i["no-data"]?.()??w(fi,{key:"no-data",title:s(e.noDataText)},null)),w(Ru,{ref:d,renderless:!0,items:E.value,itemKey:"value"},{default:te=>{let{item:ae,index:ue,itemRef:Se}=te;const be=ne(ae.props,{ref:Se,key:ae.value,active:z.value&&ue===0?!0:void 0,onClick:()=>_e(ae,null)});return ae.type==="divider"?i.divider?.({props:ae.raw,index:ue})??w($n,ne(ae.props,{key:`divider-${ue}`}),null):ae.type==="subheader"?i.subheader?.({props:ae.raw,index:ue})??w(Na,ne(ae.props,{key:`subheader-${ue}`}),null):i.item?.({item:ae,index:ue,props:be})??w(fi,ne(be,{role:"option"}),{prepend:Te=>{let{isSelected:ve}=Te;return A(Ae,null,[e.multiple&&!e.hideSelected?w(Mi,{key:ae.value,modelValue:ve,ripple:!1,tabindex:"-1"},null):void 0,ae.props.prependAvatar&&w(Wn,{image:ae.props.prependAvatar},null),ae.props.prependIcon&&w(Ye,{icon:ae.props.prependIcon},null)])},title:()=>o.value?ae.title:KT("v-combobox",ae.title,D(ae)?.title)})}}),i["append-item"]?.()]})]}),_.value.map((te,ae)=>{function ue(ve){ve.stopPropagation(),ve.preventDefault(),_e(te,!1)}const Se={"onClick:close":ue,onKeydown(ve){ve.key!=="Enter"&&ve.key!==" "||(ve.preventDefault(),ve.stopPropagation(),ue(ve))},onMousedown(ve){ve.preventDefault(),ve.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},be=S.value?!!i.chip:!!i.selection,Te=be?wu(S.value?i.chip({item:te,index:ae,props:Se}):i.selection({item:te,index:ae})):void 0;if(!(be&&!Te))return A("div",{key:te.value,class:se(["v-combobox__selection",ae===f.value&&["v-combobox__selection--selected",p.value]]),style:pe(ae===f.value?y.value:{})},[S.value?i.chip?w(Be,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:te.title}}},{default:()=>[Te]}):w(Da,ne({key:"chip",closable:e.closableChips,size:"small",text:te.title,disabled:te.props.disabled},Se),null):Te??A("span",{class:"v-combobox__selection-text"},[te.title,e.multiple&&ae<_.value.length-1&&A("span",{class:"v-combobox__selection-comma"},[Kt(",")])])])})]),"append-inner":function(){for(var te=arguments.length,ae=new Array(te),ue=0;ue<te;ue++)ae[ue]=arguments[ue];return A(Ae,null,[i["append-inner"]?.(...ae),e.menuIcon?w(Ye,{class:"v-combobox__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon,onMousedown:re,onClick:dS,"aria-label":s(H.value),title:s(H.value),tabindex:"-1"},null):void 0])}})}),Xt({isFocused:a,isPristine:o,menu:L,search:T,selectionIndex:f,filteredItems:P,select:_e},r)}}),v5=j({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),p5=ie()({name:"VConfirmEdit",props:v5(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const s=Re(e,"modelValue"),r=le();ht(()=>{r.value=structuredClone(Oe(s.value))});const{t:a}=nt(),o=C(()=>$t(s.value,r.value));function l(v){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(v):o.value}const u=C(()=>l("save")),c=C(()=>l("cancel"));function d(){s.value=r.value,n("save",r.value)}function f(){r.value=structuredClone(Oe(s.value)),n("cancel")}function h(v){return A(Ae,null,[w(We,ne({disabled:c.value,variant:"text",color:e.color,onClick:f,text:a(e.cancelText)},v),null),w(We,ne({disabled:u.value,variant:"text",color:e.color,onClick:d,text:a(e.okText)},v),null)])}let g=!1;return oe(()=>A(Ae,null,[i.default?.({model:r,save:d,cancel:f,isPristine:o.value,get actions(){return g=!0,h}}),!e.hideActions&&!g&&h()])),{save:d,cancel:f,isPristine:o}}}),h1=j({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),g1=Symbol.for("vuetify:datatable:expanded");function Nu(e){const t=U(()=>e.expandOnClick),n=Re(e,"expanded",e.expanded,o=>new Set(o),o=>[...o.values()]);function i(o,l){const u=new Set(n.value);l?u.add(o.value):u.delete(o.value),n.value=u}function s(o){return n.value.has(o.value)}function r(o){i(o,!s(o))}const a={expand:i,expanded:n,expandOnClick:t,isExpanded:s,toggleExpand:r};return dt(g1,a),a}function m1(){const e=He(g1);if(!e)throw new Error("foo");return e}const km=j({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),v1=Symbol.for("vuetify:data-table-group");function Em(e){return{groupBy:Re(e,"groupBy")}}function Bu(e){const{disableSort:t,groupBy:n,sortBy:i}=e,s=le(new Set),r=C(()=>n.value.map(c=>({...c,order:c.order??!1})).concat(t?.value?[]:i.value));function a(c){return s.value.has(c.id)}function o(c){const d=new Set(s.value);a(c)?d.delete(c.id):d.add(c.id),s.value=d}function l(c){function d(f){const h=[];for(const g of f.items)"type"in g&&g.type==="group"?h.push(...d(g)):h.push(g);return[...new Set(h)]}return d({items:c})}const u={sortByWithGroups:r,toggleGroup:o,opened:s,groupBy:n,extractRows:l,isGroupOpen:a};return dt(v1,u),u}function p1(){const e=He(v1);if(!e)throw new Error("Missing group!");return e}function y5(e,t){if(!e.length)return[];const n=new Map;for(const i of e){const s=lr(i.raw,t);n.has(s)||n.set(s,[]),n.get(s).push(i)}return n}function y1(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const s=y5(e,t[0]),r=[],a=t.slice(1);return s.forEach((o,l)=>{const u=t[0],c=`${i}_${u}_${l}`;r.push({depth:n,id:c,key:u,value:l,items:a.length?y1(o,a,n+1,c):o,type:"group"})}),r}function _1(e,t,n){const i=[];for(const s of e)"type"in s&&s.type==="group"?(s.value!=null&&i.push(s),(t.has(s.id)||s.value==null)&&(i.push(..._1(s.items,t,n)),n&&i.push({...s,type:"group-summary"}))):i.push(s);return i}function Fu(e,t,n,i){return{flatItems:C(()=>{if(!t.value.length)return e.value;const r=y1(e.value,t.value.map(a=>a.key));return _1(r,n.value,zn(i))})}}function Vu(e){let{page:t,itemsPerPage:n,sortBy:i,groupBy:s,search:r}=e;const a=At("VDataTable"),o=()=>({page:t.value,itemsPerPage:n.value,sortBy:i.value,groupBy:s.value,search:r.value});let l=null;me(o,u=>{$t(l,u)||(l&&l.search!==u.search&&(t.value=1),a.emit("update:options",u),l=u)},{deep:!0,immediate:!0})}const Im=j({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),b1=Symbol.for("vuetify:data-table-pagination");function Pm(e){const t=Re(e,"page",void 0,i=>Number(i??1)),n=Re(e,"itemsPerPage",void 0,i=>Number(i??10));return{page:t,itemsPerPage:n}}function Rm(e){const{page:t,itemsPerPage:n,itemsLength:i}=e,s=C(()=>n.value===-1?0:n.value*(t.value-1)),r=C(()=>n.value===-1?i.value:Math.min(i.value,s.value+n.value)),a=C(()=>n.value===-1||i.value===0?1:Math.ceil(i.value/n.value));me([t,a],()=>{t.value>a.value&&(t.value=a.value)});function o(f){n.value=f,t.value=1}function l(){t.value=at(t.value+1,1,a.value)}function u(){t.value=at(t.value-1,1,a.value)}function c(f){t.value=at(f,1,a.value)}const d={page:t,itemsPerPage:n,startIndex:s,stopIndex:r,pageCount:a,itemsLength:i,nextPage:l,prevPage:u,setPage:c,setItemsPerPage:o};return dt(b1,d),d}function _5(){const e=He(b1);if(!e)throw new Error("Missing pagination!");return e}function w1(e){const t=At("usePaginatedItems"),{items:n,startIndex:i,stopIndex:s,itemsPerPage:r}=e,a=C(()=>r.value<=0?n.value:n.value.slice(i.value,s.value));return me(a,o=>{t.emit("update:currentItems",o)},{immediate:!0}),{paginatedItems:a}}const b5={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:n}=e;return new Set(n?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},x1={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const s of t)n?i.add(s.value):i.delete(s.value);return i},selectAll:e=>{let{value:t,currentPage:n,selected:i}=e;return x1.select({items:n,value:t,selected:i})}},S1={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const s of t)n?i.add(s.value):i.delete(s.value);return i},selectAll:e=>{let{value:t,allItems:n,selected:i}=e;return S1.select({items:n,value:t,selected:i})}},T1=j({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:$t}},"DataTable-select"),A1=Symbol.for("vuetify:data-table-selection");function Lu(e,t){let{allItems:n,currentPage:i}=t;const s=Re(e,"modelValue",e.modelValue,y=>new Set(bt(y).map(_=>n.value.find(b=>e.valueComparator(_,b.value))?.value??_)),y=>[...y.values()]),r=C(()=>n.value.filter(y=>y.selectable)),a=C(()=>i.value.filter(y=>y.selectable)),o=C(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return b5;case"all":return S1;case"page":default:return x1}}),l=he(null);function u(y){return bt(y).every(_=>s.value.has(_.value))}function c(y){return bt(y).some(_=>s.value.has(_.value))}function d(y,_){const b=o.value.select({items:y,value:_,selected:new Set(s.value)});s.value=b}function f(y,_,b){const S=[];if(_=_??i.value.findIndex(x=>x.value===y.value),e.selectStrategy!=="single"&&b?.shiftKey&&l.value!==null){const[x,I]=[l.value,_].sort((T,k)=>T-k);S.push(...i.value.slice(x,I+1).filter(T=>T.selectable))}else S.push(y),l.value=_;d(S,!u([y]))}function h(y){const _=o.value.selectAll({value:y,allItems:r.value,currentPage:a.value,selected:new Set(s.value)});s.value=_}const g=C(()=>s.value.size>0),v=C(()=>{const y=o.value.allSelected({allItems:r.value,currentPage:a.value});return!!y.length&&u(y)}),m=U(()=>o.value.showSelectAll),p={toggleSelect:f,select:d,selectAll:h,isSelected:u,isSomeSelected:c,someSelected:g,allSelected:v,showSelectAll:m,lastSelectedIndex:l,selectStrategy:o};return dt(A1,p),p}function Uu(){const e=He(A1);if(!e)throw new Error("Missing selection!");return e}const C1=j({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),k1=Symbol.for("vuetify:data-table-sort");function $u(e){const t=Re(e,"sortBy"),n=U(()=>e.mustSort),i=U(()=>e.multiSort);return{sortBy:t,mustSort:n,multiSort:i}}function zu(e){const{sortBy:t,mustSort:n,multiSort:i,page:s}=e,r=l=>{if(l.key==null)return;let u=t.value.map(d=>({...d}))??[];const c=u.find(d=>d.key===l.key);c?c.order==="desc"?n.value&&u.length===1?c.order="asc":u=u.filter(d=>d.key!==l.key):c.order="desc":i.value?u.push({key:l.key,order:"asc"}):u=[{key:l.key,order:"asc"}],t.value=u,s&&(s.value=1)};function a(l){return!!t.value.find(u=>u.key===l.key)}const o={sortBy:t,toggleSort:r,isSorted:a};return dt(k1,o),o}function E1(){const e=He(k1);if(!e)throw new Error("Missing sort!");return e}function Mm(e,t,n,i){const s=nt();return{sortedItems:C(()=>n.value.length?w5(t.value,n.value,s.current.value,{transform:i?.transform,sortFunctions:{...e.customKeySort,...i?.sortFunctions?.value},sortRawFunctions:i?.sortRawFunctions?.value}):t.value)}}function w5(e,t,n,i){const s=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.map(a=>[a,i?.transform?i.transform(a):a]).sort((a,o)=>{for(let l=0;l<t.length;l++){let u=!1;const c=t[l].key,d=t[l].order??"asc";if(d===!1)continue;let f=lr(a[1],c),h=lr(o[1],c),g=a[0].raw,v=o[0].raw;if(d==="desc"&&([f,h]=[h,f],[g,v]=[v,g]),i?.sortRawFunctions?.[c]){const m=i.sortRawFunctions[c](g,v);if(m==null)continue;if(u=!0,m)return m}if(i?.sortFunctions?.[c]){const m=i.sortFunctions[c](f,h);if(m==null)continue;if(u=!0,m)return m}if(!u&&(f instanceof Date&&h instanceof Date&&(f=f.getTime(),h=h.getTime()),[f,h]=[f,h].map(m=>m!=null?m.toString().toLocaleLowerCase():m),f!==h))return Bl(f)&&Bl(h)?0:Bl(f)?-1:Bl(h)?1:!isNaN(f)&&!isNaN(h)?Number(f)-Number(h):s.compare(f,h)}return 0}).map(a=>{let[o]=a;return o})}const x5=j({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function S5(e,t){const n=e.returnObject?t:Et(t,e.itemValue),i=Et(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:i,raw:t}}function T5(e,t){const n=[];for(const i of t)n.push(S5(e,i));return n}function A5(e){return{items:C(()=>T5(e,e.items))}}const C5=j({search:String,loading:Boolean,...Ce(),...x5(),...T1(),...C1(),...Im({itemsPerPage:5}),...h1(),...km(),...Ba(),...Ne(),...mi({transition:{component:Fo,hideOnLeave:!0}})},"VDataIterator"),k5=ie()({name:"VDataIterator",props:C5(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"groupBy"),s=U(()=>e.search),{items:r}=A5(e),{filteredItems:a}=Fa(e,r,s,{transform:W=>W.raw}),{sortBy:o,multiSort:l,mustSort:u}=$u(e),{page:c,itemsPerPage:d}=Pm(e),{toggleSort:f}=zu({sortBy:o,multiSort:l,mustSort:u,page:c}),{sortByWithGroups:h,opened:g,extractRows:v,isGroupOpen:m,toggleGroup:p}=Bu({groupBy:i,sortBy:o}),{sortedItems:y}=Mm(e,a,h,{transform:W=>W.raw}),{flatItems:_}=Fu(y,i,g,!1),b=U(()=>_.value.length),{startIndex:S,stopIndex:x,pageCount:I,prevPage:T,nextPage:k,setItemsPerPage:P,setPage:D}=Rm({page:c,itemsPerPage:d,itemsLength:b}),{paginatedItems:E}=w1({items:_,startIndex:S,stopIndex:x,itemsPerPage:d}),O=C(()=>v(E.value)),{isSelected:N,select:L,selectAll:H,toggleSelect:G}=Lu(e,{allItems:r,currentPage:O}),{isExpanded:z,toggleExpand:$}=Nu(e);Vu({page:c,itemsPerPage:d,sortBy:o,groupBy:i,search:s});const B=C(()=>({page:c.value,itemsPerPage:d.value,sortBy:o.value,pageCount:I.value,toggleSort:f,prevPage:T,nextPage:k,setPage:D,setItemsPerPage:P,isSelected:N,select:L,selectAll:H,toggleSelect:G,isExpanded:z,toggleExpand:$,isGroupOpen:m,toggleGroup:p,items:O.value,itemsCount:a.value.length,groupedItems:E.value}));return oe(()=>w(e.tag,{class:se(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:pe(e.style)},{default:()=>[n.header?.(B.value),w(vn,{transition:e.transition},{default:()=>[e.loading?w(ll,{key:"loader",name:"v-data-iterator",active:!0},{default:W=>n.loader?.(W)}):A("div",{key:"items"},[E.value.length?n.default?.(B.value):n["no-data"]?.()])]}),n.footer?.(B.value)]})),{}}});function E5(){const e=le([]);qb(()=>e.value=[]);function t(n,i){e.value[i]=n}return{refs:e,updateRef:t}}const I5=j({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Pe,default:"$first"},prevIcon:{type:Pe,default:"$prev"},nextIcon:{type:Pe,default:"$next"},lastIcon:{type:Pe,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...An(),...Ce(),...Vt(),...Ot(),...gt(),...Bi(),...Ne({tag:"nav"}),...Xe(),...ii({variant:"text"})},"VPagination"),vh=ie()({name:"VPagination",props:I5(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const s=Re(e,"modelValue"),{t:r,n:a}=nt(),{isRtl:o}=Mt(),{themeClasses:l}=Ze(e),{width:u}=ni(),c=he(-1);wt(void 0,{scoped:!0});const{resizeRef:d}=ei(T=>{if(!T.length)return;const{target:k,contentRect:P}=T[0],D=k.querySelector(".v-pagination__list > *");if(!D)return;const E=P.width,O=D.offsetWidth+parseFloat(getComputedStyle(D).marginRight)*2;c.value=v(E,O)}),f=C(()=>parseInt(e.length,10)),h=C(()=>parseInt(e.start,10)),g=C(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):c.value>=0?c.value:v(u.value,58));function v(T,k){const P=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((T-k*P)/k).toFixed(2))))}const m=C(()=>{if(f.value<=0||isNaN(f.value)||f.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=0)return[];if(g.value===1)return[s.value];if(f.value<=g.value)return Ln(f.value,h.value);const T=g.value%2===0,k=T?g.value/2:Math.floor(g.value/2),P=T?k:k+1,D=f.value-k;if(P-s.value>=0)return[...Ln(Math.max(1,g.value-1),h.value),e.ellipsis,f.value];if(s.value-D>=(T?1:0)){const E=g.value-1,O=f.value-E+h.value;return[h.value,e.ellipsis,...Ln(E,O)]}else{const E=Math.max(1,g.value-2),O=E===1?s.value:s.value-Math.ceil(E/2)+h.value;return[h.value,e.ellipsis,...Ln(E,O),e.ellipsis,f.value]}});function p(T,k,P){T.preventDefault(),s.value=k,P&&i(P,k)}const{refs:y,updateRef:_}=E5();wt({VPaginationBtn:{color:U(()=>e.color),border:U(()=>e.border),density:U(()=>e.density),size:U(()=>e.size),variant:U(()=>e.variant),rounded:U(()=>e.rounded),elevation:U(()=>e.elevation)}});const b=C(()=>m.value.map((T,k)=>{const P=D=>_(D,k);if(typeof T=="string")return{isActive:!1,key:`ellipsis-${k}`,page:T,props:{ref:P,ellipsis:!0,icon:!0,disabled:!0}};{const D=T===s.value;return{isActive:D,key:T,page:a(T),props:{ref:P,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:D?e.activeColor:e.color,"aria-current":D,"aria-label":r(D?e.currentPageAriaLabel:e.pageAriaLabel,T),onClick:E=>p(E,T)}}}})),S=C(()=>{const T=!!e.disabled||s.value<=h.value,k=!!e.disabled||s.value>=h.value+f.value-1;return{first:e.showFirstLastPage?{icon:o.value?e.lastIcon:e.firstIcon,onClick:P=>p(P,h.value,"first"),disabled:T,"aria-label":r(e.firstAriaLabel),"aria-disabled":T}:void 0,prev:{icon:o.value?e.nextIcon:e.prevIcon,onClick:P=>p(P,s.value-1,"prev"),disabled:T,"aria-label":r(e.previousAriaLabel),"aria-disabled":T},next:{icon:o.value?e.prevIcon:e.nextIcon,onClick:P=>p(P,s.value+1,"next"),disabled:k,"aria-label":r(e.nextAriaLabel),"aria-disabled":k},last:e.showFirstLastPage?{icon:o.value?e.firstIcon:e.lastIcon,onClick:P=>p(P,h.value+f.value-1,"last"),disabled:k,"aria-label":r(e.lastAriaLabel),"aria-disabled":k}:void 0}});function x(){const T=s.value-h.value;y.value[T]?.$el.focus()}function I(T){T.key===Wf.left&&!e.disabled&&s.value>Number(e.start)?(s.value=s.value-1,je(x)):T.key===Wf.right&&!e.disabled&&s.value<h.value+f.value-1&&(s.value=s.value+1,je(x))}return oe(()=>w(e.tag,{ref:d,class:se(["v-pagination",l.value,e.class]),style:pe(e.style),role:"navigation","aria-label":r(e.ariaLabel),onKeydown:I,"data-test":"v-pagination-root"},{default:()=>[A("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&A("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(S.value.first):w(We,ne({_as:"VPaginationBtn"},S.value.first),null)]),A("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(S.value.prev):w(We,ne({_as:"VPaginationBtn"},S.value.prev),null)]),b.value.map((T,k)=>A("li",{key:T.key,class:se(["v-pagination__item",{"v-pagination__item--is-active":T.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item(T):w(We,ne({_as:"VPaginationBtn"},T.props),{default:()=>[T.page]})])),A("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(S.value.next):w(We,ne({_as:"VPaginationBtn"},S.value.next),null)]),e.showFirstLastPage&&A("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(S.value.last):w(We,ne({_as:"VPaginationBtn"},S.value.last),null)])])]})),{}}}),Om=j({prevIcon:{type:Pe,default:"$prev"},nextIcon:{type:Pe,default:"$next"},firstIcon:{type:Pe,default:"$first"},lastIcon:{type:Pe,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),jo=ie()({name:"VDataTableFooter",props:Om(),setup(e,t){let{slots:n}=t;const{t:i}=nt(),{page:s,pageCount:r,startIndex:a,stopIndex:o,itemsLength:l,itemsPerPage:u,setItemsPerPage:c}=_5(),d=C(()=>e.itemsPerPageOptions.map(f=>typeof f=="number"?{value:f,title:f===-1?i("$vuetify.dataFooter.itemsPerPageAll"):String(f)}:{...f,title:isNaN(Number(f.title))?i(f.title):f.title}));return oe(()=>{const f=vh.filterProps(e);return A("div",{class:"v-data-table-footer"},[n.prepend?.(),A("div",{class:"v-data-table-footer__items-per-page"},[A("span",{"aria-label":i(e.itemsPerPageText)},[i(e.itemsPerPageText)]),w(Tm,{items:d.value,modelValue:u.value,"onUpdate:modelValue":h=>c(Number(h)),density:"compact",variant:"outlined",hideDetails:!0},null)]),A("div",{class:"v-data-table-footer__info"},[A("div",null,[i(e.pageText,l.value?a.value+1:0,o.value,l.value)])]),A("div",{class:"v-data-table-footer__pagination"},[w(vh,ne({modelValue:s.value,"onUpdate:modelValue":h=>s.value=h,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:r.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},f),null)])])}),{}}}),Xo=hL({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const i=e.tag??"td",s=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return w(i,{class:se(["v-data-table__td",{"v-data-table-column--fixed":s==="start","v-data-table-column--fixed-end":s==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:we(e.height),width:we(e.width),maxWidth:we(e.maxWidth),left:s==="start"?we(e.fixedOffset||null):void 0,right:s==="end"?we(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?we(e.indent):void 0}},{default:()=>[n.default?.()]})}),P5=j({headers:Array},"DataTable-header"),I1=Symbol.for("vuetify:data-table-headers"),P1={title:"",sortable:!1},R5={...P1,width:48};function M5(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,i)=>{let s=!1;for(let r=0;r<t.length;r++)if(t[r].priority>i){t.splice(r,0,{element:n,priority:i}),s=!0;break}s||t.push({element:n,priority:i})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const i=Math.floor(t[0].priority);for(let s=0;s<t.length;s++)Math.floor(t[s].priority)===i&&(n+=1);return n},dequeue:()=>t.shift()}}function ph(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)ph(n,t);return t}function R1(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&R1(n.children,t);return t}function O5(e){if(e.key){if(e.key==="data-table-group")return P1;if(["data-table-expand","data-table-select"].includes(e.key))return R5}}function Dm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>Dm(n,t+1))):t}function D5(e){let t=!1;function n(r,a){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(r)if(o!=="none"&&(r.fixed=o),r.fixed===!0&&(r.fixed="start"),r.fixed===a)if(r.children)if(a==="start")for(let l=r.children.length-1;l>=0;l--)n(r.children[l],a,a);else for(let l=0;l<r.children.length;l++)n(r.children[l],a,a);else!t&&a==="start"?r.lastFixed=!0:!t&&a==="end"?r.firstFixedEnd=!0:isNaN(Number(r.width))?(`${r.key}`,void 0):r.minWidth=Math.max(Number(r.width)||0,Number(r.minWidth)||0),t=!0;else if(r.children)if(a==="start")for(let l=r.children.length-1;l>=0;l--)n(r.children[l],a);else for(let l=0;l<r.children.length;l++)n(r.children[l],a);else t=!1}for(let r=e.length-1;r>=0;r--)n(e[r],"start");for(let r=0;r<e.length;r++)n(e[r],"end");let i=0;for(let r=0;r<e.length;r++)i=M1(e[r],i);let s=0;for(let r=e.length-1;r>=0;r--)s=O1(e[r],s)}function M1(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=M1(n,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function O1(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=O1(n,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function N5(e,t){const n=[];let i=0;const s=M5(e);for(;s.size()>0;){let a=s.count();const o=[];let l=1;for(;a>0;){const{element:u,priority:c}=s.dequeue(),d=t-i-Dm(u);if(o.push({...u,rowspan:d??1,colspan:u.children?ph(u).length:1}),u.children)for(const f of u.children){const h=c%1+l/Math.pow(10,i+2);s.enqueue(f,i+d+h)}l+=1,a-=1}i+=1,n.push(o)}return{columns:e.map(a=>ph(a)).flat(),headers:n}}function D1(e){const t=[];for(const n of e){const i={...O5(n),...n},s=i.key??(typeof i.value=="string"?i.value:null),r=i.value??s??null,a={...i,key:s,value:r,sortable:i.sortable??(i.key!=null||!!i.sort),children:i.children?D1(i.children):void 0};t.push(a)}return t}function Nm(e,t){const n=le([]),i=le([]),s=le({}),r=le({}),a=le({});ht(()=>{const u=(e.headers||Object.keys(e.items[0]??{}).map(v=>({key:v,title:Di(v)}))).slice(),c=R1(u);t?.groupBy?.value.length&&!c.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!c.has("data-table-select")&&u.unshift({key:"data-table-select"}),t?.showExpand?.value&&!c.has("data-table-expand")&&u.push({key:"data-table-expand"});const d=D1(u);D5(d);const f=Math.max(...d.map(v=>Dm(v)))+1,h=N5(d,f);n.value=h.headers,i.value=h.columns;const g=h.headers.flat(1);for(const v of g)v.key&&(v.sortable&&(v.sort&&(s.value[v.key]=v.sort),v.sortRaw&&(r.value[v.key]=v.sortRaw)),v.filter&&(a.value[v.key]=v.filter))});const o={headers:n,columns:i,sortFunctions:s,sortRawFunctions:r,filterFunctions:a};return dt(I1,o),o}function Wu(){const e=He(I1);if(!e)throw new Error("Missing headers!");return e}const N1=j({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:Pe,default:"$sortAsc"},sortDescIcon:{type:Pe,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...br(),...ku()},"VDataTableHeaders"),fr=ie()({name:"VDataTableHeaders",props:N1(),setup(e,t){let{slots:n}=t;const{t:i}=nt(),{toggleSort:s,sortBy:r,isSorted:a}=E1(),{someSelected:o,allSelected:l,selectAll:u,showSelectAll:c}=Uu(),{columns:d,headers:f}=Wu(),{loaderClasses:h}=ol(e);function g(k,P){if(!(e.sticky||e.fixedHeader)&&!k.fixed)return;const D=typeof k.fixed=="string"?k.fixed:k.fixed?"start":"none";return{position:"sticky",left:D==="start"?we(k.fixedOffset):void 0,right:D==="end"?we(k.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${P})`:void 0}}function v(k,P){k.key==="Enter"&&!e.disableSort&&s(P)}function m(k){const P=r.value.find(D=>D.key===k.key);return P?P.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:p,backgroundColorStyles:y}=Ge(()=>e.color),{displayClasses:_,mobile:b}=ni(e),S=C(()=>({headers:f.value,columns:d.value,toggleSort:s,isSorted:a,sortBy:r.value,someSelected:o.value,allSelected:l.value,selectAll:u,getSortIcon:m})),x=C(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},_.value,h.value]),I=k=>{let{column:P,x:D,y:E}=k;const O=P.key==="data-table-select"||P.key==="data-table-expand",N=P.key==="data-table-group"&&P.width===0&&!P.title,L=ne(e.headerProps??{},P.headerProps??{});return w(Xo,ne({tag:"th",align:P.align,class:[{"v-data-table__th--sortable":P.sortable&&!e.disableSort,"v-data-table__th--sorted":a(P),"v-data-table__th--fixed":P.fixed},...x.value],style:{width:we(P.width),minWidth:we(P.minWidth),maxWidth:we(P.maxWidth),...g(P,E)},colspan:P.colspan,rowspan:P.rowspan,fixed:P.fixed,nowrap:P.nowrap,lastFixed:P.lastFixed,firstFixedEnd:P.firstFixedEnd,noPadding:O,empty:N,tabindex:P.sortable?0:void 0,onClick:P.sortable?()=>s(P):void 0,onKeydown:P.sortable?H=>v(H,P):void 0},L),{default:()=>{const H=`header.${P.key}`,G={column:P,selectAll:u,isSorted:a,toggleSort:s,sortBy:r.value,someSelected:o.value,allSelected:l.value,getSortIcon:m};return n[H]?n[H](G):N?"":P.key==="data-table-select"?n["header.data-table-select"]?.(G)??(c.value&&w(Mi,{modelValue:l.value,indeterminate:o.value&&!l.value,"onUpdate:modelValue":u},null)):A("div",{class:"v-data-table-header__content"},[A("span",null,[P.title]),P.sortable&&!e.disableSort&&w(Ye,{key:"icon",class:"v-data-table-header__sort-icon",icon:m(P)},null),e.multiSort&&a(P)&&A("div",{key:"badge",class:se(["v-data-table-header__sort-badge",...p.value]),style:pe(y.value)},[r.value.findIndex(z=>z.key===P.key)+1])])}})},T=()=>{const k=C(()=>d.value.filter(D=>D?.sortable&&!e.disableSort)),P=C(()=>{if(d.value.find(E=>E.key==="data-table-select")!=null)return l.value?"$checkboxOn":o.value?"$checkboxIndeterminate":"$checkboxOff"});return w(Xo,ne({tag:"th",class:[...x.value],colspan:f.value.length+1},e.headerProps),{default:()=>[A("div",{class:"v-data-table-header__content"},[w(Tm,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:k.value,label:i("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>r.value=[],appendIcon:P.value,"onClick:append":()=>u(!l.value)},{chip:D=>w(Da,{onClick:D.item.raw?.sortable?()=>s(D.item.raw):void 0,onMousedown:E=>{E.preventDefault(),E.stopPropagation()}},{default:()=>[D.item.title,w(Ye,{class:se(["v-data-table__td-sort-icon",a(D.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:m(D.item.raw),size:"small"},null)]})})])]})};oe(()=>b.value?A("tr",null,[w(T,null,null)]):A(Ae,null,[n.headers?n.headers(S.value):f.value.map((k,P)=>A("tr",null,[k.map((D,E)=>w(I,{column:D,x:E,y:P},null))])),e.loading&&A("tr",{class:"v-data-table-progress"},[A("th",{colspan:d.value.length},[w(ll,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),B1=j({item:{type:Object,required:!0},groupCollapseIcon:{type:Pe,default:"$tableGroupCollapse"},groupExpandIcon:{type:Pe,default:"$tableGroupExpand"}},"VDataTableGroupHeaderRow"),B5=ie()({name:"VDataTableGroupHeaderRow",props:B1(),setup(e,t){let{slots:n}=t;const{isGroupOpen:i,toggleGroup:s,extractRows:r}=p1(),{isSelected:a,isSomeSelected:o,select:l}=Uu(),{columns:u}=Wu(),c=C(()=>r([e.item])),d=U(()=>u.value.length-(u.value.some(f=>f.key==="data-table-select")?1:0));return()=>A("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(f=>{if(f.key==="data-table-group"){const h=i(e.item)?e.groupCollapseIcon:e.groupExpandIcon,g=()=>s(e.item);return n["data-table-group"]?.({item:e.item,count:c.value.length,props:{icon:h,onClick:g}})??w(Xo,{class:"v-data-table-group-header-row__column",colspan:d.value},{default:()=>[w(We,{size:"small",variant:"text",icon:h,onClick:g},null),A("span",null,[e.item.value]),A("span",null,[Kt("("),c.value.length,Kt(")")])]})}else if(f.key==="data-table-select"){const h=a(c.value),g=o(c.value)&&!h,v=m=>l(c.value,m);return n["data-table-select"]?.({props:{modelValue:h,indeterminate:g,"onUpdate:modelValue":v}})??w(Xo,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[w(Mi,{modelValue:h,indeterminate:g,"onUpdate:modelValue":v},null)]})}return""})])}}),F1=j({index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:Pe,default:"$collapse"},expandIcon:{type:Pe,default:"$expand"},onClick:Gt(),onContextmenu:Gt(),onDblclick:Gt(),...br()},"VDataTableRow"),Bm=ie()({name:"VDataTableRow",props:F1(),setup(e,t){let{slots:n}=t;const{displayClasses:i,mobile:s}=ni(e,"v-data-table__tr"),{isSelected:r,toggleSelect:a,someSelected:o,allSelected:l,selectAll:u}=Uu(),{isExpanded:c,toggleExpand:d}=m1(),{toggleSort:f,sortBy:h,isSorted:g}=E1(),{columns:v}=Wu();oe(()=>A("tr",{class:se(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},i.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&v.value.map((m,p)=>{const y=e.item,_=`item.${m.key}`,b=`header.${m.key}`,S={index:e.index,item:y.raw,internalItem:y,value:lr(y.columns,m.key),column:m,isSelected:r,toggleSelect:a,isExpanded:c,toggleExpand:d},x={column:m,selectAll:u,isSorted:g,toggleSort:f,sortBy:h.value,someSelected:o.value,allSelected:l.value,getSortIcon:()=>""},I=typeof e.cellProps=="function"?e.cellProps({index:S.index,item:S.item,internalItem:S.internalItem,value:S.value,column:m}):e.cellProps,T=typeof m.cellProps=="function"?m.cellProps({index:S.index,item:S.item,internalItem:S.internalItem,value:S.value}):m.cellProps,k=m.key==="data-table-select"||m.key==="data-table-expand",P=m.key==="data-table-group"&&m.width===0&&!m.title;return w(Xo,ne({align:m.align,indent:m.intent,class:{"v-data-table__td--expanded-row":m.key==="data-table-expand","v-data-table__td--select-row":m.key==="data-table-select"},fixed:m.fixed,fixedOffset:m.fixedOffset,fixedEndOffset:m.fixedEndOffset,lastFixed:m.lastFixed,firstFixedEnd:m.firstFixedEnd,maxWidth:s.value?void 0:m.maxWidth,noPadding:k,empty:P,nowrap:m.nowrap,width:s.value?void 0:m.width},I,T),{default:()=>{if(m.key==="data-table-select")return n["item.data-table-select"]?.({...S,props:{disabled:!y.selectable,modelValue:r([y]),onClick:wl(()=>a(y),["stop"])}})??w(Mi,{disabled:!y.selectable,modelValue:r([y]),onClick:wl(E=>a(y,e.index,E),["stop"])},null);if(m.key==="data-table-expand")return n["item.data-table-expand"]?.({...S,props:{icon:c(y)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:wl(()=>d(y),["stop"])}})??w(We,{icon:c(y)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:wl(()=>d(y),["stop"])},null);if(n[_]&&!s.value)return n[_](S);const D=cn(S.value);return s.value?A(Ae,null,[A("div",{class:"v-data-table__td-title"},[n[b]?.(x)??m.title]),A("div",{class:"v-data-table__td-value"},[n[_]?.(S)??D])]):D}})})]))}}),V1=j({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...In(F1(),["collapseIcon","expandIcon"]),...In(B1(),["groupCollapseIcon","groupExpandIcon"]),...br()},"VDataTableRows"),hr=ie()({name:"VDataTableRows",inheritAttrs:!1,props:V1(),setup(e,t){let{attrs:n,slots:i}=t;const{columns:s}=Wu(),{expandOnClick:r,toggleExpand:a,isExpanded:o}=m1(),{isSelected:l,toggleSelect:u}=Uu(),{toggleGroup:c,isGroupOpen:d}=p1(),{t:f}=nt(),{mobile:h}=ni(e);return oe(()=>{const g=In(e,["groupCollapseIcon","groupExpandIcon"]);return e.loading&&(!e.items.length||i.loading)?A("tr",{class:"v-data-table-rows-loading",key:"loading"},[A("td",{colspan:s.value.length},[i.loading?.()??f(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?A("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[A("td",{colspan:s.value.length},[i["no-data"]?.()??f(e.noDataText)])]):A(Ae,null,[e.items.map((v,m)=>{if(v.type==="group"){const _={index:m,item:v,columns:s.value,isExpanded:o,toggleExpand:a,isSelected:l,toggleSelect:u,toggleGroup:c,isGroupOpen:d};return i["group-header"]?i["group-header"](_):w(B5,ne({key:`group-header_${v.id}`,item:v},b_(n,":group-header",()=>_),g),i)}if(v.type==="group-summary"){const _={index:m,item:v,columns:s.value,toggleGroup:c};return i["group-summary"]?.(_)??""}const p={index:m,item:v.raw,internalItem:v,columns:s.value,isExpanded:o,toggleExpand:a,isSelected:l,toggleSelect:u},y={...p,props:ne({key:`item_${v.key??v.index}`,onClick:r.value?()=>{a(v)}:void 0,index:m,item:v,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,mobile:h.value},b_(n,":row",()=>p),typeof e.rowProps=="function"?e.rowProps({item:p.item,index:p.index,internalItem:p.internalItem}):e.rowProps)};return A(Ae,{key:y.props.key},[i.item?i.item(y):w(Bm,y.props,i),o(v)&&i["expanded-row"]?.(p)])})])}),{}}}),L1=j({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...Ce(),...Vt(),...Ne(),...Xe()},"VTable"),gr=ie()({name:"VTable",props:L1(),setup(e,t){let{slots:n,emit:i}=t;const{themeClasses:s}=Ze(e),{densityClasses:r}=_n(e);return oe(()=>{const a={VCheckboxBtn:{density:e.density}};return w(e.tag,{class:se(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},s.value,r.value,e.class]),style:pe(e.style)},{default:()=>[n.top?.(),w(Be,{defaults:a},{default:()=>[n.default?A("div",{class:"v-table__wrapper",style:{height:we(e.height)}},[A("table",null,[n.default()])]):n.wrapper?.()]}),n.bottom?.()]})}),{}}}),F5=j({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function V5(e,t,n,i){const s=e.returnObject?t:Et(t,e.itemValue),r=Et(t,e.itemSelectable,!0),a=i.reduce((o,l)=>(l.key!=null&&(o[l.key]=Et(t,l.value)),o),{});return{type:"item",key:e.returnObject?Et(t,e.itemValue):s,index:n,value:s,selectable:r,columns:a,raw:t}}function L5(e,t,n){return t.map((i,s)=>V5(e,i,s,n))}function Fm(e,t){return{items:C(()=>L5(e,e.items,t.value))}}const Vm=j({...V1(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...h1(),...km(),...P5(),...F5(),...T1(),...C1(),...N1(),...L1()},"DataTable"),U5=j({...Im(),...Vm(),...Ba(),...Om()},"VDataTable"),$5=ie()({name:"VDataTable",props:U5(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:s}=Em(e),{sortBy:r,multiSort:a,mustSort:o}=$u(e),{page:l,itemsPerPage:u}=Pm(e),{disableSort:c}=Ca(e),{columns:d,headers:f,sortFunctions:h,sortRawFunctions:g,filterFunctions:v}=Nm(e,{groupBy:s,showSelect:U(()=>e.showSelect),showExpand:U(()=>e.showExpand)}),{items:m}=Fm(e,d),p=U(()=>e.search),{filteredItems:y}=Fa(e,m,p,{transform:ee=>ee.columns,customKeyFilter:v}),{toggleSort:_}=zu({sortBy:r,multiSort:a,mustSort:o,page:l}),{sortByWithGroups:b,opened:S,extractRows:x,isGroupOpen:I,toggleGroup:T}=Bu({groupBy:s,sortBy:r,disableSort:c}),{sortedItems:k}=Mm(e,y,b,{transform:ee=>({...ee.raw,...ee.columns}),sortFunctions:h,sortRawFunctions:g}),{flatItems:P}=Fu(k,s,S,()=>!!i["group-summary"]),D=C(()=>P.value.length),{startIndex:E,stopIndex:O,pageCount:N,setItemsPerPage:L}=Rm({page:l,itemsPerPage:u,itemsLength:D}),{paginatedItems:H}=w1({items:P,startIndex:E,stopIndex:O,itemsPerPage:u}),G=C(()=>x(H.value)),{isSelected:z,select:$,selectAll:B,toggleSelect:W,someSelected:X,allSelected:re}=Lu(e,{allItems:m,currentPage:G}),{isExpanded:ge,toggleExpand:de}=Nu(e);Vu({page:l,itemsPerPage:u,sortBy:r,groupBy:s,search:p}),wt({VDataTableRows:{hideNoData:U(()=>e.hideNoData),noDataText:U(()=>e.noDataText),loading:U(()=>e.loading),loadingText:U(()=>e.loadingText)}});const ye=C(()=>({page:l.value,itemsPerPage:u.value,sortBy:r.value,pageCount:N.value,toggleSort:_,setItemsPerPage:L,someSelected:X.value,allSelected:re.value,isSelected:z,select:$,selectAll:B,toggleSelect:W,isExpanded:ge,toggleExpand:de,isGroupOpen:I,toggleGroup:T,items:G.value.map(ee=>ee.raw),internalItems:G.value,groupedItems:H.value,columns:d.value,headers:f.value}));return oe(()=>{const ee=jo.filterProps(e),_e=fr.filterProps(e),ke=hr.filterProps(e),ce=gr.filterProps(e);return w(gr,ne({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},ce,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(ye.value),default:()=>i.default?i.default(ye.value):A(Ae,null,[i.colgroup?.(ye.value),!e.hideDefaultHeader&&A("thead",{key:"thead"},[w(fr,_e,i)]),i.thead?.(ye.value),!e.hideDefaultBody&&A("tbody",null,[i["body.prepend"]?.(ye.value),i.body?i.body(ye.value):w(hr,ne(n,ke,{items:H.value}),i),i["body.append"]?.(ye.value)]),i.tbody?.(ye.value),i.tfoot?.(ye.value)]),bottom:()=>i.bottom?i.bottom(ye.value):!e.hideDefaultFooter&&A(Ae,null,[w($n,null,null),w(jo,ee,{prepend:i["footer.prepend"]})])})}),{}}}),z5=j({...Qe(Vm(),["hideDefaultFooter"]),...km(),...XT(),...Ba()},"VDataTableVirtual"),W5=ie()({name:"VDataTableVirtual",props:z5(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:s}=Em(e),{sortBy:r,multiSort:a,mustSort:o}=$u(e),{disableSort:l}=Ca(e),{columns:u,headers:c,filterFunctions:d,sortFunctions:f,sortRawFunctions:h}=Nm(e,{groupBy:s,showSelect:U(()=>e.showSelect),showExpand:U(()=>e.showExpand)}),{items:g}=Fm(e,u),v=U(()=>e.search),{filteredItems:m}=Fa(e,g,v,{transform:ce=>ce.columns,customKeyFilter:d}),{toggleSort:p}=zu({sortBy:r,multiSort:a,mustSort:o}),{sortByWithGroups:y,opened:_,extractRows:b,isGroupOpen:S,toggleGroup:x}=Bu({groupBy:s,sortBy:r,disableSort:l}),{sortedItems:I}=Mm(e,m,y,{transform:ce=>({...ce.raw,...ce.columns}),sortFunctions:f,sortRawFunctions:h}),{flatItems:T}=Fu(I,s,_,()=>!!i["group-summary"]),k=C(()=>b(T.value)),{isSelected:P,select:D,selectAll:E,toggleSelect:O,someSelected:N,allSelected:L}=Lu(e,{allItems:k,currentPage:k}),{isExpanded:H,toggleExpand:G}=Nu(e),{containerRef:z,markerRef:$,paddingTop:B,paddingBottom:W,computedItems:X,handleItemResize:re,handleScroll:ge,handleScrollend:de,calculateVisibleItems:ye,scrollToIndex:ee}=YT(e,T),_e=C(()=>X.value.map(ce=>ce.raw));Vu({sortBy:r,page:he(1),itemsPerPage:he(-1),groupBy:s,search:v}),wt({VDataTableRows:{hideNoData:U(()=>e.hideNoData),noDataText:U(()=>e.noDataText),loading:U(()=>e.loading),loadingText:U(()=>e.loadingText)}});const ke=C(()=>({sortBy:r.value,toggleSort:p,someSelected:N.value,allSelected:L.value,isSelected:P,select:D,selectAll:E,toggleSelect:O,isExpanded:H,toggleExpand:G,isGroupOpen:S,toggleGroup:x,items:k.value.map(ce=>ce.raw),internalItems:k.value,groupedItems:T.value,columns:u.value,headers:c.value}));return oe(()=>{const ce=fr.filterProps(e),Ee=hr.filterProps(e),R=gr.filterProps(e);return w(gr,ne({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},R,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(ke.value),wrapper:()=>A("div",{ref:z,onScrollPassive:ge,onScrollend:de,class:"v-table__wrapper",style:{height:we(e.height)}},[A("table",null,[i.colgroup?.(ke.value),!e.hideDefaultHeader&&A("thead",{key:"thead"},[w(fr,ce,i)]),i.thead?.(ke.value),!e.hideDefaultBody&&A("tbody",{key:"tbody"},[A("tr",{ref:$,style:{height:we(B.value),border:0}},[A("td",{colspan:u.value.length,style:{height:0,border:0}},null)]),i["body.prepend"]?.(ke.value),w(hr,ne(n,Ee,{items:_e.value}),{...i,item:F=>w(jT,{key:F.internalItem.index,renderless:!0,"onUpdate:height":Y=>re(F.internalItem.index,Y)},{default:Y=>{let{itemRef:te}=Y;return i.item?.({...F,itemRef:te})??w(Bm,ne(F.props,{ref:te,key:F.internalItem.index,index:F.internalItem.index}),i)}})}),i["body.append"]?.(ke.value),A("tr",{style:{height:we(W.value),border:0}},[A("td",{colspan:u.value.length,style:{height:0,border:0}},null)])]),i.tbody?.(ke.value),i.tfoot?.(ke.value)])]),bottom:()=>i.bottom?.(ke.value)})}),{calculateVisibleItems:ye,scrollToIndex:ee}}}),H5=j({itemsLength:{type:[Number,String],required:!0},...Im(),...Vm(),...Om()},"VDataTableServer"),j5=ie()({name:"VDataTableServer",props:H5(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:s}=Em(e),{sortBy:r,multiSort:a,mustSort:o}=$u(e),{page:l,itemsPerPage:u}=Pm(e),{disableSort:c}=Ca(e),d=C(()=>parseInt(e.itemsLength,10)),{columns:f,headers:h}=Nm(e,{groupBy:s,showSelect:U(()=>e.showSelect),showExpand:U(()=>e.showExpand)}),{items:g}=Fm(e,f),{toggleSort:v}=zu({sortBy:r,multiSort:a,mustSort:o,page:l}),{opened:m,isGroupOpen:p,toggleGroup:y,extractRows:_}=Bu({groupBy:s,sortBy:r,disableSort:c}),{pageCount:b,setItemsPerPage:S}=Rm({page:l,itemsPerPage:u,itemsLength:d}),{flatItems:x}=Fu(g,s,m,()=>!!i["group-summary"]),{isSelected:I,select:T,selectAll:k,toggleSelect:P,someSelected:D,allSelected:E}=Lu(e,{allItems:g,currentPage:g}),{isExpanded:O,toggleExpand:N}=Nu(e),L=C(()=>_(g.value));Vu({page:l,itemsPerPage:u,sortBy:r,groupBy:s,search:U(()=>e.search)}),dt("v-data-table",{toggleSort:v,sortBy:r}),wt({VDataTableRows:{hideNoData:U(()=>e.hideNoData),noDataText:U(()=>e.noDataText),loading:U(()=>e.loading),loadingText:U(()=>e.loadingText)}});const H=C(()=>({page:l.value,itemsPerPage:u.value,sortBy:r.value,pageCount:b.value,toggleSort:v,setItemsPerPage:S,someSelected:D.value,allSelected:E.value,isSelected:I,select:T,selectAll:k,toggleSelect:P,isExpanded:O,toggleExpand:N,isGroupOpen:p,toggleGroup:y,items:L.value.map(G=>G.raw),internalItems:L.value,groupedItems:x.value,columns:f.value,headers:h.value}));oe(()=>{const G=jo.filterProps(e),z=fr.filterProps(e),$=hr.filterProps(e),B=gr.filterProps(e);return w(gr,ne({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},B,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(H.value),default:()=>i.default?i.default(H.value):A(Ae,null,[i.colgroup?.(H.value),!e.hideDefaultHeader&&A("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[w(fr,z,i)]),i.thead?.(H.value),!e.hideDefaultBody&&A("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[i["body.prepend"]?.(H.value),i.body?i.body(H.value):w(hr,ne(n,$,{items:x.value}),i),i["body.append"]?.(H.value)]),i.tbody?.(H.value),i.tfoot?.(H.value)]),bottom:()=>i.bottom?i.bottom(H.value):!e.hideDefaultFooter&&A(Ae,null,[w($n,null,null),w(jo,G,{prepend:i["footer.prepend"]})])})})}}),X5=j({fluid:{type:Boolean,default:!1},...Ce(),...It(),...Ne()},"VContainer"),Y5=ie()({name:"VContainer",props:X5(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=Mt(),{dimensionStyles:s}=Pt(e);return oe(()=>w(e.tag,{class:se(["v-container",{"v-container--fluid":e.fluid},i.value,e.class]),style:pe([s.value,e.style])},n)),{}}}),U1=xu.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),$1=xu.reduce((e,t)=>{const n="offset"+Di(t);return e[n]={type:[String,Number],default:null},e},{}),z1=xu.reduce((e,t)=>{const n="order"+Di(t);return e[n]={type:[String,Number],default:null},e},{}),X_={col:Object.keys(U1),offset:Object.keys($1),order:Object.keys(z1)};function K5(e,t,n){let i=e;if(!(n==null||n===!1)){if(t){const s=t.replace(e,"");i+=`-${s}`}return e==="col"&&(i="v-"+i),e==="col"&&(n===""||n===!0)||(i+=`-${n}`),i.toLowerCase()}}const q5=["auto","start","end","center","baseline","stretch"],Z5=j({cols:{type:[Boolean,String,Number],default:!1},...U1,offset:{type:[String,Number],default:null},...$1,order:{type:[String,Number],default:null},...z1,alignSelf:{type:String,default:null,validator:e=>q5.includes(e)},...Ce(),...Ne()},"VCol"),G5=ie()({name:"VCol",props:Z5(),setup(e,t){let{slots:n}=t;const i=C(()=>{const s=[];let r;for(r in X_)X_[r].forEach(o=>{const l=e[o],u=K5(r,o,l);u&&s.push(u)});const a=s.some(o=>o.startsWith("v-col-"));return s.push({"v-col":!a||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),s});return()=>ns(e.tag,{class:[i.value,e.class],style:e.style},n.default?.())}}),Lm=["start","end","center"],W1=["space-between","space-around","space-evenly"];function Um(e,t){return xu.reduce((n,i)=>{const s=e+Di(i);return n[s]=t(),n},{})}const Q5=[...Lm,"baseline","stretch"],H1=e=>Q5.includes(e),j1=Um("align",()=>({type:String,default:null,validator:H1})),J5=[...Lm,...W1],X1=e=>J5.includes(e),Y1=Um("justify",()=>({type:String,default:null,validator:X1})),ez=[...Lm,...W1,"stretch"],K1=e=>ez.includes(e),q1=Um("alignContent",()=>({type:String,default:null,validator:K1})),Y_={align:Object.keys(j1),justify:Object.keys(Y1),alignContent:Object.keys(q1)},tz={align:"align",justify:"justify",alignContent:"align-content"};function nz(e,t,n){let i=tz[e];if(n!=null){if(t){const s=t.replace(e,"");i+=`-${s}`}return i+=`-${n}`,i.toLowerCase()}}const iz=j({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:H1},...j1,justify:{type:String,default:null,validator:X1},...Y1,alignContent:{type:String,default:null,validator:K1},...q1,...Ce(),...Ne()},"VRow"),sz=ie()({name:"VRow",props:iz(),setup(e,t){let{slots:n}=t;const i=C(()=>{const s=[];let r;for(r in Y_)Y_[r].forEach(a=>{const o=e[a],l=nz(r,a,o);l&&s.push(l)});return s.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),s});return()=>ns(e.tag,{class:["v-row",i.value,e.class],style:e.style},n.default?.())}}),Z1=is("v-spacer","div","VSpacer"),G1=j({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:Pe,default:"$next"},prevIcon:{type:Pe,default:"$prev"},modeIcon:{type:Pe,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),yh=ie()({name:"VDatePickerControls",props:G1(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const{t:i}=nt(),s=C(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),r=C(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),a=C(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),o=C(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function l(){n("click:prev")}function u(){n("click:next")}function c(){n("click:year")}function d(){n("click:month")}return oe(()=>A("div",{class:se(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":we(e.controlHeight)}},[w(We,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:s.value,text:e.text,variant:"text",rounded:!0,onClick:d},null),w(We,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:r.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.selectYear"),onClick:c},null),w(Z1,null,null),A("div",{class:"v-date-picker-controls__month"},[w(We,{"data-testid":"prev-month",disabled:a.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:l},null),w(We,{"data-testid":"next-month",disabled:o.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:u},null)])])),{}}}),rz=j({appendIcon:Pe,color:String,header:String,transition:String,onClick:Gt()},"VDatePickerHeader"),_h=ie()({name:"VDatePickerHeader",props:rz(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:s,backgroundColorStyles:r}=Ge(()=>e.color);function a(){n("click")}function o(){n("click:append")}return oe(()=>{const l=!!(i.default||e.header),u=!!(i.append||e.appendIcon);return A("div",{class:se(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},s.value]),style:pe(r.value),onClick:a},[i.prepend&&A("div",{key:"prepend",class:"v-date-picker-header__prepend"},[i.prepend()]),l&&w(vn,{key:"content",name:e.transition},{default:()=>[A("div",{key:e.header,class:"v-date-picker-header__content"},[i.default?.()??e.header])]}),u&&A("div",{class:"v-date-picker-header__append"},[i.append?w(Be,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[i.append?.()]}):w(We,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:o},null)])])}),{}}}),az=j({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function oz(e){const t=rl(),n=Re(e,"modelValue",[],h=>bt(h).map(g=>t.date(g))),i=C(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),s=Re(e,"year",void 0,h=>{const g=h!=null?Number(h):t.getYear(i.value);return t.startOfYear(t.setYear(t.date(),g))},h=>t.getYear(h)),r=Re(e,"month",void 0,h=>{const g=h!=null?Number(h):t.getMonth(i.value),v=t.setYear(t.startOfMonth(t.date()),t.getYear(s.value));return t.setMonth(v,g)},h=>t.getMonth(h)),a=C(()=>{const h=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((g,v)=>e.weekdays.includes((v+h)%7))}),o=C(()=>{const h=t.getWeekArray(r.value,e.firstDayOfWeek),g=h.flat(),v=42;if(e.weeksInMonth==="static"&&g.length<v){const m=g[g.length-1];let p=[];for(let y=1;y<=v-g.length;y++)p.push(t.addDays(m,y)),y%7===0&&(h.push(p),p=[])}return h});function l(h,g){return h.filter(v=>e.weekdays.includes(t.toJsDate(v).getDay())).map((v,m)=>{const p=t.toISO(v),y=!t.isSameMonth(v,r.value),_=t.isSameDay(v,t.startOfMonth(r.value)),b=t.isSameDay(v,t.endOfMonth(r.value)),S=t.isSameDay(v,r.value),x=e.weekdays.length;return{date:v,formatted:t.format(v,"keyboardDate"),isAdjacent:y,isDisabled:f(v),isEnd:b,isHidden:y&&!e.showAdjacentMonths,isSame:S,isSelected:n.value.some(I=>t.isSameDay(v,I)),isStart:_,isToday:t.isSameDay(v,g),isWeekEnd:m%x===x-1,isWeekStart:m%x===0,isoDate:p,localized:t.format(v,"dayOfMonth"),month:t.getMonth(v),year:t.getYear(v)}})}const u=C(()=>{const h=t.startOfWeek(i.value,e.firstDayOfWeek),g=[];for(let m=0;m<=6;m++)g.push(t.addDays(h,m));const v=t.date();return l(g,v)}),c=C(()=>{const h=o.value.flat(),g=t.date();return l(h,g)}),d=C(()=>o.value.map(h=>h.length?t.getWeek(h[0],e.firstDayOfWeek,e.firstDayOfYear):null));function f(h){if(e.disabled)return!0;const g=t.date(h);return e.min&&t.isBefore(t.endOfDay(g),t.date(e.min))||e.max&&t.isAfter(g,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(v=>t.isSameDay(t.date(v),g)):typeof e.allowedDates=="function"?!e.allowedDates(g):!1}return{displayValue:i,daysInMonth:c,daysInWeek:u,genDays:l,model:n,weeksInMonth:o,weekdayLabels:a,weekNumbers:d}}const Q1=j({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Qe(az(),["displayValue"])},"VDatePickerMonth"),bh=ie()({name:"VDatePickerMonth",props:Q1(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const s=le(),{t:r}=nt(),{daysInMonth:a,model:o,weekNumbers:l,weekdayLabels:u}=oz(e),c=rl(),d=he(),f=he(),h=he(!1),g=U(()=>h.value?e.reverseTransition:e.transition);e.multiple==="range"&&o.value.length>0&&(d.value=o.value[0],o.value.length>1&&(f.value=o.value[o.value.length-1]));const v=C(()=>{const b=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return o.value.length>=b});me(a,(b,S)=>{S&&(h.value=c.isBefore(b[0].date,S[0].date))});function m(b){const S=c.startOfDay(b);if(o.value.length===0?d.value=void 0:o.value.length===1&&(d.value=o.value[0],f.value=void 0),!d.value)d.value=S,o.value=[d.value];else if(f.value)d.value=b,f.value=void 0,o.value=[d.value];else{if(c.isSameDay(S,d.value)){d.value=void 0,o.value=[];return}else c.isBefore(S,d.value)?(f.value=c.endOfDay(d.value),d.value=S):f.value=c.endOfDay(S);o.value=c6(c,d.value,f.value)}}function p(b){const S=c.format(b.date,"fullDateWithWeekday"),x=b.isToday?"currentDate":"selectDate";return r(`$vuetify.datePicker.ariaLabel.${x}`,S)}function y(b){const S=o.value.findIndex(x=>c.isSameDay(x,b));if(S===-1)o.value=[...o.value,b];else{const x=[...o.value];x.splice(S,1),o.value=x}}function _(b){e.multiple==="range"?m(b):e.multiple?y(b):o.value=[b]}oe(()=>A("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&A("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&A("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Kt("")]),l.value.map(b=>A("div",{class:se(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[b]))]),w(vn,{name:g.value},{default:()=>[A("div",{ref:s,key:a.value[0].date?.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&u.value.map(b=>A("div",{class:se(["v-date-picker-month__day","v-date-picker-month__weekday"])},[b])),a.value.map((b,S)=>{const x={props:{class:"v-date-picker-month__day-btn",color:b.isSelected||b.isToday?e.color:void 0,disabled:b.isDisabled,icon:!0,ripple:!1,text:b.localized,variant:b.isSelected?"flat":b.isToday?"outlined":"text","aria-label":p(b),"aria-current":b.isToday?"date":void 0,onClick:()=>_(b.date)},item:b,i:S};return v.value&&!b.isSelected&&(b.isDisabled=!0),A("div",{class:se(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":b.isAdjacent,"v-date-picker-month__day--hide-adjacent":b.isHidden,"v-date-picker-month__day--selected":b.isSelected,"v-date-picker-month__day--week-end":b.isWeekEnd,"v-date-picker-month__day--week-start":b.isWeekStart}]),"data-v-date":b.isDisabled?void 0:b.isoDate},[(e.showAdjacentMonths||!b.isAdjacent)&&(i.day?.(x)??w(We,x.props,null))])})])]})]))}}),J1=j({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),wh=ie()({name:"VDatePickerMonths",props:J1(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const s=rl(),r=Re(e,"modelValue"),a=C(()=>{let l=s.startOfYear(s.date());return e.year&&(l=s.setYear(l,e.year)),Ln(12).map(u=>{const c=s.format(l,"monthShort"),d=s.format(l,"month"),f=!!(!o(u)||e.min&&s.isAfter(s.startOfMonth(s.date(e.min)),l)||e.max&&s.isAfter(l,s.startOfMonth(s.date(e.max))));return l=s.getNextMonth(l),{isDisabled:f,text:c,label:d,value:u}})});ht(()=>{r.value=r.value??s.getMonth(s.date())});function o(l){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(l):typeof e.allowedMonths=="function"?e.allowedMonths(l):!0}return oe(()=>A("div",{class:"v-date-picker-months",style:{height:we(e.height)}},[A("div",{class:"v-date-picker-months__content"},[a.value.map((l,u)=>{const c={active:r.value===u,ariaLabel:l.label,color:r.value===u?e.color:void 0,disabled:l.isDisabled,rounded:!0,text:l.text,variant:r.value===l.value?"flat":"text",onClick:()=>d(u)};function d(f){if(r.value===f){n("update:modelValue",r.value);return}r.value=f}return i.month?.({month:l,i:u,props:c})??w(We,ne({key:"month"},c),null)})])])),{}}}),eA=j({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),xh=ie()({name:"VDatePickerYears",props:eA(),directives:{vIntersect:di},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const s=rl(),r=Re(e,"modelValue"),a=C(()=>{const c=s.getYear(s.date());let d=c-100,f=c+52;e.min&&(d=s.getYear(s.date(e.min))),e.max&&(f=s.getYear(s.date(e.max)));let h=s.startOfYear(s.date());return h=s.setYear(h,d),Ln(f-d+1,d).map(g=>{const v=s.format(h,"year");return h=s.setYear(h,s.getYear(h)+1),{text:v,value:g,isDisabled:!u(g)}})});ht(()=>{r.value=r.value??s.getYear(s.date())});const o=Lc();function l(){o.el?.focus(),o.el?.scrollIntoView({block:"center"})}function u(c){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(c):typeof e.allowedYears=="function"?e.allowedYears(c):!0}return oe(()=>_t(A("div",{class:"v-date-picker-years",style:{height:we(e.height)}},[A("div",{class:"v-date-picker-years__content"},[a.value.map((c,d)=>{const f={ref:r.value===c.value?o:void 0,active:r.value===c.value,color:r.value===c.value?e.color:void 0,rounded:!0,text:c.text,disabled:c.isDisabled,variant:r.value===c.value?"flat":"text",onClick:()=>{if(r.value===c.value){n("update:modelValue",r.value);return}r.value=c.value}};return i.year?.({year:c,i:d,props:f})??w(We,ne({key:"month"},f),null)})])]),[[di,{handler:l},null,{once:!0}]])),{}}}),lz=j({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...G1(),...Q1({weeksInMonth:"static"}),...Qe(J1(),["modelValue"]),...Qe(eA(),["modelValue"]),...Du({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),cz=ie()({name:"VDatePicker",props:lz(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const s=rl(),{t:r}=nt(),{rtlClasses:a}=Mt(),o=Re(e,"modelValue",void 0,z=>bt(z).map($=>s.date($)),z=>e.multiple?z:z[0]),l=Re(e,"viewMode"),u=C(()=>{const z=s.date(e.min);return e.min&&s.isValid(z)?z:null}),c=C(()=>{const z=s.date(e.max);return e.max&&s.isValid(z)?z:null}),d=C(()=>{const z=s.date();let $=z;return o.value?.[0]?$=s.date(o.value[0]):u.value&&s.isBefore(z,u.value)?$=u.value:c.value&&s.isAfter(z,c.value)&&($=c.value),$&&s.isValid($)?$:z}),f=U(()=>e.headerColor??e.color),h=Re(e,"month"),g=C({get:()=>Number(h.value??s.getMonth(s.startOfMonth(d.value))),set:z=>h.value=z}),v=Re(e,"year"),m=C({get:()=>Number(v.value??s.getYear(s.startOfYear(s.setMonth(d.value,g.value)))),set:z=>v.value=z}),p=he(!1),y=C(()=>e.multiple&&o.value.length>1?r("$vuetify.datePicker.itemsSelected",o.value.length):o.value[0]&&s.isValid(o.value[0])?s.format(s.date(o.value[0]),"normalDateWithWeekday"):r(e.header)),_=C(()=>{let z=s.date();return z=s.setDate(z,1),z=s.setMonth(z,g.value),z=s.setYear(z,m.value),s.format(z,"monthAndYear")}),b=U(()=>`date-picker-header${p.value?"-reverse":""}-transition`),S=C(()=>{if(e.disabled)return!0;const z=[];if(l.value!=="month")z.push("prev","next");else{let $=s.date();if($=s.startOfMonth($),$=s.setMonth($,g.value),$=s.setYear($,m.value),u.value){const B=s.addDays(s.startOfMonth($),-1);s.isAfter(u.value,B)&&z.push("prev")}if(c.value){const B=s.addDays(s.endOfMonth($),1);s.isAfter(B,c.value)&&z.push("next")}}return z}),x=C(()=>e.allowedYears||k),I=C(()=>e.allowedMonths||P);function T(z,$){const B=e.allowedDates;if(typeof B!="function")return!0;const W=s.getDiff($,z,"days");for(let X=0;X<W;X++)if(B(s.addDays(z,X)))return!0;return!1}function k(z){if(typeof e.allowedDates=="function"){const $=s.parseISO(`${z}-01-01`);return T($,s.endOfYear($))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const $ of e.allowedDates)if(s.getYear(s.date($))===z)return!0;return!1}return!0}function P(z){if(typeof e.allowedDates=="function"){const $=String(z+1).padStart(2,"0"),B=s.parseISO(`${m.value}-${$}-01`);return T(B,s.endOfMonth(B))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const $ of e.allowedDates)if(s.getYear(s.date($))===m.value&&s.getMonth(s.date($))===z)return!0;return!1}return!0}function D(){g.value<11?g.value++:(m.value++,g.value=0,G()),H()}function E(){g.value>0?g.value--:(m.value--,g.value=11,G()),H()}function O(){l.value="month"}function N(){l.value=l.value==="months"?"month":"months"}function L(){l.value=l.value==="year"?"month":"year"}function H(){l.value==="months"&&N()}function G(){l.value==="year"&&L()}return me(o,(z,$)=>{const B=bt($),W=bt(z);if(!W.length)return;const X=s.date(B[B.length-1]),re=s.date(W[W.length-1]),ge=s.getMonth(re),de=s.getYear(re);ge!==g.value&&(g.value=ge,H()),de!==m.value&&(m.value=de,G()),p.value=s.isBefore(X,re)}),oe(()=>{const z=Ta.filterProps(e),$=yh.filterProps(e),B=_h.filterProps(e),W=bh.filterProps(e),X=Qe(wh.filterProps(e),["modelValue"]),re=Qe(xh.filterProps(e),["modelValue"]),ge={color:f.value,header:y.value,transition:b.value};return w(Ta,ne(z,{color:f.value,class:["v-date-picker",`v-date-picker--${l.value}`,{"v-date-picker--show-week":e.showWeek},a.value,e.class],style:e.style}),{title:()=>i.title?.()??A("div",{class:"v-date-picker__title"},[r(e.title)]),header:()=>i.header?w(Be,{defaults:{VDatePickerHeader:{...ge}}},{default:()=>[i.header?.(ge)]}):w(_h,ne({key:"header"},B,ge,{onClick:l.value!=="month"?O:void 0}),{prepend:i.prepend,append:i.append}),default:()=>A(Ae,null,[w(yh,ne($,{disabled:S.value,text:_.value,"onClick:next":D,"onClick:prev":E,"onClick:month":N,"onClick:year":L}),null),w(Fo,{hideOnLeave:!0},{default:()=>[l.value==="months"?w(wh,ne({key:"date-picker-months"},X,{modelValue:g.value,"onUpdate:modelValue":[de=>g.value=de,H],min:u.value,max:c.value,year:m.value,allowedMonths:I.value}),{month:i.month}):l.value==="year"?w(xh,ne({key:"date-picker-years"},re,{modelValue:m.value,"onUpdate:modelValue":[de=>m.value=de,G],min:u.value,max:c.value,allowedYears:x.value}),{year:i.year}):w(bh,ne({key:"date-picker-month"},W,{modelValue:o.value,"onUpdate:modelValue":de=>o.value=de,month:g.value,"onUpdate:month":[de=>g.value=de,H],year:m.value,"onUpdate:year":[de=>m.value=de,G],min:u.value,max:c.value}),{day:i.day})]})]),actions:i.actions})}),{}}}),uz=j({actionText:String,bgColor:String,color:String,icon:Pe,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Ce(),...It(),...Bi({size:void 0}),...Xe()},"VEmptyState"),dz=ie()({name:"VEmptyState",props:uz(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{themeClasses:s}=Ze(e),{backgroundColorClasses:r,backgroundColorStyles:a}=Ge(()=>e.bgColor),{dimensionStyles:o}=Pt(e),{displayClasses:l}=ni();function u(c){n("click:action",c)}return oe(()=>{const c=!!(i.actions||e.actionText),d=!!(i.headline||e.headline),f=!!(i.title||e.title),h=!!(i.text||e.text),g=!!(i.media||e.image||e.icon),v=e.size||(e.image?200:96);return A("div",{class:se(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},s.value,r.value,l.value,e.class]),style:pe([a.value,o.value,e.style])},[g&&A("div",{key:"media",class:"v-empty-state__media"},[i.media?w(Be,{key:"media-defaults",defaults:{VImg:{src:e.image,height:v},VIcon:{size:v,icon:e.icon}}},{default:()=>[i.media()]}):A(Ae,null,[e.image?w(Ji,{key:"image",src:e.image,height:v},null):e.icon?w(Ye,{key:"icon",color:e.color,size:v,icon:e.icon},null):void 0])]),d&&A("div",{key:"headline",class:"v-empty-state__headline"},[i.headline?.()??e.headline]),f&&A("div",{key:"title",class:"v-empty-state__title"},[i.title?.()??e.title]),h&&A("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:we(e.textWidth)}},[i.text?.()??e.text]),i.default&&A("div",{key:"content",class:"v-empty-state__content"},[i.default()]),c&&A("div",{key:"actions",class:"v-empty-state__actions"},[w(Be,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[i.actions?.({props:{onClick:u}})??w(We,{onClick:u},null)]})])])}),{}}}),Yo=Symbol.for("vuetify:v-expansion-panel"),tA=j({...Ce(),...bm()},"VExpansionPanelText"),Sh=ie()({name:"VExpansionPanelText",props:tA(),setup(e,t){let{slots:n}=t;const i=He(Yo);if(!i)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:s,onAfterLeave:r}=wm(e,i.isSelected);return oe(()=>w(Au,{onAfterLeave:r},{default:()=>[_t(A("div",{class:se(["v-expansion-panel-text",e.class]),style:pe(e.style)},[n.default&&s.value&&A("div",{class:"v-expansion-panel-text__wrapper"},[n.default?.()])]),[[hi,i.isSelected.value]])]})),{}}}),nA=j({color:String,expandIcon:{type:Pe,default:"$expand"},collapseIcon:{type:Pe,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Ce(),...It()},"VExpansionPanelTitle"),Th=ie()({name:"VExpansionPanelTitle",directives:{vRipple:pn},props:nA(),setup(e,t){let{slots:n}=t;const i=He(Yo);if(!i)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:s,backgroundColorStyles:r}=Ge(()=>e.color),{dimensionStyles:a}=Pt(e),o=C(()=>({collapseIcon:e.collapseIcon,disabled:i.disabled.value,expanded:i.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),l=U(()=>i.isSelected.value?e.collapseIcon:e.expandIcon);return oe(()=>_t(A("button",{class:se(["v-expansion-panel-title",{"v-expansion-panel-title--active":i.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},s.value,e.class]),style:pe([r.value,a.value,e.style]),type:"button",tabindex:i.disabled.value?-1:void 0,disabled:i.disabled.value,"aria-expanded":i.isSelected.value,onClick:e.readonly?void 0:i.toggle},[A("span",{class:"v-expansion-panel-title__overlay"},null),n.default?.(o.value),!e.hideActions&&w(Be,{defaults:{VIcon:{icon:l.value}}},{default:()=>[A("span",{class:"v-expansion-panel-title__icon"},[n.actions?.(o.value)??w(Ye,null,null)])]})]),[[pn,e.ripple]])),{}}}),iA=j({title:String,text:String,bgColor:String,...Ot(),...Cr(),...gt(),...Ne(),...nA(),...tA()},"VExpansionPanel"),fz=ie()({name:"VExpansionPanel",props:iA(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=kr(e,Yo),{backgroundColorClasses:s,backgroundColorStyles:r}=Ge(()=>e.bgColor),{elevationClasses:a}=jt(e),{roundedClasses:o}=xt(e),l=U(()=>i?.disabled.value||e.disabled),u=C(()=>i.group.items.value.reduce((f,h,g)=>(i.group.selected.value.includes(h.id)&&f.push(g),f),[])),c=C(()=>{const f=i.group.items.value.findIndex(h=>h.id===i.id);return!i.isSelected.value&&u.value.some(h=>h-f===1)}),d=C(()=>{const f=i.group.items.value.findIndex(h=>h.id===i.id);return!i.isSelected.value&&u.value.some(h=>h-f===-1)});return dt(Yo,i),oe(()=>{const f=!!(n.text||e.text),h=!!(n.title||e.title),g=Th.filterProps(e),v=Sh.filterProps(e);return w(e.tag,{class:se(["v-expansion-panel",{"v-expansion-panel--active":i.isSelected.value,"v-expansion-panel--before-active":c.value,"v-expansion-panel--after-active":d.value,"v-expansion-panel--disabled":l.value},o.value,s.value,e.class]),style:pe([r.value,e.style])},{default:()=>[A("div",{class:se(["v-expansion-panel__shadow",...a.value])},null),w(Be,{defaults:{VExpansionPanelTitle:{...g},VExpansionPanelText:{...v}}},{default:()=>[h&&w(Th,{key:"title"},{default:()=>[n.title?n.title():e.title]}),f&&w(Sh,{key:"text"},{default:()=>[n.text?n.text():e.text]}),n.default?.()]})]})}),{groupItem:i}}}),hz=["default","accordion","inset","popout"],gz=j({flat:Boolean,...Ar(),...In(iA(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Xe(),...Ce(),...Ne(),variant:{type:String,default:"default",validator:e=>hz.includes(e)}},"VExpansionPanels"),mz=ie()({name:"VExpansionPanels",props:gz(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:i,prev:s}=Ds(e,Yo),{themeClasses:r}=Ze(e),a=U(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return wt({VExpansionPanel:{bgColor:U(()=>e.bgColor),collapseIcon:U(()=>e.collapseIcon),color:U(()=>e.color),eager:U(()=>e.eager),elevation:U(()=>e.elevation),expandIcon:U(()=>e.expandIcon),focusable:U(()=>e.focusable),hideActions:U(()=>e.hideActions),readonly:U(()=>e.readonly),ripple:U(()=>e.ripple),rounded:U(()=>e.rounded),static:U(()=>e.static)}}),oe(()=>w(e.tag,{class:se(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},r.value,a.value,e.class]),style:pe(e.style)},{default:()=>[n.default?.({prev:s,next:i})]})),{next:i,prev:s}}}),vz=j({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...Qe(Eu({active:!0}),["location","spaced"]),...wr(),...ss(),...mi({transition:"fab-transition"})},"VFab"),pz=ie()({name:"VFab",props:vz(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"modelValue"),s=he(56),r=le(),{resizeRef:a}=ei(d=>{d.length&&(s.value=d[0].target.clientHeight)}),o=U(()=>e.app||e.absolute),l=C(()=>o.value?e.location?.split(" ").shift()??"bottom":!1),u=C(()=>o.value?e.location?.split(" ")[1]??"end":!1);en(()=>e.app,()=>{const d=xr({id:e.name,order:C(()=>parseInt(e.order,10)),position:l,layoutSize:C(()=>e.layout?s.value+24:0),elementSize:C(()=>s.value+24),active:C(()=>e.app&&i.value),absolute:U(()=>e.absolute)});ht(()=>{r.value=d.layoutItemStyles.value})});const c=le();return oe(()=>{const d=We.filterProps(e);return A("div",{ref:c,class:se(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${l.value}`]:o.value,[`v-fab--${u.value}`]:o.value},e.class]),style:pe([e.app?{...r.value}:{height:e.absolute?"100%":"inherit"},e.style])},[A("div",{class:"v-fab__container"},[w(vn,{appear:e.appear,transition:e.transition},{default:()=>[_t(w(We,ne({ref:a},d,{active:void 0,location:void 0}),n),[[hi,e.active]])]})])])}),{}}});function yz(){function e(n){return[...n.dataTransfer?.items??[]].filter(s=>s.kind==="file").map(s=>s.webkitGetAsEntry()).filter(Boolean).length>0||[...n.dataTransfer?.files??[]].length>0}async function t(n){const i=[],s=[...n.dataTransfer?.items??[]].filter(r=>r.kind==="file").map(r=>r.webkitGetAsEntry()).filter(Boolean);if(s.length)for(const r of s){const a=await sA(r,rA(".",r));i.push(...a.map(o=>o.file))}else i.push(...n.dataTransfer?.files??[]);return i}return{handleDrop:t,hasFilesOrFolders:e}}function sA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((n,i)=>{e.isFile?e.file(r=>n([{file:r,path:t}]),i):e.isDirectory&&e.createReader().readEntries(async r=>{const a=[];for(const o of r)a.push(...await sA(o,rA(t,o)));n(a)})})}function rA(e,t){return t.isDirectory?`${e}/${t.name}`:e}const _z=j({filterByType:String},"file-accept");function bz(e){const t=C(()=>e.filterByType?wz(e.filterByType):null);function n(i){if(t.value){const s=i.filter(t.value);return{accepted:s,rejected:i.filter(r=>!s.includes(r))}}return{accepted:i,rejected:[]}}return{filterAccepted:n}}function wz(e){const t=e.split(",").map(r=>r.trim().toLowerCase()),n=t.filter(r=>r.startsWith(".")),i=t.filter(r=>r.endsWith("/*")),s=t.filter(r=>!n.includes(r)&&!i.includes(r));return r=>{const a=r.name.split(".").at(-1)?.toLowerCase()??"",o=r.type.split("/").at(0)?.toLowerCase()??"";return s.includes(r.type)||n.includes(`.${a}`)||i.includes(`${o}/*`)}}const xz=j({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...as({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>bt(e).every(t=>t!=null&&typeof t=="object")},..._z(),...gl({clearable:!0})},"VFileInput"),Sz=ie()({name:"VFileInput",inheritAttrs:!1,props:xz(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const{t:r}=nt(),{filterAccepted:a}=bz(e),o=Re(e,"modelValue",e.modelValue,$=>bt($),$=>!e.multiple&&Array.isArray($)?$[0]:$),{isFocused:l,focus:u,blur:c}=rs(e),d=C(()=>typeof e.showSize!="boolean"?e.showSize:void 0),f=C(()=>(o.value??[]).reduce(($,B)=>{let{size:W=0}=B;return $+W},0)),h=C(()=>i_(f.value,d.value)),g=C(()=>(o.value??[]).map($=>{const{name:B="",size:W=0}=$,X=O(B);return e.showSize?`${X} (${i_(W,d.value)})`:X})),v=C(()=>{const $=o.value?.length??0;return e.showSize?r(e.counterSizeString,$,h.value):r(e.counterString,$)}),m=le(),p=le(),y=le(),_=U(()=>l.value||e.active),b=C(()=>["plain","underlined"].includes(e.variant)),S=he(!1),{handleDrop:x,hasFilesOrFolders:I}=yz();function T(){y.value!==document.activeElement&&y.value?.focus(),l.value||u()}function k($){y.value?.click()}function P($){i("mousedown:control",$)}function D($){y.value?.click(),i("click:control",$)}function E($){$.stopPropagation(),T(),je(()=>{o.value=[],bu(e["onClick:clear"],$)})}function O($){if($.length<Number(e.truncateLength))return $;const B=Math.floor((Number(e.truncateLength)-1)/2);return`${$.slice(0,B)}${$.slice($.length-B)}`}function N($){$.preventDefault(),$.stopImmediatePropagation(),S.value=!0}function L($){$.preventDefault(),S.value=!1}async function H($){if($.preventDefault(),$.stopImmediatePropagation(),S.value=!1,!y.value||!I($))return;const B=await x($);z(B)}function G($){if(!(!$.target||$.repack))if(e.filterByType)z([...$.target.files]);else{const B=$.target;o.value=[...B.files??[]]}}function z($){const B=new DataTransfer,{accepted:W,rejected:X}=a($);X.length&&i("rejected",X);for(const ge of W)B.items.add(ge);y.value.files=B.files,o.value=[...B.files];const re=new Event("change",{bubbles:!0});re.repack=!0,y.value.dispatchEvent(re)}return me(o,$=>{(!Array.isArray($)||!$.length)&&y.value&&(y.value.value="")}),oe(()=>{const $=!!(s.counter||e.counter),B=!!($||s.details),[W,X]=Ms(n),{modelValue:re,...ge}=tn.filterProps(e),de={...Ps.filterProps(e),"onClick:clear":E},ee=n.webkitdirectory!==void 0&&n.webkitdirectory!==!1?void 0:e.filterByType??String(n.accept);return w(tn,ne({ref:m,modelValue:e.multiple?o.value:o.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":S.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":b.value},e.class],style:e.style,"onClick:prepend":k},W,ge,{centerAffix:!b.value,focused:l.value}),{...s,default:_e=>{let{id:ke,isDisabled:ce,isDirty:Ee,isReadonly:R,isValid:F,hasDetails:Y}=_e;return w(Ps,ne({ref:p,prependIcon:e.prependIcon,onMousedown:P,onClick:D,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},de,{id:ke.value,active:_.value||Ee.value,dirty:Ee.value||e.dirty,disabled:ce.value,focused:l.value,details:Y.value,error:F.value===!1,onDragover:N,onDrop:H}),{...s,default:te=>{let{props:{class:ae,...ue}}=te;return A(Ae,null,[A("input",ne({ref:y,type:"file",accept:ee,readonly:R.value,disabled:ce.value,multiple:e.multiple,name:e.name,onClick:Se=>{Se.stopPropagation(),R.value&&Se.preventDefault(),T()},onChange:G,onDragleave:L,onFocus:T,onBlur:c},ue,X),null),A("div",{class:se(ae)},[!!o.value?.length&&!e.hideInput&&(s.selection?s.selection({fileNames:g.value,totalBytes:f.value,totalBytesReadable:h.value}):e.chips?g.value.map(Se=>w(Da,{key:Se,size:"small",text:Se},null)):g.value.join(", "))])])}})},details:B?_e=>A(Ae,null,[s.details?.(_e),$&&A(Ae,null,[A("span",null,null),w(Pu,{active:!!o.value?.length,value:v.value,disabled:e.disabled},s.counter)])]):void 0})}),Xt({},m,p,y)}}),Tz=j({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...An(),...Ce(),...Ot(),...wr(),...gt(),...Ne({tag:"footer"}),...Xe()},"VFooter"),Az=ie()({name:"VFooter",props:Tz(),setup(e,t){let{slots:n}=t;const i=le(),{themeClasses:s}=Ze(e),{backgroundColorClasses:r,backgroundColorStyles:a}=Ge(()=>e.color),{borderClasses:o}=Pn(e),{elevationClasses:l}=jt(e),{roundedClasses:u}=xt(e),c=he(32),{resizeRef:d}=ei(h=>{h.length&&(c.value=h[0].target.clientHeight)}),f=C(()=>e.height==="auto"?c.value:parseInt(e.height,10));return en(()=>e.app,()=>{const h=xr({id:e.name,order:C(()=>parseInt(e.order,10)),position:U(()=>"bottom"),layoutSize:f,elementSize:C(()=>e.height==="auto"?void 0:f.value),active:U(()=>e.app),absolute:U(()=>e.absolute)});ht(()=>{i.value=h.layoutItemStyles.value})}),oe(()=>w(e.tag,{ref:d,class:se(["v-footer",s.value,r.value,o.value,l.value,u.value,e.class]),style:pe([a.value,e.app?i.value:{height:we(e.height)},e.style])},n)),{}}}),Cz=j({...Ce(),...NU()},"VForm"),kz=ie()({name:"VForm",props:Cz(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const s=BU(e),r=le();function a(l){l.preventDefault(),s.reset()}function o(l){const u=l,c=s.validate();u.then=c.then.bind(c),u.catch=c.catch.bind(c),u.finally=c.finally.bind(c),i("submit",u),u.defaultPrevented||c.then(d=>{let{valid:f}=d;f&&r.value?.submit()}),u.preventDefault()}return oe(()=>A("form",{ref:r,class:se(["v-form",e.class]),style:pe(e.style),novalidate:!0,onReset:a,onSubmit:o},[n.default?.(s)])),Xt(s,r)}}),Ez=j({disabled:Boolean,modelValue:{type:Boolean,default:null},...ym()},"VHover"),Iz=ie()({name:"VHover",props:Ez(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"modelValue"),{runOpenDelay:s,runCloseDelay:r}=_m(e,a=>!e.disabled&&(i.value=a));return()=>n.default?.({isHovering:i.value,props:{onMouseenter:s,onMouseleave:r}})}}),Pz=j({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...It(),...Ne()},"VInfiniteScroll"),K_=Hn({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:i,isIntersecting:s}=al();return me(s,async r=>{n("intersect",e.side,r)}),oe(()=>A("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:i},[Kt("")])),{}}}),Rz=ie()({name:"VInfiniteScroll",props:Pz(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const s=le(),r=he("ok"),a=he("ok"),o=C(()=>we(e.margin)),l=he(!1);function u(x){if(!s.value)return;const I=e.direction==="vertical"?"scrollTop":"scrollLeft";s.value[I]=x}function c(){if(!s.value)return 0;const x=e.direction==="vertical"?"scrollTop":"scrollLeft";return s.value[x]}function d(){if(!s.value)return 0;const x=e.direction==="vertical"?"scrollHeight":"scrollWidth";return s.value[x]}function f(){if(!s.value)return 0;const x=e.direction==="vertical"?"clientHeight":"clientWidth";return s.value[x]}Wt(()=>{s.value&&(e.side==="start"?u(d()):e.side==="both"&&u(d()/2-f()/2))});function h(x,I){x==="start"?r.value=I:x==="end"?a.value=I:x==="both"&&(r.value=I,a.value=I)}function g(x){return x==="start"?r.value:a.value}let v=0;function m(x,I){l.value=I,l.value&&p(x)}function p(x){if(e.mode!=="manual"&&!l.value)return;const I=g(x);if(!s.value||["empty","loading"].includes(I))return;v=d(),h(x,"loading");function T(k){h(x,k),je(()=>{k==="empty"||k==="error"||(k==="ok"&&x==="start"&&u(d()-v+c()),e.mode!=="manual"&&je(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{p(x)})})})}))})}i("load",{side:x,done:T})}const{t:y}=nt();function _(x,I){if(e.side!==x&&e.side!=="both")return;const T=()=>p(x),k={side:x,props:{onClick:T,color:e.color}};return I==="error"?n.error?.(k):I==="empty"?n.empty?.(k)??A("div",null,[y(e.emptyText)]):e.mode==="manual"?I==="loading"?n.loading?.(k)??w(cr,{indeterminate:!0,color:e.color},null):n["load-more"]?.(k)??w(We,{variant:"outlined",color:e.color,onClick:T},{default:()=>[y(e.loadMoreText)]}):n.loading?.(k)??w(cr,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:b}=Pt(e);oe(()=>{const x=e.tag,I=e.side==="start"||e.side==="both",T=e.side==="end"||e.side==="both",k=e.mode==="intersect";return w(x,{ref:s,class:se(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":I,"v-infinite-scroll--end":T}]),style:pe(b.value)},{default:()=>[A("div",{class:"v-infinite-scroll__side"},[_("start",r.value)]),I&&k&&w(K_,{key:"start",side:"start",onIntersect:m,rootMargin:o.value},null),n.default?.(),T&&k&&w(K_,{key:"end",side:"end",onIntersect:m,rootMargin:o.value},null),A("div",{class:"v-infinite-scroll__side"},[_("end",a.value)])]})});function S(x){const I=x??e.side;h(I,"ok"),je(()=>{u(d()-v+c()),e.mode!=="manual"&&je(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{I==="both"?(p("start"),p("end")):p(I)})})})})})}return{reset:S}}}),aA=Symbol.for("vuetify:v-item-group"),Mz=j({...Ce(),...Ar({selectedClass:"v-item--selected"}),...Ne(),...Xe()},"VItemGroup"),Oz=ie()({name:"VItemGroup",props:Mz(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ze(e),{isSelected:s,select:r,next:a,prev:o,selected:l}=Ds(e,aA);return()=>w(e.tag,{class:se(["v-item-group",i.value,e.class]),style:pe(e.style)},{default:()=>[n.default?.({isSelected:s,select:r,next:a,prev:o,selected:l.value})]})}}),Dz=ie()({name:"VItem",props:Cr(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,select:s,toggle:r,selectedClass:a,value:o,disabled:l}=kr(e,aA);return()=>n.default?.({isSelected:i.value,selectedClass:a.value,select:s,toggle:r,value:o.value,disabled:l.value})}}),Nz=j({color:String,...An(),...Ce(),...gt(),...Ne({tag:"kbd"}),...Xe(),...Ot()},"VKbd"),Bz=ie()({name:"VKbd",props:Nz(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ze(e),{borderClasses:s}=Pn(e),{roundedClasses:r}=xt(e),{backgroundColorClasses:a,backgroundColorStyles:o}=Ge(()=>e.color),{elevationClasses:l}=jt(e);return oe(()=>w(e.tag,{class:se(["v-kbd",i.value,a.value,s.value,l.value,r.value,e.class]),style:pe([o.value,e.style])},n)),{}}}),Fz=j({...Ce(),...It(),...BS()},"VLayout"),Vz=ie()({name:"VLayout",props:Fz(),setup(e,t){let{slots:n}=t;const{layoutClasses:i,layoutStyles:s,getLayoutItem:r,items:a,layoutRef:o}=VS(e),{dimensionStyles:l}=Pt(e);return oe(()=>A("div",{ref:o,class:se([i.value,e.class]),style:pe([l.value,s.value,e.style])},[n.default?.()])),{getLayoutItem:r,items:a}}}),Lz=j({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Ce(),...wr()},"VLayoutItem"),Uz=ie()({name:"VLayoutItem",props:Lz(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:i}=xr({id:e.name,order:C(()=>parseInt(e.order,10)),position:U(()=>e.position),elementSize:U(()=>e.size),layoutSize:U(()=>e.size),active:U(()=>e.modelValue),absolute:U(()=>e.absolute)});return()=>A("div",{class:se(["v-layout-item",e.class]),style:pe([i.value,e.style])},[n.default?.()])}}),$z=j({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Ce(),...It(),...Ne(),...mi({transition:"fade-transition"})},"VLazy"),zz=ie()({name:"VLazy",directives:{vIntersect:di},props:$z(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Pt(e),s=Re(e,"modelValue");function r(a){s.value||(s.value=a)}return oe(()=>_t(w(e.tag,{class:se(["v-lazy",e.class]),style:pe([i.value,e.style])},{default:()=>[s.value&&w(vn,{transition:e.transition,appear:!0},{default:()=>[n.default?.()]})]}),[[di,{handler:r,options:e.options},null]])),{}}}),Wz=j({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Ce()},"VLocaleProvider"),Hz=ie()({name:"VLocaleProvider",props:Wz(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=xL(e);return oe(()=>A("div",{class:se(["v-locale-provider",i.value,e.class]),style:pe(e.style)},[n.default?.()])),{}}}),jz=j({scrollable:Boolean,...Ce(),...It(),...Ne({tag:"main"})},"VMain"),Xz=ie()({name:"VMain",props:jz(),setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Pt(e),{mainStyles:s}=FS(),{ssrBootStyles:r}=Sr();return oe(()=>w(e.tag,{class:se(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:pe([s.value,r.value,i.value,e.style])},{default:()=>[e.scrollable?A("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function Yz(e){let{rootEl:t,isSticky:n,layoutItemStyles:i}=e;const s=he(!1),r=he(0),a=C(()=>{const u=typeof s.value=="boolean"?"top":s.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,s.value?{[u]:we(r.value)}:{top:i.value.top}]});Wt(()=>{me(n,u=>{u?window.addEventListener("scroll",l,{passive:!0}):window.removeEventListener("scroll",l)},{immediate:!0})}),Ht(()=>{window.removeEventListener("scroll",l)});let o=0;function l(){const u=o>window.scrollY?"up":"down",c=t.value.getBoundingClientRect(),d=parseFloat(i.value.top??0),f=window.scrollY-Math.max(0,r.value-d),h=c.height+Math.max(r.value,d)-window.scrollY-window.innerHeight,g=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;c.height<window.innerHeight-d?(s.value="top",r.value=d):u==="up"&&s.value==="bottom"||u==="down"&&s.value==="top"?(r.value=window.scrollY+c.top-g,s.value=!0):u==="down"&&h<=0?(r.value=0,s.value="bottom"):u==="up"&&f<=0&&(g?s.value!=="top"&&(r.value=-f+g+d,s.value="top"):(r.value=c.top+f,s.value="top")),o=window.scrollY}return{isStuck:s,stickyStyles:a}}const Kz=100,qz=20;function q_(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function Z_(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const i=q_(t),s=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(s-i)*Math.abs(s),n===e.length-1&&(t*=.5)}return q_(t)*1e3}function Zz(){const e={};function t(s){Array.from(s.changedTouches).forEach(r=>{(e[r.identifier]??(e[r.identifier]=new lS(qz))).push([s.timeStamp,r])})}function n(s){Array.from(s.changedTouches).forEach(r=>{delete e[r.identifier]})}function i(s){const r=e[s]?.values().reverse();if(!r)throw new Error(`No samples for touch id ${s}`);const a=r[0],o=[],l=[];for(const u of r){if(a[0]-u[0]>Kz)break;o.push({t:u[0],d:u[1].clientX}),l.push({t:u[0],d:u[1].clientY})}return{x:Z_(o),y:Z_(l),get direction(){const{x:u,y:c}=this,[d,f]=[Math.abs(u),Math.abs(c)];return d>f&&u>=0?"right":d>f&&u<=0?"left":f>d&&c>=0?"down":f>d&&c<=0?"up":Gz()}}}return{addMovement:t,endTouch:n,getVelocity:i}}function Gz(){throw new Error}function Qz(e){let{el:t,isActive:n,isTemporary:i,width:s,touchless:r,position:a}=e;Wt(()=>{window.addEventListener("touchstart",y,{passive:!0}),window.addEventListener("touchmove",_,{passive:!1}),window.addEventListener("touchend",b,{passive:!0})}),Ht(()=>{window.removeEventListener("touchstart",y),window.removeEventListener("touchmove",_),window.removeEventListener("touchend",b)});const o=C(()=>["left","right"].includes(a.value)),{addMovement:l,endTouch:u,getVelocity:c}=Zz();let d=!1;const f=he(!1),h=he(0),g=he(0);let v;function m(x,I){return(a.value==="left"?x:a.value==="right"?document.documentElement.clientWidth-x:a.value==="top"?x:a.value==="bottom"?document.documentElement.clientHeight-x:Ur())-(I?s.value:0)}function p(x){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const T=a.value==="left"?(x-g.value)/s.value:a.value==="right"?(document.documentElement.clientWidth-x-g.value)/s.value:a.value==="top"?(x-g.value)/s.value:a.value==="bottom"?(document.documentElement.clientHeight-x-g.value)/s.value:Ur();return I?at(T):T}function y(x){if(r.value)return;const I=x.changedTouches[0].clientX,T=x.changedTouches[0].clientY,k=25,P=a.value==="left"?I<k:a.value==="right"?I>document.documentElement.clientWidth-k:a.value==="top"?T<k:a.value==="bottom"?T>document.documentElement.clientHeight-k:Ur(),D=n.value&&(a.value==="left"?I<s.value:a.value==="right"?I>document.documentElement.clientWidth-s.value:a.value==="top"?T<s.value:a.value==="bottom"?T>document.documentElement.clientHeight-s.value:Ur());(P||D||n.value&&i.value)&&(v=[I,T],g.value=m(o.value?I:T,n.value),h.value=p(o.value?I:T),d=g.value>-20&&g.value<80,u(x),l(x))}function _(x){const I=x.changedTouches[0].clientX,T=x.changedTouches[0].clientY;if(d){if(!x.cancelable){d=!1;return}const P=Math.abs(I-v[0]),D=Math.abs(T-v[1]);(o.value?P>D&&P>3:D>P&&D>3)?(f.value=!0,d=!1):(o.value?D:P)>3&&(d=!1)}if(!f.value)return;x.preventDefault(),l(x);const k=p(o.value?I:T,!1);h.value=Math.max(0,Math.min(1,k)),k>1?g.value=m(o.value?I:T,!0):k<0&&(g.value=m(o.value?I:T,!1))}function b(x){if(d=!1,!f.value)return;l(x),f.value=!1;const I=c(x.changedTouches[0].identifier),T=Math.abs(I.x),k=Math.abs(I.y);(o.value?T>k&&T>400:k>T&&k>3)?n.value=I.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||Ur()):n.value=h.value>.5}const S=C(()=>f.value?{transform:a.value==="left"?`translateX(calc(-100% + ${h.value*s.value}px))`:a.value==="right"?`translateX(calc(100% - ${h.value*s.value}px))`:a.value==="top"?`translateY(calc(-100% + ${h.value*s.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${h.value*s.value}px))`:Ur(),transition:"none"}:void 0);return en(f,()=>{const x=t.value?.style.transform??null,I=t.value?.style.transition??null;ht(()=>{t.value?.style.setProperty("transform",S.value?.transform||"none"),t.value?.style.setProperty("transition",S.value?.transition||null)}),Ft(()=>{t.value?.style.setProperty("transform",x),t.value?.style.setProperty("transition",I)})}),{isDragging:f,dragProgress:h,dragStyles:S}}function Ur(){throw new Error}const Jz=["start","end","left","right","top","bottom"],eW=j({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Jz.includes(e)},sticky:Boolean,...An(),...Ce(),...ym(),...br({mobile:null}),...Ot(),...wr(),...gt(),...Ne({tag:"nav"}),...Xe()},"VNavigationDrawer"),tW=ie()({name:"VNavigationDrawer",props:eW(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const{isRtl:r}=Mt(),{themeClasses:a}=Ze(e),{borderClasses:o}=Pn(e),{backgroundColorClasses:l,backgroundColorStyles:u}=Ge(()=>e.color),{elevationClasses:c}=jt(e),{displayClasses:d,mobile:f}=ni(e),{roundedClasses:h}=xt(e),g=qS(),v=Re(e,"modelValue",null,B=>!!B),{ssrBootStyles:m}=Sr(),{scopeId:p}=Ir(),y=le(),_=he(!1),{runOpenDelay:b,runCloseDelay:S}=_m(e,B=>{_.value=B}),x=C(()=>e.rail&&e.expandOnHover&&_.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),I=C(()=>Yf(e.location,r.value)),T=U(()=>e.persistent),k=C(()=>!e.permanent&&(f.value||e.temporary)),P=C(()=>e.sticky&&!k.value&&I.value!=="bottom");en(()=>e.expandOnHover&&e.rail!=null,()=>{me(_,B=>i("update:rail",!B))}),en(()=>!e.disableResizeWatcher,()=>{me(k,B=>!e.permanent&&je(()=>v.value=!B))}),en(()=>!e.disableRouteWatcher&&!!g,()=>{me(g.currentRoute,()=>k.value&&(v.value=!1))}),me(()=>e.permanent,B=>{B&&(v.value=!0)}),e.modelValue==null&&!k.value&&(v.value=e.permanent||!f.value);const{isDragging:D,dragProgress:E}=Qz({el:y,isActive:v,isTemporary:k,width:x,touchless:U(()=>e.touchless),position:I}),O=C(()=>{const B=k.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):x.value;return D.value?B*E.value:B}),{layoutItemStyles:N,layoutItemScrimStyles:L}=xr({id:e.name,order:C(()=>parseInt(e.order,10)),position:I,layoutSize:O,elementSize:x,active:Aa(v),disableTransitions:U(()=>D.value),absolute:C(()=>e.absolute||P.value&&typeof H.value!="string")}),{isStuck:H,stickyStyles:G}=Yz({rootEl:y,isSticky:P,layoutItemStyles:N}),z=Ge(()=>typeof e.scrim=="string"?e.scrim:null),$=C(()=>({...D.value?{opacity:E.value*.2,transition:"none"}:void 0,...L.value}));return wt({VList:{bgColor:"transparent"}}),oe(()=>{const B=s.image||e.image;return A(Ae,null,[w(e.tag,ne({ref:y,onMouseenter:b,onMouseleave:S,class:["v-navigation-drawer",`v-navigation-drawer--${I.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":_.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":k.value,"v-navigation-drawer--persistent":T.value,"v-navigation-drawer--active":v.value,"v-navigation-drawer--sticky":P.value},a.value,l.value,o.value,d.value,c.value,h.value,e.class],style:[u.value,N.value,m.value,G.value,e.style]},p,n),{default:()=>[B&&A("div",{key:"image",class:"v-navigation-drawer__img"},[s.image?w(Be,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},s.image):w(Ji,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),s.prepend&&A("div",{class:"v-navigation-drawer__prepend"},[s.prepend?.()]),A("div",{class:"v-navigation-drawer__content"},[s.default?.()]),s.append&&A("div",{class:"v-navigation-drawer__append"},[s.append?.()])]}),w(Cs,{name:"fade-transition"},{default:()=>[k.value&&(D.value||v.value)&&!!e.scrim&&A("div",ne({class:["v-navigation-drawer__scrim",z.backgroundColorClasses.value],style:[$.value,z.backgroundColorStyles.value],onClick:()=>{T.value||(v.value=!1)}},p),null)]})])}),{isStuck:H}}}),nW=Hn({name:"VNoSsr",setup(e,t){let{slots:n}=t;const i=VT();return()=>i.value&&n.default?.()}}),iW=50,sW=500;function rW(e){let{toggleUpDown:t}=e,n=-1,i=-1;Ft(r);function s(o){r(),a(o),window.addEventListener("pointerup",r),document.addEventListener("blur",r),n=window.setTimeout(()=>{i=window.setInterval(()=>a(o),iW)},sW)}function r(){window.clearTimeout(n),window.clearInterval(i),window.removeEventListener("pointerup",r),document.removeEventListener("blur",r)}function a(o){t(o==="up")}return{holdStart:s,holdStop:r}}const aW=j({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...Qe(ml(),["modelValue","validationValue"])},"VNumberInput"),oW=ie()({name:"VNumberInput",props:{...aW()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=le(),{holdStart:s,holdStop:r}=rW({toggleUpDown:k}),a=fl(e),o=C(()=>a.isDisabled.value||a.isReadonly.value),l=he(e.focused),{decimalSeparator:u}=nt(),c=C(()=>e.decimalSeparator?.[0]||u.value);function d(W){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const ge=X==null?String(W):W.toFixed(X);if(l.value&&re)return Number(ge).toString().replace(".",c.value);if(e.minFractionDigits===null||X!==null&&X<e.minFractionDigits)return ge.replace(".",c.value);let[de,ye]=ge.split(".");return ye=(ye??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[de,ye].filter(Boolean).join(c.value)}const f=Re(e,"modelValue",null,W=>W??null,W=>W==null?W??null:at(Number(W),e.min,e.max)),h=he(null);ht(()=>{l.value&&!o.value&&Number(h.value)===f.value||(f.value==null?h.value=null:isNaN(f.value)||(h.value=d(f.value)))});const g=C({get:()=>h.value,set(W){if(W===null||W===""){f.value=null,h.value=null;return}const X=Number(W.replace(c.value,"."));!isNaN(X)&&X<=e.max&&X>=e.min&&(f.value=X,h.value=W)}}),v=C(()=>o.value?!1:(f.value??0)+e.step<=e.max),m=C(()=>o.value?!1:(f.value??0)-e.step>=e.min),p=C(()=>e.hideInput?"stacked":e.controlVariant),y=U(()=>p.value==="split"?"$plus":"$collapse"),_=U(()=>p.value==="split"?"$minus":"$expand"),b=U(()=>p.value==="split"?"default":"small"),S=U(()=>p.value==="stacked"?"auto":"100%"),x={props:{onClick:E,onPointerup:O,onPointerdown:N,onPointercancel:O}},I={props:{onClick:E,onPointerup:O,onPointerdown:L,onPointercancel:O}};me(()=>e.precision,()=>G()),me(()=>e.minFractionDigits,()=>G()),Wt(()=>{H()});function T(W){if(W==null)return 0;const X=W.toString(),re=X.indexOf(".");return~re?X.length-re:0}function k(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(o.value)return;if(f.value==null){g.value=d(at(0,e.min,e.max));return}let X=Math.max(T(f.value),T(e.step));e.precision!=null&&(X=Math.max(X,e.precision)),W?v.value&&(g.value=d(f.value+e.step,X)):m.value&&(g.value=d(f.value-e.step,X))}function P(W){if(!W.data)return;const X=W.target,{value:re,selectionStart:ge,selectionEnd:de}=X??{},ye=re?re.slice(0,ge)+W.data+re.slice(de):W.data,ee=BV(ye,e.precision,c.value);if(new RegExp(`^-?\\d*${Uc(c.value)}?\\d*$`).test(ye)||(W.preventDefault(),X.value=ee),e.precision!=null){if(ye.split(c.value)[1]?.length>e.precision){W.preventDefault(),X.value=ee;const _e=(ge??0)+W.data.length;X.setSelectionRange(_e,_e)}e.precision===0&&ye.includes(c.value)&&(W.preventDefault(),X.value=ee)}}async function D(W){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(W.key)||W.ctrlKey||["ArrowDown","ArrowUp"].includes(W.key)&&(W.preventDefault(),W.stopPropagation(),H(),await je(),W.key==="ArrowDown"?k(!1):k())}function E(W){W.stopPropagation()}function O(W){W.currentTarget?.releasePointerCapture(W.pointerId),W.preventDefault(),r()}function N(W){W.currentTarget?.setPointerCapture(W.pointerId),W.preventDefault(),W.stopPropagation(),s("up")}function L(W){W.currentTarget?.setPointerCapture(W.pointerId),W.preventDefault(),W.stopPropagation(),s("down")}function H(){if(o.value||!i.value)return;const W=i.value.value,X=Number(W.replace(c.value,"."));W&&!isNaN(X)?g.value=d(at(X,e.min,e.max)):g.value=null}function G(){o.value||(g.value=f.value!==null&&!isNaN(f.value)?d(f.value,e.precision,!1):null)}function z(){if(!o.value){if(f.value===null||isNaN(f.value)){g.value=null;return}g.value=f.value.toString().replace(".",c.value)}}function $(){z()}function B(){H()}return oe(()=>{const{modelValue:W,...X}=es.filterProps(e);function re(){return n.increment?w(Be,{key:"increment-defaults",defaults:{VBtn:{disabled:!v.value,height:S.value,size:b.value,icon:y.value,variant:"text"}}},{default:()=>[n.increment(x)]}):w(We,{"aria-hidden":"true","data-testid":"increment",disabled:!v.value,height:S.value,icon:y.value,key:"increment-btn",onClick:E,onPointerdown:N,onPointerup:O,onPointercancel:O,size:b.value,variant:"text",tabindex:"-1"},null)}function ge(){return n.decrement?w(Be,{key:"decrement-defaults",defaults:{VBtn:{disabled:!m.value,height:S.value,size:b.value,icon:_.value,variant:"text"}}},{default:()=>[n.decrement(I)]}):w(We,{"aria-hidden":"true","data-testid":"decrement",disabled:!m.value,height:S.value,icon:_.value,key:"decrement-btn",onClick:E,onPointerdown:L,onPointerup:O,onPointercancel:O,size:b.value,variant:"text",tabindex:"-1"},null)}function de(){return A("div",{class:"v-number-input__control"},[ge(),w($n,{vertical:p.value!=="stacked"},null),re()])}function ye(){return!e.hideInput&&!e.inset?w($n,{vertical:!0},null):void 0}const ee=p.value==="split"?A("div",{class:"v-number-input__control"},[w($n,{vertical:!0},null),re()]):e.reverse||p.value==="hidden"?void 0:A(Ae,null,[ye(),de()]),_e=n["append-inner"]||ee,ke=p.value==="split"?A("div",{class:"v-number-input__control"},[ge(),w($n,{vertical:!0},null)]):e.reverse&&p.value!=="hidden"?A(Ae,null,[de(),ye()]):void 0,ce=n["prepend-inner"]||ke;return w(es,ne({ref:i},X,{modelValue:g.value,"onUpdate:modelValue":Ee=>g.value=Ee,focused:l.value,"onUpdate:focused":Ee=>l.value=Ee,validationValue:f.value,onBeforeinput:P,onFocus:$,onBlur:B,onKeydown:D,class:["v-number-input",{"v-number-input--default":p.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":p.value==="split","v-number-input--stacked":p.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...n,"append-inner":_e?function(){for(var Ee=arguments.length,R=new Array(Ee),F=0;F<Ee;F++)R[F]=arguments[F];return A(Ae,null,[n["append-inner"]?.(...R),ee])}:void 0,"prepend-inner":ce?function(){for(var Ee=arguments.length,R=new Array(Ee),F=0;F<Ee;F++)R[F]=arguments[F];return A(Ae,null,[ke,n["prepend-inner"]?.(...R)])}:void 0})}),Xt({},i)}}),lW=j({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...It(),...dl(),...In(gl({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),cW=ie()({name:"VOtpInput",props:lW(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const{dimensionStyles:r}=Pt(e),{isFocused:a,focus:o,blur:l}=rs(e),u=Re(e,"modelValue","",P=>P==null?[]:String(P).split(""),P=>P.join("")),{t:c}=nt(),d=C(()=>Number(e.length)),f=C(()=>Array(d.value).fill(0)),h=le(-1),g=le(),v=le([]),m=C(()=>v.value[h.value]);let p=!1;en(()=>e.autofocus,()=>{const P=oa();P.run(()=>{const{intersectionRef:D,isIntersecting:E}=al();ht(()=>{D.value=v.value[0]}),me(E,O=>{O&&(D.value?.focus(),P.stop())})})});function y(){if(k(m.value.value)){m.value.value="";return}if(p)return;const P=u.value.slice(),D=m.value.value;P[h.value]=D;let E=null;h.value>u.value.length?E=u.value.length+1:h.value+1!==d.value&&(E="next"),u.value=P,E&&tr(g.value,E)}function _(){p=!1,y()}function b(P){const D=u.value.slice(),E=h.value;let O=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(P.key)&&(P.preventDefault(),P.key==="ArrowLeft"?O="prev":P.key==="ArrowRight"?O="next":["Backspace","Delete"].includes(P.key)&&(D[h.value]="",u.value=D,h.value>0&&P.key==="Backspace"?O="prev":requestAnimationFrame(()=>{v.value[E]?.select()})),requestAnimationFrame(()=>{O!=null&&tr(g.value,O)}))}function S(P,D){D.preventDefault(),D.stopPropagation();const E=D?.clipboardData?.getData("Text").trim().slice(0,d.value)??"",O=E.length-1===-1?P:E.length-1;k(E)||(u.value=E.split(""),h.value=O)}function x(){u.value=[]}function I(P,D){o(),h.value=D}function T(){l(),h.value=-1}function k(P){return e.type==="number"&&/[^0-9]/g.test(P)}return wt({VField:{color:U(()=>e.color),bgColor:U(()=>e.color),baseColor:U(()=>e.baseColor),disabled:U(()=>e.disabled),error:U(()=>e.error),variant:U(()=>e.variant)}},{scoped:!0}),me(u,P=>{P.length===d.value&&i("finish",P.join(""))},{deep:!0}),me(h,P=>{P<0||je(()=>{v.value[P]?.select()})}),oe(()=>{const[P,D]=Ms(n);return A("div",ne({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},P),[A("div",{ref:g,class:"v-otp-input__content",style:pe([r.value])},[f.value.map((E,O)=>A(Ae,null,[e.divider&&O!==0&&A("span",{class:"v-otp-input__divider"},[e.divider]),w(Ps,{focused:a.value&&e.focusAll||h.value===O,key:O},{...s,loader:void 0,default:()=>A("input",{ref:N=>v.value[O]=N,"aria-label":c(e.label,O+1),autofocus:O===0&&e.autofocus,autocomplete:"one-time-code",class:se(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:O===0?d.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:u.value[O],onInput:y,onFocus:N=>I(N,O),onBlur:T,onKeydown:b,onCompositionstart:()=>p=!0,onCompositionend:_,onPaste:N=>S(O,N)},null)})])),A("input",ne({class:"v-otp-input-input",type:"hidden"},D,{value:u.value.join("")}),null),w(Oi,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>[s.loader?.()??w(cr,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}),s.default?.()])])}),{blur:()=>{v.value?.some(P=>P.blur())},focus:()=>{v.value?.[0].focus()},reset:x,isFocused:a}}});function uW(e){return Math.floor(Math.abs(e))*Math.sign(e)}const dW=j({scale:{type:[Number,String],default:.5},...Ce()},"VParallax"),fW=ie()({name:"VParallax",props:dW(),setup(e,t){let{slots:n}=t;const{intersectionRef:i,isIntersecting:s}=al(),{resizeRef:r,contentRect:a}=ei(),{height:o}=ni(),l=le();ht(()=>{i.value=r.value=l.value?.$el});let u;me(s,h=>{h?(u=Gg(i.value),u=u===document.scrollingElement?document:u,u.addEventListener("scroll",f,{passive:!0}),f()):u.removeEventListener("scroll",f)}),Ht(()=>{u?.removeEventListener("scroll",f)}),me(o,f),me(()=>a.value?.height,f);const c=C(()=>1-at(Number(e.scale)));let d=-1;function f(){!s.value||Qi()||(cancelAnimationFrame(d),d=requestAnimationFrame(()=>{const h=(l.value?.$el).querySelector(".v-img__img");if(!h)return;const g=u instanceof Document?document.documentElement.clientHeight:u.clientHeight,v=u instanceof Document?window.scrollY:u.scrollTop,m=i.value.getBoundingClientRect().top+v,p=a.value.height,y=m+(p-g)/2,_=uW((v-y)*c.value),b=Math.max(1,(c.value*(g-p)+p)/p);h.style.setProperty("transform",`translateY(${_}px) scale(${b})`)}))}return oe(()=>w(Ji,{class:se(["v-parallax",{"v-parallax--active":s.value},e.class]),style:pe(e.style),ref:l,cover:!0,onLoadstart:f,onLoad:f},n)),{}}}),hW=j({...Iu({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),gW=ie()({name:"VRadio",props:hW(),setup(e,t){let{slots:n}=t;return oe(()=>{const i=Is.filterProps(e);return w(Is,ne(i,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),mW=j({height:{type:[Number,String],default:"auto"},...as(),...Qe(dm(),["multiple"]),trueIcon:{type:Pe,default:"$radioOn"},falseIcon:{type:Pe,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),vW=ie()({name:"VRadioGroup",inheritAttrs:!1,props:mW(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const s=yn(),r=C(()=>e.id||`radio-group-${s}`),a=Re(e,"modelValue"),o=le();return oe(()=>{const[l,u]=Ms(n),c=tn.filterProps(e),d=Is.filterProps(e),f=i.label?i.label({label:e.label,props:{for:r.value}}):e.label;return w(tn,ne({ref:o,class:["v-radio-group",e.class],style:e.style},l,c,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,id:r.value}),{...i,default:h=>{let{id:g,messagesId:v,isDisabled:m,isReadonly:p}=h;return A(Ae,null,[f&&w(Oa,{id:g.value},{default:()=>[f]}),w(rT,ne(d,{id:g.value,"aria-describedby":v.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:m.value,readonly:p.value,"aria-labelledby":f?g.value:void 0,multiple:!1},u,{modelValue:a.value,"onUpdate:modelValue":y=>a.value=y}),i)])}})}),Xt({},o)}}),pW=j({...dl(),...as(),...l1(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),yW=ie()({name:"VRangeSlider",props:pW(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const s=le(),r=le(),a=le(),{rtlClasses:o}=Mt();function l(P){if(!s.value||!r.value)return;const D=hh(P,s.value.$el,e.direction),E=hh(P,r.value.$el,e.direction),O=Math.abs(D),N=Math.abs(E);return O<N||O===N&&D<0?s.value.$el:r.value.$el}const u=c1(e),c=Re(e,"modelValue",void 0,P=>P?.length?P.map(D=>u.roundValue(D)):[0,0]),{activeThumbRef:d,hasLabels:f,max:h,min:g,mousePressed:v,onSliderMousedown:m,onSliderTouchstart:p,position:y,trackContainerRef:_,readonly:b}=u1({props:e,steps:u,onSliderStart:()=>{i("start",c.value)},onSliderEnd:P=>{let{value:D}=P;const E=d.value===s.value?.$el?[D,c.value[1]]:[c.value[0],D];!e.strict&&E[0]<E[1]&&(c.value=E),i("end",c.value)},onSliderMove:P=>{let{value:D}=P;const[E,O]=c.value;!e.strict&&E===O&&E!==g.value&&(d.value=D>E?r.value?.$el:s.value?.$el,d.value?.focus()),d.value===s.value?.$el?c.value=[Math.min(D,O),O]:c.value=[E,Math.max(E,D)]},getActiveThumb:l}),{isFocused:S,focus:x,blur:I}=rs(e),T=C(()=>y(c.value[0])),k=C(()=>y(c.value[1]));return oe(()=>{const P=tn.filterProps(e),D=!!(e.label||n.label||n.prepend);return w(tn,ne({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||f.value,"v-slider--focused":S.value,"v-slider--pressed":v.value,"v-slider--disabled":e.disabled},o.value,e.class],style:e.style,ref:a},P,{focused:S.value}),{...n,prepend:D?E=>A(Ae,null,[n.label?.(E)??(e.label?w(Oa,{class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(E)]):void 0,default:E=>{let{id:O,messagesId:N}=E;return A("div",{class:"v-slider__container",onMousedown:b.value?void 0:m,onTouchstartPassive:b.value?void 0:p},[A("input",{id:`${O.value}_start`,name:e.name||O.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:c.value[0]},null),A("input",{id:`${O.value}_stop`,name:e.name||O.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:c.value[1]},null),w(d1,{ref:_,start:T.value,stop:k.value},{"tick-label":n["tick-label"]}),w(gh,{ref:s,"aria-describedby":N.value,focused:S&&d.value===s.value?.$el,modelValue:c.value[0],"onUpdate:modelValue":L=>c.value=[L,c.value[1]],onFocus:L=>{x(),d.value=s.value?.$el,h.value!==g.value&&c.value[0]===c.value[1]&&c.value[1]===g.value&&L.relatedTarget!==r.value?.$el&&(s.value?.$el.blur(),r.value?.$el.focus())},onBlur:()=>{I(),d.value=void 0},min:g.value,max:c.value[1],position:T.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),w(gh,{ref:r,"aria-describedby":N.value,focused:S&&d.value===r.value?.$el,modelValue:c.value[1],"onUpdate:modelValue":L=>c.value=[c.value[0],L],onFocus:L=>{x(),d.value=r.value?.$el,h.value!==g.value&&c.value[0]===c.value[1]&&c.value[0]===h.value&&L.relatedTarget!==s.value?.$el&&(r.value?.$el.blur(),s.value?.$el.focus())},onBlur:()=>{I(),d.value=void 0},min:c.value[0],max:h.value,position:k.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),Xt({focus:()=>s.value?.$el.focus()},a)}}),_W=j({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:Pe,default:"$ratingEmpty"},fullIcon:{type:Pe,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Ce(),...Vt(),...Bi(),...Ne(),...Xe()},"VRating"),bW=ie()({name:"VRating",props:_W(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=nt(),{themeClasses:s}=Ze(e),r=Re(e,"modelValue"),a=C(()=>at(parseFloat(r.value),0,Number(e.length))),o=C(()=>Ln(Number(e.length),1)),l=C(()=>o.value.flatMap(m=>e.halfIncrements?[m-.5,m]:[m])),u=he(-1),c=C(()=>l.value.map(m=>{const p=e.hover&&u.value>-1,y=a.value>=m,_=u.value>=m,S=(p?_:y)?e.fullIcon:e.emptyIcon,x=e.activeColor??e.color,I=y||_?x:e.color;return{isFilled:y,isHovered:_,icon:S,color:I}})),d=C(()=>[0,...l.value].map(m=>{function p(){u.value=m}function y(){u.value=-1}function _(){e.disabled||e.readonly||(r.value=a.value===m&&e.clearable?0:m)}return{onMouseenter:e.hover?p:void 0,onMouseleave:e.hover?y:void 0,onClick:_}})),f=yn(),h=C(()=>e.name??`v-rating-${f}`);function g(m){let{value:p,index:y,showStar:_=!0}=m;const{onMouseenter:b,onMouseleave:S,onClick:x}=d.value[y+1],I=`${h.value}-${String(p).replace(".","-")}`,T={color:c.value[y]?.color,density:e.density,disabled:e.disabled,icon:c.value[y]?.icon,ripple:e.ripple,size:e.size,variant:"plain"};return A(Ae,null,[A("label",{for:I,class:se({"v-rating__item--half":e.halfIncrements&&p%1>0,"v-rating__item--full":e.halfIncrements&&p%1===0}),onMouseenter:b,onMouseleave:S,onClick:x},[A("span",{class:"v-rating__hidden"},[i(e.itemAriaLabel,p,e.length)]),_?n.item?n.item({...c.value[y],props:T,value:p,index:y,rating:a.value}):w(We,ne({"aria-label":i(e.itemAriaLabel,p,e.length)},T),null):void 0]),A("input",{class:"v-rating__hidden",name:h.value,id:I,type:"radio",value:p,checked:a.value===p,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function v(m){return n["item-label"]?n["item-label"](m):m.label?A("span",null,[m.label]):A("span",null,[Kt("")])}return oe(()=>{const m=!!e.itemLabels?.length||n["item-label"];return w(e.tag,{class:se(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},s.value,e.class]),style:pe(e.style)},{default:()=>[w(g,{value:0,index:-1,showStar:!1},null),o.value.map((p,y)=>A("div",{class:"v-rating__wrapper"},[m&&e.itemLabelPosition==="top"?v({value:p,index:y,label:e.itemLabels?.[y]}):void 0,A("div",{class:"v-rating__item"},[e.halfIncrements?A(Ae,null,[w(g,{value:p-.5,index:y*2},null),w(g,{value:p,index:y*2+1},null)]):w(g,{value:p,index:y},null)]),m&&e.itemLabelPosition==="bottom"?v({value:p,index:y,label:e.itemLabels?.[y]}):void 0]))]})}),{}}}),wW={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function xW(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return A("div",{class:se(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[t])}function G_(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>Hu(t))}function Hu(e){let t=[];if(!e)return t;const n=wW[e];if(e!==n){if(e.includes(","))return Q_(e);if(e.includes("@"))return G_(e);n.includes(",")?t=Q_(n):n.includes("@")?t=G_(n):n&&t.push(Hu(n))}return[xW(e,t)]}function Q_(e){return e.replace(/\s/g,"").split(",").map(Hu)}const SW=j({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...It(),...Ot(),...Xe()},"VSkeletonLoader"),TW=ie()({name:"VSkeletonLoader",inheritAttrs:!1,props:SW(),setup(e,t){let{attrs:n,slots:i}=t;const{backgroundColorClasses:s,backgroundColorStyles:r}=Ge(()=>e.color),{dimensionStyles:a}=Pt(e),{elevationClasses:o}=jt(e),{themeClasses:l}=Ze(e),{t:u}=nt(),c=C(()=>Hu(bt(e.type).join(",")));return oe(()=>{const d=!i.default||e.loading,f=e.boilerplate||!d?{}:{ariaLive:"polite",ariaLabel:u(e.loadingText),role:"alert"};return A(Ae,null,[d?A("div",ne({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},l.value,s.value,o.value],style:[r.value,a.value]},f,n),[c.value]):i.default?.()])}),{}}}),AW=ie()({name:"VSlideGroupItem",props:Cr(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=kr(e,gT);return()=>n.default?.({isSelected:i.isSelected.value,select:i.select,toggle:i.toggle,selectedClass:i.selectedClass.value})}});function CW(e){const t=he(e());let n=-1;function i(){clearInterval(n)}function s(){i(),je(()=>t.value=e())}function r(a){const o=a?getComputedStyle(a):{transitionDuration:.2},l=parseFloat(o.transitionDuration)*1e3||200;if(i(),t.value<=0)return;const u=performance.now();n=window.setInterval(()=>{const c=performance.now()-u+l;t.value=Math.max(e()-c,0),t.value<=0&&i()},l)}return Ft(i),{clear:i,time:t,start:r,reset:s}}const oA=j({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ss({location:"bottom"}),...Ra(),...gt(),...ii(),...Xe(),...Qe(hl({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy","stickToTarget"])},"VSnackbar"),Ah=ie()({name:"VSnackbar",props:oA(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"modelValue"),{positionClasses:s}=Ma(e),{scopeId:r}=Ir(),{themeClasses:a}=Ze(e),{colorClasses:o,colorStyles:l,variantClasses:u}=Tr(e),{roundedClasses:c}=xt(e),d=CW(()=>Number(e.timeout)),f=le(),h=le(),g=he(!1),v=he(0),m=le(),p=He(Bo,void 0);en(()=>!!p,()=>{const D=FS();ht(()=>{m.value=D.mainStyles.value})}),me(i,_),me(()=>e.timeout,_),Wt(()=>{i.value&&_()});let y=-1;function _(){d.reset(),window.clearTimeout(y);const D=Number(e.timeout);if(!i.value||D===-1)return;const E=Hg(h.value);d.start(E),y=window.setTimeout(()=>{i.value=!1},D)}function b(){d.reset(),window.clearTimeout(y)}function S(){g.value=!0,b()}function x(){g.value=!1,_()}function I(D){v.value=D.touches[0].clientY}function T(D){Math.abs(v.value-D.changedTouches[0].clientY)>50&&(i.value=!1)}function k(){g.value&&x()}const P=C(()=>e.location.split(" ").reduce((D,E)=>(D[`v-snackbar--${E}`]=!0,D),{}));return oe(()=>{const D=Oi.filterProps(e),E=!!(n.default||n.text||e.text);return w(Oi,ne({ref:f,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},P.value,s.value,e.class],style:[m.value,e.style]},D,{modelValue:i.value,"onUpdate:modelValue":O=>i.value=O,contentProps:ne({class:["v-snackbar__wrapper",a.value,o.value,c.value,u.value],style:[l.value],onPointerenter:S,onPointerleave:x},D.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:I,onTouchend:T,onAfterLeave:k},r),{default:()=>[Os(!1,"v-snackbar"),e.timer&&!g.value&&A("div",{key:"timer",class:"v-snackbar__timer"},[w(Cu,{ref:h,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,modelValue:d.time.value},null)]),E&&A("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.text?.()??e.text,n.default?.()]),n.actions&&w(Be,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[A("div",{class:"v-snackbar__actions"},[n.actions({isActive:i})])]})],activator:n.activator})}),Xt({},f)}}),kW=j({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...Qe(oA(),["modelValue"])},"VSnackbarQueue"),EW=ie()({name:"VSnackbarQueue",props:kW(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:s}=nt(),r=he(!1),a=he(!1),o=he();me(()=>e.modelValue.length,(f,h)=>{!a.value&&f>h&&u()}),me(r,f=>{f&&(a.value=!0)});function l(){e.modelValue.length?u():(o.value=void 0,a.value=!1)}function u(){const[f,...h]=e.modelValue;n("update:modelValue",h),o.value=typeof f=="string"?{text:f}:f,je(()=>{r.value=!0})}function c(){r.value=!1}const d=C(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:s(e.closeText)}));oe(()=>{const f=!!(e.closable||i.actions),{modelValue:h,...g}=Ah.filterProps(e);return A(Ae,null,[a.value&&!!o.value&&(i.default?w(Be,{defaults:{VSnackbar:o.value}},{default:()=>[i.default({item:o.value})]}):w(Ah,ne(g,o.value,{modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,onAfterLeave:l}),{text:i.text?()=>i.text?.({item:o.value}):void 0,actions:f?()=>A(Ae,null,[i.actions?w(Be,{defaults:{VBtn:d.value}},{default:()=>[i.actions({item:o.value,props:{onClick:c}})]}):w(We,ne(d.value,{onClick:c}),null)]):void 0}))])})}}),lA=j({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),cA=j({autoLineWidth:Boolean,...lA()},"VBarline"),J_=ie()({name:"VBarline",props:cA(),setup(e,t){let{slots:n}=t;const i=yn(),s=C(()=>e.id||`barline-${i}`),r=C(()=>Number(e.autoDrawDuration)||500),a=C(()=>!!(e.showLabels||e.labels.length>0||n?.label)),o=C(()=>parseFloat(e.lineWidth)||4),l=C(()=>Math.max(e.modelValue.length*o.value,Number(e.width))),u=C(()=>({minX:0,maxX:l.value,minY:0,maxY:parseInt(e.height,10)})),c=C(()=>e.modelValue.map(m=>Et(m,e.itemValue,m)));function d(m,p){const{minX:y,maxX:_,minY:b,maxY:S}=p,x=m.length;let I=e.max!=null?Number(e.max):Math.max(...m),T=e.min!=null?Number(e.min):Math.min(...m);T>0&&e.min==null&&(T=0),I<0&&e.max==null&&(I=0);const k=_/(x===1?2:x),P=(S-b)/(I-T||1),D=S-Math.abs(T*P);return m.map((E,O)=>{const N=Math.abs(P*E);return{x:y+O*k,y:D-N+ +(E<0)*N,height:N,value:E}})}const f=C(()=>{const m=[],p=d(c.value,u.value),y=p.length;for(let _=0;m.length<y;_++){const b=p[_];let S=e.labels[_];S||(S=typeof b=="object"?b.value:b),m.push({x:b.x,value:String(S)})}return m}),h=C(()=>d(c.value,u.value)),g=C(()=>h.value.length===1?(u.value.maxX-o.value)/2:(Math.abs(h.value[0].x-h.value[1].x)-o.value)/2),v=C(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));oe(()=>{const m=e.gradient.slice().length?e.gradient.slice().reverse():[""];return A("svg",{display:"block"},[A("defs",null,[A("linearGradient",{id:s.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[m.map((p,y)=>A("stop",{offset:y/Math.max(m.length-1,1),"stop-color":p||"currentColor"},null))])]),A("clipPath",{id:`${s.value}-clip`},[h.value.map(p=>A("rect",{x:p.x+g.value,y:p.y,width:o.value,height:p.height,rx:v.value,ry:v.value},[e.autoDraw&&!Qi()&&A(Ae,null,[A("animate",{attributeName:"y",from:p.y+p.height,to:p.y,dur:`${r.value}ms`,fill:"freeze"},null),A("animate",{attributeName:"height",from:"0",to:p.height,dur:`${r.value}ms`,fill:"freeze"},null)])]))]),a.value&&A("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[f.value.map((p,y)=>A("text",{x:p.x+g.value+o.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:y,value:p.value})??p.value]))]),A("g",{"clip-path":`url(#${s.value}-clip)`,fill:`url(#${s.value})`},[A("rect",{x:0,y:0,width:Math.max(e.modelValue.length*o.value,Number(e.width)),height:e.height},null)])])})}});function IW(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const s=e.shift(),r=e[e.length-1];return(n?`M${s.x} ${i-s.x+2} L${s.x} ${s.y}`:`M${s.x} ${s.y}`)+e.map((a,o)=>{const l=e[o+1],u=e[o-1]||s,c=l&&PW(l,a,u);if(!l||c)return`L${a.x} ${a.y}`;const d=Math.min(eb(u,a),eb(l,a)),h=d/2<t?d/2:t,g=tb(u,a,h),v=tb(l,a,h);return`L${g.x} ${g.y}S${a.x} ${a.y} ${v.x} ${v.y}`}).join("")+(n?`L${r.x} ${i-s.x+2} Z`:"")}function $l(e){return parseInt(e,10)}function PW(e,t,n){return $l(e.x+n.x)===$l(2*t.x)&&$l(e.y+n.y)===$l(2*t.y)}function eb(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function tb(e,t,n){const i={x:e.x-t.x,y:e.y-t.y},s=Math.sqrt(i.x*i.x+i.y*i.y),r={x:i.x/s,y:i.y/s};return{x:t.x+r.x*n,y:t.y+r.y*n}}const uA=j({fill:Boolean,...lA()},"VTrendline"),nb=ie()({name:"VTrendline",props:uA(),setup(e,t){let{slots:n}=t;const i=yn(),s=C(()=>e.id||`trendline-${i}`),r=C(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),a=le(0),o=le(null);function l(m,p){const{minX:y,maxX:_,minY:b,maxY:S}=p;m.length===1&&(m=[m[0],m[0]]);const x=m.length,I=e.max!=null?Number(e.max):Math.max(...m),T=e.min!=null?Number(e.min):Math.min(...m),k=(_-y)/(x-1),P=(S-b)/(I-T||1);return m.map((D,E)=>({x:y+E*k,y:S-(D-T)*P,value:D}))}const u=C(()=>!!(e.showLabels||e.labels.length>0||n?.label)),c=C(()=>parseFloat(e.lineWidth)||4),d=C(()=>Number(e.width)),f=C(()=>{const m=Number(e.padding);return{minX:m,maxX:d.value-m,minY:m,maxY:parseInt(e.height,10)-m}}),h=C(()=>e.modelValue.map(m=>Et(m,e.itemValue,m))),g=C(()=>{const m=[],p=l(h.value,f.value),y=p.length;for(let _=0;m.length<y;_++){const b=p[_];let S=e.labels[_];S||(S=typeof b=="object"?b.value:b),m.push({x:b.x,value:String(S)})}return m});me(()=>e.modelValue,async()=>{if(await je(),!e.autoDraw||!o.value||Qi())return;const m=o.value,p=m.getTotalLength();e.fill?(m.style.transformOrigin="bottom center",m.style.transition="none",m.style.transform="scaleY(0)",m.getBoundingClientRect(),m.style.transition=`transform ${r.value}ms ${e.autoDrawEasing}`,m.style.transform="scaleY(1)"):(m.style.strokeDasharray=`${p}`,m.style.strokeDashoffset=`${p}`,m.getBoundingClientRect(),m.style.transition=`stroke-dashoffset ${r.value}ms ${e.autoDrawEasing}`,m.style.strokeDashoffset="0"),a.value=p},{immediate:!0});function v(m){const p=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return IW(l(h.value,f.value),p,m,parseInt(e.height,10))}oe(()=>{const m=e.gradient.slice().length?e.gradient.slice().reverse():[""];return A("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[A("defs",null,[A("linearGradient",{id:s.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[m.map((p,y)=>A("stop",{offset:y/Math.max(m.length-1,1),"stop-color":p||"currentColor"},null))])]),u.value&&A("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[g.value.map((p,y)=>A("text",{x:p.x+c.value/2+c.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:y,value:p.value})??p.value]))]),A("path",{ref:o,d:v(e.fill),fill:e.fill?`url(#${s.value})`:"none",stroke:e.fill?"none":`url(#${s.value})`},null),e.fill&&A("path",{d:v(!1),fill:"none",stroke:e.color??e.gradient?.[0]},null)])})}}),RW=j({type:{type:String,default:"trend"},...cA(),...uA()},"VSparkline"),MW=ie()({name:"VSparkline",props:RW(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:s}=Qt(()=>e.color),r=C(()=>!!(e.showLabels||e.labels.length>0||n?.label)),a=C(()=>{let o=parseInt(e.height,10);return r.value&&(o+=parseInt(e.labelSize,10)*1.5),o});oe(()=>{const o=e.type==="trend"?nb:J_,l=e.type==="trend"?nb.filterProps(e):J_.filterProps(e);return w(o,ne({key:e.type,class:i.value,style:s.value,viewBox:`0 0 ${e.width} ${parseInt(a.value,10)}`},l),n)})}}),OW=j({...Ce(),...$T({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),DW=ie()({name:"VSpeedDial",props:OW(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"modelValue"),s=le(),r=C(()=>{const[o,l="center"]=e.location?.split(" ")??[];return`${o} ${l}`}),a=C(()=>({[`v-speed-dial__content--${r.value.replace(" ","-")}`]:!0}));return oe(()=>{const o=Sa.filterProps(e);return w(Sa,ne(o,{modelValue:i.value,"onUpdate:modelValue":l=>i.value=l,class:e.class,style:e.style,contentClass:["v-speed-dial__content",a.value,e.contentClass],location:r.value,ref:s,transition:"fade-transition"}),{...n,default:l=>w(Be,{defaults:{VBtn:{size:"small"}}},{default:()=>[w(vn,{appear:!0,group:!0,transition:e.transition},{default:()=>[n.default?.(l)]})]})})}),{}}}),$m=Symbol.for("vuetify:v-stepper"),dA=j({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),fA=ie()({name:"VStepperActions",props:dA(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:s}=nt();function r(){n("click:prev")}function a(){n("click:next")}return oe(()=>{const o={onClick:r},l={onClick:a};return A("div",{class:"v-stepper-actions"},[w(Be,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:s(e.prevText),variant:"text"}}},{default:()=>[i.prev?.({props:o})??w(We,o,null)]}),w(Be,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:s(e.nextText),variant:"tonal"}}},{default:()=>[i.next?.({props:l})??w(We,l,null)]})])}),{}}}),hA=is("v-stepper-header"),NW=j({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:Pe,default:"$complete"},editable:Boolean,editIcon:{type:Pe,default:"$edit"},error:Boolean,errorIcon:{type:Pe,default:"$error"},icon:Pe,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),BW=j({...NW(),...Cr()},"VStepperItem"),gA=ie()({name:"VStepperItem",directives:{vRipple:pn},props:BW(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=kr(e,$m,!0),s=C(()=>i?.value.value??e.value),r=C(()=>e.rules.every(f=>f()===!0)),a=C(()=>!e.disabled&&e.editable),o=C(()=>!e.disabled&&e.editable),l=C(()=>e.error||!r.value),u=C(()=>e.complete||e.rules.length>0&&r.value),c=C(()=>l.value?e.errorIcon:u.value?e.completeIcon:i.isSelected.value&&e.editable?e.editIcon:e.icon),d=C(()=>({canEdit:o.value,hasError:l.value,hasCompleted:u.value,title:e.title,subtitle:e.subtitle,step:s.value,value:e.value}));return oe(()=>{const f=(!i||i.isSelected.value||u.value||o.value)&&!l.value&&!e.disabled,h=!!(e.title!=null||n.title),g=!!(e.subtitle!=null||n.subtitle);function v(){i?.toggle()}return _t(A("button",{class:se(["v-stepper-item",{"v-stepper-item--complete":u.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":l.value},i?.selectedClass.value]),disabled:!e.editable,type:"button",onClick:v},[a.value&&Os(!0,"v-stepper-item"),w(Wn,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:f?e.color:void 0,size:24},{default:()=>[n.icon?.(d.value)??(c.value?w(Ye,{icon:c.value},null):s.value)]}),A("div",{class:"v-stepper-item__content"},[h&&A("div",{key:"title",class:"v-stepper-item__title"},[n.title?.(d.value)??e.title]),g&&A("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[n.subtitle?.(d.value)??e.subtitle]),n.default?.(d.value)])]),[[pn,e.editable&&e.ripple,null]])}),{}}}),FW=j({...Qe(Mu(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),mA=ie()({name:"VStepperWindow",props:FW(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=He($m,null),s=Re(e,"modelValue"),r=C({get(){return s.value!=null||!i?s.value:i.items.value.find(a=>i.selected.value.includes(a.id))?.value},set(a){s.value=a}});return oe(()=>{const a=ur.filterProps(e);return w(ur,ne({_as:"VStepperWindow"},a,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),VW=j({...Ou()},"VStepperWindowItem"),vA=ie()({name:"VStepperWindowItem",props:VW(),setup(e,t){let{slots:n}=t;return oe(()=>{const i=dr.filterProps(e);return w(dr,ne({_as:"VStepperWindowItem"},i,{class:["v-stepper-window-item",e.class],style:e.style}),n)}),{}}}),LW=j({altLabels:Boolean,bgColor:String,completeIcon:Pe,editIcon:Pe,editable:Boolean,errorIcon:Pe,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...br()},"Stepper"),UW=j({...LW(),...Ar({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...Cm(),...In(dA(),["prevText","nextText"])},"VStepper"),$W=ie()({name:"VStepper",props:UW(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:i,next:s,prev:r,selected:a}=Ds(e,$m),{displayClasses:o,mobile:l}=ni(e),{completeIcon:u,editIcon:c,errorIcon:d,color:f,editable:h,prevText:g,nextText:v}=Ca(e),m=C(()=>e.items.map((_,b)=>{const S=Et(_,e.itemTitle,_),x=Et(_,e.itemValue,b+1);return{title:S,value:x,raw:_}})),p=C(()=>i.value.findIndex(_=>a.value.includes(_.id))),y=C(()=>e.disabled?e.disabled:p.value===0?"prev":p.value===i.value.length-1?"next":!1);return wt({VStepperItem:{editable:h,errorIcon:d,completeIcon:u,editIcon:c,prevText:g,nextText:v},VStepperActions:{color:f,disabled:y,prevText:g,nextText:v}}),oe(()=>{const _=Ho.filterProps(e),b=!!(n.header||e.items.length),S=e.items.length>0,x=!e.hideActions&&!!(S||n.actions);return w(Ho,ne(_,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":l.value},o.value,e.class],style:e.style}),{default:()=>[b&&w(hA,{key:"stepper-header"},{default:()=>[m.value.map((I,T)=>{let{raw:k,...P}=I;return A(Ae,null,[!!T&&w($n,null,null),w(gA,P,{default:n[`header-item.${P.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),S&&w(mA,{key:"stepper-window"},{default:()=>[m.value.map(I=>w(vA,{value:I.value},{default:()=>n[`item.${I.value}`]?.(I)??n.item?.(I)}))]}),n.default?.({prev:r,next:s}),x&&(n.actions?.({next:s,prev:r})??w(fA,{key:"stepper-actions","onClick:prev":r,"onClick:next":s},n))]})}),{prev:r,next:s}}}),zW=j({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...as(),...Iu()},"VSwitch"),WW=ie()({name:"VSwitch",inheritAttrs:!1,props:zW(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const s=Re(e,"indeterminate"),r=Re(e,"modelValue"),{loaderClasses:a}=ol(e),{isFocused:o,focus:l,blur:u}=rs(e),c=le(),d=le(),f=qe&&window.matchMedia("(forced-colors: active)").matches,h=U(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),g=yn(),v=U(()=>e.id||`switch-${g}`);function m(){s.value&&(s.value=!1)}function p(y){y.stopPropagation(),y.preventDefault(),c.value?.input?.click()}return oe(()=>{const[y,_]=Ms(n),b=tn.filterProps(e),S=Is.filterProps(e);return w(tn,ne({ref:d,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":s.value},a.value,e.class]},y,b,{modelValue:r.value,"onUpdate:modelValue":x=>r.value=x,id:v.value,focused:o.value,style:e.style}),{...i,default:x=>{let{id:I,messagesId:T,isDisabled:k,isReadonly:P,isValid:D}=x;const E={model:r,isValid:D};return w(Is,ne({ref:c},S,{modelValue:r.value,"onUpdate:modelValue":[O=>r.value=O,m],id:I.value,"aria-describedby":T.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:k.value,readonly:P.value,onFocus:l,onBlur:u},_),{...i,default:O=>{let{backgroundColorClasses:N,backgroundColorStyles:L}=O;return A("div",{class:se(["v-switch__track",f?void 0:N.value]),style:pe(L.value),onClick:p},[i["track-true"]&&A("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](E)]),i["track-false"]&&A("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](E)])])},input:O=>{let{inputNode:N,icon:L,backgroundColorClasses:H,backgroundColorStyles:G}=O;return A(Ae,null,[N,A("div",{class:se(["v-switch__thumb",{"v-switch__thumb--filled":L||e.loading},e.inset||f?void 0:H.value]),style:pe(e.inset?void 0:G.value)},[i.thumb?w(Be,{defaults:{VIcon:{icon:L,size:"x-small"}}},{default:()=>[i.thumb({...E,icon:L})]}):w(am,null,{default:()=>[e.loading?w(ll,{name:"v-switch",active:!0,color:D.value===!1?void 0:h.value},{default:z=>i.loader?i.loader(z):w(cr,{active:z.isActive,color:z.color,indeterminate:!0,size:"16",width:"2"},null)}):L&&w(Ye,{key:String(L),icon:L,size:"x-small"},null)]})])])}})}})}),Xt({},d)}}),HW=j({color:String,height:[Number,String],window:Boolean,...Ce(),...Ot(),...wr(),...gt(),...Ne(),...Xe()},"VSystemBar"),jW=ie()({name:"VSystemBar",props:HW(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ze(e),{backgroundColorClasses:s,backgroundColorStyles:r}=Ge(()=>e.color),{elevationClasses:a}=jt(e),{roundedClasses:o}=xt(e),{ssrBootStyles:l}=Sr(),u=C(()=>e.height??(e.window?32:24)),{layoutItemStyles:c}=xr({id:e.name,order:C(()=>parseInt(e.order,10)),position:he("top"),layoutSize:u,elementSize:u,active:C(()=>!0),absolute:U(()=>e.absolute)});return oe(()=>w(e.tag,{class:se(["v-system-bar",{"v-system-bar--window":e.window},i.value,s.value,a.value,o.value,e.class]),style:pe([r.value,c.value,l.value,e.style])},n)),{}}}),zm=Symbol.for("vuetify:v-tabs"),pA=j({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Qe(Eu({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),yA=ie()({name:"VTab",props:pA(),setup(e,t){let{slots:n,attrs:i}=t;const{textColorClasses:s,textColorStyles:r}=Qt(()=>e.sliderColor),a=le(),o=le(),l=C(()=>e.direction==="horizontal"),u=C(()=>a.value?.group?.isSelected.value??!1);function c(d){let{value:f}=d;if(f){const h=a.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),g=o.value;if(!h||!g)return;const v=getComputedStyle(h).color,m=h.getBoundingClientRect(),p=g.getBoundingClientRect(),y=l.value?"x":"y",_=l.value?"X":"Y",b=l.value?"right":"bottom",S=l.value?"width":"height",x=m[y],I=p[y],T=x>I?m[b]-p[b]:m[y]-p[y],k=Math.sign(T)>0?l.value?"right":"bottom":Math.sign(T)<0?l.value?"left":"top":"center",D=(Math.abs(T)+(Math.sign(T)<0?m[S]:p[S]))/Math.max(m[S],p[S])||0,E=m[S]/p[S]||0,O=1.5;Wi(g,{backgroundColor:[v,"currentcolor"],transform:[`translate${_}(${T}px) scale${_}(${E})`,`translate${_}(${T/O}px) scale${_}(${(D-1)/O+1})`,"none"],transformOrigin:Array(3).fill(k)},{duration:225,easing:Mo})}}return oe(()=>{const d=We.filterProps(e);return w(We,ne({symbol:zm,ref:a,class:["v-tab",e.class],style:e.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1},d,i,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":c}),{...n,default:()=>A(Ae,null,[n.default?.()??e.text,!e.hideSlider&&A("div",{ref:o,class:se(["v-tab__slider",s.value]),style:pe(r.value)},null)])})}),Xt({},a)}}),XW=j({...Qe(Mu(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),_A=ie()({name:"VTabsWindow",props:XW(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=He(zm,null),s=Re(e,"modelValue"),r=C({get(){return s.value!=null||!i?s.value:i.items.value.find(a=>i.selected.value.includes(a.id))?.value},set(a){s.value=a}});return oe(()=>{const a=ur.filterProps(e);return w(ur,ne({_as:"VTabsWindow"},a,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),YW=j({...Ou()},"VTabsWindowItem"),bA=ie()({name:"VTabsWindowItem",props:YW(),setup(e,t){let{slots:n}=t;return oe(()=>{const i=dr.filterProps(e);return w(dr,ne({_as:"VTabsWindowItem"},i,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function KW(e){return e?e.map(t=>Po(t)?t:{text:t,value:t}):[]}const qW=j({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...In(pA(),["spaced"]),...fm({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Vt(),...Ne()},"VTabs"),ZW=ie()({name:"VTabs",props:qW(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const s=Re(e,"modelValue"),r=C(()=>KW(e.items)),{densityClasses:a}=_n(e),{backgroundColorClasses:o,backgroundColorStyles:l}=Ge(()=>e.bgColor),{scopeId:u}=Ir();return wt({VTab:{color:U(()=>e.color),direction:U(()=>e.direction),stacked:U(()=>e.stacked),fixed:U(()=>e.fixedTabs),sliderColor:U(()=>e.sliderColor),hideSlider:U(()=>e.hideSlider)}}),oe(()=>{const c=$o.filterProps(e),d=!!(i.window||e.items.length>0);return A(Ae,null,[w($o,ne(c,{modelValue:s.value,"onUpdate:modelValue":f=>s.value=f,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},a.value,o.value,e.class],style:[{"--v-tabs-height":we(e.height)},l.value,e.style],role:"tablist",symbol:zm},u,n),{default:()=>[i.default?.()??r.value.map(f=>i.tab?.({item:f})??w(yA,ne(f,{key:f.text,value:f.value,spaced:e.spaced}),{default:i[`tab.${f.value}`]?()=>i[`tab.${f.value}`]?.({item:f}):void 0}))]}),d&&w(_A,ne({modelValue:s.value,"onUpdate:modelValue":f=>s.value=f,key:"tabs-window"},u),{default:()=>[r.value.map(f=>i.item?.({item:f})??w(bA,{value:f.value},{default:()=>i[`item.${f.value}`]?.({item:f})})),i.window?.()]})])}),{}}}),GW=j({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...zT(),...as(),...gl()},"VTextarea"),QW=ie()({name:"VTextarea",directives:{vIntersect:di},inheritAttrs:!1,props:GW(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const r=Re(e,"modelValue"),{isFocused:a,focus:o,blur:l}=rs(e),{onIntersect:u}=HT(e),c=C(()=>typeof e.counterValue=="function"?e.counterValue(r.value):(r.value||"").toString().length),d=C(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),f=le(),h=le(),g=he(""),v=le(),m=WT(e),p=C(()=>e.persistentPlaceholder||a.value||e.active);function y(){m.isSuppressing.value&&m.update(),v.value!==document.activeElement&&v.value?.focus(),a.value||o()}function _(E){y(),i("click:control",E)}function b(E){i("mousedown:control",E)}function S(E){E.stopPropagation(),y(),je(()=>{r.value="",bu(e["onClick:clear"],E)})}function x(E){const O=E.target;if(r.value=O.value,e.modelModifiers?.trim){const N=[O.selectionStart,O.selectionEnd];je(()=>{O.selectionStart=N[0],O.selectionEnd=N[1]})}}const I=le(),T=le(Number(e.rows)),k=C(()=>["plain","underlined"].includes(e.variant));ht(()=>{e.autoGrow||(T.value=Number(e.rows))});function P(){e.autoGrow&&je(()=>{if(!I.value||!h.value)return;const E=getComputedStyle(I.value),O=getComputedStyle(h.value.$el),N=parseFloat(E.getPropertyValue("--v-field-padding-top"))+parseFloat(E.getPropertyValue("--v-input-padding-top"))+parseFloat(E.getPropertyValue("--v-field-padding-bottom")),L=I.value.scrollHeight,H=parseFloat(E.lineHeight),G=Math.max(parseFloat(e.rows)*H+N,parseFloat(O.getPropertyValue("--v-input-control-height"))),z=parseFloat(e.maxRows)*H+N||1/0,$=at(L??0,G,z);T.value=Math.floor(($-N)/H),g.value=we($)})}Wt(P),me(r,P),me(()=>e.rows,P),me(()=>e.maxRows,P),me(()=>e.density,P),me(T,E=>{i("update:rows",E)});let D;return me(I,E=>{E?(D=new ResizeObserver(P),D.observe(I.value)):D?.disconnect()}),Ht(()=>{D?.disconnect()}),oe(()=>{const E=!!(s.counter||e.counter||e.counterValue),O=!!(E||s.details),[N,L]=Ms(n),{modelValue:H,...G}=tn.filterProps(e),z={...Ps.filterProps(e),"onClick:clear":S};return w(tn,ne({ref:f,modelValue:r.value,"onUpdate:modelValue":$=>r.value=$,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":k.value},e.class],style:e.style},N,G,{centerAffix:T.value===1&&!k.value,focused:a.value}),{...s,default:$=>{let{id:B,isDisabled:W,isDirty:X,isReadonly:re,isValid:ge,hasDetails:de}=$;return w(Ps,ne({ref:h,style:{"--v-textarea-control-height":g.value},onClick:_,onMousedown:b,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},z,{id:B.value,active:p.value||X.value,centerAffix:T.value===1&&!k.value,dirty:X.value||e.dirty,disabled:W.value,focused:a.value,details:de.value,error:ge.value===!1}),{...s,default:ye=>{let{props:{class:ee,..._e}}=ye;return A(Ae,null,[e.prefix&&A("span",{class:"v-text-field__prefix"},[e.prefix]),_t(A("textarea",ne({ref:v,class:ee,value:r.value,onInput:x,autofocus:e.autofocus,readonly:re.value,disabled:W.value,placeholder:e.placeholder,rows:e.rows,name:m.fieldName.value,autocomplete:m.fieldAutocomplete.value,onFocus:y,onBlur:l},_e,L),null),[[di,{handler:u},null,{once:!0}]]),e.autoGrow&&_t(A("textarea",{class:se([ee,"v-textarea__sizer"]),id:`${_e.id}-sizer`,"onUpdate:modelValue":ke=>r.value=ke,ref:I,readonly:!0,"aria-hidden":"true"},null),[[X2,r.value]]),e.suffix&&A("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:O?$=>A(Ae,null,[s.details?.($),E&&A(Ae,null,[A("span",null,null),w(Pu,{active:e.persistentCounter||a.value,value:c.value,max:d.value,disabled:e.disabled},s.counter)])]):void 0})}),Xt({},f,h,v)}}),JW=j({withBackground:Boolean,...Ce(),...Xe(),...Ne()},"VThemeProvider"),eH=ie()({name:"VThemeProvider",props:JW(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ze(e);return()=>e.withBackground?w(e.tag,{class:se(["v-theme-provider",i.value,e.class]),style:pe(e.style)},{default:()=>[n.default?.()]}):n.default?.()}}),tH=j({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:Pe,iconColor:String,lineColor:String,...Ce(),...gt(),...Bi(),...Ot()},"VTimelineDivider"),nH=ie()({name:"VTimelineDivider",props:tH(),setup(e,t){let{slots:n}=t;const{sizeClasses:i,sizeStyles:s}=Pa(e,"v-timeline-divider__dot"),{backgroundColorStyles:r,backgroundColorClasses:a}=Ge(()=>e.dotColor),{roundedClasses:o}=xt(e,"v-timeline-divider__dot"),{elevationClasses:l}=jt(e),{backgroundColorClasses:u,backgroundColorStyles:c}=Ge(()=>e.lineColor);return oe(()=>A("div",{class:se(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:pe(e.style)},[A("div",{class:se(["v-timeline-divider__before",u.value]),style:pe(c.value)},null),!e.hideDot&&A("div",{key:"dot",class:se(["v-timeline-divider__dot",l.value,o.value,i.value]),style:pe(s.value)},[A("div",{class:se(["v-timeline-divider__inner-dot",a.value,o.value]),style:pe(r.value)},[n.default?w(Be,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):w(Ye,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),A("div",{class:se(["v-timeline-divider__after",u.value]),style:pe(c.value)},null)])),{}}}),wA=j({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:Pe,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...Ce(),...It(),...Ot(),...gt(),...Bi(),...Ne()},"VTimelineItem"),iH=ie()({name:"VTimelineItem",props:wA(),setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Pt(e),s=he(0),r=le();return me(r,a=>{a&&(s.value=a.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)},{flush:"post"}),oe(()=>A("div",{class:se(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:pe([{"--v-timeline-dot-size":we(s.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${we(e.lineInset)})`:we(0)},e.style])},[A("div",{class:"v-timeline-item__body",style:pe(i.value)},[n.default?.()]),w(nH,{ref:r,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&A("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&n.opposite?.()])])),{}}}),sH=j({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...In(wA({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...Ce(),...Vt(),...Ne(),...Xe()},"VTimeline"),rH=ie()({name:"VTimeline",props:sH(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ze(e),{densityClasses:s}=_n(e),{rtlClasses:r}=Mt();wt({VTimelineDivider:{lineColor:U(()=>e.lineColor)},VTimelineItem:{density:U(()=>e.density),dotColor:U(()=>e.dotColor),fillDot:U(()=>e.fillDot),hideOpposite:U(()=>e.hideOpposite),iconColor:U(()=>e.iconColor),lineColor:U(()=>e.lineColor),lineInset:U(()=>e.lineInset),size:U(()=>e.size)}});const a=C(()=>{const l=e.side?e.side:e.density!=="default"?"end":null;return l&&`v-timeline--side-${l}`}),o=C(()=>{const l=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return l;case"start":return l[0];case"end":return l[1];default:return null}});return oe(()=>w(e.tag,{class:se(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,o.value,{"v-timeline--inset-line":!!e.lineInset},i.value,s.value,a.value,r.value,e.class]),style:pe([{"--v-timeline-line-thickness":we(e.lineThickness)},e.style])},n)),{}}});function Ks(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")}const aH=j({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),Ch=ie()({name:"VTimePickerClock",props:aH(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const i=le(null),s=le(null),r=le(void 0),a=le(!1),o=le(null),l=le(null),u=aS($=>n("change",$),750),{textColorClasses:c,textColorStyles:d}=Qt(()=>e.color),{backgroundColorClasses:f,backgroundColorStyles:h}=Ge(()=>e.color),g=C(()=>e.max-e.min+1),v=C(()=>e.double?g.value/2:g.value),m=C(()=>360/v.value),p=C(()=>m.value*Math.PI/180),y=C(()=>e.modelValue==null?e.min:e.modelValue),_=C(()=>.62),b=C(()=>{const $=[];for(let B=e.min;B<=e.max;B=B+e.step)$.push(B);return $});me(()=>e.modelValue,$=>{r.value=$});function S($){r.value!==$&&(r.value=$),n("input",$)}function x($){return!e.allowedValues||e.allowedValues($)}function I($){if(!e.scrollable||e.disabled)return;$.preventDefault();const B=Math.sign(-$.deltaY||1);let W=y.value;do W=W+B,W=(W-e.min+g.value)%g.value+e.min;while(!x(W)&&W!==y.value);W!==e.displayedValue&&S(W),u(W)}function T($){return e.double&&$-e.min>=v.value}function k($){return T($)?_.value:1}function P($){const B=e.rotate*Math.PI/180;return{x:Math.sin(($-e.min)*p.value+B)*k($),y:-Math.cos(($-e.min)*p.value+B)*k($)}}function D($,B){const W=(Math.round($/m.value)+(B?v.value:0))%g.value+e.min;return $<360-m.value/2?W:B?e.max-v.value+1:e.min}function E($){const{x:B,y:W}=P($);return{left:`${Math.round(50+B*50)}%`,top:`${Math.round(50+W*50)}%`}}function O($,B){const W=B.x-$.x,X=B.y-$.y;return Math.sqrt(W*W+X*X)}function N($,B){const W=2*Math.atan2(B.y-$.y-O($,B),B.x-$.x);return Math.abs(W*180/Math.PI)}function L($){o.value===null&&(o.value=$),l.value=$,S($)}function H($){if($.preventDefault(),!a.value&&$.type!=="click"||!i.value)return;const{width:B,top:W,left:X}=i.value?.getBoundingClientRect(),{width:re}=s.value?.getBoundingClientRect()??{width:0},{clientX:ge,clientY:de}="touches"in $?$.touches[0]:$,ye={x:B/2,y:-B/2},ee={x:ge-X,y:W-de},_e=Math.round(N(ye,ee)-e.rotate+360)%360,ke=e.double&&O(ye,ee)<(re+re*_.value)/4,ce=Math.ceil(15/m.value);let Ee;for(let R=0;R<ce;R++)if(Ee=D(_e+R*m.value,ke),x(Ee)||(Ee=D(_e-R*m.value,ke),x(Ee)))return L(Ee)}function G($){e.disabled||($.preventDefault(),window.addEventListener("mousemove",H),window.addEventListener("touchmove",H),window.addEventListener("mouseup",z),window.addEventListener("touchend",z),o.value=null,l.value=null,a.value=!0,H($))}function z($){$.stopPropagation(),window.removeEventListener("mousemove",H),window.removeEventListener("touchmove",H),window.removeEventListener("mouseup",z),window.removeEventListener("touchend",z),a.value=!1,l.value!==null&&x(l.value)&&n("change",l.value)}oe(()=>A("div",{class:se([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:G,onTouchstart:G,onWheel:I,ref:i},[A("div",{class:"v-time-picker-clock__inner",ref:s},[A("div",{class:se([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":T(e.modelValue)},c.value]),style:pe([{transform:`rotate(${e.rotate+m.value*(y.value-e.min)}deg) scaleY(${k(y.value)})`},d.value])},null),b.value.map($=>{const B=$===y.value;return A("div",{class:se([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":B,"v-time-picker-clock__item--disabled":e.disabled||!x($)},B&&f.value]),style:pe([E($),B&&h.value])},[A("span",null,[e.format($)])])})])]))}}),oH=j({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),kh=ie()({name:"VTimePickerControls",props:oH(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:s}=nt();return oe(()=>{let r=e.hour;return e.ampm&&(r=r?(r-1)%12+1:12),A("div",{class:"v-time-picker-controls"},[A("div",{class:se({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[w(We,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:se({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":Ks(`${r}`),onClick:()=>n("update:viewMode","hour")},null),A("span",{class:se(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[Kt(":")]),w(We,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:se({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":Ks(e.minute),onClick:()=>n("update:viewMode","minute")},null),e.useSeconds&&A("span",{class:se(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[Kt(":")]),e.useSeconds&&w(We,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>n("update:viewMode","second"),class:se({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":Ks(e.second)},null),e.ampm&&A("div",{class:"v-time-picker-controls__ampm"},[w(We,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:se({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:s("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),w(We,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:se({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:s("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),lH=Ln(24),xA=Ln(12),cH=xA.map(e=>e+12);Ln(60);const uH=j({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:e=>["am","pm"].includes(e)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...Qe(Du({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),dH=ie()({name:"VTimePicker",props:uH(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:s}=nt(),r=le(null),a=le(null),o=le(null),l=le(null),u=le(null),c=le(null),d=Re(e,"period","am"),f=Re(e,"viewMode","hour"),h=le(null),g=le(null),v=C(()=>{let E;if(e.allowedHours instanceof Array?E=L=>e.allowedHours.includes(L):E=e.allowedHours,!e.min&&!e.max)return E;const O=e.min?Number(e.min.split(":")[0]):0,N=e.max?Number(e.max.split(":")[0]):23;return L=>L>=Number(O)&&L<=Number(N)&&(!E||E(L))}),m=C(()=>{let E;const O=!v.value||r.value===null||v.value(r.value);if(e.allowedMinutes instanceof Array?E=B=>e.allowedMinutes.includes(B):E=e.allowedMinutes,!e.min&&!e.max)return O?E:()=>!1;const[N,L]=e.min?e.min.split(":").map(Number):[0,0],[H,G]=e.max?e.max.split(":").map(Number):[23,59],z=N*60+Number(L),$=H*60+Number(G);return B=>{const W=60*r.value+B;return W>=z&&W<=$&&O&&(!E||E(B))}}),p=C(()=>{let E;const N=(!v.value||r.value===null||v.value(r.value))&&(!m.value||a.value===null||m.value(a.value));if(e.allowedSeconds instanceof Array?E=re=>e.allowedSeconds.includes(re):E=e.allowedSeconds,!e.min&&!e.max)return N?E:()=>!1;const[L,H,G]=e.min?e.min.split(":").map(Number):[0,0,0],[z,$,B]=e.max?e.max.split(":").map(Number):[23,59,59],W=L*3600+H*60+Number(G||0),X=z*3600+$*60+Number(B||0);return re=>{const ge=3600*r.value+60*a.value+re;return ge>=W&&ge<=X&&N&&(!E||E(re))}}),y=C(()=>e.format==="ampm");me(()=>e.period,E=>k(E)),me(()=>e.modelValue,E=>I(E)),Wt(()=>{I(e.modelValue)});function _(){return r.value!=null&&a.value!=null&&(!e.useSeconds||o.value!=null)?`${Ks(r.value)}:${Ks(a.value)}`+(e.useSeconds?`:${Ks(o.value)}`:""):null}function b(){const E=_();E!==null&&n("update:modelValue",E)}function S(E){return E?(E-1)%12+1:12}function x(E,O){return E%12+(O==="pm"?12:0)}function I(E){if(E==null||E==="")r.value=null,a.value=null,o.value=null;else if(E instanceof Date)r.value=E.getHours(),a.value=E.getMinutes(),o.value=E.getSeconds();else{const[O,,N,,L,H]=E.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);r.value=H?x(parseInt(O,10),H):parseInt(O,10),a.value=parseInt(N,10),o.value=parseInt(L||0,10)}d.value=r.value==null||r.value<12?"am":"pm"}function T(E,O){const N=v.value;if(!N)return O;const L=y.value?O<12?xA:cH:lH;return((L.find(G=>N((G+O)%L.length+L[0]))||0)+O)%L.length+L[0]}function k(E){if(d.value=E,r.value!=null){const O=r.value+(d.value==="am"?-12:12);r.value=T("hour",O)}return n("update:period",E),b(),!0}function P(E){f.value==="hour"?r.value=y.value?x(E,d.value):E:f.value==="minute"?a.value=E:o.value=E}function D(E){switch(f.value||"hour"){case"hour":n("update:hour",E);break;case"minute":n("update:minute",E);break;case"second":n("update:second",E);break}const O=r.value!==null&&a.value!==null&&(e.useSeconds?o.value!==null:!0);f.value==="hour"?f.value="minute":e.useSeconds&&f.value==="minute"&&(f.value="second"),!(r.value===l.value&&a.value===u.value&&(!e.useSeconds||o.value===c.value)||_()===null)&&(l.value=r.value,u.value=a.value,e.useSeconds&&(c.value=o.value),O&&b())}oe(()=>{const E=Ta.filterProps(e),O=kh.filterProps(e),N=Ch.filterProps(Qe(e,["format","modelValue","min","max"]));return w(Ta,ne(E,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>i.title?.()??A("div",{class:"v-time-picker__title"},[s(e.title)]),header:()=>w(kh,ne(O,{ampm:y.value,hour:r.value,minute:a.value,period:d.value,second:o.value,viewMode:f.value,"onUpdate:period":L=>k(L),"onUpdate:viewMode":L=>f.value=L,ref:h}),null),default:()=>w(Ch,ne(N,{allowedValues:f.value==="hour"?v.value:f.value==="minute"?m.value:p.value,double:f.value==="hour"&&!y.value,format:f.value==="hour"?y.value?S:L=>L:L=>Ks(L,2),max:f.value==="hour"?y.value&&d.value==="am"?11:23:59,min:f.value==="hour"&&y.value&&d.value==="pm"?12:0,size:20,step:f.value==="hour"?1:5,modelValue:f.value==="hour"?r.value:f.value==="minute"?a.value:o.value,onChange:D,onInput:P,ref:g}),null),actions:i.actions})})}}),fH=j({...Ce(),...ii({variant:"text"})},"VToolbarItems"),hH=ie()({name:"VToolbarItems",props:fH(),setup(e,t){let{slots:n}=t;return wt({VBtn:{color:U(()=>e.color),height:"inherit",variant:U(()=>e.variant)}}),oe(()=>A("div",{class:se(["v-toolbar-items",e.class]),style:pe(e.style)},[n.default?.()])),{}}}),gH=j({id:String,interactive:Boolean,text:String,...Qe(hl({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",stickToTarget:!0,transition:null}),["absolute","persistent"])},"VTooltip"),SA=ie()({name:"VTooltip",props:gH(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Re(e,"modelValue"),{scopeId:s}=Ir(),r=yn(),a=U(()=>e.id||`v-tooltip-${r}`),o=le(),l=C(()=>e.location.split(" ").length>1?e.location:e.location+" center"),u=C(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),c=U(()=>e.transition!=null?e.transition:i.value?"scale-transition":"fade-transition"),d=C(()=>ne({"aria-describedby":a.value},e.activatorProps));return oe(()=>{const f=Oi.filterProps(e);return w(Oi,ne({ref:o,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:a.value},f,{modelValue:i.value,"onUpdate:modelValue":h=>i.value=h,transition:c.value,absolute:!0,location:l.value,origin:u.value,persistent:!0,role:"tooltip",activatorProps:d.value,_disableGlobalStack:!0},s),{activator:n.activator,default:function(){for(var h=arguments.length,g=new Array(h),v=0;v<h;v++)g[v]=arguments[v];return n.default?.(...g)??e.text}})}),Xt({},o)}}),mH=j({...Qe(TT({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),Eh=ie()({name:"VTreeviewGroup",props:mH(),setup(e,t){let{slots:n}=t;const i=le(),s=C(()=>i.value?.isOpen?e.collapseIcon:e.expandIcon),r=C(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:s.value}}));return oe(()=>{const a=Wo.filterProps(e);return w(Wo,ne(a,{ref:i,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?o=>A(Ae,null,[w(Be,{defaults:r.value},{default:()=>[n.activator?.(o)]})]):void 0})}),{}}}),TA=Symbol.for("vuetify:v-treeview"),AA=j({loading:Boolean,hideActions:Boolean,hasCustomPrepend:Boolean,indentLines:Array,toggleIcon:Pe,...kT({slim:!0})},"VTreeviewItem"),Ih=ie()({name:"VTreeviewItem",props:AA(),emits:{toggleExpand:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const s=He(TA,{visibleIds:le()}).visibleIds,r=le(),a=C(()=>r.value?.root.activatable.value&&r.value?.isGroupActivator),o=C(()=>r.value?.link.isClickable.value||e.value!=null&&!!r.value?.list),l=C(()=>!e.disabled&&e.link!==!1&&(e.link||o.value||a.value)),u=C(()=>s.value&&!s.value.has(Oe(r.value?.id)));function c(f){l.value&&a.value&&r.value?.activate(!r.value?.isActivated,f)}function d(f){f.preventDefault(),f.stopPropagation(),i("toggleExpand",f)}return oe(()=>{const f=fi.filterProps(e),h=n.prepend||e.toggleIcon||e.indentLines||e.prependIcon||e.prependAvatar;return w(fi,ne({ref:r},f,{active:r.value?.isActivated||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":a.value,"v-treeview-item--filtered":u.value},e.class],ripple:!1,onClick:c}),{...n,prepend:h?g=>A(Ae,null,[e.indentLines&&e.indentLines.length>0?A("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(v=>A("div",{class:se(`v-treeview-indent-line v-treeview-indent-line--${v}`)},null))]):"",!e.hideActions&&w(vm,{start:!0},{default:()=>[e.toggleIcon?A(Ae,null,[n.toggle?w(Be,{key:"prepend-defaults",defaults:{VBtn:{density:"compact",icon:e.toggleIcon,variant:"text",loading:e.loading},VProgressCircular:{indeterminate:"disable-shrink",size:20,width:2}}},{default:()=>[n.toggle({...g,loading:e.loading,props:{onClick:d}})]}):w(We,{key:"prepend-toggle",density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:d},{loader:()=>w(cr,{indeterminate:"disable-shrink",size:"20",width:"2"},null)})]):A("div",{class:"v-treeview-item__level"},null)]}),e.hasCustomPrepend?w(Be,{key:"prepend-defaults",defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{start:!0}}},{default:()=>[n.prepend?.(g)]}):A(Ae,null,[n.prepend?.(g),e.prependAvatar&&w(Wn,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&w(Ye,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]):void 0})}),Xt({},r)}}),CA=j({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:Pe,default:"$checkboxIndeterminate"},falseIcon:Pe,trueIcon:Pe,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...In(AA(),["hideActions"]),...Vt()},"VTreeviewChildren"),qc=ie()({name:"VTreeviewChildren",props:CA(),setup(e,t){let{slots:n}=t;const i=qt(new Set),s=le([]),r=C(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function a(l){try{if(!e.items?.length||!e.loadChildren)return;l?.children?.length===0&&(i.add(l.value),await e.loadChildren(l.raw))}finally{i.delete(l.value)}}function o(l,u){e.selectable&&l(u)}return()=>n.default?.()??e.items?.map((l,u,c)=>{const{children:d,props:f}=l,h=i.has(l.value),g=!!c.at(u+1)?.children,v=e.path?.length??0,m=c.length-1===u,p={index:u,depth:v,isFirst:u===0,isLast:m,path:[...e.path,u],hideAction:e.hideActions},y=vL({depth:v,isLast:m,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),_={toggle:n.toggle?x=>n.toggle?.({...x,...p,item:l.raw,internalItem:l,loading:h}):void 0,prepend:x=>A(Ae,null,[e.selectable&&(!d||d&&!["leaf","single-leaf"].includes(e.selectStrategy))&&w(vm,{start:!0},{default:()=>[w(Mi,{key:l.value,modelValue:x.isSelected,disabled:e.disabled,loading:h,color:e.selectedColor,density:e.density,indeterminate:x.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":I=>o(x.select,I),onClick:I=>I.stopPropagation(),onKeydown:I=>{["Enter","Space"].includes(I.key)&&(I.stopPropagation(),o(x.select,x.isSelected))}},null)]}),n.prepend?.({...x,...p,item:l.raw,internalItem:l})]),append:n.append?x=>n.append?.({...x,...p,item:l.raw,internalItem:l}):void 0,title:n.title?x=>n.title?.({...x,item:l.raw,internalItem:l}):void 0,subtitle:n.subtitle?x=>n.subtitle?.({...x,item:l.raw,internalItem:l}):void 0},b=Eh.filterProps(f),S=qc.filterProps({...e,...p});return d?w(Eh,ne(b,{value:e.returnObject?l.raw:b?.value,rawId:b?.value}),{activator:x=>{let{props:I}=x;const T={...f,...I,value:f?.value,onToggleExpand:[()=>a(l),I.onClick],onClick:r.value?[()=>a(l),I.onClick]:()=>o(s.value[u]?.select,!s.value[u]?.isSelected)};return Fl(n.header,{props:T,item:l.raw,internalItem:l,loading:h},()=>w(Ih,ne({ref:k=>s.value[u]=k},T,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,indentLines:y.node,value:e.returnObject?l.raw:f.value,loading:h}),_))},default:()=>w(qc,ne(S,{items:d,indentLinesVariant:e.indentLinesVariant,parentIndentLines:y.children,isLastGroup:g,returnObject:e.returnObject}),n)}):Fl(n.item,{props:f,item:l.raw,internalItem:l},()=>l.type==="divider"?Fl(n.divider,{props:l.raw},()=>w($n,l.props,null)):l.type==="subheader"?Fl(n.subheader,{props:l.raw},()=>w(Na,l.props,null)):w(Ih,ne(f,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,indentLines:y.leaf,value:e.returnObject?Oe(l.raw):f.value}),_))})}});function kA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)t.push(n),n.children&&kA(n.children,t);return t}const vH=j({openAll:Boolean,indentLines:[Boolean,String],search:String,...Ba({filterKeys:["title"]}),...Qe(CA(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...Qe(OT({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),pH=ie()({name:"VTreeview",props:vH(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n,emit:i}=t;const{items:s}=MT(e),r=U(()=>e.activeColor),a=U(()=>e.baseColor),o=U(()=>e.color),l=Re(e,"activated"),u=Re(e,"selected"),c=C({get:()=>e.modelValue??u.value,set(_){u.value=_,i("update:modelValue",_)}}),d=le(),f=C(()=>e.openAll?y(s.value):e.opened),h=C(()=>kA(s.value)),g=U(()=>e.search),{filteredItems:v}=Fa(e,h,g),m=C(()=>{if(!g.value)return null;const _=d.value?.getPath;return _?new Set(v.value.flatMap(b=>{const S=e.returnObject?b.raw:b.props.value;return[..._(S),...p(S)].map(Oe)})):null});function p(_){const b=[],S=(d.value?.children.get(_)??[]).slice();for(;S.length;){const x=S.shift();x&&(b.push(x),S.push(...(d.value?.children.get(x)??[]).slice()))}return b}function y(_){let b=[];for(const S of _)S.children&&(b.push(e.returnObject?Oe(S.raw):S.value),S.children&&(b=b.concat(y(S.children))));return b}return dt(TA,{visibleIds:m}),wt({VTreeviewGroup:{activeColor:r,baseColor:a,color:o,collapseIcon:U(()=>e.collapseIcon),expandIcon:U(()=>e.expandIcon)},VTreeviewItem:{activeClass:U(()=>e.activeClass),activeColor:r,baseColor:a,color:o,density:U(()=>e.density),disabled:U(()=>e.disabled),lines:U(()=>e.lines),variant:U(()=>e.variant)}}),oe(()=>{const _=xa.filterProps(e),b=qc.filterProps(e),S=typeof e.indentLines=="boolean"?"default":e.indentLines;return w(xa,ne({ref:d},_,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:f.value,activated:l.value,"onUpdate:activated":x=>l.value=x,selected:c.value,"onUpdate:selected":x=>c.value=x}),{default:()=>[w(qc,ne(b,{density:e.density,returnObject:e.returnObject,items:s.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:S}),n)]})}),{}}}),yH=ie()({name:"VValidation",props:uT(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=dT(e,"validation");return()=>n.default?.(i)}}),_H=Object.freeze(Object.defineProperty({__proto__:null,VAlert:IU,VAlertTitle:iT,VApp:O6,VAppBar:eU,VAppBarNavIcon:SU,VAppBarTitle:TU,VAutocomplete:K$,VAvatar:Wn,VBadge:Z$,VBanner:J$,VBannerActions:qT,VBannerText:ZT,VBottomNavigation:t8,VBottomSheet:i8,VBreadcrumbs:o8,VBreadcrumbsDivider:QT,VBreadcrumbsItem:JT,VBtn:We,VBtnGroup:nh,VBtnToggle:aU,VCard:h8,VCardActions:e1,VCardItem:i1,VCardSubtitle:t1,VCardText:s1,VCardTitle:n1,VCarousel:x8,VCarouselItem:T8,VCheckbox:UU,VCheckboxBtn:Mi,VChip:Da,VChipGroup:jU,VClassIcon:im,VCode:A8,VCol:G5,VColorPicker:h5,VCombobox:m5,VComponentIcon:Jf,VConfirmEdit:p5,VContainer:Y5,VCounter:Pu,VDataIterator:k5,VDataTable:$5,VDataTableFooter:jo,VDataTableHeaders:fr,VDataTableRow:Bm,VDataTableRows:hr,VDataTableServer:j5,VDataTableVirtual:W5,VDatePicker:cz,VDatePickerControls:yh,VDatePickerHeader:_h,VDatePickerMonth:bh,VDatePickerMonths:wh,VDatePickerYears:xh,VDefaultsProvider:Be,VDialog:uh,VDialogBottomTransition:F6,VDialogTopTransition:V6,VDialogTransition:Tu,VDivider:$n,VEmptyState:dz,VExpandTransition:Au,VExpandXTransition:lm,VExpansionPanel:fz,VExpansionPanelText:Sh,VExpansionPanelTitle:Th,VExpansionPanels:mz,VFab:pz,VFabTransition:B6,VFadeTransition:Fo,VField:Ps,VFieldLabel:eo,VFileInput:Sz,VFooter:Az,VForm:kz,VHover:Iz,VIcon:Ye,VImg:Ji,VInfiniteScroll:Rz,VInput:tn,VItem:Dz,VItemGroup:Oz,VKbd:Bz,VLabel:Oa,VLayout:Vz,VLayoutItem:Uz,VLazy:zz,VLigatureIcon:y6,VList:xa,VListGroup:Wo,VListImg:d$,VListItem:fi,VListItemAction:vm,VListItemMedia:g$,VListItemSubtitle:AT,VListItemTitle:CT,VListSubheader:Na,VLocaleProvider:Hz,VMain:Xz,VMenu:Sa,VMessages:lT,VNavigationDrawer:tW,VNoSsr:nW,VNumberInput:oW,VOtpInput:cW,VOverlay:Oi,VPagination:vh,VParallax:fW,VProgressCircular:cr,VProgressLinear:Cu,VRadio:gW,VRadioGroup:vW,VRangeSlider:yW,VRating:bW,VResponsive:eh,VRow:sz,VScaleTransition:am,VScrollXReverseTransition:U6,VScrollXTransition:L6,VScrollYReverseTransition:z6,VScrollYTransition:$6,VSelect:Tm,VSelectionControl:Is,VSelectionControlGroup:rT,VSheet:Ho,VSkeletonLoader:TW,VSlideGroup:$o,VSlideGroupItem:AW,VSlideXReverseTransition:H6,VSlideXTransition:W6,VSlideYReverseTransition:j6,VSlideYTransition:om,VSlider:mh,VSnackbar:Ah,VSnackbarQueue:EW,VSpacer:Z1,VSparkline:MW,VSpeedDial:DW,VStepper:$W,VStepperActions:fA,VStepperHeader:hA,VStepperItem:gA,VStepperWindow:mA,VStepperWindowItem:vA,VSvgIcon:nm,VSwitch:WW,VSystemBar:jW,VTab:yA,VTable:gr,VTabs:ZW,VTabsWindow:_A,VTabsWindowItem:bA,VTextField:es,VTextarea:QW,VThemeProvider:eH,VTimePicker:dH,VTimePickerClock:Ch,VTimePickerControls:kh,VTimeline:rH,VTimelineItem:iH,VToolbar:th,VToolbarItems:hH,VToolbarTitle:rm,VTooltip:SA,VTreeview:pH,VTreeviewGroup:Eh,VTreeviewItem:Ih,VValidation:yH,VVirtualScroll:Ru,VWindow:ur,VWindowItem:dr},Symbol.toStringTag,{value:"Module"}));function bH(e,t){const n=t.modifiers||{},i=t.value,{once:s,immediate:r,...a}=n,o=!Object.keys(a).length,{handler:l,options:u}=typeof i=="object"?i:{handler:i,options:{attributes:a?.attr??o,characterData:a?.char??o,childList:a?.child??o,subtree:a?.sub??o}},c=new MutationObserver(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],f=arguments.length>1?arguments[1]:void 0;l?.(d,f),s&&EA(e,t)});r&&l?.([],c),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:c},c.observe(e,u)}function EA(e,t){e._mutate?.[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const wH={mounted:bH,unmounted:EA};function xH(e,t){const n=t.value,i={passive:!t.modifiers?.active};window.addEventListener("resize",n,i),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:i},t.modifiers?.quiet||n()}function SH(e,t){if(!e._onResize?.[t.instance.$.uid])return;const{handler:n,options:i}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,i),delete e._onResize[t.instance.$.uid]}const TH={mounted:xH,unmounted:SH};function IA(e,t){const{self:n=!1}=t.modifiers??{},i=t.value,s=typeof i=="object"&&i.options||{passive:!0},r=typeof i=="function"||"handleEvent"in i?i:i.handler,a=n?e:t.arg?document.querySelector(t.arg):window;a&&(a.addEventListener("scroll",r,s),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:r,options:s,target:n?void 0:a})}function PA(e,t){if(!e._onScroll?.[t.instance.$.uid])return;const{handler:n,options:i,target:s=e}=e._onScroll[t.instance.$.uid];s.removeEventListener("scroll",n,i),delete e._onScroll[t.instance.$.uid]}function AH(e,t){t.value!==t.oldValue&&(PA(e,t),IA(e,t))}const CH={mounted:IA,unmounted:PA,updated:AH};function kH(e,t){const n=typeof e=="string"?rn(e):e,i=EH(n,t);return{mounted:i,updated:i,unmounted(s){k0(null,s)}}}function EH(e,t){return function(n,i,s){const r=typeof t=="function"?t(i):t,a=i.value?.text??i.value??r?.text,o=Po(i.value)?i.value:{},l=()=>a??n.textContent,u=(s.ctx===i.instance.$?IH(s,i.instance.$)?.provides:s.ctx?.provides)??i.instance.$.provides,c=ns(e,ne(r,o),l);c.appContext=Object.assign(Object.create(null),i.instance.$.appContext,{provides:u}),k0(c,n)}}function IH(e,t){const n=new Set,i=r=>{for(const a of r){if(!a)continue;if(a===e||a.el&&e.el&&a.el===e.el)return!0;n.add(a);let o;if(a.suspense?o=i([a.ssContent]):Array.isArray(a.children)?o=i(a.children):a.component?.vnode&&(o=i([a.component?.subTree])),o)return o;n.delete(a)}return!1};if(!i([t.subTree]))return t;const s=Array.from(n).reverse();for(const r of s)if(r.component)return r.component;return t}const PH=kH(SA,e=>({activator:"parent",location:e.arg?.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value})),RH=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:ch,Intersect:di,Mutate:wH,Resize:TH,Ripple:pn,Scroll:CH,Tooltip:PH,Touch:Kc},Symbol.toStringTag,{value:"Module"})),MH=LS({components:_H,directives:RH,theme:{defaultTheme:"dark",themes:{dark:{colors:{background:"#0b141b",surface:"#121a21",primary:"#00BBFF"}}}}});Z2(CV).use(MH).mount("#app");
